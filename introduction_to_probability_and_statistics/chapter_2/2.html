<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-Hans" xml:lang="zh-Hans"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction to Probability and Statistics for Engineers and Scientists（中文版） - 2&nbsp; 描述统计</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapter_3/3.html" rel="next">
<link href="../chapter_1/1.html" rel="prev">
<link href="../favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "没有结果",
    "search-matching-documents-text": "匹配的文档",
    "search-copy-link-title": "复制搜索链接",
    "search-hide-matches-text": "隐藏其它匹配结果",
    "search-more-match-text": "更多匹配结果",
    "search-more-matches-text": "更多匹配结果",
    "search-clear-button-title": "清除",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "取消",
    "search-submit-button-title": "提交",
    "search-label": "搜索"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="Introduction to Probability and Statistics for Engineers and Scientists（中文版） - 2&nbsp; 描述统计">
<meta property="og:description" content="">
<meta property="og:site_name" content="Introduction to Probability and Statistics for Engineers and Scientists（中文版）">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../favicon.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Introduction to Probability and Statistics for Engineers and Scientists（中文版）</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="搜索"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="切换导航" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://wangwei1237.github.io/"> <i class="bi bi-house-fill" role="img">
</i> 
<span class="menu-text">博客</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-bookshelf" role="img">
</i> 
 <span class="menu-text">书籍</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-">    
        <li>
    <a class="dropdown-item" href="https://zh.d2l.ai/">
 <span class="dropdown-text">动手学深度学习</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://learnprompting.org/zh-Hans/docs/intro">
 <span class="dropdown-text">Learn Prompting</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://pan.baidu.com/s/1dciwgbhO-lfKyRo8lOqW9Q?pwd=cm9q">
 <span class="dropdown-text">Stabel Diffusion 提示词手册</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://wangwei1237.github.io/aboutme/"> <i class="bi bi-person-badge-fill" role="img">
</i> 
<span class="menu-text">关于</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <a href="https://github.com/wangwei1237/introduction_to_probability_and_statistics" title="源代码" class="quarto-navigation-tool px-1" aria-label="源代码"><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="切换侧边栏导航" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapter_2/2.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">描述统计</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="切换侧边栏导航" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">欢迎阅读</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../preface_17.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">译者序</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">序言</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_1/1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">统计学简介</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_2/2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">描述统计</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_3/3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">概率论基础</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_4/4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">随机变量和期望</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_5/5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Special random variables</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_6/6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Distributions of sampling statistics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_7/7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Parameter estimation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_8/8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Hypothesis testing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_9/9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_10/10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Analysis of variance</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_11/11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Goodness of fit tests and categorical data analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_12/12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Nonparametric hypothesis tests</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_13/13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Quality control</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_14/14.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Life testing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_15/15.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Simulation, bootstrap statistical methods, and permutation tests</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_16/16.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Machine learning and big data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">测试脚本</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">附录</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="切換部分">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">APPENDIX OF TABLES</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">目录</h2>
   
  <ul>
  <li><a href="#sec-2_1" id="toc-sec-2_1" class="nav-link active" data-scroll-target="#sec-2_1"><span class="header-section-number">2.1</span> 引言</a></li>
  <li><a href="#sec-2_2" id="toc-sec-2_2" class="nav-link" data-scroll-target="#sec-2_2"><span class="header-section-number">2.2</span> 描述数据集</a>
  <ul class="collapse">
  <li><a href="#sec-2_2_1" id="toc-sec-2_2_1" class="nav-link" data-scroll-target="#sec-2_2_1"><span class="header-section-number">2.2.1</span> 频率表和图</a></li>
  <li><a href="#sec-2_2_2" id="toc-sec-2_2_2" class="nav-link" data-scroll-target="#sec-2_2_2"><span class="header-section-number">2.2.2</span> 相对频率表和图</a></li>
  <li><a href="#sec-2_2_3" id="toc-sec-2_2_3" class="nav-link" data-scroll-target="#sec-2_2_3"><span class="header-section-number">2.2.3</span> 分组数据，直方图，肩形图和茎叶图</a></li>
  </ul></li>
  <li><a href="#sec-2_3" id="toc-sec-2_3" class="nav-link" data-scroll-target="#sec-2_3"><span class="header-section-number">2.3</span> 对数据集进行汇总</a>
  <ul class="collapse">
  <li><a href="#sec-2_3_1" id="toc-sec-2_3_1" class="nav-link" data-scroll-target="#sec-2_3_1"><span class="header-section-number">2.3.1</span> 样本均值，样本中位数和样本众数</a></li>
  <li><a href="#sec-2_3_2" id="toc-sec-2_3_2" class="nav-link" data-scroll-target="#sec-2_3_2"><span class="header-section-number">2.3.2</span> 样本方差和样本标准差</a></li>
  <li><a href="#sec-2_3_3" id="toc-sec-2_3_3" class="nav-link" data-scroll-target="#sec-2_3_3"><span class="header-section-number">2.3.3</span> 样本百分位数和箱线图</a></li>
  </ul></li>
  <li><a href="#sec-2_4" id="toc-sec-2_4" class="nav-link" data-scroll-target="#sec-2_4"><span class="header-section-number">2.4</span> 切比雪夫不等式</a>
  <ul class="collapse">
  <li><a href="#切比雪夫不等式" id="toc-切比雪夫不等式" class="nav-link" data-scroll-target="#切比雪夫不等式"><span class="header-section-number">2.4.1</span> 切比雪夫不等式</a></li>
  <li><a href="#单边切比雪夫不等式" id="toc-单边切比雪夫不等式" class="nav-link" data-scroll-target="#单边切比雪夫不等式"><span class="header-section-number">2.4.2</span> 单边切比雪夫不等式</a></li>
  </ul></li>
  <li><a href="#sec-2_5" id="toc-sec-2_5" class="nav-link" data-scroll-target="#sec-2_5"><span class="header-section-number">2.5</span> 正态分布数据集</a>
  <ul class="collapse">
  <li><a href="#经验法则" id="toc-经验法则" class="nav-link" data-scroll-target="#经验法则"><span class="header-section-number">2.5.1</span> 经验法则</a></li>
  </ul></li>
  <li><a href="#sec-2_6" id="toc-sec-2_6" class="nav-link" data-scroll-target="#sec-2_6"><span class="header-section-number">2.6</span> 成对数据集和样本相关系数</a></li>
  <li><a href="#sec-2_7" id="toc-sec-2_7" class="nav-link" data-scroll-target="#sec-2_7"><span class="header-section-number">2.7</span> 洛伦兹曲线和基尼系数</a></li>
  <li><a href="#sec-2_8" id="toc-sec-2_8" class="nav-link" data-scroll-target="#sec-2_8"><span class="header-section-number">2.8</span> R</a></li>
  <li><a href="#习题" id="toc-习题" class="nav-link" data-scroll-target="#习题">习题</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/wangwei1237/introduction_to_probability_and_statistics/edit/main/chapter_2/2.qmd" class="toc-action"><i class="bi bi-github"></i>编辑该页面</a></li><li><a href="https://github.com/wangwei1237/introduction_to_probability_and_statistics/issues/new" class="toc-action"><i class="bi empty"></i>报告问题</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-2" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">描述统计</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-2_1" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="sec-2_1"><span class="header-section-number">2.1</span> 引言</h2>
<p>本章将介绍 <strong>描述统计</strong> 的相关内容，在介绍 <strong>描述统计</strong> 的过程中，我们将学习如何描述和总结数据。</p>
<p><a href="#sec-2_2" class="quarto-xref"><span>章节 2.2</span></a> 会讨论如何描述数据集。如果一个数据集中的数据差异相对较小，<a href="#sec-2_2_1" class="quarto-xref"><span>章节 2.2.1</span></a> 和 <a href="#sec-2_2_2" class="quarto-xref"><span>章节 2.2.2</span></a> 介绍了如何使用 <strong>频率表</strong>（<em>frequency tables</em>）来描述这样的数据集，<a href="#sec-2_2_3" class="quarto-xref"><span>章节 2.2.3</span></a> 则介绍如何将数据集划分到不同的分组。</p>
<p><a href="#sec-2_3" class="quarto-xref"><span>章节 2.3</span></a> 讨论了如何使用统计指标来总结数据集，统计指标往往是由数据集确定的量化数值。<a href="#sec-2_3_1" class="quarto-xref"><span>章节 2.3.1</span></a> 介绍了用于描述数据集中心（<em>center</em>）的三个统计指标：样本均值（<em>sample mean</em>）、样本中位数（<em>sample median</em>）和样本众数（<em>sample mode</em>）。<a href="#sec-2_3_2" class="quarto-xref"><span>章节 2.3.2</span></a> 会介绍样本方差（<em>sample variance</em>）及样本标准差（<em>sample standard deviation</em>）。样本均值、样本中位数、样本众数、样本方差和标准差这些统计数据用于描述数据集中数值的分布。<a href="#sec-2_3_3" class="quarto-xref"><span>章节 2.3.3</span></a> 会介绍样本的百分位数（<em>sample percentiles</em>），样本百分位数这个统计指标可以告诉我们数据集中哪个值大于所有数据的 95%。</p>
<p><a href="#sec-2_4" class="quarto-xref"><span>章节 2.4</span></a> 节介绍了数据样本集中的切比雪夫不等式（<em>Chebyshev’s inequality</em>），切比雪夫不等式给出了与样本均值相差超过 <span class="math inline">\(k\)</span> 倍样本标准差的数据比例的上限。虽然切比雪夫不等式适用于所有数据集，但在某些情况下（例如 <a href="#sec-2_5" class="quarto-xref"><span>章节 2.5</span></a> 中讨论的正态分布数据集），我们可以获得更精准的数据比例。</p>
<p>在 <a href="#sec-2_5" class="quarto-xref"><span>章节 2.5</span></a> 中，我们注意到，当数据分布符合钟形（<em>bell-shaped</em>）时，我们认为该数据集是近似正态的，此时，位于样本均值 <span class="math inline">\(k\)</span> 个样本标准差内的数据比例可以根据所谓的经验法则（<em>empirical rule</em>）给出更精确的估计。</p>
<p><a href="#sec-2_6" class="quarto-xref"><span>章节 2.6</span></a> 中关注的是成对数据（<em>paired data</em>），并介绍了如何使用散点图（<em>scatter diagram</em>）来描述成对数据以及样本相关系数（<em>sample correlation coefficient</em>）。样本相关系数是一个统计量，该值表示成对数据中第一个值与第二个值之间相关联的程度。</p>
<p><a href="#sec-2_7" class="quarto-xref"><span>章节 2.7</span></a> 介绍了国民收入分配，洛伦兹曲线（<em>Lorenz curve</em>）（ L(p)）和基尼系数（<em>Gini index</em>）。洛伦兹曲线给出了收入较低的百分之 <span class="math inline">\(p\)</span> 的居民收入占总收入的比例，基尼系数则是用于衡量收入分配不平等程度的指标。</p>
<p><a href="#sec-2_8" class="quarto-xref"><span>章节 2.8</span></a> 介绍了如何使用 R 来分析数据集。</p>
</section>
<section id="sec-2_2" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sec-2_2"><span class="header-section-number">2.2</span> 描述数据集</h2>
<p>应当用数据清晰、简洁的显示研究结果，以便研究者可以迅速把握数据的关键特征。多年来，人们发现，对于展示数据而言，表格和图是特别有用的方式。图表常常可以揭示数据的重要特征，如数据的范围、集中程度和对称性。本节将介绍一些常见的数据图表展示方式。</p>
<section id="sec-2_2_1" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="sec-2_2_1"><span class="header-section-number">2.2.1</span> 频率表和图</h3>
<p>如果一个数据集中的数据差异较小，我们便可以以频率表（<em>frequency table</em>）的形式来方便的展现该数据集。例如，<a href="#tbl-StartingYearlySalaries" class="quarto-xref">表格&nbsp;<span>2.1</span></a> 就是一个数据集的频率表，该数据集由 42 名最近毕业的电子工程专业的大学生的起始年薪（以千美元为单位，四舍五入）构成。<a href="#tbl-StartingYearlySalaries" class="quarto-xref">表格&nbsp;<span>2.1</span></a> 告诉我们，最低起薪为 57000 美元，并且有四名毕业生的起薪为 57000 美元；最高起薪为 70000 美元，并且有一名学生的起薪为 70000 美元；最为普遍的起薪为 62000 美元，并且有 10 名学生拿到了 62000 美元的起薪。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>ss <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">57</span>, <span class="dv">58</span>, <span class="dv">59</span>, <span class="dv">60</span>, <span class="dv">61</span>, <span class="dv">62</span>, <span class="dv">63</span>, <span class="dv">64</span>, <span class="dv">66</span>, <span class="dv">67</span>, <span class="dv">70</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"Starting Salary"</span> <span class="ot">=</span> ss, <span class="st">"Frequency"</span> <span class="ot">=</span> f)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align =</span> <span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-StartingYearlySalaries" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-StartingYearlySalaries-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.1: 起薪分布
</figcaption>
<div aria-describedby="tbl-StartingYearlySalaries-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Starting.Salary</th>
<th style="text-align: left;">Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">57</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">58</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">59</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">60</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">61</td>
<td style="text-align: left;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">62</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">63</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">64</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">66</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">67</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">70</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>可以用线图（<em>line graph</em>）来直观地显示频率表中的数据。如 <a href="#fig-StartingYearlySalaries1" class="quarto-xref">图&nbsp;<span>2.1</span></a>，在线图中，水平坐标轴用于绘制不同的数据值，而垂直直线的高度用于表示对应数据值出现的频率。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)  </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(  </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">salary =</span> <span class="fu">c</span>(<span class="dv">57</span>, <span class="dv">58</span>, <span class="dv">59</span>, <span class="dv">60</span>, <span class="dv">61</span>, <span class="dv">62</span>, <span class="dv">63</span>, <span class="dv">64</span>, <span class="dv">66</span>, <span class="dv">67</span>, <span class="dv">70</span>),  </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">value_end =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>),  </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">value_start =</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">11</span>) </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>)  </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 将类别转换为因子，以确保正确的顺序  </span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>salary <span class="ot">&lt;-</span> <span class="fu">factor</span>(df<span class="sc">$</span>salary, <span class="at">levels =</span> df<span class="sc">$</span>salary, <span class="at">ordered =</span> <span class="cn">TRUE</span>)  </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> salary, <span class="at">y =</span> value_start, <span class="at">yend =</span> value_end, <span class="at">color =</span> salary)) <span class="sc">+</span>  </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span>                    <span class="co"># 绘制水平线表示每个“条形”  </span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> value_end), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span>  <span class="co"># 在每个“条形”的末端添加点  </span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Starting Salary"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span>  </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">1</span>)) <span class="sc">+</span>  </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)           <span class="co"># 调整图例位置</span></span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-StartingYearlySalaries1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-StartingYearlySalaries1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-StartingYearlySalaries1-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-StartingYearlySalaries1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.1: 起薪线图
</figcaption>
</figure>
</div>
</div>
</div>
<p>当为 <a href="#fig-StartingYearlySalaries1" class="quarto-xref">图&nbsp;<span>2.1</span></a> 中的线条增加厚度时，<a href="#fig-StartingYearlySalaries1" class="quarto-xref">图&nbsp;<span>2.1</span></a> 就变成了 <a href="#fig-StartingYearlySalaries2" class="quarto-xref">图&nbsp;<span>2.2</span></a> 所示的条形图（<em>bar graph</em>）。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)  </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(  </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">salary =</span> <span class="fu">c</span>(<span class="dv">57</span>, <span class="dv">58</span>, <span class="dv">59</span>, <span class="dv">60</span>, <span class="dv">61</span>, <span class="dv">62</span>, <span class="dv">63</span>, <span class="dv">64</span>, <span class="dv">66</span>, <span class="dv">67</span>, <span class="dv">70</span>),  </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>)  </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 将类别转换为因子，以确保正确的顺序  </span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>salary <span class="ot">&lt;-</span> <span class="fu">factor</span>(df<span class="sc">$</span>salary, <span class="at">levels =</span> df<span class="sc">$</span>salary, <span class="at">ordered =</span> <span class="cn">TRUE</span>)  </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> salary, <span class="at">y =</span> value)) <span class="sc">+</span>  </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span>  </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Starting Salary"</span>) <span class="sc">+</span>  </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>))</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-StartingYearlySalaries2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-StartingYearlySalaries2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-StartingYearlySalaries2-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-StartingYearlySalaries2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.2: 起薪条形图
</figcaption>
</figure>
</div>
</div>
</div>
<p>另一种用于表示频数表的图形是折线图（<em>frequency polygon</em>），在折线图中，对于在数据集中出现的不同的数据值，其出现的次数为纵坐标，以此画出对应的点，然后用直线将这些点依次连接起来。<a href="#fig-StartingYearlySalaries3" class="quarto-xref">图&nbsp;<span>2.3</span></a> 给出了 <a href="#tbl-StartingYearlySalaries" class="quarto-xref">表格&nbsp;<span>2.1</span></a> 对应的折线图。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)  </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(  </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">salary =</span> <span class="fu">c</span>(<span class="dv">57</span>, <span class="dv">58</span>, <span class="dv">59</span>, <span class="dv">60</span>, <span class="dv">61</span>, <span class="dv">62</span>, <span class="dv">63</span>, <span class="dv">64</span>, <span class="dv">66</span>, <span class="dv">67</span>, <span class="dv">70</span>),  </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>)  </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>salary, <span class="at">y=</span>value)) <span class="sc">+</span>   </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span>  </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Starting Salary"</span>, <span class="at">y=</span><span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)) <span class="sc">+</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-StartingYearlySalaries3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-StartingYearlySalaries3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-StartingYearlySalaries3-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-StartingYearlySalaries3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.3: 起薪折线图
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="sec-2_2_2" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="sec-2_2_2"><span class="header-section-number">2.2.2</span> 相对频率表和图</h3>
<p>一个数据集中有 <span class="math inline">\(n\)</span> 个值，如果 <span class="math inline">\(f\)</span> 是某个特定值的频率，那么<span class="math inline">\(\frac{f}{n}\)</span> 为该特定值的相对频率（<em>relative frequency</em>）。也就是说，一个值的相对频率是数据集中具有该值的数据所占的比例。可以用线图、条形图、折线图来表示相对频率。事实上，在相对频率图中，除了纵坐标的值是绝对频率图中的值除以数据点总数外，相对频率图看起来和绝对频率图没什么不同。</p>
<div id="exm-2_2_a" class="theorem example">
<p><span class="theorem-title"><strong>例子 2.1</strong></span> <a href="#tbl-StartingYearlySalaries2" class="quarto-xref">表格&nbsp;<span>2.2</span></a> 是 <a href="#tbl-StartingYearlySalaries" class="quarto-xref">表格&nbsp;<span>2.1</span></a> 的相对频率表。将 <a href="#tbl-StartingYearlySalaries" class="quarto-xref">表格&nbsp;<span>2.1</span></a> 中相应的频率除以数据集的大小（42） 得到其对应的相对频率表。</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>ss <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">57</span>, <span class="dv">58</span>, <span class="dv">59</span>, <span class="dv">60</span>, <span class="dv">61</span>, <span class="dv">62</span>, <span class="dv">63</span>, <span class="dv">64</span>, <span class="dv">66</span>, <span class="dv">67</span>, <span class="dv">70</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>cnt <span class="ot">=</span> <span class="fu">sum</span>(f)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> f <span class="sc">/</span> cnt</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"Starting Salary"</span> <span class="ot">=</span> ss, <span class="st">"Relative Frequency"</span> <span class="ot">=</span> f)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align =</span> <span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-StartingYearlySalaries2" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-StartingYearlySalaries2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.2: 起薪分布相对频率表
</figcaption>
<div aria-describedby="tbl-StartingYearlySalaries2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Starting.Salary</th>
<th style="text-align: left;">Relative.Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">57</td>
<td style="text-align: left;">0.0952381</td>
</tr>
<tr class="even">
<td style="text-align: left;">58</td>
<td style="text-align: left;">0.0238095</td>
</tr>
<tr class="odd">
<td style="text-align: left;">59</td>
<td style="text-align: left;">0.0714286</td>
</tr>
<tr class="even">
<td style="text-align: left;">60</td>
<td style="text-align: left;">0.1190476</td>
</tr>
<tr class="odd">
<td style="text-align: left;">61</td>
<td style="text-align: left;">0.1904762</td>
</tr>
<tr class="even">
<td style="text-align: left;">62</td>
<td style="text-align: left;">0.2380952</td>
</tr>
<tr class="odd">
<td style="text-align: left;">63</td>
<td style="text-align: left;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">64</td>
<td style="text-align: left;">0.1190476</td>
</tr>
<tr class="odd">
<td style="text-align: left;">66</td>
<td style="text-align: left;">0.0476190</td>
</tr>
<tr class="even">
<td style="text-align: left;">67</td>
<td style="text-align: left;">0.0714286</td>
</tr>
<tr class="odd">
<td style="text-align: left;">70</td>
<td style="text-align: left;">0.0238095</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>当数据集中的数据不是数值型数据时，通常使用饼图（<em>pie chart</em>）来表示相对频率。首先画一个圆，然后将其切分成不同的扇形区域，每一个扇区对应数据集中的一种数据类型。在饼图中，扇区的面积表示数据值的相对频率，其面积等于圆的总面积乘以数据值的相对频率。</p>
<div id="exm-2_2_b" class="theorem example">
<p><span class="theorem-title"><strong>例子 2.2</strong></span> 根据一家肿瘤专科诊所登记的最近 200 名患者的数据，得到了一个关于不同类型肿瘤患者数的数据集。<a href="#fig-piechartc" class="quarto-xref">图&nbsp;<span>2.4</span></a> 使用饼图的形式来显示如上的数据集。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>type <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Melanoma"</span>, <span class="st">"Bladder"</span>, <span class="st">"Colon"</span>, <span class="st">"Lung"</span>, <span class="st">"Breast"</span>, <span class="st">"Prostate"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>num <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">12</span>, <span class="dv">32</span>, <span class="dv">42</span>, <span class="dv">50</span>, <span class="dv">55</span>)  </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>value <span class="ot">&lt;-</span> num <span class="sc">/</span> <span class="fu">sum</span>(num)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"Type of Cancer"</span> <span class="ot">=</span> type, <span class="st">"Number of New Cases"</span> <span class="ot">=</span> num, <span class="st">"Relative Frequency"</span> <span class="ot">=</span> value)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align =</span> <span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Type.of.Cancer</th>
<th style="text-align: left;">Number.of.New.Cases</th>
<th style="text-align: left;">Relative.Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Melanoma</td>
<td style="text-align: left;">9</td>
<td style="text-align: left;">0.045</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bladder</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">0.060</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Colon</td>
<td style="text-align: left;">32</td>
<td style="text-align: left;">0.160</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lung</td>
<td style="text-align: left;">42</td>
<td style="text-align: left;">0.210</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Breast</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">0.250</td>
</tr>
<tr class="even">
<td style="text-align: left;">Prostate</td>
<td style="text-align: left;">55</td>
<td style="text-align: left;">0.275</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 提供的数据  </span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>type <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Melanoma"</span>, <span class="st">"Bladder"</span>, <span class="st">"Colon"</span>, <span class="st">"Lung"</span>, <span class="st">"Breast"</span>, <span class="st">"Prostate"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>num <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">12</span>, <span class="dv">32</span>, <span class="dv">42</span>, <span class="dv">50</span>, <span class="dv">55</span>)  </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>value <span class="ot">&lt;-</span> num <span class="sc">/</span> <span class="fu">sum</span>(num)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">type =</span> type, <span class="at">num =</span> num, <span class="at">value =</span> value)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>label <span class="ot">&lt;-</span> <span class="fu">paste</span>(df<span class="sc">$</span>type, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="fu">round</span>(df<span class="sc">$</span>value <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%"</span>, <span class="at">sep=</span><span class="st">""</span>) </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制饼图  </span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> value, <span class="at">fill =</span> type)) <span class="sc">+</span>  </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span>  </span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>, <span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span>  </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span>  </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel1"</span>) <span class="sc">+</span>  </span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"type"</span>) <span class="sc">+</span>  </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label),   </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span> <span class="co"># 添加百分比标签</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-piechartc" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-piechartc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-piechartc-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-piechartc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.4: 诊所数据饼图
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注释
</div>
</div>
<div class="callout-body-container callout-body">
<p>虽然我们经常使用饼图，尤其是在商业分析中，饼图更是得到了广泛的使用，但是统计学家则一直很排斥使用饼图。因为人们对长度的判断比面积更为精确，因此统计学家更倾向于使用条形图。在 R 中，对饼图的支持要比其他的工具差很多。</p>
</div>
</div>
</section>
<section id="sec-2_2_3" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="sec-2_2_3"><span class="header-section-number">2.2.3</span> 分组数据，直方图，肩形图和茎叶图</h3>
<p>如 <a href="#sec-2_2_2" class="quarto-xref"><span>章节 2.2.2</span></a> 所述，使用线图或条形图绘制数据值的频率通常是描述数据集的有效方法。然而，对于那些不同数值数量太多的数据集而言，就无法使用线图或条形图的方法来对数据进行描述。在这种情况下，我们可以先将数值分组或按类别进行分类，然后绘制落在每个分组中的数据值的数量。分组数量的选取需要在以下两者之间进行取舍：</p>
<ul>
<li>较少的分组，但是将会丢失实际数据值中的很多信息；</li>
<li>较多多的分组，但是将导致每个分组中的数值频率太小，以至于无法从图中辨别出数据模型。</li>
</ul>
<p>尽管典型的分组数为 5 ~ 10 个，但是适当的分组数量来自主观选择。当然，我们可以尝试不同的分组数，并对比看看哪张图表的效果最好。尽管不是必须的，但是在选择分组数时，通常会让不同分组之间的间隔长度保持一致。</p>
<p>分组的端点（<em>endpoint</em>）称之为分组边界（<em>class boundaries</em>）。我们将会采用左端包含原则，该原则规定分组中的数据包含其左端点，但不包含其右端。因此，例如，20–30 这个分组包含所有 <span class="math inline">\(\ge\)</span> 20 且 <span class="math inline">\(&lt;\)</span> 30 的值。</p>
<p><a href="#tbl-lamps_lifetime" class="quarto-xref">表格&nbsp;<span>2.3</span></a> 给出了 200 只白炽灯的使用寿命。<a href="#tbl-lamps_lifetime_class" class="quarto-xref">表格&nbsp;<span>2.4</span></a> 为 <a href="#tbl-lamps_lifetime" class="quarto-xref">表格&nbsp;<span>2.3</span></a> 数据的分组频率表，其分组的间隔长度为 100，第一个分组从 500 开始。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1067</span>, <span class="dv">919</span>, <span class="dv">855</span>, <span class="dv">1092</span>, <span class="dv">1157</span>, <span class="dv">1195</span>, <span class="dv">1022</span>, <span class="dv">978</span>, <span class="dv">923</span>, <span class="dv">1333</span>, <span class="dv">521</span>, <span class="dv">933</span>, <span class="dv">930</span>, <span class="dv">807</span>, <span class="dv">999</span>, <span class="dv">932</span>, <span class="dv">901</span>, <span class="dv">1324</span>, <span class="dv">996</span>, <span class="dv">780</span>, <span class="dv">1187</span>, <span class="dv">1067</span>, <span class="dv">824</span>, <span class="dv">653</span>, <span class="dv">844</span>, <span class="dv">814</span>, <span class="dv">1037</span>, <span class="dv">1151</span>, <span class="dv">1026</span>, <span class="dv">1147</span>, <span class="dv">1039</span>, <span class="dv">1083</span>, <span class="dv">1023</span>, <span class="dv">984</span>, <span class="dv">1134</span>, <span class="dv">932</span>, <span class="dv">998</span>, <span class="dv">996</span>, <span class="dv">610</span>, <span class="dv">916</span>, <span class="dv">1196</span>, <span class="dv">785</span>, <span class="dv">1162</span>, <span class="dv">1170</span>, <span class="dv">1195</span>, <span class="dv">1340</span>, <span class="dv">832</span>, <span class="dv">1009</span>, <span class="dv">811</span>, <span class="dv">1217</span>, <span class="dv">928</span>, <span class="dv">1153</span>, <span class="dv">954</span>, <span class="dv">1063</span>, <span class="dv">1035</span>, <span class="dv">944</span>, <span class="dv">818</span>, <span class="dv">1250</span>, <span class="dv">900</span>, <span class="dv">1106</span>, <span class="dv">1118</span>, <span class="dv">1037</span>, <span class="dv">980</span>, <span class="dv">935</span>, <span class="dv">1103</span>, <span class="dv">1000</span>, <span class="dv">863</span>, <span class="dv">990</span>, <span class="dv">883</span>, <span class="dv">867</span>, <span class="dv">1040</span>, <span class="dv">1289</span>, <span class="dv">856</span>, <span class="dv">924</span>, <span class="dv">938</span>, <span class="dv">1078</span>, <span class="dv">1133</span>, <span class="dv">765</span>, <span class="dv">1001</span>, <span class="dv">895</span>, <span class="dv">1126</span>, <span class="dv">936</span>, <span class="dv">929</span>, <span class="dv">950</span>, <span class="dv">1122</span>, <span class="dv">938</span>, <span class="dv">1157</span>, <span class="dv">1151</span>, <span class="dv">1085</span>, <span class="dv">896</span>, <span class="dv">946</span>, <span class="dv">858</span>, <span class="dv">1002</span>, <span class="dv">909</span>, <span class="dv">1049</span>, <span class="dv">940</span>, <span class="dv">1203</span>, <span class="dv">1078</span>, <span class="dv">704</span>, <span class="dv">621</span>, <span class="dv">958</span>, <span class="dv">760</span>, <span class="dv">878</span>, <span class="dv">934</span>, <span class="dv">788</span>, <span class="dv">1143</span>, <span class="dv">1035</span>, <span class="dv">1112</span>, <span class="dv">990</span>, <span class="dv">1258</span>, <span class="dv">699</span>, <span class="dv">1083</span>, <span class="dv">801</span>, <span class="dv">1122</span>, <span class="dv">1180</span>, <span class="dv">1106</span>, <span class="dv">775</span>, <span class="dv">1105</span>, <span class="dv">709</span>, <span class="dv">860</span>, <span class="dv">918</span>, <span class="dv">1156</span>, <span class="dv">920</span>, <span class="dv">948</span>, <span class="dv">905</span>, <span class="dv">972</span>, <span class="dv">1035</span>, <span class="dv">1045</span>, <span class="dv">970</span>, <span class="dv">1237</span>, <span class="dv">956</span>, <span class="dv">1102</span>, <span class="dv">1009</span>, <span class="dv">765</span>, <span class="dv">958</span>, <span class="dv">902</span>, <span class="dv">958</span>, <span class="dv">1311</span>, <span class="dv">1037</span>, <span class="dv">702</span>, <span class="dv">1071</span>, <span class="dv">1069</span>, <span class="dv">830</span>, <span class="dv">1063</span>, <span class="dv">1077</span>, <span class="dv">1021</span>, <span class="dv">1062</span>, <span class="dv">1157</span>, <span class="dv">1122</span>, <span class="dv">1115</span>, <span class="dv">833</span>, <span class="dv">1320</span>, <span class="dv">890</span>, <span class="dv">1303</span>, <span class="dv">1011</span>, <span class="dv">1102</span>, <span class="dv">854</span>, <span class="dv">1178</span>, <span class="dv">1138</span>, <span class="dv">951</span>, <span class="dv">1101</span>, <span class="dv">949</span>, <span class="dv">992</span>, <span class="dv">966</span>, <span class="dv">910</span>, <span class="dv">1058</span>, <span class="dv">730</span>, <span class="dv">980</span>, <span class="dv">935</span>, <span class="dv">1069</span>, <span class="dv">1170</span>, <span class="dv">1067</span>, <span class="dv">931</span>, <span class="dv">970</span>, <span class="dv">932</span>, <span class="dv">904</span>, <span class="dv">1192</span>, <span class="dv">922</span>, <span class="dv">1150</span>, <span class="dv">1091</span>, <span class="dv">880</span>, <span class="dv">1029</span>, <span class="dv">658</span>, <span class="dv">912</span>, <span class="dv">1292</span>, <span class="dv">1116</span>, <span class="dv">880</span>, <span class="dv">1173</span>, <span class="dv">1184</span>, <span class="dv">954</span>, <span class="dv">824</span>, <span class="dv">529</span>, <span class="dv">1081</span>, <span class="dv">1171</span>, <span class="dv">705</span>, <span class="dv">1425</span>, <span class="dv">1110</span>, <span class="dv">1149</span>, <span class="dv">972</span>, <span class="dv">1002</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">matrix</span>(data, <span class="at">nrow =</span> <span class="dv">20</span>, <span class="at">ncol =</span> <span class="dv">10</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>))</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-lamps_lifetime" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-lamps_lifetime-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.3: 200 个 白炽灯的寿命（Hour）
</figcaption>
<div aria-describedby="tbl-lamps_lifetime-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<tbody>
<tr class="odd">
<td style="text-align: right;">1067</td>
<td style="text-align: right;">919</td>
<td style="text-align: right;">855</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1157</td>
<td style="text-align: right;">1195</td>
<td style="text-align: right;">1022</td>
<td style="text-align: right;">978</td>
<td style="text-align: right;">923</td>
<td style="text-align: right;">1333</td>
</tr>
<tr class="even">
<td style="text-align: right;">521</td>
<td style="text-align: right;">933</td>
<td style="text-align: right;">930</td>
<td style="text-align: right;">807</td>
<td style="text-align: right;">999</td>
<td style="text-align: right;">932</td>
<td style="text-align: right;">901</td>
<td style="text-align: right;">1324</td>
<td style="text-align: right;">996</td>
<td style="text-align: right;">780</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1187</td>
<td style="text-align: right;">1067</td>
<td style="text-align: right;">824</td>
<td style="text-align: right;">653</td>
<td style="text-align: right;">844</td>
<td style="text-align: right;">814</td>
<td style="text-align: right;">1037</td>
<td style="text-align: right;">1151</td>
<td style="text-align: right;">1026</td>
<td style="text-align: right;">1147</td>
</tr>
<tr class="even">
<td style="text-align: right;">1039</td>
<td style="text-align: right;">1083</td>
<td style="text-align: right;">1023</td>
<td style="text-align: right;">984</td>
<td style="text-align: right;">1134</td>
<td style="text-align: right;">932</td>
<td style="text-align: right;">998</td>
<td style="text-align: right;">996</td>
<td style="text-align: right;">610</td>
<td style="text-align: right;">916</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1196</td>
<td style="text-align: right;">785</td>
<td style="text-align: right;">1162</td>
<td style="text-align: right;">1170</td>
<td style="text-align: right;">1195</td>
<td style="text-align: right;">1340</td>
<td style="text-align: right;">832</td>
<td style="text-align: right;">1009</td>
<td style="text-align: right;">811</td>
<td style="text-align: right;">1217</td>
</tr>
<tr class="even">
<td style="text-align: right;">928</td>
<td style="text-align: right;">1153</td>
<td style="text-align: right;">954</td>
<td style="text-align: right;">1063</td>
<td style="text-align: right;">1035</td>
<td style="text-align: right;">944</td>
<td style="text-align: right;">818</td>
<td style="text-align: right;">1250</td>
<td style="text-align: right;">900</td>
<td style="text-align: right;">1106</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1118</td>
<td style="text-align: right;">1037</td>
<td style="text-align: right;">980</td>
<td style="text-align: right;">935</td>
<td style="text-align: right;">1103</td>
<td style="text-align: right;">1000</td>
<td style="text-align: right;">863</td>
<td style="text-align: right;">990</td>
<td style="text-align: right;">883</td>
<td style="text-align: right;">867</td>
</tr>
<tr class="even">
<td style="text-align: right;">1040</td>
<td style="text-align: right;">1289</td>
<td style="text-align: right;">856</td>
<td style="text-align: right;">924</td>
<td style="text-align: right;">938</td>
<td style="text-align: right;">1078</td>
<td style="text-align: right;">1133</td>
<td style="text-align: right;">765</td>
<td style="text-align: right;">1001</td>
<td style="text-align: right;">895</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1126</td>
<td style="text-align: right;">936</td>
<td style="text-align: right;">929</td>
<td style="text-align: right;">950</td>
<td style="text-align: right;">1122</td>
<td style="text-align: right;">938</td>
<td style="text-align: right;">1157</td>
<td style="text-align: right;">1151</td>
<td style="text-align: right;">1085</td>
<td style="text-align: right;">896</td>
</tr>
<tr class="even">
<td style="text-align: right;">946</td>
<td style="text-align: right;">858</td>
<td style="text-align: right;">1002</td>
<td style="text-align: right;">909</td>
<td style="text-align: right;">1049</td>
<td style="text-align: right;">940</td>
<td style="text-align: right;">1203</td>
<td style="text-align: right;">1078</td>
<td style="text-align: right;">704</td>
<td style="text-align: right;">621</td>
</tr>
<tr class="odd">
<td style="text-align: right;">958</td>
<td style="text-align: right;">760</td>
<td style="text-align: right;">878</td>
<td style="text-align: right;">934</td>
<td style="text-align: right;">788</td>
<td style="text-align: right;">1143</td>
<td style="text-align: right;">1035</td>
<td style="text-align: right;">1112</td>
<td style="text-align: right;">990</td>
<td style="text-align: right;">1258</td>
</tr>
<tr class="even">
<td style="text-align: right;">699</td>
<td style="text-align: right;">1083</td>
<td style="text-align: right;">801</td>
<td style="text-align: right;">1122</td>
<td style="text-align: right;">1180</td>
<td style="text-align: right;">1106</td>
<td style="text-align: right;">775</td>
<td style="text-align: right;">1105</td>
<td style="text-align: right;">709</td>
<td style="text-align: right;">860</td>
</tr>
<tr class="odd">
<td style="text-align: right;">918</td>
<td style="text-align: right;">1156</td>
<td style="text-align: right;">920</td>
<td style="text-align: right;">948</td>
<td style="text-align: right;">905</td>
<td style="text-align: right;">972</td>
<td style="text-align: right;">1035</td>
<td style="text-align: right;">1045</td>
<td style="text-align: right;">970</td>
<td style="text-align: right;">1237</td>
</tr>
<tr class="even">
<td style="text-align: right;">956</td>
<td style="text-align: right;">1102</td>
<td style="text-align: right;">1009</td>
<td style="text-align: right;">765</td>
<td style="text-align: right;">958</td>
<td style="text-align: right;">902</td>
<td style="text-align: right;">958</td>
<td style="text-align: right;">1311</td>
<td style="text-align: right;">1037</td>
<td style="text-align: right;">702</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1071</td>
<td style="text-align: right;">1069</td>
<td style="text-align: right;">830</td>
<td style="text-align: right;">1063</td>
<td style="text-align: right;">1077</td>
<td style="text-align: right;">1021</td>
<td style="text-align: right;">1062</td>
<td style="text-align: right;">1157</td>
<td style="text-align: right;">1122</td>
<td style="text-align: right;">1115</td>
</tr>
<tr class="even">
<td style="text-align: right;">833</td>
<td style="text-align: right;">1320</td>
<td style="text-align: right;">890</td>
<td style="text-align: right;">1303</td>
<td style="text-align: right;">1011</td>
<td style="text-align: right;">1102</td>
<td style="text-align: right;">854</td>
<td style="text-align: right;">1178</td>
<td style="text-align: right;">1138</td>
<td style="text-align: right;">951</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1101</td>
<td style="text-align: right;">949</td>
<td style="text-align: right;">992</td>
<td style="text-align: right;">966</td>
<td style="text-align: right;">910</td>
<td style="text-align: right;">1058</td>
<td style="text-align: right;">730</td>
<td style="text-align: right;">980</td>
<td style="text-align: right;">935</td>
<td style="text-align: right;">1069</td>
</tr>
<tr class="even">
<td style="text-align: right;">1170</td>
<td style="text-align: right;">1067</td>
<td style="text-align: right;">931</td>
<td style="text-align: right;">970</td>
<td style="text-align: right;">932</td>
<td style="text-align: right;">904</td>
<td style="text-align: right;">1192</td>
<td style="text-align: right;">922</td>
<td style="text-align: right;">1150</td>
<td style="text-align: right;">1091</td>
</tr>
<tr class="odd">
<td style="text-align: right;">880</td>
<td style="text-align: right;">1029</td>
<td style="text-align: right;">658</td>
<td style="text-align: right;">912</td>
<td style="text-align: right;">1292</td>
<td style="text-align: right;">1116</td>
<td style="text-align: right;">880</td>
<td style="text-align: right;">1173</td>
<td style="text-align: right;">1184</td>
<td style="text-align: right;">954</td>
</tr>
<tr class="even">
<td style="text-align: right;">824</td>
<td style="text-align: right;">529</td>
<td style="text-align: right;">1081</td>
<td style="text-align: right;">1171</td>
<td style="text-align: right;">705</td>
<td style="text-align: right;">1425</td>
<td style="text-align: right;">1110</td>
<td style="text-align: right;">1149</td>
<td style="text-align: right;">972</td>
<td style="text-align: right;">1002</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1067</span>, <span class="dv">919</span>, <span class="dv">855</span>, <span class="dv">1092</span>, <span class="dv">1157</span>, <span class="dv">1195</span>, <span class="dv">1022</span>, <span class="dv">978</span>, <span class="dv">923</span>, <span class="dv">1333</span>, <span class="dv">521</span>, <span class="dv">933</span>, <span class="dv">930</span>, <span class="dv">807</span>, <span class="dv">999</span>, <span class="dv">932</span>, <span class="dv">901</span>, <span class="dv">1324</span>, <span class="dv">996</span>, <span class="dv">780</span>, <span class="dv">1187</span>, <span class="dv">1067</span>, <span class="dv">824</span>, <span class="dv">653</span>, <span class="dv">844</span>, <span class="dv">814</span>, <span class="dv">1037</span>, <span class="dv">1151</span>, <span class="dv">1026</span>, <span class="dv">1147</span>, <span class="dv">1039</span>, <span class="dv">1083</span>, <span class="dv">1023</span>, <span class="dv">984</span>, <span class="dv">1134</span>, <span class="dv">932</span>, <span class="dv">998</span>, <span class="dv">996</span>, <span class="dv">610</span>, <span class="dv">916</span>, <span class="dv">1196</span>, <span class="dv">785</span>, <span class="dv">1162</span>, <span class="dv">1170</span>, <span class="dv">1195</span>, <span class="dv">1340</span>, <span class="dv">832</span>, <span class="dv">1009</span>, <span class="dv">811</span>, <span class="dv">1217</span>, <span class="dv">928</span>, <span class="dv">1153</span>, <span class="dv">954</span>, <span class="dv">1063</span>, <span class="dv">1035</span>, <span class="dv">944</span>, <span class="dv">818</span>, <span class="dv">1250</span>, <span class="dv">900</span>, <span class="dv">1106</span>, <span class="dv">1118</span>, <span class="dv">1037</span>, <span class="dv">980</span>, <span class="dv">935</span>, <span class="dv">1103</span>, <span class="dv">1000</span>, <span class="dv">863</span>, <span class="dv">990</span>, <span class="dv">883</span>, <span class="dv">867</span>, <span class="dv">1040</span>, <span class="dv">1289</span>, <span class="dv">856</span>, <span class="dv">924</span>, <span class="dv">938</span>, <span class="dv">1078</span>, <span class="dv">1133</span>, <span class="dv">765</span>, <span class="dv">1001</span>, <span class="dv">895</span>, <span class="dv">1126</span>, <span class="dv">936</span>, <span class="dv">929</span>, <span class="dv">950</span>, <span class="dv">1122</span>, <span class="dv">938</span>, <span class="dv">1157</span>, <span class="dv">1151</span>, <span class="dv">1085</span>, <span class="dv">896</span>, <span class="dv">946</span>, <span class="dv">858</span>, <span class="dv">1002</span>, <span class="dv">909</span>, <span class="dv">1049</span>, <span class="dv">940</span>, <span class="dv">1203</span>, <span class="dv">1078</span>, <span class="dv">704</span>, <span class="dv">621</span>, <span class="dv">958</span>, <span class="dv">760</span>, <span class="dv">878</span>, <span class="dv">934</span>, <span class="dv">788</span>, <span class="dv">1143</span>, <span class="dv">1035</span>, <span class="dv">1112</span>, <span class="dv">990</span>, <span class="dv">1258</span>, <span class="dv">699</span>, <span class="dv">1083</span>, <span class="dv">801</span>, <span class="dv">1122</span>, <span class="dv">1180</span>, <span class="dv">1106</span>, <span class="dv">775</span>, <span class="dv">1105</span>, <span class="dv">709</span>, <span class="dv">860</span>, <span class="dv">918</span>, <span class="dv">1156</span>, <span class="dv">920</span>, <span class="dv">948</span>, <span class="dv">905</span>, <span class="dv">972</span>, <span class="dv">1035</span>, <span class="dv">1045</span>, <span class="dv">970</span>, <span class="dv">1237</span>, <span class="dv">956</span>, <span class="dv">1102</span>, <span class="dv">1009</span>, <span class="dv">765</span>, <span class="dv">958</span>, <span class="dv">902</span>, <span class="dv">958</span>, <span class="dv">1311</span>, <span class="dv">1037</span>, <span class="dv">702</span>, <span class="dv">1071</span>, <span class="dv">1069</span>, <span class="dv">830</span>, <span class="dv">1063</span>, <span class="dv">1077</span>, <span class="dv">1021</span>, <span class="dv">1062</span>, <span class="dv">1157</span>, <span class="dv">1122</span>, <span class="dv">1115</span>, <span class="dv">833</span>, <span class="dv">1320</span>, <span class="dv">890</span>, <span class="dv">1303</span>, <span class="dv">1011</span>, <span class="dv">1102</span>, <span class="dv">854</span>, <span class="dv">1178</span>, <span class="dv">1138</span>, <span class="dv">951</span>, <span class="dv">1101</span>, <span class="dv">949</span>, <span class="dv">992</span>, <span class="dv">966</span>, <span class="dv">910</span>, <span class="dv">1058</span>, <span class="dv">730</span>, <span class="dv">980</span>, <span class="dv">935</span>, <span class="dv">1069</span>, <span class="dv">1170</span>, <span class="dv">1067</span>, <span class="dv">931</span>, <span class="dv">970</span>, <span class="dv">932</span>, <span class="dv">904</span>, <span class="dv">1192</span>, <span class="dv">922</span>, <span class="dv">1150</span>, <span class="dv">1091</span>, <span class="dv">880</span>, <span class="dv">1029</span>, <span class="dv">658</span>, <span class="dv">912</span>, <span class="dv">1292</span>, <span class="dv">1116</span>, <span class="dv">880</span>, <span class="dv">1173</span>, <span class="dv">1184</span>, <span class="dv">954</span>, <span class="dv">824</span>, <span class="dv">529</span>, <span class="dv">1081</span>, <span class="dv">1171</span>, <span class="dv">705</span>, <span class="dv">1425</span>, <span class="dv">1110</span>, <span class="dv">1149</span>, <span class="dv">972</span>, <span class="dv">1002</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>intervals <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">500</span>, <span class="dv">1500</span>, <span class="at">by =</span> <span class="dv">100</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>group <span class="ot">&lt;-</span> <span class="fu">cut</span>(data, intervals, <span class="at">right=</span><span class="cn">FALSE</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">table</span>(<span class="st">"Class Interval"</span> <span class="ot">=</span> group))</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-lamps_lifetime_class" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-lamps_lifetime_class-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.4: 200 个 白炽灯的寿命（Hour）分布表
</figcaption>
<div aria-describedby="tbl-lamps_lifetime_class-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Class.Interval</th>
<th style="text-align: right;">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">[500,600)</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">[600,700)</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">[700,800)</td>
<td style="text-align: right;">12</td>
</tr>
<tr class="even">
<td style="text-align: left;">[800,900)</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">[900,1e+03)</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="even">
<td style="text-align: left;">[1e+03,1.1e+03)</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="odd">
<td style="text-align: left;">[1.1e+03,1.2e+03)</td>
<td style="text-align: right;">43</td>
</tr>
<tr class="even">
<td style="text-align: left;">[1.2e+03,1.3e+03)</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">[1.3e+03,1.4e+03)</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">[1.4e+03,1.5e+03)</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>分组数据的条形图中，其不同的分组彼此相邻，我们称之为直方图（<em>histogram</em>）。直方图的纵坐标可以表示分组的频率或相对频率，当表示分组频率时该图为频率直方图，当表示分组相对频率时为相对频率直方图。<a href="#fig-lamps_lifetime_hist" class="quarto-xref">图&nbsp;<span>2.5</span></a> 给出了 <a href="#tbl-lamps_lifetime_class" class="quarto-xref">表格&nbsp;<span>2.4</span></a> 中数据的频率直方图。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1067</span>, <span class="dv">919</span>, <span class="dv">855</span>, <span class="dv">1092</span>, <span class="dv">1157</span>, <span class="dv">1195</span>, <span class="dv">1022</span>, <span class="dv">978</span>, <span class="dv">923</span>, <span class="dv">1333</span>, <span class="dv">521</span>, <span class="dv">933</span>, <span class="dv">930</span>, <span class="dv">807</span>, <span class="dv">999</span>, <span class="dv">932</span>, <span class="dv">901</span>, <span class="dv">1324</span>, <span class="dv">996</span>, <span class="dv">780</span>, <span class="dv">1187</span>, <span class="dv">1067</span>, <span class="dv">824</span>, <span class="dv">653</span>, <span class="dv">844</span>, <span class="dv">814</span>, <span class="dv">1037</span>, <span class="dv">1151</span>, <span class="dv">1026</span>, <span class="dv">1147</span>, <span class="dv">1039</span>, <span class="dv">1083</span>, <span class="dv">1023</span>, <span class="dv">984</span>, <span class="dv">1134</span>, <span class="dv">932</span>, <span class="dv">998</span>, <span class="dv">996</span>, <span class="dv">610</span>, <span class="dv">916</span>, <span class="dv">1196</span>, <span class="dv">785</span>, <span class="dv">1162</span>, <span class="dv">1170</span>, <span class="dv">1195</span>, <span class="dv">1340</span>, <span class="dv">832</span>, <span class="dv">1009</span>, <span class="dv">811</span>, <span class="dv">1217</span>, <span class="dv">928</span>, <span class="dv">1153</span>, <span class="dv">954</span>, <span class="dv">1063</span>, <span class="dv">1035</span>, <span class="dv">944</span>, <span class="dv">818</span>, <span class="dv">1250</span>, <span class="dv">900</span>, <span class="dv">1106</span>, <span class="dv">1118</span>, <span class="dv">1037</span>, <span class="dv">980</span>, <span class="dv">935</span>, <span class="dv">1103</span>, <span class="dv">1000</span>, <span class="dv">863</span>, <span class="dv">990</span>, <span class="dv">883</span>, <span class="dv">867</span>, <span class="dv">1040</span>, <span class="dv">1289</span>, <span class="dv">856</span>, <span class="dv">924</span>, <span class="dv">938</span>, <span class="dv">1078</span>, <span class="dv">1133</span>, <span class="dv">765</span>, <span class="dv">1001</span>, <span class="dv">895</span>, <span class="dv">1126</span>, <span class="dv">936</span>, <span class="dv">929</span>, <span class="dv">950</span>, <span class="dv">1122</span>, <span class="dv">938</span>, <span class="dv">1157</span>, <span class="dv">1151</span>, <span class="dv">1085</span>, <span class="dv">896</span>, <span class="dv">946</span>, <span class="dv">858</span>, <span class="dv">1002</span>, <span class="dv">909</span>, <span class="dv">1049</span>, <span class="dv">940</span>, <span class="dv">1203</span>, <span class="dv">1078</span>, <span class="dv">704</span>, <span class="dv">621</span>, <span class="dv">958</span>, <span class="dv">760</span>, <span class="dv">878</span>, <span class="dv">934</span>, <span class="dv">788</span>, <span class="dv">1143</span>, <span class="dv">1035</span>, <span class="dv">1112</span>, <span class="dv">990</span>, <span class="dv">1258</span>, <span class="dv">699</span>, <span class="dv">1083</span>, <span class="dv">801</span>, <span class="dv">1122</span>, <span class="dv">1180</span>, <span class="dv">1106</span>, <span class="dv">775</span>, <span class="dv">1105</span>, <span class="dv">709</span>, <span class="dv">860</span>, <span class="dv">918</span>, <span class="dv">1156</span>, <span class="dv">920</span>, <span class="dv">948</span>, <span class="dv">905</span>, <span class="dv">972</span>, <span class="dv">1035</span>, <span class="dv">1045</span>, <span class="dv">970</span>, <span class="dv">1237</span>, <span class="dv">956</span>, <span class="dv">1102</span>, <span class="dv">1009</span>, <span class="dv">765</span>, <span class="dv">958</span>, <span class="dv">902</span>, <span class="dv">958</span>, <span class="dv">1311</span>, <span class="dv">1037</span>, <span class="dv">702</span>, <span class="dv">1071</span>, <span class="dv">1069</span>, <span class="dv">830</span>, <span class="dv">1063</span>, <span class="dv">1077</span>, <span class="dv">1021</span>, <span class="dv">1062</span>, <span class="dv">1157</span>, <span class="dv">1122</span>, <span class="dv">1115</span>, <span class="dv">833</span>, <span class="dv">1320</span>, <span class="dv">890</span>, <span class="dv">1303</span>, <span class="dv">1011</span>, <span class="dv">1102</span>, <span class="dv">854</span>, <span class="dv">1178</span>, <span class="dv">1138</span>, <span class="dv">951</span>, <span class="dv">1101</span>, <span class="dv">949</span>, <span class="dv">992</span>, <span class="dv">966</span>, <span class="dv">910</span>, <span class="dv">1058</span>, <span class="dv">730</span>, <span class="dv">980</span>, <span class="dv">935</span>, <span class="dv">1069</span>, <span class="dv">1170</span>, <span class="dv">1067</span>, <span class="dv">931</span>, <span class="dv">970</span>, <span class="dv">932</span>, <span class="dv">904</span>, <span class="dv">1192</span>, <span class="dv">922</span>, <span class="dv">1150</span>, <span class="dv">1091</span>, <span class="dv">880</span>, <span class="dv">1029</span>, <span class="dv">658</span>, <span class="dv">912</span>, <span class="dv">1292</span>, <span class="dv">1116</span>, <span class="dv">880</span>, <span class="dv">1173</span>, <span class="dv">1184</span>, <span class="dv">954</span>, <span class="dv">824</span>, <span class="dv">529</span>, <span class="dv">1081</span>, <span class="dv">1171</span>, <span class="dv">705</span>, <span class="dv">1425</span>, <span class="dv">1110</span>, <span class="dv">1149</span>, <span class="dv">972</span>, <span class="dv">1002</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">value =</span> data)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>breaks_vector <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">500</span>, <span class="at">to =</span> <span class="dv">1500</span>, <span class="at">by =</span> <span class="dv">100</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span>  </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">breaks =</span> breaks_vector, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span>  </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"incandescent lamps lifetime(Hour)"</span>) <span class="sc">+</span>  </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-lamps_lifetime_hist" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lamps_lifetime_hist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-lamps_lifetime_hist-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lamps_lifetime_hist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.5: 200 个 白炽灯的寿命（Hour）分布直方图
</figcaption>
</figure>
</div>
</div>
</div>
<p>很多时候，我们需要绘制累积频率图（<em>cumulative frequency graph</em>）或者累积相对频率图（<em>cumulative relative frequency graph</em>）。在累积频率（相对频率）图的横坐标上，一个点代表一个可能的数据值，其对应的纵坐标为值小于或等于该数据值的数据数量（或比例）。<a href="#fig-lamps_lifetime_cumfreq" class="quarto-xref">图&nbsp;<span>2.6</span></a> 给出了 <a href="#tbl-lamps_lifetime" class="quarto-xref">表格&nbsp;<span>2.3</span></a> 中所示数据的累积相对频率图。从这个图中我们可以发现，使用寿命小于 1500（小时） 的白炽灯占比为 100%，使用寿命 <span class="math inline">\(\le\)</span> 900 的占比大约为 40% ，使用寿命 <span class="math inline">\(\le\)</span> 1100 的占比大约为 80%，……我们通常又把累积频率图称为肩形图（<em>ogive</em>）。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1067</span>, <span class="dv">919</span>, <span class="dv">855</span>, <span class="dv">1092</span>, <span class="dv">1157</span>, <span class="dv">1195</span>, <span class="dv">1022</span>, <span class="dv">978</span>, <span class="dv">923</span>, <span class="dv">1333</span>, <span class="dv">521</span>, <span class="dv">933</span>, <span class="dv">930</span>, <span class="dv">807</span>, <span class="dv">999</span>, <span class="dv">932</span>, <span class="dv">901</span>, <span class="dv">1324</span>, <span class="dv">996</span>, <span class="dv">780</span>, <span class="dv">1187</span>, <span class="dv">1067</span>, <span class="dv">824</span>, <span class="dv">653</span>, <span class="dv">844</span>, <span class="dv">814</span>, <span class="dv">1037</span>, <span class="dv">1151</span>, <span class="dv">1026</span>, <span class="dv">1147</span>, <span class="dv">1039</span>, <span class="dv">1083</span>, <span class="dv">1023</span>, <span class="dv">984</span>, <span class="dv">1134</span>, <span class="dv">932</span>, <span class="dv">998</span>, <span class="dv">996</span>, <span class="dv">610</span>, <span class="dv">916</span>, <span class="dv">1196</span>, <span class="dv">785</span>, <span class="dv">1162</span>, <span class="dv">1170</span>, <span class="dv">1195</span>, <span class="dv">1340</span>, <span class="dv">832</span>, <span class="dv">1009</span>, <span class="dv">811</span>, <span class="dv">1217</span>, <span class="dv">928</span>, <span class="dv">1153</span>, <span class="dv">954</span>, <span class="dv">1063</span>, <span class="dv">1035</span>, <span class="dv">944</span>, <span class="dv">818</span>, <span class="dv">1250</span>, <span class="dv">900</span>, <span class="dv">1106</span>, <span class="dv">1118</span>, <span class="dv">1037</span>, <span class="dv">980</span>, <span class="dv">935</span>, <span class="dv">1103</span>, <span class="dv">1000</span>, <span class="dv">863</span>, <span class="dv">990</span>, <span class="dv">883</span>, <span class="dv">867</span>, <span class="dv">1040</span>, <span class="dv">1289</span>, <span class="dv">856</span>, <span class="dv">924</span>, <span class="dv">938</span>, <span class="dv">1078</span>, <span class="dv">1133</span>, <span class="dv">765</span>, <span class="dv">1001</span>, <span class="dv">895</span>, <span class="dv">1126</span>, <span class="dv">936</span>, <span class="dv">929</span>, <span class="dv">950</span>, <span class="dv">1122</span>, <span class="dv">938</span>, <span class="dv">1157</span>, <span class="dv">1151</span>, <span class="dv">1085</span>, <span class="dv">896</span>, <span class="dv">946</span>, <span class="dv">858</span>, <span class="dv">1002</span>, <span class="dv">909</span>, <span class="dv">1049</span>, <span class="dv">940</span>, <span class="dv">1203</span>, <span class="dv">1078</span>, <span class="dv">704</span>, <span class="dv">621</span>, <span class="dv">958</span>, <span class="dv">760</span>, <span class="dv">878</span>, <span class="dv">934</span>, <span class="dv">788</span>, <span class="dv">1143</span>, <span class="dv">1035</span>, <span class="dv">1112</span>, <span class="dv">990</span>, <span class="dv">1258</span>, <span class="dv">699</span>, <span class="dv">1083</span>, <span class="dv">801</span>, <span class="dv">1122</span>, <span class="dv">1180</span>, <span class="dv">1106</span>, <span class="dv">775</span>, <span class="dv">1105</span>, <span class="dv">709</span>, <span class="dv">860</span>, <span class="dv">918</span>, <span class="dv">1156</span>, <span class="dv">920</span>, <span class="dv">948</span>, <span class="dv">905</span>, <span class="dv">972</span>, <span class="dv">1035</span>, <span class="dv">1045</span>, <span class="dv">970</span>, <span class="dv">1237</span>, <span class="dv">956</span>, <span class="dv">1102</span>, <span class="dv">1009</span>, <span class="dv">765</span>, <span class="dv">958</span>, <span class="dv">902</span>, <span class="dv">958</span>, <span class="dv">1311</span>, <span class="dv">1037</span>, <span class="dv">702</span>, <span class="dv">1071</span>, <span class="dv">1069</span>, <span class="dv">830</span>, <span class="dv">1063</span>, <span class="dv">1077</span>, <span class="dv">1021</span>, <span class="dv">1062</span>, <span class="dv">1157</span>, <span class="dv">1122</span>, <span class="dv">1115</span>, <span class="dv">833</span>, <span class="dv">1320</span>, <span class="dv">890</span>, <span class="dv">1303</span>, <span class="dv">1011</span>, <span class="dv">1102</span>, <span class="dv">854</span>, <span class="dv">1178</span>, <span class="dv">1138</span>, <span class="dv">951</span>, <span class="dv">1101</span>, <span class="dv">949</span>, <span class="dv">992</span>, <span class="dv">966</span>, <span class="dv">910</span>, <span class="dv">1058</span>, <span class="dv">730</span>, <span class="dv">980</span>, <span class="dv">935</span>, <span class="dv">1069</span>, <span class="dv">1170</span>, <span class="dv">1067</span>, <span class="dv">931</span>, <span class="dv">970</span>, <span class="dv">932</span>, <span class="dv">904</span>, <span class="dv">1192</span>, <span class="dv">922</span>, <span class="dv">1150</span>, <span class="dv">1091</span>, <span class="dv">880</span>, <span class="dv">1029</span>, <span class="dv">658</span>, <span class="dv">912</span>, <span class="dv">1292</span>, <span class="dv">1116</span>, <span class="dv">880</span>, <span class="dv">1173</span>, <span class="dv">1184</span>, <span class="dv">954</span>, <span class="dv">824</span>, <span class="dv">529</span>, <span class="dv">1081</span>, <span class="dv">1171</span>, <span class="dv">705</span>, <span class="dv">1425</span>, <span class="dv">1110</span>, <span class="dv">1149</span>, <span class="dv">972</span>, <span class="dv">1002</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">value =</span> data)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>value <span class="ot">&lt;-</span> df<span class="sc">$</span>value[<span class="fu">order</span>(df<span class="sc">$</span>value)]</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>cumulative_freq <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">/</span><span class="fu">nrow</span>(df), <span class="fu">nrow</span>(df))) </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> value, <span class="at">y =</span> cumulative_freq)) <span class="sc">+</span>  </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_step</span>(<span class="at">direction =</span> <span class="st">"vh"</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span>  </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"incandescent lamps lifetime"</span>) <span class="sc">+</span>  </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Cumulative Relative Frequency"</span>) <span class="sc">+</span>   </span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-lamps_lifetime_cumfreq" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lamps_lifetime_cumfreq-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-lamps_lifetime_cumfreq-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lamps_lifetime_cumfreq-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.6: 200 个 白炽灯的寿命（Hour）累积频率图
</figcaption>
</figure>
</div>
</div>
</div>
<p>对于中小型数据集而言，茎叶图（<em>stem-leaf plot</em>）是一种有效的数据组织方式。可以把每个数据值分为茎和叶两部分来获得茎叶图。例如，如果数据都是两位整数值，那么我们可以把十位数作为茎，个位数作为叶。例如，值 62 的茎叶图表示为：</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>62 的茎叶图</strong></pre>
</div>
<div class="sourceCode" id="cb12" data-filename="62 的茎叶图"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Stem</span> Leaf</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">6</span>   2</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>62，67 两个数据的茎叶图表示为：</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>62，67 的茎叶图</strong></pre>
</div>
<div class="sourceCode" id="cb13" data-filename="62，67 的茎叶图"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Stem</span> Leaf</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">6</span>  2,7</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exm-2_2_c" class="theorem example">
<p><span class="theorem-title"><strong>例子 2.3</strong></span> <a href="#tbl-us_daily_min_temputer" class="quarto-xref">表格&nbsp;<span>2.5</span></a> 给出了美国 35 个城市的每日最低气温的月平均值和年平均值。<a href="#tbl-us_daily_min_temputer" class="quarto-xref">表格&nbsp;<span>2.5</span></a> 中的每日最低温度的年平均值可以用下面的茎叶图表示。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../misc/US_minimum_temperature.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stem</span>(df<span class="sc">$</span>Annual.avg.)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
  The decimal point is 1 digit(s) to the right of the |

  2 | 9
  3 | 034
  3 | 56699
  4 | 0001244
  4 | 55567899
  5 | 112
  5 | 677899
  6 | 
  6 | 9
  7 | 0</code></pre>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注释
</div>
</div>
<div class="callout-body-container callout-body">
<p>由于 R 中的 <code>stem()</code> 并不支持小数，因此对于 <a href="#tbl-us_daily_min_temputer" class="quarto-xref">表格&nbsp;<span>2.5</span></a> 中所示的年平均值会先进行四舍五入转成整数，然后再画茎叶图。因此，这里给的茎叶图和原书中的不一致。</p>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../misc/US_minimum_temperature.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-us_daily_min_temputer" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-us_daily_min_temputer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.5: 1961年~1990年，美国指定城市的每日最低气温表。数据来源：Source: U.S. National Oceanic and Atmospheric Administration, Climatography of the United States, No.&nbsp;81。
</figcaption>
<div aria-describedby="tbl-us_daily_min_temputer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 5%">
<col style="width: 20%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">State</th>
<th style="text-align: left;">Station</th>
<th style="text-align: right;">Jan.</th>
<th style="text-align: right;">Feb.</th>
<th style="text-align: right;">Mar.</th>
<th style="text-align: right;">Apr.</th>
<th style="text-align: right;">May</th>
<th style="text-align: right;">June</th>
<th style="text-align: right;">July</th>
<th style="text-align: right;">Aug.</th>
<th style="text-align: right;">Sept.</th>
<th style="text-align: right;">Oct.</th>
<th style="text-align: right;">Nov.</th>
<th style="text-align: right;">Dec.</th>
<th style="text-align: right;">Annual.avg.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">AL</td>
<td style="text-align: left;">Mobile</td>
<td style="text-align: right;">40.0</td>
<td style="text-align: right;">42.7</td>
<td style="text-align: right;">50.1</td>
<td style="text-align: right;">57.1</td>
<td style="text-align: right;">64.4</td>
<td style="text-align: right;">70.7</td>
<td style="text-align: right;">73.2</td>
<td style="text-align: right;">72.9</td>
<td style="text-align: right;">68.7</td>
<td style="text-align: right;">57.3</td>
<td style="text-align: right;">49.1</td>
<td style="text-align: right;">43.1</td>
<td style="text-align: right;">57.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">AK</td>
<td style="text-align: left;">Juneau</td>
<td style="text-align: right;">19.0</td>
<td style="text-align: right;">22.7</td>
<td style="text-align: right;">26.7</td>
<td style="text-align: right;">32.1</td>
<td style="text-align: right;">38.9</td>
<td style="text-align: right;">45.0</td>
<td style="text-align: right;">48.1</td>
<td style="text-align: right;">47.3</td>
<td style="text-align: right;">42.9</td>
<td style="text-align: right;">37.2</td>
<td style="text-align: right;">27.2</td>
<td style="text-align: right;">22.6</td>
<td style="text-align: right;">34.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AZ</td>
<td style="text-align: left;">Phoenix</td>
<td style="text-align: right;">41.2</td>
<td style="text-align: right;">44.7</td>
<td style="text-align: right;">48.8</td>
<td style="text-align: right;">55.3</td>
<td style="text-align: right;">63.9</td>
<td style="text-align: right;">72.9</td>
<td style="text-align: right;">81.0</td>
<td style="text-align: right;">79.2</td>
<td style="text-align: right;">72.8</td>
<td style="text-align: right;">60.8</td>
<td style="text-align: right;">48.9</td>
<td style="text-align: right;">41.8</td>
<td style="text-align: right;">59.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">AR</td>
<td style="text-align: left;">Little Rock</td>
<td style="text-align: right;">29.1</td>
<td style="text-align: right;">33.2</td>
<td style="text-align: right;">42.2</td>
<td style="text-align: right;">50.7</td>
<td style="text-align: right;">59.0</td>
<td style="text-align: right;">67.4</td>
<td style="text-align: right;">71.5</td>
<td style="text-align: right;">69.8</td>
<td style="text-align: right;">63.5</td>
<td style="text-align: right;">50.9</td>
<td style="text-align: right;">41.5</td>
<td style="text-align: right;">33.1</td>
<td style="text-align: right;">51.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CA</td>
<td style="text-align: left;">Los Angeles</td>
<td style="text-align: right;">47.8</td>
<td style="text-align: right;">49.3</td>
<td style="text-align: right;">50.5</td>
<td style="text-align: right;">52.8</td>
<td style="text-align: right;">56.3</td>
<td style="text-align: right;">59.5</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">64.2</td>
<td style="text-align: right;">63.2</td>
<td style="text-align: right;">59.2</td>
<td style="text-align: right;">52.8</td>
<td style="text-align: right;">47.9</td>
<td style="text-align: right;">55.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">CA</td>
<td style="text-align: left;">Sacramento</td>
<td style="text-align: right;">37.7</td>
<td style="text-align: right;">41.4</td>
<td style="text-align: right;">43.2</td>
<td style="text-align: right;">45.5</td>
<td style="text-align: right;">50.3</td>
<td style="text-align: right;">55.3</td>
<td style="text-align: right;">58.1</td>
<td style="text-align: right;">58.0</td>
<td style="text-align: right;">55.7</td>
<td style="text-align: right;">50.4</td>
<td style="text-align: right;">43.4</td>
<td style="text-align: right;">37.8</td>
<td style="text-align: right;">48.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CA</td>
<td style="text-align: left;">San Diego</td>
<td style="text-align: right;">48.9</td>
<td style="text-align: right;">50.7</td>
<td style="text-align: right;">52.8</td>
<td style="text-align: right;">55.6</td>
<td style="text-align: right;">59.1</td>
<td style="text-align: right;">61.9</td>
<td style="text-align: right;">65.7</td>
<td style="text-align: right;">67.3</td>
<td style="text-align: right;">65.6</td>
<td style="text-align: right;">60.9</td>
<td style="text-align: right;">53.9</td>
<td style="text-align: right;">48.8</td>
<td style="text-align: right;">57.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">CA</td>
<td style="text-align: left;">San Francisco</td>
<td style="text-align: right;">41.8</td>
<td style="text-align: right;">45.0</td>
<td style="text-align: right;">45.8</td>
<td style="text-align: right;">47.2</td>
<td style="text-align: right;">49.7</td>
<td style="text-align: right;">52.6</td>
<td style="text-align: right;">53.9</td>
<td style="text-align: right;">55.0</td>
<td style="text-align: right;">55.2</td>
<td style="text-align: right;">51.8</td>
<td style="text-align: right;">47.1</td>
<td style="text-align: right;">42.7</td>
<td style="text-align: right;">49.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CO</td>
<td style="text-align: left;">Denver</td>
<td style="text-align: right;">16.1</td>
<td style="text-align: right;">20.2</td>
<td style="text-align: right;">25.8</td>
<td style="text-align: right;">34.5</td>
<td style="text-align: right;">43.6</td>
<td style="text-align: right;">52.4</td>
<td style="text-align: right;">58.6</td>
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">47.6</td>
<td style="text-align: right;">36.4</td>
<td style="text-align: right;">25.4</td>
<td style="text-align: right;">17.4</td>
<td style="text-align: right;">36.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">CT</td>
<td style="text-align: left;">Hartford</td>
<td style="text-align: right;">15.8</td>
<td style="text-align: right;">18.6</td>
<td style="text-align: right;">28.1</td>
<td style="text-align: right;">37.5</td>
<td style="text-align: right;">47.6</td>
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">62.2</td>
<td style="text-align: right;">60.4</td>
<td style="text-align: right;">51.8</td>
<td style="text-align: right;">40.7</td>
<td style="text-align: right;">32.8</td>
<td style="text-align: right;">21.3</td>
<td style="text-align: right;">39.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DE</td>
<td style="text-align: left;">Wilmington</td>
<td style="text-align: right;">22.4</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">33.1</td>
<td style="text-align: right;">41.8</td>
<td style="text-align: right;">52.2</td>
<td style="text-align: right;">61.6</td>
<td style="text-align: right;">67.1</td>
<td style="text-align: right;">65.9</td>
<td style="text-align: right;">58.2</td>
<td style="text-align: right;">45.7</td>
<td style="text-align: right;">37.0</td>
<td style="text-align: right;">27.6</td>
<td style="text-align: right;">44.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">DC</td>
<td style="text-align: left;">Washington</td>
<td style="text-align: right;">26.8</td>
<td style="text-align: right;">29.1</td>
<td style="text-align: right;">37.7</td>
<td style="text-align: right;">46.4</td>
<td style="text-align: right;">56.6</td>
<td style="text-align: right;">66.5</td>
<td style="text-align: right;">71.4</td>
<td style="text-align: right;">70.0</td>
<td style="text-align: right;">62.5</td>
<td style="text-align: right;">50.3</td>
<td style="text-align: right;">41.1</td>
<td style="text-align: right;">31.7</td>
<td style="text-align: right;">49.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FL</td>
<td style="text-align: left;">Jacksonville</td>
<td style="text-align: right;">40.5</td>
<td style="text-align: right;">43.3</td>
<td style="text-align: right;">49.2</td>
<td style="text-align: right;">54.9</td>
<td style="text-align: right;">62.1</td>
<td style="text-align: right;">69.1</td>
<td style="text-align: right;">71.9</td>
<td style="text-align: right;">71.8</td>
<td style="text-align: right;">69.0</td>
<td style="text-align: right;">59.3</td>
<td style="text-align: right;">50.2</td>
<td style="text-align: right;">43.4</td>
<td style="text-align: right;">57.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">FL</td>
<td style="text-align: left;">Miami</td>
<td style="text-align: right;">59.2</td>
<td style="text-align: right;">60.4</td>
<td style="text-align: right;">64.2</td>
<td style="text-align: right;">67.8</td>
<td style="text-align: right;">72.1</td>
<td style="text-align: right;">75.1</td>
<td style="text-align: right;">76.2</td>
<td style="text-align: right;">76.7</td>
<td style="text-align: right;">75.9</td>
<td style="text-align: right;">72.1</td>
<td style="text-align: right;">66.7</td>
<td style="text-align: right;">61.5</td>
<td style="text-align: right;">69.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GA</td>
<td style="text-align: left;">Atlanta</td>
<td style="text-align: right;">31.5</td>
<td style="text-align: right;">34.5</td>
<td style="text-align: right;">42.5</td>
<td style="text-align: right;">50.2</td>
<td style="text-align: right;">58.7</td>
<td style="text-align: right;">66.2</td>
<td style="text-align: right;">69.5</td>
<td style="text-align: right;">69.0</td>
<td style="text-align: right;">63.5</td>
<td style="text-align: right;">51.9</td>
<td style="text-align: right;">42.8</td>
<td style="text-align: right;">35.0</td>
<td style="text-align: right;">51.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">HI</td>
<td style="text-align: left;">Honolulu</td>
<td style="text-align: right;">65.6</td>
<td style="text-align: right;">65.4</td>
<td style="text-align: right;">67.2</td>
<td style="text-align: right;">68.7</td>
<td style="text-align: right;">70.3</td>
<td style="text-align: right;">72.2</td>
<td style="text-align: right;">73.5</td>
<td style="text-align: right;">74.2</td>
<td style="text-align: right;">73.5</td>
<td style="text-align: right;">72.3</td>
<td style="text-align: right;">70.3</td>
<td style="text-align: right;">67.0</td>
<td style="text-align: right;">70.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ID</td>
<td style="text-align: left;">Boise</td>
<td style="text-align: right;">21.6</td>
<td style="text-align: right;">27.5</td>
<td style="text-align: right;">31.9</td>
<td style="text-align: right;">36.7</td>
<td style="text-align: right;">43.9</td>
<td style="text-align: right;">52.1</td>
<td style="text-align: right;">57.7</td>
<td style="text-align: right;">56.8</td>
<td style="text-align: right;">48.2</td>
<td style="text-align: right;">39.0</td>
<td style="text-align: right;">31.1</td>
<td style="text-align: right;">22.5</td>
<td style="text-align: right;">39.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">IL</td>
<td style="text-align: left;">Chicago</td>
<td style="text-align: right;">12.9</td>
<td style="text-align: right;">17.2</td>
<td style="text-align: right;">28.5</td>
<td style="text-align: right;">38.6</td>
<td style="text-align: right;">47.7</td>
<td style="text-align: right;">57.5</td>
<td style="text-align: right;">62.6</td>
<td style="text-align: right;">61.6</td>
<td style="text-align: right;">53.9</td>
<td style="text-align: right;">42.2</td>
<td style="text-align: right;">31.6</td>
<td style="text-align: right;">19.1</td>
<td style="text-align: right;">39.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">IL</td>
<td style="text-align: left;">Peoria</td>
<td style="text-align: right;">13.2</td>
<td style="text-align: right;">17.7</td>
<td style="text-align: right;">29.8</td>
<td style="text-align: right;">40.8</td>
<td style="text-align: right;">50.9</td>
<td style="text-align: right;">60.7</td>
<td style="text-align: right;">65.4</td>
<td style="text-align: right;">63.1</td>
<td style="text-align: right;">55.2</td>
<td style="text-align: right;">43.1</td>
<td style="text-align: right;">32.5</td>
<td style="text-align: right;">19.3</td>
<td style="text-align: right;">41.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">IN</td>
<td style="text-align: left;">Indianapolis</td>
<td style="text-align: right;">17.2</td>
<td style="text-align: right;">20.9</td>
<td style="text-align: right;">31.9</td>
<td style="text-align: right;">41.5</td>
<td style="text-align: right;">51.7</td>
<td style="text-align: right;">61.0</td>
<td style="text-align: right;">65.2</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">55.6</td>
<td style="text-align: right;">43.5</td>
<td style="text-align: right;">34.1</td>
<td style="text-align: right;">23.2</td>
<td style="text-align: right;">42.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">IA</td>
<td style="text-align: left;">Des Moines</td>
<td style="text-align: right;">10.7</td>
<td style="text-align: right;">15.6</td>
<td style="text-align: right;">27.6</td>
<td style="text-align: right;">40.0</td>
<td style="text-align: right;">51.5</td>
<td style="text-align: right;">61.2</td>
<td style="text-align: right;">66.5</td>
<td style="text-align: right;">63.6</td>
<td style="text-align: right;">54.5</td>
<td style="text-align: right;">42.7</td>
<td style="text-align: right;">29.9</td>
<td style="text-align: right;">16.1</td>
<td style="text-align: right;">40.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">KS</td>
<td style="text-align: left;">Wichita</td>
<td style="text-align: right;">19.2</td>
<td style="text-align: right;">23.7</td>
<td style="text-align: right;">33.6</td>
<td style="text-align: right;">44.5</td>
<td style="text-align: right;">54.3</td>
<td style="text-align: right;">64.6</td>
<td style="text-align: right;">69.9</td>
<td style="text-align: right;">67.9</td>
<td style="text-align: right;">59.2</td>
<td style="text-align: right;">46.6</td>
<td style="text-align: right;">33.9</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">45.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">KY</td>
<td style="text-align: left;">Louisville</td>
<td style="text-align: right;">23.2</td>
<td style="text-align: right;">26.5</td>
<td style="text-align: right;">36.2</td>
<td style="text-align: right;">45.4</td>
<td style="text-align: right;">54.7</td>
<td style="text-align: right;">62.9</td>
<td style="text-align: right;">67.3</td>
<td style="text-align: right;">65.8</td>
<td style="text-align: right;">58.7</td>
<td style="text-align: right;">45.8</td>
<td style="text-align: right;">37.3</td>
<td style="text-align: right;">28.6</td>
<td style="text-align: right;">46.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">LA</td>
<td style="text-align: left;">New Orleans</td>
<td style="text-align: right;">41.8</td>
<td style="text-align: right;">44.4</td>
<td style="text-align: right;">51.6</td>
<td style="text-align: right;">58.4</td>
<td style="text-align: right;">65.2</td>
<td style="text-align: right;">70.8</td>
<td style="text-align: right;">73.1</td>
<td style="text-align: right;">72.8</td>
<td style="text-align: right;">69.5</td>
<td style="text-align: right;">58.7</td>
<td style="text-align: right;">51.0</td>
<td style="text-align: right;">44.8</td>
<td style="text-align: right;">58.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ME</td>
<td style="text-align: left;">Portland</td>
<td style="text-align: right;">11.4</td>
<td style="text-align: right;">13.5</td>
<td style="text-align: right;">24.5</td>
<td style="text-align: right;">34.1</td>
<td style="text-align: right;">43.4</td>
<td style="text-align: right;">52.1</td>
<td style="text-align: right;">58.3</td>
<td style="text-align: right;">57.1</td>
<td style="text-align: right;">48.9</td>
<td style="text-align: right;">38.3</td>
<td style="text-align: right;">30.4</td>
<td style="text-align: right;">17.8</td>
<td style="text-align: right;">35.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">MD</td>
<td style="text-align: left;">Baltimore</td>
<td style="text-align: right;">23.4</td>
<td style="text-align: right;">25.9</td>
<td style="text-align: right;">34.1</td>
<td style="text-align: right;">42.5</td>
<td style="text-align: right;">52.6</td>
<td style="text-align: right;">61.8</td>
<td style="text-align: right;">66.8</td>
<td style="text-align: right;">65.7</td>
<td style="text-align: right;">58.4</td>
<td style="text-align: right;">45.9</td>
<td style="text-align: right;">37.1</td>
<td style="text-align: right;">28.2</td>
<td style="text-align: right;">45.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MA</td>
<td style="text-align: left;">Boston</td>
<td style="text-align: right;">21.6</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">31.3</td>
<td style="text-align: right;">40.2</td>
<td style="text-align: right;">49.8</td>
<td style="text-align: right;">59.1</td>
<td style="text-align: right;">65.1</td>
<td style="text-align: right;">64.0</td>
<td style="text-align: right;">56.8</td>
<td style="text-align: right;">46.9</td>
<td style="text-align: right;">38.3</td>
<td style="text-align: right;">26.7</td>
<td style="text-align: right;">43.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">MI</td>
<td style="text-align: left;">Detroit</td>
<td style="text-align: right;">15.6</td>
<td style="text-align: right;">17.6</td>
<td style="text-align: right;">27.0</td>
<td style="text-align: right;">36.8</td>
<td style="text-align: right;">47.1</td>
<td style="text-align: right;">56.3</td>
<td style="text-align: right;">61.3</td>
<td style="text-align: right;">59.6</td>
<td style="text-align: right;">52.5</td>
<td style="text-align: right;">40.9</td>
<td style="text-align: right;">32.2</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">39.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MI</td>
<td style="text-align: left;">Sault Ste. Marie</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">4.8</td>
<td style="text-align: right;">15.3</td>
<td style="text-align: right;">28.4</td>
<td style="text-align: right;">38.4</td>
<td style="text-align: right;">45.5</td>
<td style="text-align: right;">51.3</td>
<td style="text-align: right;">51.3</td>
<td style="text-align: right;">44.3</td>
<td style="text-align: right;">36.2</td>
<td style="text-align: right;">25.9</td>
<td style="text-align: right;">11.8</td>
<td style="text-align: right;">29.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">MN</td>
<td style="text-align: left;">Duluth</td>
<td style="text-align: right;">-2.2</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">15.7</td>
<td style="text-align: right;">28.9</td>
<td style="text-align: right;">39.6</td>
<td style="text-align: right;">48.5</td>
<td style="text-align: right;">55.1</td>
<td style="text-align: right;">53.3</td>
<td style="text-align: right;">44.5</td>
<td style="text-align: right;">35.1</td>
<td style="text-align: right;">21.5</td>
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">29.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MN</td>
<td style="text-align: left;">Minneapolis-St.&nbsp;Paul</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">9.2</td>
<td style="text-align: right;">22.7</td>
<td style="text-align: right;">36.2</td>
<td style="text-align: right;">47.6</td>
<td style="text-align: right;">57.6</td>
<td style="text-align: right;">63.1</td>
<td style="text-align: right;">60.3</td>
<td style="text-align: right;">50.3</td>
<td style="text-align: right;">38.8</td>
<td style="text-align: right;">25.2</td>
<td style="text-align: right;">10.2</td>
<td style="text-align: right;">35.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">MS</td>
<td style="text-align: left;">Jackson</td>
<td style="text-align: right;">32.7</td>
<td style="text-align: right;">35.7</td>
<td style="text-align: right;">44.1</td>
<td style="text-align: right;">51.9</td>
<td style="text-align: right;">60.0</td>
<td style="text-align: right;">67.1</td>
<td style="text-align: right;">70.5</td>
<td style="text-align: right;">69.7</td>
<td style="text-align: right;">63.7</td>
<td style="text-align: right;">50.3</td>
<td style="text-align: right;">42.3</td>
<td style="text-align: right;">36.1</td>
<td style="text-align: right;">52.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MO</td>
<td style="text-align: left;">Kansas City</td>
<td style="text-align: right;">16.7</td>
<td style="text-align: right;">21.8</td>
<td style="text-align: right;">32.6</td>
<td style="text-align: right;">43.8</td>
<td style="text-align: right;">53.9</td>
<td style="text-align: right;">63.1</td>
<td style="text-align: right;">68.2</td>
<td style="text-align: right;">65.7</td>
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">45.7</td>
<td style="text-align: right;">33.6</td>
<td style="text-align: right;">21.9</td>
<td style="text-align: right;">43.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">MO</td>
<td style="text-align: left;">St.&nbsp;Louis</td>
<td style="text-align: right;">20.8</td>
<td style="text-align: right;">25.1</td>
<td style="text-align: right;">35.5</td>
<td style="text-align: right;">46.4</td>
<td style="text-align: right;">56.0</td>
<td style="text-align: right;">65.7</td>
<td style="text-align: right;">70.4</td>
<td style="text-align: right;">67.9</td>
<td style="text-align: right;">60.5</td>
<td style="text-align: right;">48.3</td>
<td style="text-align: right;">37.7</td>
<td style="text-align: right;">26.0</td>
<td style="text-align: right;">46.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT</td>
<td style="text-align: left;">Great Falls</td>
<td style="text-align: right;">11.6</td>
<td style="text-align: right;">17.2</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: right;">31.9</td>
<td style="text-align: right;">40.9</td>
<td style="text-align: right;">48.6</td>
<td style="text-align: right;">53.2</td>
<td style="text-align: right;">52.2</td>
<td style="text-align: right;">43.5</td>
<td style="text-align: right;">35.8</td>
<td style="text-align: right;">24.3</td>
<td style="text-align: right;">14.6</td>
<td style="text-align: right;">33.1</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-2_3" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="sec-2_3"><span class="header-section-number">2.3</span> 对数据集进行汇总</h2>
<p>如今的实验涉及到的数据规模通常比较大。例如，为了了解某些行为习惯对健康的影响，1951 年，医学统计学家 R. Doll 和 A. B. Hill 向英国的所有医生发起了一项调查问卷，并且回收到了大约 40,000 份问卷。问卷的问题涉及年龄、饮食习惯和吸烟习惯。随后，Doll 和 Hill 对问卷回复者进行了为期 10 年的跟踪调查，并对其中的死亡人员的死因进行了监测。为了感知如此大量的数据，需要选择适当的方法对数据进行总结。在本节中，我们将介绍一些汇总数据的统计指标，其中统计指标是一个数值，数据集决定了其统计指标的具体数值。</p>
<div class="callout callout-style-default callout-note callout-titled" title="The British Doctors’ Study (1951–2001)">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The British Doctors’ Study (1951–2001)
</div>
</div>
<div class="callout-body-container callout-body">
<p>1951 年，R. Doll 和 A. B. Hill 向英国的 6 万名医生发出调查问卷，并跟踪他们的吸烟情况和健康情况。根据跟踪情况，Doll 和 Hill 提交了两份报告（统称为英国医生研究）：1954 年提交的 <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2085438/">The Mortality of Doctors in Relation to Their Smoking Habits</a> 和 1956 年提交的 <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2035864/">Lung Cancer and Other Causes of Death in Relation to Smoking</a>。报告中公布了吸烟与疾病发病率的确凿科学证据，报告一经发布就震惊了世界，就连 Doll 本人也吓得戒掉了自己的重度烟瘾。</p>
<p>针对英国医生的跟踪调查一直持续到 2001 年，当时参与问卷的大多数参与者已经故去，并且还在世的最年轻的参与者也已经七十多岁了。在近 50 年的研究中，研究人员公布了多项报告，这些报告强化了公众对吸烟会导致呼吸道疾病和心血管疾病的认知。</p>
<p>关于这项研究的内容可以参阅：<a href="https://embryo.asu.edu/pages/british-doctors-study-1951-2001">The British Doctors’ Study (1951–2001)</a>。</p>
</div>
</div>
<section id="sec-2_3_1" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="sec-2_3_1"><span class="header-section-number">2.3.1</span> 样本均值，样本中位数和样本众数</h3>
<p>在这一节中，我们将介绍一些用于描述数据集中心（<em>center</em>）的统计指标。首先，假设我们有一个由 <span class="math inline">\(n\)</span> 个数据构成的数据集：<span class="math inline">\(x_1，x_2，...，x_n\)</span> 。这 <span class="math inline">\(n\)</span> 个数的算术平均数（<em>arithmetic average</em>）就是样本均值（<em>sample mean</em>）。</p>
<div id="def-sample_mean" class="theorem definition">
<p><span class="theorem-title"><strong>定义 2.1</strong></span> <strong>样本均值</strong>（<em>sample mean</em>） <span class="math inline">\(\overline{x}\)</span> 的定义如下：</p>
<p><span id="eq-2_3_1_001"><span class="math display">\[
\overline{x} = \frac{\sum_{i=1}^{n}{x_i}}{n}
\tag{2.1}\]</span></span></p>
</div>
<p>如果 <span class="math inline">\(a\)</span>，<span class="math inline">\(b\)</span> 为常数，并且</p>
<p><span class="math inline">\(y_i = ax_i+b, i\in[1,n]\)</span></p>
<p>那么，数据集 <span class="math inline">\(y_1,...,y_n\)</span> 的样本均值为：</p>
<p><span id="eq-2_3_1_002"><span class="math display">\[
\begin{align}
\overline{y}&amp;=\frac{\sum_{i=1}^{n}{ax_i+b}}{n} \\
&amp;= \frac{\sum_{i=1}^{n}{ax_i}}{n} + \frac{\sum_{i=1}^{n}{b}}{n} \\
&amp;= a\overline{x}+b
\end{align}
\tag{2.2}\]</span></span></p>
<div id="exr-2_3_a" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.1</strong></span> 2004 年至 2013 年，美国高尔夫球大师赛的获胜分数如下：</p>
<p><span class="math inline">\(280, 278, 272, 276, 281, 279, 276, 281, 289, 280\)</span></p>
<p>请计算如上分数的 <strong>样本均值</strong>。</p>
</div>
<div id="sol-2_3_a" class="proof solution">
<p><span class="proof-title"><em>答案 2.1</em>. </span>比起直接将这些分数相加，对于每个分数而言，先减去 280 以获得新值 <span class="math inline">\(y_i = x_i - 280\)</span> 会更容易计算其样本均值：</p>
<p><span class="math inline">\(0, −2, −8, −4, 1, −1, −4, 1, 9, 0\)</span></p>
</div>
<p><span class="math inline">\(y_i\)</span> 的算术平均数为 <span class="math inline">\(-\frac{8}{10}\)</span>，因此 <span class="math inline">\(\overline{y}=-\frac{8}{10}\)</span>，所以 <span class="math inline">\(\overline{x}=\overline{y}+280=279.2\)</span>。</p>
<p>有时，我们想要确定一个用频率表来描述的数据集的样本均值，在频率表中存在 <span class="math inline">\(k\)</span> 个不同的值 <span class="math inline">\(v_1,...,v_k\)</span>，以及它们对应的频率 <span class="math inline">\(f_1,...,f_k\)</span>。该数据集由 <span class="math inline">\(n=\sum_{i=1}^{k}{f_i}\)</span> 个值组成，其中值 <span class="math inline">\(v_i\)</span> 出现 <span class="math inline">\(f_i\)</span> 次，因此这 <span class="math inline">\(n\)</span> 个数据的样本均值为：</p>
<p><span id="eq-2_3-1_003"><span class="math display">\[
\overline{x}=\sum_{i=1}^{k}{\frac{v_if_i}{n}}
\tag{2.3}\]</span></span></p>
<p>对上述计算进行展开，得到：</p>
<p><span class="math inline">\(\overline{x}=\frac{f_1}{n}{v_1} + \frac{f_2}{n}{v_2} + ... + \frac{f_k}{n}{v_k}\)</span></p>
<p>因此，样本均值是数据集中不同值的加权平均数，其中 <span class="math inline">\(v_i\)</span> 的权重等于 <span class="math inline">\(n\)</span> 个数据中值等于 <span class="math inline">\(v_i\)</span> 的数据的占比。</p>
<div id="exr-2_3_b" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.2</strong></span> 如下的频率表给出了青少年交响乐团的成员年龄分布。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span><span class="fu">data.frame</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">20</span>),</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Frequency =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">11</span>, <span class="dv">9</span>, <span class="dv">14</span>, <span class="dv">13</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align =</span> <span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Age</th>
<th style="text-align: left;">Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">15</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">16</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17</td>
<td style="text-align: left;">11</td>
</tr>
<tr class="even">
<td style="text-align: left;">18</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">19</td>
<td style="text-align: left;">14</td>
</tr>
<tr class="even">
<td style="text-align: left;">20</td>
<td style="text-align: left;">13</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>计算该交响乐团中 54 位成员的年龄的样本均值。</p>
</div>
<div id="sol-2_3_b" class="proof solution">
<p><span class="proof-title"><em>答案 2.2</em>. </span><span class="math inline">\(\overline{x} = (15·2 + 16·5 + 17·11 + 18·9 + 19·14 + 20·13) / 54 ≈ 18.24\)</span></p>
</div>
<p>另一个用于表示数据集中心的统计指标是样本中位数（<em>sample median</em>），简单来说，中位数就是当数据集中的数据按递增顺序排列后，位于数据集中间的数。</p>
<div id="def-sample_median" class="theorem definition">
<p><span class="theorem-title"><strong>定义 2.2</strong></span> 把大小为 <span class="math inline">\(n\)</span> 的数据集中的数据从小到大排序。如果 <span class="math inline">\(n\)</span> 是奇数，则 <strong>样本中位数</strong> 就是第 <span class="math inline">\(\frac{(n + 1)}{2}\)</span> 个数；如果 <span class="math inline">\(n\)</span> 是偶数，则 <strong>样本中位数</strong> 就是第 <span class="math inline">\(\frac{n}{2}\)</span> 个数和第 <span class="math inline">\(\frac{n}{2} + 1\)</span> 个数的平均值。</p>
</div>
<p>因此，3 个数的样本中位数是其第 2 小的数；4 个数的样本中位数是第 2 小和第 3 小的数的平均值。</p>
<div id="exr-2_3_c" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.3</strong></span> 找出 <a href="#exr-2_3_b" class="quarto-xref">练习&nbsp;<span>2.2</span></a> 中的样本中位数。</p>
</div>
<div id="sol-2_3_c" class="proof solution">
<p><span class="proof-title"><em>答案 2.3</em>. </span>由于有 54 个数，因此当数据按递增顺序排列后，样本中位数是第 27 个数和第 28 个数的平均值。因此，样本中位数是 18.5。</p>
</div>
<p>样本均值和样本中位数都是描述数据集中心趋势的、非常有用的统计指标。样本均值的计算会用到数据集中的所有数据，并且容易受到数据集中极端值（远远大于或小于数据集中大多数数据的数据）的影响。样本中位数的计算只会到数据集中的一个或两个数据，因此样本中位数不受数据集中的极端值的影响。样本均值更好还是样本中位数更好，取决于我们试图从数据中学习什么。</p>
<ul>
<li>如果政府有统一的个人所得税税率，并试图估计税收总额，那么可以使用居民收入的样本均值作为统计量指标。</li>
<li>如果政府正在考虑建造保障房，并希望确定能够负担得起这种住房的居民人口比例，那么更好的方式则是使用样本中位数。</li>
</ul>
<div id="exr-2_3_d" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.4</strong></span> 1972 年，Hoel, D. G. 发表了一篇论文 <a href="https://pubmed.ncbi.nlm.nih.gov/4556703/">A representation of mor- tality data by competing risks</a>。在这篇论文中，Hoel 首先让一组 5 周大的小白鼠接受 300rad 的辐射剂量，然后把这些小白鼠分成两组：第一组置于无菌环境中，第二组则置于常规的实验室环境。随后，Hoel 观察并记录这些小白鼠的生存天数。以下的茎叶图（茎以百天为单位）记录了因胸腺淋巴瘤死亡的小白鼠的数据：第一张图是生活在无菌条件下的小白鼠，第二张图是生活在普通实验室条件下的小白鼠。</p>
<div id="tbl-mice" class="quarto-layout-panel anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mice-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.6: 不同环境下的小白鼠实验
</figcaption>
<div aria-describedby="tbl-mice-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<table class="caption-top table">
<caption>无菌环境下的小白鼠</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Stem</th>
<th style="text-align: left;">Leaf</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">58, 92, 93, 94, 95</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">02, 12, 15, 29, 30, 37, 40, 44, 47, 59</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">01, 01, 21, 37</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">15, 34, 44, 85, 96</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">29,37</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">07</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">00</td>
</tr>
</tbody>
</table>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<table class="caption-top table">
<caption>正常实验室环境下的小白鼠</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Stem</th>
<th style="text-align: left;">Leaf</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">59, 89, 91, 98</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">35, 45, 50, 56, 61, 65, 66, 80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">43, 56, 83</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">03, 14, 28, 32</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</figure>
</div>
<p>计算两组小白鼠的生存时间的样本均值和样本中位数。</p>
</div>
<div id="sol-2_3_d" class="proof solution">
<p><span class="proof-title"><em>答案 2.4</em>. </span>从茎叶图中可以清晰地看出，无菌环境下小白鼠的样本均值（344.07）大于常规实验室环境下小白鼠的样本均值（292.32）。另一方面，由于无菌环境下的小白鼠有 29 个数据值，所以其样本中位数是第 15-最大 的数据值，即 259。另一组小白鼠的样本中位数是第 10-最大 的数据值，即 265。因此，尽管第一组数据的样本均值大于第二组，但这两组数据的样本中位数却大致基本一致。其中的原因在于，第一组数据中大于 500 的 5 个数据对其样本均值的影响较大，但对其样本中位数的影响要小得多。事实上，如果把大于 500 的 5 个数据替换为任何其他五个大于或等于 259 的数据，其样本中位数将保持不变。从茎叶图来看，无菌环境可能延长了五只寿命最长的小白鼠的寿命，但无法确定无菌环境是否对其他小白鼠的寿命产生了什么别的影响。</p>
</div>
<p>另一个用于表示数据集中心趋势的统计指标是 <strong>样本众数</strong>（<em>sample mode</em>）。在数据集中，出现频率最高的值为 <strong>样本众数</strong>。如果出现频率最高的值有多个，那么所有出现频率最高的这些数值都是 <strong>样本众数</strong>。</p>
<div id="exr-2_3_e" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.5</strong></span> 以下的频率表为抛 40 次骰子获得的结果。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Frequency =</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align =</span> <span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Value</th>
<th style="text-align: left;">Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">7</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>计算其样本均值</li>
<li>计算其样本中位数</li>
<li>计算器样本众数</li>
</ul>
</div>
<div id="sol-2_3_e" class="proof solution">
<p><span class="proof-title"><em>答案 2.5</em>. </span></p>
<ul>
<li>样本均值为 <span class="math inline">\(\overline{x}=(9 + 16 + 15 + 20 + 30 + 42) / 40 = 3.05\)</span></li>
<li>样本中位数为 第 20-最小 和 第 21-最小 的平均数 3</li>
<li>样本众数为 1</li>
</ul>
</div>
</section>
<section id="sec-2_3_2" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="sec-2_3_2"><span class="header-section-number">2.3.2</span> 样本方差和样本标准差</h3>
<p>虽然我们已经介绍了用于描述数据集中心趋势的统计指标，但我们也对描述数据波动的统计量感兴趣。可以通过计算数据值与样本均值之间距离的平方的平均值来描述数据集中数据的波动，这就是样本方差（<em>sample variance</em>）。出于技术原因，在计算样本方差时，需要除以 <span class="math inline">\(n-1\)</span> 而不是 <span class="math inline">\(n\)</span>（<span class="math inline">\(n\)</span> 是数据集的大小）。</p>
<div id="def-variance" class="theorem definition">
<p><span class="theorem-title"><strong>定义 2.3</strong></span> 对于数据集 <span class="math inline">\({x_1,...,x_n}\)</span>，其 <strong>样本方差</strong> <span class="math inline">\(s^2\)</span> 的定义如下：</p>
<p><span id="eq-2_3_2-001"><span class="math display">\[
s^2 = \frac{\sum_{i=1}^{n}{(x_i-\overline{x})^2}}{n - 1}
\tag{2.4}\]</span></span></p>
</div>
<div id="exr-2_3_f" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.6</strong></span> 计算如下两个数据集的样本方差：</p>
<ul>
<li>A: 3, 4, 6, 7, 10</li>
<li>B: -20, 5, 15, 24</li>
</ul>
</div>
<div id="sol-2_3_f" class="proof solution">
<p><span class="proof-title"><em>答案 2.6</em>. </span>对于 A 而言，其样本均值 <span class="math inline">\(\overline{x} = (3 + 4 + 6 + 7 + 10) / 5 = 6\)</span>，因此，其样本方差为： <span class="math inline">\(s^2 = [(−3)^2 + (−2)^2 + 0^2 + 1^2 + 4^2] / 4 = 7.5\)</span></p>
<p>对于 B 而言，其样本均值也是 6，因此，其样本方差为： <span class="math inline">\(s^2 = [(−26)^2 + (−1)^2 + 9^2 + (18)^2] / 3 ≈ 360.67\)</span></p>
</div>
<p>通过 <a href="#sol-2_3_f" class="quarto-xref">Solution&nbsp;<span>2.6</span></a> 可发现，虽然 A 和 B 的样本均值是一样的，但是 B 的样本方差远大于 A。</p>
<p>在计算样本方差时，会经常用到如下的数学等式：</p>
<p><span id="eq-2_3_2_002"><span class="math display">\[
\sum_{i=1}^{n}{(x_i-\overline{x})^2} = \sum_{i=1}^{n}{x_i^2} - n\overline{x}^2
\tag{2.5}\]</span></span></p>
<p><a href="#eq-2_3_2_002" class="quarto-xref">方程式&nbsp;<span>2.5</span></a> 的证明过程如下：</p>
<p><span class="math display">\[
\begin{align}  
\sum_{i=1}^{n}{(x_i-\overline{x})^2} &amp;= \sum_{i=1}^{n}{(x_i^2 - 2x_i\overline{x} + \overline{x}^2)} \\
&amp;=\sum_{i=1}^{n}{x_i^2} - 2\overline{x}\sum_{i=1}^{n}{x_i} + \sum_{i=1}^{n}{\overline{x}^2} \\
&amp;=\sum_{i=1}^{n}{x_i^2} - 2n\overline{x}^2 + n\overline{x}^2 \\
&amp;=\sum_{i=1}^{n}{x_i^2} - n\overline{x}^2
\end{align}
\]</span></p>
<p>如果 <span class="math inline">\(y_i = ax_i + b\)</span>，<span class="math inline">\(i = 1,...,n\)</span>，则 <span class="math inline">\(\overline{y} = a\overline{x} + b\)</span>，因此：</p>
<p><span class="math inline">\(\sum_{i=1}^{n}{(y_i - \overline{y})^2} = a^2\sum_{i=1}^{n}{(x_i-\overline{x})^2}\)</span></p>
<p>所以：</p>
<p><span id="eq-2_3_2_003"><span class="math display">\[
s_y^2 = a^2s_x^2
\tag{2.6}\]</span></span></p>
<p>换句话说，为数据集中的每个数据增加一个常数不会改变其样本方差；而让数据集中的每个数据乘以一个常数则会得到一个新的样本方差，新的样本方差等于原来的样本方差乘以该常数的平方。</p>
<div id="exr-2_3_g" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.7</strong></span> 下表给出了 1997 年至 2005 年间全球商业航空运输中导致人员死亡的事故数量。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Year=</span><span class="fu">seq</span>(<span class="dv">1997</span>, <span class="dv">2005</span>, <span class="at">by=</span><span class="dv">1</span>),</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Accidents =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">18</span>, <span class="dv">13</span>, <span class="dv">13</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">18</span>))</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align=</span><span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Year</th>
<th style="text-align: left;">Accidents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1997</td>
<td style="text-align: left;">25</td>
</tr>
<tr class="even">
<td style="text-align: left;">1998</td>
<td style="text-align: left;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1999</td>
<td style="text-align: left;">21</td>
</tr>
<tr class="even">
<td style="text-align: left;">2000</td>
<td style="text-align: left;">18</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2001</td>
<td style="text-align: left;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">2002</td>
<td style="text-align: left;">13</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2003</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">2004</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2005</td>
<td style="text-align: left;">18</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>根据如上的数据，计算航工事故的样本方差。</p>
</div>
<div id="sol-2_3_g" class="proof solution">
<p><span class="proof-title"><em>答案 2.7</em>. </span>将数据集中的数据都减去 18，我们得到一个新的数据集：</p>
<p><span class="math inline">\(y = \{7,2,3,0,−5,−5,−11,−9,0\}\)</span></p>
<p><span class="math inline">\(\overline{y} = \sum_{i=1}^{9}{y_i} / 9 = -2\)</span></p>
<p><span class="math inline">\(\sum_{i=1}^{9}{y_i^2} = 49 + 4 + 9 + 25 + 25 + 121 + 81 = 314\)</span></p>
<p>因为新的数据集的方差和原数据集是一样的，因此根据 <a href="#eq-2_3_2_002" class="quarto-xref">方程式&nbsp;<span>2.5</span></a>：</p>
<p><span class="math inline">\(s^2 = \frac{\sum_{i=1}^{9}{y_i^2} - n\overline{x}^2}{n - 1} = \frac{314 - 9·4}{8} = 34.75\)</span></p>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注释
</div>
</div>
<div class="callout-body-container callout-body">
<p>因为 <span class="math inline">\(y_i = x_i - 20\)</span>，因此，根据 <a href="#eq-2_3_2_003" class="quarto-xref">方程式&nbsp;<span>2.6</span></a>， <span class="math inline">\(y\)</span> 和 <span class="math inline">\(x\)</span> 的方差是一样的。</p>
</div>
</div>
<p>样本方差的平方根称之为 <strong>样本标准差</strong>（<em>sample standard deviation</em>）。</p>
<div id="def-ssd" class="theorem definition">
<p><span class="theorem-title"><strong>定义 2.4</strong></span> 样本标准差 <span class="math inline">\(s\)</span>的定义如下所示：</p>
<p><span id="eq-2_3_2_004"><span class="math display">\[
s = \sqrt{\frac{\sum_{i=1}^{n}{(x_i-\overline{x})^2}}{n - 1}}
\tag{2.7}\]</span></span></p>
</div>
</section>
<section id="sec-2_3_3" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="sec-2_3_3"><span class="header-section-number">2.3.3</span> 样本百分位数和箱线图</h3>
<p>简单来说，数据集的 <strong>样本<span class="math inline">\(100p\)</span>-百分位数</strong> 是指小于或等于数据集中 <span class="math inline">\(100p\%\)</span> 的数据所对应的数据值，其中 <span class="math inline">\(0 \le p \le 1\)</span>。</p>
<div id="def-2_3_3_pp" class="theorem definition">
<p><span class="theorem-title"><strong>定义 2.5</strong></span> <strong>样本<span class="math inline">\(100p\)</span>-百分位数</strong> 是数据集中的一个数据值，这个值满足至少 <span class="math inline">\(100p\%\)</span> 的数据小于或等于它，并且至少 <span class="math inline">\(100(1-p)\%\)</span> 的数据大于或等于它。如果存在两个数据值满足这个条件，那么该数据集的 <strong>样本<span class="math inline">\(100p\)</span>-百分位数</strong> 是这两个值的算术平均数。</p>
</div>
<p>为了确定大小为 <span class="math inline">\(n\)</span> 的数据集的样本<span class="math inline">\(100p\)</span>-百分位数，我们需要确定这样的数据值，以使得该值满足如下的条件：</p>
<ol type="1">
<li>至少有 <span class="math inline">\(np\)</span> 个数据小于或等于该值</li>
<li>至少有 <span class="math inline">\(n(1-p)\)</span> 个数据大于或等于该值</li>
</ol>
<p>为了计算样本<span class="math inline">\(100p\)</span>-百分位数，首先要对数据集进行升序排列。</p>
<ul>
<li>如果 <span class="math inline">\(np\)</span> 不是整数，那么唯一满足前述条件的数据值是数据从小到大排序后，位置大于 <span class="math inline">\(np\)</span> 的最小整数所对应的值。例如，如果 <span class="math inline">\(n=22\)</span>，<span class="math inline">\(p=0.8\)</span>，那么我们需要一个数据值，使得至少有 17.6 个数据小于或等于它，并且至少有 4.4 个数据大于或等于它。显然，只有第 18 小的值同时满足这两个条件，这就是 样本80-百分位数。</li>
<li>如果 <span class="math inline">\(np\)</span> 是整数，那么很容易发现 <span class="math inline">\(np\)</span> 和 <span class="math inline">\(np+1\)</span> 这两个位置的数据都满足前述条件，因此样本 <span class="math inline">\(100p\)</span>-百分位数就是这两个数据值的算术平均数。例如，如果我们想计算大小为 20 的数据集的 90-百分位数，那么第 18-小 和第 19-小 的值都会使得至少有 90% 的数据小于或等于它们，并且至少有 10% 的数据大于或等于它们。因此，90-百分位数是这两个值的平均数。</li>
</ul>
<div id="exr-2_3_h" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.8</strong></span> <a href="#tbl-us_pupulation" class="quarto-xref">表格&nbsp;<span>2.7</span></a> 列出了 2006 年美国人口最多的 25 个城市的人口数。对于这组数据，找出：</p>
<ul>
<li>样本10-百分位数</li>
<li>样本80-百分位数。</li>
</ul>
</div>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../misc/US_population.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align=</span><span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-us_pupulation" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-us_pupulation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.7: 2006 年 7 月，美国 25 个最大城市的人口数据
</figcaption>
<div aria-describedby="tbl-us_pupulation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Rank</th>
<th style="text-align: left;">City</th>
<th style="text-align: left;">Population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">New York, NY</td>
<td style="text-align: left;">8250567</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Los Angeles, CA</td>
<td style="text-align: left;">3849378</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Chicago, IL</td>
<td style="text-align: left;">2833321</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">Houston, TX</td>
<td style="text-align: left;">2144491</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">Phoenix, AR</td>
<td style="text-align: left;">1512986</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">Philadelphia, PA</td>
<td style="text-align: left;">1448394</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">San Antonio, TX</td>
<td style="text-align: left;">1296682</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">San Diego, CA</td>
<td style="text-align: left;">1256951</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">Dallas, TX</td>
<td style="text-align: left;">1232940</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">San Jose, CA</td>
<td style="text-align: left;">929936</td>
</tr>
<tr class="odd">
<td style="text-align: left;">11</td>
<td style="text-align: left;">Detroit, MI</td>
<td style="text-align: left;">918849</td>
</tr>
<tr class="even">
<td style="text-align: left;">12</td>
<td style="text-align: left;">Jacksonville, FL</td>
<td style="text-align: left;">794555</td>
</tr>
<tr class="odd">
<td style="text-align: left;">13</td>
<td style="text-align: left;">Indianapolis, IN</td>
<td style="text-align: left;">785597</td>
</tr>
<tr class="even">
<td style="text-align: left;">14</td>
<td style="text-align: left;">San Francisco, CA</td>
<td style="text-align: left;">744041</td>
</tr>
<tr class="odd">
<td style="text-align: left;">15</td>
<td style="text-align: left;">Columbus, OH</td>
<td style="text-align: left;">733203</td>
</tr>
<tr class="even">
<td style="text-align: left;">16</td>
<td style="text-align: left;">Austin, TX</td>
<td style="text-align: left;">709893</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17</td>
<td style="text-align: left;">Memphis, TN</td>
<td style="text-align: left;">670902</td>
</tr>
<tr class="even">
<td style="text-align: left;">18</td>
<td style="text-align: left;">Fort Worth, TX</td>
<td style="text-align: left;">653320</td>
</tr>
<tr class="odd">
<td style="text-align: left;">19</td>
<td style="text-align: left;">Baltimore, MD</td>
<td style="text-align: left;">640961</td>
</tr>
<tr class="even">
<td style="text-align: left;">20</td>
<td style="text-align: left;">Charlotte, NC</td>
<td style="text-align: left;">630478</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21</td>
<td style="text-align: left;">El Paso, TX</td>
<td style="text-align: left;">609415</td>
</tr>
<tr class="even">
<td style="text-align: left;">22</td>
<td style="text-align: left;">Milwaukee, WI</td>
<td style="text-align: left;">602782</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23</td>
<td style="text-align: left;">Boston, MA</td>
<td style="text-align: left;">590763</td>
</tr>
<tr class="even">
<td style="text-align: left;">24</td>
<td style="text-align: left;">Seattle, WA</td>
<td style="text-align: left;">582454</td>
</tr>
<tr class="odd">
<td style="text-align: left;">25</td>
<td style="text-align: left;">Washington, DC</td>
<td style="text-align: left;">581530</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div id="sol-2_3_h" class="proof solution">
<p><span class="proof-title"><em>答案 2.8</em>. </span></p>
<ul>
<li>因为样本的大小是 25，25·0.1 = 2.5，因此，样本10-百分位数就是样本第 3-小的数据，也就是 590763。</li>
<li>因为 25·0.8 = 20，因此，样本80-百分位数是第 20-小和第 21-小的算术平均数，<span class="math inline">\(\frac{1512986 + 1448394}{2}\)</span>，也就是 1480690。</li>
</ul>
</div>
<p>样本50-百分位数，就是样本中位数。样本25-百分位数、样本50-百分位数、样本75-百分位数一起构成了样本四分位数（<em>sample quartiles</em>）。</p>
<div id="def-2_3_quartiles" class="theorem definition">
<p><span class="theorem-title"><strong>定义 2.6</strong></span> 样本25-百分位数称之为 <strong>第一四分位数</strong>（<em>the first quartile</em>），样本50-百分位数称之为 <strong>样本中位数</strong> 或 <strong>第二四分位数</strong>（<em>the second quartile</em>），样本75-百分位数称之为 <strong>第三四分位数</strong>（<em>the third quartile</em>）</p>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注释
</div>
</div>
<div class="callout-body-container callout-body">
<p>有时，也会把样本四分位数称为下四分位数和上四分位数：下四分位数（25-百分位数），中位数（50-百分位数），上四分位数（75-百分位数）。</p>
</div>
</div>
<p>四分位数把数据集分为四个部分，大约 25% 的数据小于第一四分位数，25% 的数据位于第一四分位数和第二四分位数之间，25% 的数据位于第二四分位数和第三四分位数之间，剩余的 25% 的数据大于第三四分位数。</p>
<div id="exr-2_3_i" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.9</strong></span> 我们使用分贝（<em>dB</em>）来测量噪音。听力正常的人在安静环境下能听到的最弱的声音大约是 1dB，窃窃私语时的声音大约是 30dB，人们正常交谈时的声音大约是 70dB，收音机的音量大约是 100dB。当声音超过 120 dB 时，耳朵就开始感知到不适了。</p>
<p>曼哈顿中央车站外测量到的 36 个不同时间点的噪音水平如下所示：</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>曼哈顿中央车站噪音水平</strong></pre>
</div>
<div class="sourceCode" id="cb21" data-filename="曼哈顿中央车站噪音水平"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">82,</span> 89, 94, 110, 74, 122, 112, 95, 100, 78, 65, 60, 90, 83, 87, 75, 114, 85 69, 94, 124, 115, 107, 88, 97, 74, 72, 68, 83, 91, 90, 102, 77, 125, 108, 65</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>计算如上数据的四分位数。</p>
</div>
<div id="sol-2_3_i" class="proof solution">
<p><span class="proof-title"><em>答案 2.9</em>. </span>因为 <span class="math inline">\(n = 36\)</span>，所以四分位数对应的 <span class="math inline">\(np\)</span> 均为整数，因此其对应的四分位数值为第 <span class="math inline">\(np\)</span>-小和第 <span class="math inline">\((np+1)\)</span>-小的平均数。</p>
<ul>
<li>第一四分位数（<span class="math inline">\(p=0.25\)</span>）：第 9-小和第 10-小的平均值，也就是 74.5。</li>
<li>第二四分位数（<span class="math inline">\(p=0.5\)</span>）：第 18-小和第 19-小的平均值，也就是 89.5。</li>
<li>第三四分位数（<span class="math inline">\(p=0.75\)</span>）：第 27-小和第 28-小的平均值，也就是 104.5。</li>
</ul>
</div>
<p>我们经常用箱线图（<em>box plot</em>）绘制数据集的汇总统计指标。</p>
<ol type="1">
<li>在横坐标轴上绘制一条从最小值到最大值的直线段。</li>
<li>在这条直线上叠加一个 “箱子”，该箱子从第一四分位数开始一直延伸到第三四分位数，并用垂直线表示第二四分位数。</li>
</ol>
<p>例如，<a href="#tbl-StartingYearlySalaries" class="quarto-xref">表格&nbsp;<span>2.1</span></a> 中给出的 42 个起薪数据覆盖了从最低值 57000$ 到最高值 70000$ 之间的数。第一四分位数（第 11-小的值）是 60000<span class="math inline">\(，第二四分位数（第 21-小和第 22-小的平均值）是 61500\)</span>，第三四分位数（第 32-小的值）是 64000$。该数据集的箱线图如 <a href="#fig-StartingYearlySalaries_box" class="quarto-xref">图&nbsp;<span>2.7</span></a> 所示。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>ss <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">57</span>, <span class="dv">58</span>, <span class="dv">59</span>, <span class="dv">60</span>, <span class="dv">61</span>, <span class="dv">62</span>, <span class="dv">63</span>, <span class="dv">64</span>, <span class="dv">66</span>, <span class="dv">67</span>, <span class="dv">70</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">value=</span><span class="fu">rep</span>(ss, f))</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>value, <span class="at">y=</span><span class="st">""</span>)) <span class="sc">+</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Starting Salary"</span>, <span class="at">y=</span><span class="st">""</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-StartingYearlySalaries_box" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-StartingYearlySalaries_box-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-StartingYearlySalaries_box-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-StartingYearlySalaries_box-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.7: 起薪线图
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注释
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="#fig-StartingYearlySalaries_box" class="quarto-xref">图&nbsp;<span>2.7</span></a> 中的箱线图和文中对各四分位数的计算并不一致，这主要是因为该图使用 R 的 <code>ggplot2</code> 包绘制，对于该包而言，在绘制箱线图时，会剔除数据中可能的离群点（<span class="math inline">\(\pm 1.5IQR\)</span>），离群点在图中显示为一个点。</p>
</div>
</div>
<p>箱线图上直线的长度等于数据集中的最大值减去数据集中的最小值，称为数据范围。箱线图中箱子的长度等于第三四分位数减去第一四分位数，称为四分位距（<em>IQR: inter quaritle range</em>）。</p>
</section>
</section>
<section id="sec-2_4" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="sec-2_4"><span class="header-section-number">2.4</span> 切比雪夫不等式</h2>
<p>设 <span class="math inline">\(\overline {x}\)</span> 和 <span class="math inline">\(s\)</span> 分别是数据集的样本均值和样本标准差。假设 <span class="math inline">\(s &gt; 0\)</span>，切比雪夫不等式表明，对于 <span class="math inline">\(\forall k \ge 1\)</span> ，至少有 <span class="math inline">\((100 \cdot (1−\frac {1}{k^2})) \%\)</span> 的数据位于 <span class="math inline">\([ \overline {x} − ks, \overline {x} + ks]\)</span> 的区间内。</p>
<ul>
<li>令 <span class="math inline">\(k = \frac {3}{2}\)</span>，根据切比雪夫不等式，至少有 <span class="math inline">\(55.56\%\)</span> 的数据会位于 <span class="math inline">\(\overline {x} \pm 1.5s\)</span> 的范围内。</li>
<li>令 <span class="math inline">\(k=2\)</span>，则至少有 <span class="math inline">\(75\%\)</span> 的数据位于 <span class="math inline">\(\overline {x} \pm 2s\)</span> 的范围内。</li>
<li>令 <span class="math inline">\(k=3\)</span>，则至少有 <span class="math inline">\(88.9\%\)</span> 的数据位于 <span class="math inline">\(\overline {x} \pm 3s\)</span> 的范围内。</li>
</ul>
<section id="切比雪夫不等式" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="切比雪夫不等式"><span class="header-section-number">2.4.1</span> 切比雪夫不等式</h3>
<p>对于数据集 <span class="math inline">\(\{x_1,...,x_n\}\)</span> 而言，令 <span class="math inline">\(\overline{x}\)</span> 和 <span class="math inline">\(s\)</span> 分别是其样本均值和样本标准差，其中 <span class="math inline">\(s \gt 0\)</span>。</p>
<p>令 <span class="math inline">\(S_k=\{|x_i - \overline{x}| \lt ks, i \in [1, n]\}\)</span>，即 <span class="math inline">\(S_k\)</span> 为距离 <span class="math inline">\(\overline{x}\)</span> <span class="math inline">\(k\)</span> 个标准差以内的数据构成的集合。</p>
<p>令 <span class="math inline">\(|S_k|\)</span> 为集合 <span class="math inline">\(S_k\)</span> 中的元素个数。</p>
<p>则有：</p>
<p><span id="eq-2_4_001"><span class="math display">\[
\frac{|S_k|}{n} \ge {1 - \frac{n-1}{nk^2}} \gt {1 - \frac{1}{k^2}}, \ \ \forall k \ge 1
\tag{2.8}\]</span></span></p>
<p><a href="#eq-2_4_001" class="quarto-xref">方程式&nbsp;<span>2.8</span></a> 就是切比雪夫不等式，其证明过程如下：</p>
<p><span class="math display">\[
\begin{align}
(n-1)s^2 &amp;= \sum_{i=1}^{n}{(x_i-\overline{x})^2} \\
&amp;= \sum_{i \in S_k}{{(x_i-\overline{x})^2}} + \sum_{i \notin S_k}{{(x_i-\overline{x})^2}} \\
&amp; \ge \sum_{i \notin S_k}{{(x_i-\overline{x})^2}}
\end{align}
\]</span></p>
<p><span class="math display">\[
\begin{align}
&amp;\because \forall i \in S_k, \ \ |x_i - \overline{x}| \lt ks, \\
&amp;\therefore \forall i \notin S_k, \ \ |x_i - \overline{x}| \ge ks, \\
&amp;\therefore \sum_{i \notin S_k}{{(x_i-\overline{x})^2}} \ge \sum_{i \notin S_k}{k^2s^2} \\
&amp;=k^2s^2(n-|S_k|)
\end{align}
\]</span></p>
<p><span id="eq-2_4_002"><span class="math display">\[
\therefore (n-1)s^2 \ge k^2s^2(n-|S_k|)
\tag{2.9}\]</span></span></p>
<p>当 <span class="math inline">\(s^2 \ne 0\)</span> 时，对于 <a href="#eq-2_4_002" class="quarto-xref">方程式&nbsp;<span>2.9</span></a> 的等式两边都除以 <span class="math inline">\(nk^2s^2\)</span>，得到：</p>
<p><span class="math display">\[
\begin{align}
&amp;\frac{n-1}{nk^2} \ge \frac{n-|S_k|}{n}, \\
&amp;\therefore \frac{n-1}{nk^2} \ge 1-\frac{|S_k|}{n} \\
&amp;\therefore \frac{|S_k|}{n} \ge 1-\frac{n}{nk^2}+\frac{1}{nk^2} \\
&amp;\therefore \frac{|S_k|}{n} \ge 1-\frac{1}{k^2}
\end{align}
\]</span></p>
<p>由于切比雪夫不等式的通用性，对于给定的数据集，实际位于 <span class="math inline">\([\overline{x}-ks, \overline{x}+ks]\)</span> 区间内的数据的百分比可能比切比雪夫不等式给出的下限要大一点。</p>
<div id="exm-2_4_a" class="theorem example">
<p><span class="theorem-title"><strong>例子 2.4</strong></span> <a href="#tbl-us_cars" class="quarto-xref">表格&nbsp;<span>2.8</span></a> 给出了 2013 年 6 月美国最畅销的 10 款汽车。根据数据可知：<span class="math inline">\(\overline{x}=35.33\)</span>，<span class="math inline">\(s=11.86\)</span>，当 <span class="math inline">\(k=\frac{3}{2}\)</span> 时，至少有 55.55%（<span class="math inline">\(100(1-\frac{1}{k^2})\%\)</span>）的数据位于 [17.54, 53.12]（<span class="math inline">\([\overline{x}-ks, \overline{x}+ks]\)</span>）区间内。而实际上，对于表中的数据而言，有 <span class="math inline">\(90\%\)</span> 的数据落在了这个区间。</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../misc/US_cars.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align=</span><span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-us_cars" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-us_cars-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.8: 2013 年 6 月美国最畅销的 10 款汽车
</figcaption>
<div aria-describedby="tbl-us_cars-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Rank</th>
<th style="text-align: left;">Model</th>
<th style="text-align: left;">Sales.Volume.in.thousands.of.vehicles.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Ford F Series</td>
<td style="text-align: left;">68.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Chevrolet Silverado</td>
<td style="text-align: left;">43.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Toyota Camry</td>
<td style="text-align: left;">35.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">Chevrolet Cruze</td>
<td style="text-align: left;">32.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">Honda Accord</td>
<td style="text-align: left;">31.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">Honda Civic</td>
<td style="text-align: left;">29.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">Dodge Ram</td>
<td style="text-align: left;">29.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">Ford Escape</td>
<td style="text-align: left;">28.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">Nissan Altima</td>
<td style="text-align: left;">26.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">Honda CR-V</td>
<td style="text-align: left;">26.6</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>对于数据集 <span class="math inline">\(\{x_1,...,x_n\}\)</span> 而言，令 <span class="math inline">\(\overline{x}\)</span> 和 <span class="math inline">\(s\)</span> 分别是其样本均值和样本标准差，其中 <span class="math inline">\(s \gt 0\)</span>。那么，<span class="math inline">\(\{x_i - \overline{x} \ge ks, i \in [1, n]\}\)</span> 的数据占比是多少呢？</p>
<p>假设令 <span class="math inline">\(N_k=\{x_i - \overline{x} \ge ks, i \in [1, n]\}\)</span>，我们是否可以计算出 <span class="math inline">\(\frac{|N_k|}{n}\)</span>？</p>
<p>当然！！！</p>
<p>根据 <a href="#eq-2_4_001" class="quarto-xref">方程式&nbsp;<span>2.8</span></a>，我们可以得到：</p>
<p><span id="eq-2_4_003"><span class="math display">\[
\frac{|N_k|}{n} \le \frac{1}{k^2}
\tag{2.10}\]</span></span></p>
<p>不过，利用接下来要介绍的单边切比雪夫不等式，我们可以得到一个更为精准的数据。</p>
</section>
<section id="单边切比雪夫不等式" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="单边切比雪夫不等式"><span class="header-section-number">2.4.2</span> 单边切比雪夫不等式</h3>
<p>对于数据集 <span class="math inline">\(\{x_1,...,x_n\}\)</span> 而言，令 <span class="math inline">\(\overline{x}\)</span> 和 <span class="math inline">\(s\)</span> 分别是其样本均值和样本标准差，其中 <span class="math inline">\(s \gt 0\)</span>。</p>
<p>令 <span class="math inline">\(N_k=\{x_i - \overline{x} \ge ks, i \in [1, n]\}\)</span>， <span class="math inline">\(|N_k|\)</span> 为集合 <span class="math inline">\(N_k\)</span> 中的元素个数，则有：</p>
<p><span id="eq-2_4_005"><span class="math display">\[
\frac{|N_k|}{n} \le \frac{1}{1+k^2}
\tag{2.11}\]</span></span></p>
<p>我们称 <a href="#eq-2_4_005" class="quarto-xref">方程式&nbsp;<span>2.11</span></a> 为单边切比雪夫不等式（<em>one-sided Chebyshev inequality</em>），其证明过程如下：</p>
<p>令 <span class="math inline">\(y_i=x_i-\overline{x}\)</span>，<span class="math inline">\(i \in [1,n]\)</span>，对于 <span class="math inline">\(\forall b \gt 0\)</span>，有：</p>
<p><span id="eq-2_4_006"><span class="math display">\[
\begin{align}
\sum_{i=1}^{n}{(y_i+b)^2} &amp;\ge \sum_{i:y_i \ge ks}{(y_i+b)^2} \\
&amp; \ge \sum_{i:y_i \ge ks}{(ks+b)^2} \\
&amp; = |N_k| \cdot (ks+b)^2
\end{align}
\tag{2.12}\]</span></span></p>
<p>因为 <span class="math inline">\(|N_k|\)</span> 为 <span class="math inline">\(y_i \ge ks\)</span> 的元素个数，<span class="math inline">\(ks\)</span> 和 <span class="math inline">\(b\)</span> 都是正数，因此有： <span class="math display">\[
\begin{align}
\sum_{i=1}^{n}{(y_i+b)^2} &amp;= \sum_{i=1}^{n}{(y_i^2 + 2by_i + b^2)} \\
&amp;= \sum_{i=1}^{n}{y_i^2} + 2b\sum_{i=1}^{n}{y_i} + nb^2
\end{align}
\]</span></p>
<p><span class="math display">\[
\begin{align}
&amp;\because y_i = x_i - \overline{x} \\
&amp;\therefore \sum_{i=1}^{n}{y_i} = \sum_{i=1}^{n}{(x_i - \overline{x})} = \sum_{i=1}^{n}{x_i} - n\overline{x} = 0
\end{align}
\]</span></p>
<p>所以有：</p>
<p><span id="eq-2_4_007"><span class="math display">\[
\begin{align}
\sum_{i=1}^{n}{(y_i+b)^2} &amp;= \sum_{i=1}^{n}{y_i^2} + nb^2 \\
&amp;=(n-1)s^2 + nb^2
\end{align}
\tag{2.13}\]</span></span></p>
<p>根据 <a href="#eq-2_4_006" class="quarto-xref">方程式&nbsp;<span>2.12</span></a> 和 <a href="#eq-2_4_007" class="quarto-xref">方程式&nbsp;<span>2.13</span></a>，有：</p>
<p><span class="math display">\[
(n-1)s^2 + nb^2 \ge |N_k| \cdot (ks+b)^2
\]</span></p>
<p>进而得到：</p>
<p><span id="eq-2_4_008"><span class="math display">\[
\frac{|N_k|}{n} \le \frac{s^2 + b^2}{(ks + b)^2}
\tag{2.14}\]</span></span></p>
<p>因为 <span class="math inline">\(b\)</span> 是任意大于 0 的数，因此我们可以令：</p>
<p><span id="eq-2_4_009"><span class="math display">\[
b=\frac{s}{k}
\tag{2.15}\]</span></span></p>
<p>把 <a href="#eq-2_4_009" class="quarto-xref">方程式&nbsp;<span>2.15</span></a> 代入 <a href="#eq-2_4_008" class="quarto-xref">方程式&nbsp;<span>2.14</span></a> 得到 <a href="#eq-2_4_005" class="quarto-xref">方程式&nbsp;<span>2.11</span></a>：</p>
<p><span class="math display">\[
\frac{|N_k|}{n} \le \frac{1}{k^2 + 1}
\]</span></p>
<p>根据 <a href="#eq-2_4_003" class="quarto-xref">方程式&nbsp;<span>2.10</span></a>，我们可以发现，在一个数据集中，超过样本均值的 2 倍标准差的数据最多占比 25%。但是利用 <a href="#eq-2_4_005" class="quarto-xref">方程式&nbsp;<span>2.11</span></a> 所示的单边切比雪夫不等式，我们可以将这个比例精确到最多占比 20%。</p>
</section>
</section>
<section id="sec-2_5" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="sec-2_5"><span class="header-section-number">2.5</span> 正态分布数据集</h2>
<p>我们在实践中观察到的许多大数据集都具有形状相似的直方图。通常，这些直方图在样本中位数处达到峰值，然后在中位数的两侧以钟形对称的形式下降。我们称这样的数据集为正态数据集，称其直方图为正态直方图。<a href="#fig-2_5_norm-1" class="quarto-xref">图&nbsp;<span>2.8 (a)</span></a> 展示了一个正态数据集的直方图。</p>
<p>如果一个数据集的直方图接近正态直方图，我们说该数据集近似正态分布。例如，我们会说图 <a href="#fig-2_5_norm-2" class="quarto-xref">图&nbsp;<span>2.8 (b)</span></a> 给出的直方图来自一个近似正态的数据集，而图 <a href="#fig-2_5_norm-3" class="quarto-xref">图&nbsp;<span>2.8 (c)</span></a> 和图 <a href="#fig-2_5_norm-4" class="quarto-xref">图&nbsp;<span>2.8 (d)</span></a> 给出的直方图则不是近似正态的数据集（因为每个直方图都太不对称）。与样本中位数不是近似对称的任何数据集都是偏态（<em>skewed</em>）分布。如果数据集的长尾在中位数右侧，则称为 “右偏”；如果数据集的长尾在中位数左侧，则称为 “左偏”。因此，图 <a href="#fig-2_5_norm-3" class="quarto-xref">图&nbsp;<span>2.8 (c)</span></a> 中的数据集为左偏分布，而 <a href="#fig-2_5_norm-4" class="quarto-xref">图&nbsp;<span>2.8 (d)</span></a> 中的数据集为右偏分布。</p>
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">19</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">-</span> <span class="dv">10</span> <span class="sc">*</span> <span class="fu">abs</span>(x <span class="sc">-</span> <span class="fu">mean</span>(x))</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">value=</span><span class="fu">rep</span>(x, y))</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>value)) <span class="sc">+</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">19</span>)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">19</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">-</span> <span class="dv">10</span> <span class="sc">*</span> <span class="fu">abs</span>(x <span class="sc">-</span> <span class="fu">mean</span>(x))</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>value <span class="ot">&lt;-</span> <span class="fu">rep</span>(x, y)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>value <span class="ot">&lt;-</span> value[value <span class="sc">!=</span> <span class="dv">17</span>]</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">value=</span>value)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>value)) <span class="sc">+</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">19</span>)</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">value=</span><span class="fu">rbeta</span>(<span class="dv">10000</span>, <span class="dv">5</span>, <span class="dv">2</span>))</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>value)) <span class="sc">+</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">19</span>)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">value=</span><span class="fu">rbeta</span>(<span class="dv">10000</span>, <span class="dv">1</span>, <span class="dv">5</span>))</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>value)) <span class="sc">+</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">19</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-2_5_norm" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2_5_norm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-2_5_norm" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-2_5_norm-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-2_5_norm-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_5_norm-1.png" class="img-fluid figure-img" data-ref-parent="fig-2_5_norm" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-2_5_norm-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 正态分布
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-2_5_norm" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-2_5_norm-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-2_5_norm-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_5_norm-2.png" class="img-fluid figure-img" data-ref-parent="fig-2_5_norm" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-2_5_norm-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 近似正态分布
</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-2_5_norm" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-2_5_norm-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-2_5_norm-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_5_norm-3.png" class="img-fluid figure-img" data-ref-parent="fig-2_5_norm" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-2_5_norm-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) 左偏分布
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-2_5_norm" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-2_5_norm-4" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-2_5_norm-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_5_norm-4.png" class="img-fluid figure-img" data-ref-parent="fig-2_5_norm" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-2_5_norm-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(d) 右偏分布
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2_5_norm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.8: 不同数据集的直方图
</figcaption>
</figure>
</div>
<p>从正态直方图的对称性可以看出，一个近似正态分布的数据集，其样本均值和样本中位数大致相等。</p>
<p>假设 <span class="math inline">\(\overline{x}\)</span> 和 <span class="math inline">\(s\)</span> 分别是近似正态分布数据集的样本均值和样本标准差。<strong>经验法则</strong>（<em>empirical rule</em>）指定了观察到的数据位于 <span class="math inline">\(s\)</span>、<span class="math inline">\(2s\)</span>、<span class="math inline">\(3s\)</span> 个样本均值 <span class="math inline">\(x\overline{x}\)</span> 内的大致比例。</p>
<section id="经验法则" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="经验法则"><span class="header-section-number">2.5.1</span> 经验法则</h3>
<p>如果一个数据集是一个近似正态分布的数据集，其样本均值和样本标准差分别是 <span class="math inline">\(\overline{x}\)</span> 和 <span class="math inline">\(s\)</span>，那么有如下的正确结论：</p>
<ol type="1">
<li>大约有 68% 的观察数据会位于 <span class="math inline">\(\overline{x} \pm s\)</span> 区间内</li>
<li>大约有 95% 的观察数据会位于 <span class="math inline">\(\overline{x} \pm 2s\)</span> 区间内</li>
<li>大约有 99% 的观察数据会位于 <span class="math inline">\(\overline{x} \pm 3s\)</span> 区间内</li>
</ol>
<div class="exr-2_5_a">
<p>如下的数据是工业工程专业的学生在统计学考试中的分数：</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">43,</span> 46, 52, 55, 55, 56, 58, 60, 62, 63, 64, 66, 66, 72, 74, 74, 75, 77, 77, 78, 83, 85, 85, 87, 88, 90, 91, 94</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>通过其茎叶图，我们会发现如上数据的直方图近似正态分布。接下来我们用这份数据来评估一下经验法则。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">43</span>, <span class="dv">46</span>, <span class="dv">52</span>, <span class="dv">55</span>, <span class="dv">55</span>, <span class="dv">56</span>, <span class="dv">58</span>, <span class="dv">60</span>, <span class="dv">62</span>, <span class="dv">63</span>, <span class="dv">64</span>, <span class="dv">66</span>, <span class="dv">66</span>, <span class="dv">72</span>, <span class="dv">74</span>, <span class="dv">74</span>, <span class="dv">75</span>, <span class="dv">77</span>, <span class="dv">77</span>, <span class="dv">78</span>, <span class="dv">83</span>, <span class="dv">85</span>, <span class="dv">85</span>, <span class="dv">87</span>, <span class="dv">88</span>, <span class="dv">90</span>, <span class="dv">91</span>, <span class="dv">94</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stem</span>(scores)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
  The decimal point is 1 digit(s) to the right of the |

  4 | 36
  5 | 25568
  6 | 023466
  7 | 2445778
  8 | 35578
  9 | 014</code></pre>
</div>
</div>
</div>
<div id="sol-sec-2_5_a" class="proof solution">
<p><span class="proof-title"><em>答案 2.10</em>. </span>计算得到数据集的样本均值和样本方差：<span class="math inline">\(\overline{x} \thickapprox 70.571\)</span>，<span class="math inline">\(s \thickapprox 14.354\)</span>。因此，根据经验法则：</p>
<ul>
<li>有 68% 的数据会位于 56.2~84.9 之间，但是实际上，数据集中只有 <span class="math inline">\(\frac{15}{28} \%\)</span> 也就是 53.6% 的数据位于56.2~84.9 之间。</li>
<li>有 95% 的数据会位于 41.68~99.28 之间，但是实际上，数据集中所有的数据都位于 41.68~99.28 之间。</li>
</ul>
</div>
<p>如果一个总体是由多个不同类型的子总体而构成，那么从这个总体中抽样得到的数据集通常不是正态分布。这种数据集的直方图通常看起来像是多个正态直方图的组合或叠加，因此在这种直方图上通常会有多个局部峰值。由于这些局部峰值处的直方图比其邻近值更高，因此这些峰值类似于众数。如 <a href="#fig-bio_peaks" class="quarto-xref">图&nbsp;<span>2.9</span></a> 所示，在直方图中，具有两个局部峰值的数据集称之为双峰分布。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>samples1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10000</span>, <span class="at">mean=</span><span class="dv">1</span>, <span class="at">sd=</span><span class="dv">1</span>)  </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>samples2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10000</span>, <span class="at">mean=</span><span class="dv">5</span>, <span class="at">sd=</span><span class="dv">1</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">value=</span><span class="fu">c</span>(samples1, samples2))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>value)) <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>()</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-bio_peaks" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bio_peaks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-bio_peaks-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bio_peaks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.9: 双峰分布直方图
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-2_6" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="sec-2_6"><span class="header-section-number">2.6</span> 成对数据集和样本相关系数</h2>
<p>我们经常关注由成对数据值构成的数据集，这些数据集中的成对数据之间存在着某种关系。在这样的数据集中，如果每个成对数据都有一个 <span class="math inline">\(x\)</span> 值和一个 <span class="math inline">\(y\)</span> 值，那么我们就用 <span class="math inline">\((x_i, y_i)\)</span> 表示第 <span class="math inline">\(i\)</span> 个数据。例如，为了确定每天中午的温度（以摄氏度为单位）与当天生产的不合格零件数量之间的关系，一家公司记录了 <a href="#tbl-temp_defect" class="quarto-xref">表格&nbsp;<span>2.9</span></a> 中的数据。对于这个数据集，<span class="math inline">\(x_i\)</span> 代表第 <span class="math inline">\(i\)</span> 天中午的摄氏温度，<span class="math inline">\(y_i\)</span> 代表第 <span class="math inline">\(i\)</span> 天生产的不合格零件数量。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../misc/temp_defect.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align=</span><span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-temp_defect" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-temp_defect-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.9: 天气温度和产品缺陷量数据
</figcaption>
<div aria-describedby="tbl-temp_defect-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Day</th>
<th style="text-align: left;">Temperature</th>
<th style="text-align: left;">Number.of.Defects</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">24.2</td>
<td style="text-align: left;">25</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">22.7</td>
<td style="text-align: left;">31</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">30.5</td>
<td style="text-align: left;">36</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">28.6</td>
<td style="text-align: left;">33</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">25.5</td>
<td style="text-align: left;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">32.0</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">28.6</td>
<td style="text-align: left;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">26.5</td>
<td style="text-align: left;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">25.3</td>
<td style="text-align: left;">16</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">26.0</td>
<td style="text-align: left;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">11</td>
<td style="text-align: left;">24.4</td>
<td style="text-align: left;">22</td>
</tr>
<tr class="even">
<td style="text-align: left;">12</td>
<td style="text-align: left;">24.8</td>
<td style="text-align: left;">23</td>
</tr>
<tr class="odd">
<td style="text-align: left;">13</td>
<td style="text-align: left;">20.6</td>
<td style="text-align: left;">20</td>
</tr>
<tr class="even">
<td style="text-align: left;">14</td>
<td style="text-align: left;">25.1</td>
<td style="text-align: left;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">15</td>
<td style="text-align: left;">21.4</td>
<td style="text-align: left;">25</td>
</tr>
<tr class="even">
<td style="text-align: left;">16</td>
<td style="text-align: left;">23.7</td>
<td style="text-align: left;">23</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17</td>
<td style="text-align: left;">23.9</td>
<td style="text-align: left;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">18</td>
<td style="text-align: left;">25.2</td>
<td style="text-align: left;">30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">19</td>
<td style="text-align: left;">27.4</td>
<td style="text-align: left;">33</td>
</tr>
<tr class="even">
<td style="text-align: left;">20</td>
<td style="text-align: left;">28.3</td>
<td style="text-align: left;">32</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21</td>
<td style="text-align: left;">28.8</td>
<td style="text-align: left;">35</td>
</tr>
<tr class="even">
<td style="text-align: left;">22</td>
<td style="text-align: left;">26.6</td>
<td style="text-align: left;">24</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>在二维图上绘制成对数据集中的数据是一种表示成对数据集的有效方法，其中 <span class="math inline">\(x\)</span> 轴代表成对数据的 <span class="math inline">\(x\)</span> 值，<span class="math inline">\(y\)</span> 轴代表成对数据的 <span class="math inline">\(y\)</span> 值，这样的图称之为散点图（<em>scatter diagram</em>）。<a href="#fig-temp_defect" class="quarto-xref">图&nbsp;<span>2.10</span></a> 为 <a href="#tbl-temp_defect" class="quarto-xref">表格&nbsp;<span>2.9</span></a> 中数据的散点图。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../misc/temp_defect.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>Temperature, <span class="at">y=</span>Number.of.Defects)) <span class="sc">+</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-temp_defect" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-temp_defect-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-temp_defect-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-temp_defect-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.10: 天气温度和产品缺陷量散点图
</figcaption>
</figure>
</div>
</div>
</div>
<p>对于成对数据集而言，一个有趣问题是，比较大的 <span class="math inline">\(x\)</span> 值是否倾向于与比较大的 <span class="math inline">\(y\)</span> 值配对，小的 <span class="math inline">\(x\)</span> 值是否与小的 <span class="math inline">\(y\)</span> 值配对？如果情况并非如此，那么我们可能会质疑其中一个变量的较大的值是否倾向于与另一个变量的较小的值配对。通常，可以通过散点图来大致回答这些问题。例如，<a href="#fig-temp_defect" class="quarto-xref">图&nbsp;<span>2.10</span></a> 表明，高温和缺陷产品数量高之间似乎存在某种联系。为了对成对数据之间的这种关系进行定量度量，我们需要开发一个新的统计指标，以衡量 <span class="math inline">\(x\)</span> 值与 <span class="math inline">\(y\)</span> 值之间的配对程度。</p>
<p>假设数据集由 <span class="math inline">\(\{(x_i, y_i)\}\)</span> 组成，其中 <span class="math inline">\(i = 1,...,n\)</span>，<span class="math inline">\(\overline{x}\)</span> 和 <span class="math inline">\(\overline{y}\)</span> 分别是 <span class="math inline">\(x\)</span> 和 <span class="math inline">\(y\)</span> 的样本均值。对于第 <span class="math inline">\(i\)</span> 对数据，使用 <span class="math inline">\(x_i - \overline{x}\)</span> 作为 <span class="math inline">\(x_i\)</span> 与其样本均值的偏差，使用 <span class="math inline">\(y_i - \overline{y}\)</span> 作为 <span class="math inline">\(y_i\)</span> 与其样本均值的偏差。如果 <span class="math inline">\(x_i\)</span> 的值比较大，那么 <span class="math inline">\(x_i \gt \overline{x}\)</span>，所以 <span class="math inline">\(x_i - \overline{x} \gt 0\)</span>。类似地， 如果 <span class="math inline">\(x_i\)</span> 的值比较小，那么 <span class="math inline">\(x_i \lt \overline{x}\)</span>，所以 <span class="math inline">\(x_i - \overline{x} \lt 0\)</span>。对于 <span class="math inline">\(y_i\)</span> 而言，同样如此。于是，我们可以得出以下结论：</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
重要
</div>
</div>
<div class="callout-body-container callout-body">
<p>当 <span class="math inline">\(x\)</span> 的较大值趋向于和 <span class="math inline">\(y\)</span> 的较大值相关联，<span class="math inline">\(x\)</span> 的较小值趋向于和 <span class="math inline">\(y\)</span> 的较小值相关联时，则 <span class="math inline">\(x_i - \overline{x}\)</span> 和 <span class="math inline">\(y_i- \overline{y}\)</span> 的符号（无论正负）都将趋于相同。</p>
</div>
</div>
<p>如果 <span class="math inline">\(x_i - \overline{x}\)</span> 和 <span class="math inline">\(y_i - \overline{y}\)</span> 的符号相同（无论正负），那么它们的乘积 <span class="math inline">\((x_i - \overline{x})(\)</span>y_i - )$ 是正数。因此，当 <span class="math inline">\(x\)</span> 的较大值趋向于和 <span class="math inline">\(y\)</span> 的较大值相关联，<span class="math inline">\(x\)</span> 的较小值趋向于和 <span class="math inline">\(y\)</span> 的较小值相关联时，<span class="math inline">\(\sum_{i=1}^{n}{(x_i - \overline{x})(y_i - \overline{y})}\)</span> 将趋向于一个较大的正数。事实上，当较大（小）的 <span class="math inline">\(x\)</span> 与较大（小）的 <span class="math inline">\(y\)</span> 配对时，不但所有的 <span class="math inline">\((x_i - \overline{x})(y_i - \overline{y})\)</span> 的符号都是正的，而且当 <span class="math inline">\((x_i - \overline{x})\)</span> 的最大值与 <span class="math inline">\((y_i - \overline{y})\)</span> 的最大值配对、其对应的次大值配对、依次类推对 <span class="math inline">\((x_i - \overline{x})\)</span> 和 <span class="math inline">\((y_i - \overline{y})\)</span> 配对时，<span class="math inline">\(\sum_{i=1}^{n}{(x_i - \overline{x})(y_i - \overline{y})}\)</span> 将获得最大值。同理，当 <span class="math inline">\(x_i\)</span> 的较大值倾向于和 <span class="math inline">\(y_i\)</span> 的较小值配对时，<span class="math inline">\(x_i - \overline{x}\)</span> 和 <span class="math inline">\(y_i - \overline{y}\)</span> 的符号相反，所以 <span class="math inline">\(\sum_{i=1}^{n}{(x_i - \overline{x})(y_i - \overline{y})}\)</span> 将是一个较大的负数。</p>
<div id="def-2_6_cc" class="theorem definition">
<p><span class="theorem-title"><strong>定义 2.7</strong></span> 对于成对数据集 <span class="math inline">\(\{(x_i, y_i), i = 1,...,n\}\)</span>，<span class="math inline">\(s_x\)</span> 和 <span class="math inline">\(s_y\)</span> 分别表示 <span class="math inline">\(x\)</span> 和 <span class="math inline">\(y\)</span> 的样本标准差，则 <span class="math inline">\((x_i, y_i)\)</span> 的样本相关系数（<em>sample correlation coefficient</em>）<span class="math inline">\(r\)</span> 的定义如下：</p>
<p><span id="eq-2_6_001"><span class="math display">\[
\begin{align}
r&amp;=\frac{\sum_{i=1}^{n}{(x_i-\overline{x})(y_i-\overline{y})}}{(n-1)s_xs_y} \\
&amp;=\frac{\sum_{i=1}^{n}{(x_i-\overline{x})(y_i-\overline{y})}}{\sqrt{\sum_{i=1}^{n}{(x_i-\overline{x})^2} \cdot \sum_{i=1}^{n}{(y_i-\overline{y})^2}}}
\end{align}
\tag{2.16}\]</span></span></p>
</div>
<p>当 <span class="math inline">\(r \gt 0\)</span> 时，成对数据集中的样本成正相关（<em>positively correlated</em>），当 <span class="math inline">\(r \lt 0\)</span> 时，样本成负相关（<em>negatively correlated</em>）。</p>
<p>成对数据集的样本相关系数 <span class="math inline">\(r\)</span> 具备如下的特性：</p>
<ol type="1">
<li><span class="math inline">\(-1 \le r \le 1\)</span></li>
<li><span class="math inline">\(\forall a&gt;0\)</span>， 如果 <span class="math inline">\(y_i = ax_i + b\)</span>，则 <span class="math inline">\(r=1\)</span></li>
<li><span class="math inline">\(\forall a&lt;0\)</span>， 如果 <span class="math inline">\(y_i = ax_i + b\)</span>，则 <span class="math inline">\(r=-1\)</span></li>
<li><span class="math inline">\(\forall a\)</span> 和 <span class="math inline">\(\forall c\)</span>，且 <span class="math inline">\(a \cdot c \gt 0\)</span>，如果 <span class="math inline">\(r\)</span> 是 <span class="math inline">\(\{(x_i, y_i)\}\)</span> 的相关系数，则 <span class="math inline">\(r\)</span> 也是 <span class="math inline">\(\{(ax_i + b, cy_i + d)\}\)</span> 的相关系数</li>
</ol>
<ul>
<li>特性 1 说明样本相关系数 <span class="math inline">\(r\)</span> 总是介于 -1 和 +1 之间。</li>
<li>特性 2 说明当成对数据之间存在线性关系并且 <span class="math inline">\(x\)</span> 的较大（小）值趋向于和 <span class="math inline">\(y\)</span> 的较大（小）值相关联时，<span class="math inline">\(r\)</span> 等于 +1。</li>
<li>特性 3 说明当成对数据之间存在线性关系并且 <span class="math inline">\(x\)</span> 的较大（小）值趋向于和 <span class="math inline">\(y\)</span> 的较小（大）值相关联时，<span class="math inline">\(r\)</span> 等于 -1。</li>
<li>特性 4 指出，当给每个 <span class="math inline">\(x\)</span>（或 <span class="math inline">\(y\)</span>） 变量加上一个常数，或将每个 <span class="math inline">\(x\)</span>（或 <span class="math inline">\(y\)</span>） 变量都乘以一个正数时，<span class="math inline">\(r\)</span> 的值保持不变。特性 4 意味着 <span class="math inline">\(r\)</span> 不依赖于测量数据的单位。例如，无论身高数据的测量单位是英尺还是英寸，也无论体重数据的测量单位是磅还是千克，一个人的身高和体重之间的样本相关系数都是一致的。此外，如果成对数据中的一个值是温度，那么无论该值是华氏温度还是摄氏温度，样本相关系数都是相同的。</li>
</ul>
<p>样本相关系数 <span class="math inline">\(r\)</span> 的绝对值 <span class="math inline">\(|r|\)</span> 用于表示 <span class="math inline">\(x\)</span> 和 <span class="math inline">\(y\)</span> 之间线性关系的强度。<span class="math inline">\(|r| = 1\)</span> 意味着完美的线性关系，也就是说，可以用一条直线穿过 <span class="math inline">\(\{(xi,yi), i = 1, ..., n\}\)</span> 中的所有数据点 。<span class="math inline">\(|r| \thickapprox 0.8\)</span> 意味着相对较强的线性关系，此时虽然没有任何一条直线可以穿过所有的数据点，但存在一条直线 “接近” 穿过所有的数据点。<span class="math inline">\(|r| \thickapprox 0.3\)</span> 意味着成对数据之间的线性关系相对较弱。</p>
<p><span class="math inline">\(r\)</span> 的符号给定了相关性的方向。当较小的 <span class="math inline">\(y\)</span> 倾向于和较小的 <span class="math inline">\(x\)</span> 配对，而较大的 <span class="math inline">\(y\)</span> 倾向于和较大的 <span class="math inline">\(x\)</span> 配对时，对于这样的线性关系，<span class="math inline">\(r \gt 0\)</span>。而当较小的 <span class="math inline">\(y\)</span> 倾向于和较大的 <span class="math inline">\(x\)</span> 配对，而较大的 <span class="math inline">\(y\)</span> 倾向于和较小的 <span class="math inline">\(x\)</span> 配对时，对于这样的线性关系，<span class="math inline">\(r \lt 0\)</span>。<a href="#fig-2_6_cc" class="quarto-xref">图&nbsp;<span>2.11</span></a> 显示了具有不同 <span class="math inline">\(r\)</span> 值的数据集的散点图。</p>
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)  </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置你想要的相关系数  </span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>rho <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">0.5</span>  <span class="co"># 例如，我们想要的相关系数是0.5  </span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建一个协方差矩阵。假设两个变量的方差都是1（对于标准化数据）  </span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 协方差矩阵的对角线元素是方差，非对角线元素是协方差（与相关系数相关）  </span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>Sigma <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, rho, rho, <span class="dv">1</span>), <span class="at">nrow =</span> <span class="dv">2</span>)  </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">mvrnorm</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">mu =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">Sigma =</span> Sigma)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(data)</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"X"</span>, <span class="st">"Y"</span>)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>rho <span class="ot">&lt;-</span> <span class="dv">0</span>   </span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>Sigma <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, rho, rho, <span class="dv">1</span>), <span class="at">nrow =</span> <span class="dv">2</span>)  </span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">mvrnorm</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">mu =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">Sigma =</span> Sigma)</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(data)</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"X"</span>, <span class="st">"Y"</span>)</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>rho <span class="ot">&lt;-</span> <span class="fl">0.9</span>   </span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>Sigma <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, rho, rho, <span class="dv">1</span>), <span class="at">nrow =</span> <span class="dv">2</span>)  </span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">mvrnorm</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">mu =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">Sigma =</span> Sigma)</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(data)</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df3) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"X"</span>, <span class="st">"Y"</span>)</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>rho <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>Sigma <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, rho, rho, <span class="dv">1</span>), <span class="at">nrow =</span> <span class="dv">2</span>)  </span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">mvrnorm</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">mu =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">Sigma =</span> Sigma)</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>df4 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(data)</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df4) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"X"</span>, <span class="st">"Y"</span>)</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df1, <span class="fu">aes</span>(<span class="at">x=</span>X, <span class="at">y=</span>Y)) <span class="sc">+</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df2, <span class="fu">aes</span>(<span class="at">x=</span>X, <span class="at">y=</span>Y)) <span class="sc">+</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df3, <span class="fu">aes</span>(<span class="at">x=</span>X, <span class="at">y=</span>Y)) <span class="sc">+</span></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df4, <span class="fu">aes</span>(<span class="at">x=</span>X, <span class="at">y=</span>Y)) <span class="sc">+</span></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-2_6_cc" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2_6_cc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-2_6_cc" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-2_6_cc-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-2_6_cc-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_6_cc-1.png" class="img-fluid figure-img" data-ref-parent="fig-2_6_cc" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-2_6_cc-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) r = -0.5
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-2_6_cc" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-2_6_cc-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-2_6_cc-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_6_cc-2.png" class="img-fluid figure-img" data-ref-parent="fig-2_6_cc" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-2_6_cc-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) r = 0
</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-2_6_cc" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-2_6_cc-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-2_6_cc-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_6_cc-3.png" class="img-fluid figure-img" data-ref-parent="fig-2_6_cc" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-2_6_cc-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) r = 0.9
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-2_6_cc" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-2_6_cc-4" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-2_6_cc-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_6_cc-4.png" class="img-fluid figure-img" data-ref-parent="fig-2_6_cc" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-2_6_cc-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(d) r = 1
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2_6_cc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.11: 不同样本相关系数的数据散点图
</figcaption>
</figure>
</div>
<div id="exr-2_6_a" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.10</strong></span> 计算 <a href="#tbl-temp_defect" class="quarto-xref">表格&nbsp;<span>2.9</span></a> 所示的样本相关系数。</p>
</div>
<div id="sol-2_6_a" class="proof solution">
<p><span class="proof-title"><em>答案 2.11</em>. </span></p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../misc/temp_defect.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">cor</span>(df<span class="sc">$</span>Temperature, df<span class="sc">$</span>Number.of.Defects)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(r)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.418944</code></pre>
</div>
</div>
<p>这意味着气温和当天的缺陷产品数量之间存在着弱正相关性。</p>
</div>
<div id="exm-2_6_b" class="theorem example">
<p><span class="theorem-title"><strong>例子 2.5</strong></span> 以下数据表给出了 10 个学生的静息心率（每分钟心跳次数）和其对应的受教育年限。<a href="#fig-2_6_bpm" class="quarto-xref">图&nbsp;<span>2.12</span></a> 展现了这些数据的散点图。这些数据的样本相关系数 <span class="math inline">\(r=−0.7638\)</span>。负相关系数表明，对于这个数据集来说，高静息心率与低受教育年限紧密相关，而低静息心率则与高受教育年限紧密相关。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>person <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>Years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">13</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">12</span>, <span class="dv">14</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>BPM <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">73</span>, <span class="dv">67</span>, <span class="dv">74</span>, <span class="dv">63</span>, <span class="dv">73</span>, <span class="dv">84</span>, <span class="dv">60</span>, <span class="dv">62</span>, <span class="dv">76</span>, <span class="dv">71</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Person=</span>person, <span class="at">Years.of.School=</span>Years, <span class="at">BPM=</span>BPM)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align=</span><span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Person</th>
<th style="text-align: left;">Years.of.School</th>
<th style="text-align: left;">BPM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">73</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">67</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">13</td>
<td style="text-align: left;">74</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">18</td>
<td style="text-align: left;">63</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">73</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">84</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">18</td>
<td style="text-align: left;">60</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">62</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">76</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">71</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>person <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>Years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">13</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">12</span>, <span class="dv">14</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>BPM <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">73</span>, <span class="dv">67</span>, <span class="dv">74</span>, <span class="dv">63</span>, <span class="dv">73</span>, <span class="dv">84</span>, <span class="dv">60</span>, <span class="dv">62</span>, <span class="dv">76</span>, <span class="dv">71</span>)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Person=</span>person, <span class="at">Years.of.School=</span>Years, <span class="at">BPM=</span>BPM)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>Years.of.School, <span class="at">y=</span>BPM)) <span class="sc">+</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-2_6_bpm" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2_6_bpm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_6_bpm-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2_6_bpm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.12: 不同数据集的直方图
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="相关性衡量的是变量之间的关联关系，而不是因果关系">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
相关性衡量的是变量之间的关联关系，而不是因果关系
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="#exm-2_6_b" class="quarto-xref">例子&nbsp;<span>2.5</span></a> 中的数据集仅考虑了 10 名学生，因此不足以让人对受教育年限和心率之间的关系得出任何确凿的结论。此外，即使有更大规模的数据集，并且受教育年限高低与其静息心率之间同样存在着较强的负相关性，我们也没有理由得出 <strong>多接受几年教育会直接降低一个人的心率</strong> 的结论。也就是说，尽管高受教育年限往往与较低的静息心率有关联，但这并不意味着多受几年教育是导致较低心率的直接原因。通常，对这种关联性的解释在于，存在一个与所考虑的这两个变量都有相关性的隐藏因素。</p>
<p>在 <a href="#exm-2_6_b" class="quarto-xref">例子&nbsp;<span>2.5</span></a> 中，可能是受教育年限高的人更了解健康领域的最新发现，因此可能更了解锻炼和良好营养的重要性。亦或者，可能不是知识在起作用，而是受过更多教育的人所从事的工作会让他们有更多时间进行锻炼，同时也可以获取更多薪水以补充良好的营养。受教育年限和静息心率之间的强烈负相关性可能是由受教育年限以及其他潜在因素的综合结果。</p>
</div>
</div>
<p>接下来，我们将证明样本相关系数 <span class="math inline">\(r\)</span> 的第一个特性：<span class="math inline">\(|r| \le 1\)</span>，当且仅当所有的数据点都在一条直线上时，<span class="math inline">\(=\)</span> 成立。</p>
<p><span id="eq-2_6_002"><span class="math display">\[
\begin{align}
\because &amp;\sum{(\frac{x_i - \overline{x}}{s_x} - \frac{y_i - \overline{y}}{s_y})^2} \ge 0 \\
\therefore &amp; \sum{\frac{(x_i - \overline{x})^2}{s_x}} + \sum{\frac{(x_i - \overline{x})^2}{s_x}} - 2 \sum{\frac{(x_i - \overline{x})(y_i - \overline{y})}{s_xs_y}} \\
\therefore &amp; (n - 1) + (n - 1) -2(n - 1)r \ge 0 \\
\therefore &amp; 2(n - 1)(1 - r) \ge 0 \\
\therefore &amp; r \le 1
\end{align}
\tag{2.17}\]</span></span></p>
<p>假设所有的数据点 <span class="math inline">\({(x_i, y_i), i=1,...,n}\)</span> 都位于直线 <span class="math inline">\(y_i = ax_i + b;\ i=1,...n \ \&amp; \ a&gt;0\)</span> 上，则：</p>
<p><span id="eq-2_6_004"><span class="math display">\[
\begin{align}
&amp; s_y^2=a^2s_x^2 \\
&amp; \overline{y}=a\overline{x} + b \\
\therefore &amp; a = \frac{s_y}{s_x}, \ b = \overline{y} - \frac{s_y}{s_x}\overline{x}
\end{align}
\tag{2.18}\]</span></span></p>
<p>根据 <a href="#eq-2_6_002" class="quarto-xref">方程式&nbsp;<span>2.17</span></a>， 当且仅当 <span class="math inline">\(r = 1\)</span> 时，<span class="math inline">\(\sum{(\frac{x_i - \overline{x}}{s_x} - \frac{y_i - \overline{y}}{s_y})^2} = 0\)</span>。</p>
<p>也即当且仅当 <span class="math inline">\(r = 1\)</span> 时，<span class="math inline">\(\frac{y_i - \overline{y}}{s_y} = \frac{x_i - \overline{x}}{s_x}\)</span>。</p>
<p>所以，当且仅当 <span class="math inline">\(r = 1\)</span> 时，<span class="math inline">\(y_i = \overline{y} - \frac{s_y}{s_x}\overline{x} + \frac{s_y}{s_x}x_i\)</span>，把 <a href="#eq-2_6_004" class="quarto-xref">方程式&nbsp;<span>2.18</span></a> 代入得到 <span class="math inline">\(y_i=ax_i + b\)</span>。</p>
<p>因此，当且仅当 <span class="math inline">\(r = 1\)</span> 时，<span class="math inline">\((x_i, y_i)\)</span> 的所有的点都位于直线 <span class="math inline">\(y_i = ax_i + b, a&gt;0\)</span>。</p>
<p>同理，我们可以证明，当且仅当 <span class="math inline">\(r = -1\)</span> 时，<span class="math inline">\((x_i, y_i)\)</span> 的所有的点都位于直线 <span class="math inline">\(y_i = ax_i + b, a&lt;0\)</span>。</p>
</section>
<section id="sec-2_7" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="sec-2_7"><span class="header-section-number">2.7</span> 洛伦兹曲线和基尼系数</h2>
<p>洛伦兹曲线（<em>Lorenz Curve</em>）<span class="math inline">\(L(p), 0 \le p \le 1\)</span>，是与群体中成员的收入相关的图表。<span class="math inline">\(L(p)\)</span> 表示群体中，收入最低的 <span class="math inline">\(100p\%\)</span> 的人的总收入在群体总收入中的收入占比。例如，<span class="math inline">\(L(0.3)\)</span> 是收入最低的 30% 的人的总收入在群体中的收入占比。一般来说，假设群体中有 <span class="math inline">\(n\)</span> 个人，其个体收入按升序排列为 <span class="math inline">\(x_1 \le x_2 \le x_3 ... \le x_n\)</span>。因为 <span class="math inline">\(x_1 + ... + x_j\)</span> 是收入最低的 <span class="math inline">\(j\)</span> 个人的总收入，而 <span class="math inline">\(x_1 + ... + x_n\)</span> 是该群体所有人的总收入。因此，收入最低的 <span class="math inline">\(100\frac{j}{n}\%\)</span> 的人的收入占比就是：</p>
<p><span class="math display">\[
L(\frac{j}{n}) = \frac{x_1 + ... + x_j}{x_1 + ... + x_n},\ j = 1, ..., n
\]</span></p>
<p>一般而言，令 <span class="math inline">\(L(0) = 0\)</span>，并通过直线连接 <span class="math inline">\(\frac{j}{n}\)</span> 和 <span class="math inline">\(\frac{j + 1}{n}\)</span> 来绘制洛伦兹曲线。</p>
<div id="exm-2_7_a" class="theorem example">
<p><span class="theorem-title"><strong>例子 2.6</strong></span> 假设我们想绘制 <span class="math inline">\(n=5\)</span> 的洛伦兹曲线，其中该群体的收入分别是：9，7，22，5，17。该群体的收入按照升序排序后是：5，7，9，17，22。因为群体的总收入是 60，因此：</p>
<ul>
<li>L(0.2) = 5 / 60</li>
<li>L(0.4) = 12 / 60</li>
<li>L(0.6) = 21 / 60</li>
<li>L(0.8) = 38 / 60</li>
<li>L(1) = 60 /60</li>
</ul>
<p>将如上的点用直线连接起来就形成了洛伦兹曲线，如 <a href="#fig-2_7_lc" class="quarto-xref">图&nbsp;<span>2.13</span></a>。</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">17</span>, <span class="dv">22</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(y)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">yf=</span>(y <span class="sc">/</span> <span class="dv">60</span>))</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>yf)) <span class="sc">+</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"people proportion"</span>, <span class="at">y=</span><span class="st">"incomes proportion"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-2_7_lc" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2_7_lc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_7_lc-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2_7_lc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.13: <a href="#exm-2_7_a" class="quarto-xref">例子&nbsp;<span>2.6</span></a> 的洛伦兹曲线
</figcaption>
</figure>
</div>
</div>
</div>
<p>也可以用洛伦茨曲线来展现群体中的个体财富，其中 <span class="math inline">\(L(p)\)</span> 代表最贫穷的 <span class="math inline">\(100p%\)</span> 的人所拥有的全部财富的比例。例如，如果全部人口由 1000 人组成，那么 <span class="math inline">\(L(0.22)\)</span> 就是 220 个最贫穷的人所拥有的财富比例。</p>
<p>现在，当向集合中添加一个大于之前所有值的新值时，集合的平均值总是会增加。因此，如果群体成员的收入递增排序后是 <span class="math inline">\(x_1 \le x_2 \le x_3... \le x_n\)</span>，那么 <span class="math inline">\(\forall j = 1,...,n\)</span>，有：</p>
<p><span class="math display">\[
\begin{align}
&amp; \frac{x_1 + ... + x_j}{j} \le \frac{x_1 + ... + x_{j+1}}{j + 1} \le \frac{x_1 + ... + x_n}{n} \\
\therefore &amp; \frac{x_1 + ... + x_j}{x_1 + ... + x_n} \le \frac{j}{n} \\
\therefore &amp; L{(\frac{j}{n}}) \le \frac{j}{n}
\end{align}
\]</span></p>
<p>此外，可以验证，当且仅当所有人的收入都相等时，<span class="math inline">\(L(\frac{j}{n}) = \frac{j}{n}, j=1,...,n\)</span>。因此，除非所有人的收入都相等，否则洛伦茨曲线总是位于 <span class="math inline">\((0,0)\)</span> 和 <span class="math inline">\((1,1)\)</span> 构成的直线之下。对于 <a href="#exm-2_7_a" class="quarto-xref">例子&nbsp;<span>2.6</span></a>，<a href="#fig-2_7_lc_002" class="quarto-xref">图&nbsp;<span>2.14</span></a> 正说明了这一点。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">17</span>, <span class="dv">22</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(y)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">yf=</span>(y <span class="sc">/</span> <span class="dv">60</span>))</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>yf)) <span class="sc">+</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">1</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">1</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="fu">length</span>(df<span class="sc">$</span>x)], <span class="at">yend=</span>df<span class="sc">$</span>yf[<span class="fu">length</span>(df<span class="sc">$</span>yf)], <span class="at">color=</span><span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"people proportion"</span>, <span class="at">y=</span><span class="st">"incomes proportion"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-2_7_lc_002" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2_7_lc_002-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_7_lc_002-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2_7_lc_002-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.14: <a href="#exm-2_7_a" class="quarto-xref">例子&nbsp;<span>2.6</span></a> 的包含直线的洛伦兹曲线
</figcaption>
</figure>
</div>
</div>
</div>
<p>因此，当所有人的收入都相等时，洛伦茨曲线与从 <span class="math inline">\((0, 0)\)</span> 到 <span class="math inline">\((1, 1)\)</span> 的直线重合；而当群体中不同个体收入不相等时，洛伦茨曲线则位于该直线的下方。当群体成员的收入越不平等，<span class="math inline">\((0, 0)\)</span> 到 <span class="math inline">\((1, 1)\)</span> 的直线和洛伦茨曲线之间的区域则越大（如 <a href="#fig-2_7_lc_area" class="quarto-xref">图&nbsp;<span>2.15</span></a> 中的阴影区域所示）。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">17</span>, <span class="dv">22</span>)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(y)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">yf=</span>(y <span class="sc">/</span> <span class="dv">60</span>))</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>yf)) <span class="sc">+</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>yf), <span class="at">fill=</span><span class="st">"grey"</span>, <span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">1</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">1</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="fu">length</span>(df<span class="sc">$</span>x)], <span class="at">yend=</span>df<span class="sc">$</span>yf[<span class="fu">length</span>(df<span class="sc">$</span>yf)], <span class="at">color=</span><span class="st">"red"</span>) <span class="sc">+</span> </span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.75</span>, <span class="at">y =</span> <span class="fl">0.25</span>, <span class="at">label =</span> <span class="st">"B"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"people proportion"</span>, <span class="at">y=</span><span class="st">"incomes proportion"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-2_7_lc_area" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2_7_lc_area-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_7_lc_area-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2_7_lc_area-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.15: 直线[(0, 0), (1, 1)]和洛伦兹曲线之间的面积
</figcaption>
</figure>
</div>
</div>
</div>
<p>可以用基尼系数（<em>Gini Index</em>）衡量 <span class="math inline">\((0, 0)\)</span> 到 <span class="math inline">\((1, 1)\)</span> 的直线和洛伦茨曲线之间的区域大小，进而衡量群体中成员的收入不平等性。基尼系数等于 <a href="#fig-2_7_lc_area" class="quarto-xref">图&nbsp;<span>2.15</span></a> 中阴影区域面积与直线下方区域的面积之比。由于三角形的面积是底乘以高的一半，所以从 <span class="math inline">\((0, 0)\)</span> 到 <span class="math inline">\((1, 1)\)</span> 的直线下方的面积等于 <span class="math inline">\(\frac{1}{2}\)</span>。</p>
<p>因此，基尼系数 <span class="math inline">\(G\)</span> 的定义如下：</p>
<p><span class="math display">\[
G = \frac{L(p) 曲线和直线围成的区域面积}{\frac{1}{2}}
\]</span></p>
<p>令洛伦兹曲线下方的区域为 <span class="math inline">\(B\)</span>，则洛伦兹曲线和直线围成的面积就是直线下方的面积减去洛伦兹曲线下方的面积。因此，基尼系数</p>
<p><span id="eq-2_7_001"><span class="math display">\[
G=\frac{\frac{1}{2} - B}{\frac{1}{2}} = 1 - 2B
\tag{2.19}\]</span></span></p>
<div id="exr-2_7_b" class="theorem exercise">
<p><span class="theorem-title"><strong>练习 2.11</strong></span> 计算 <a href="#exm-2_7_a" class="quarto-xref">例子&nbsp;<span>2.6</span></a> 中的数据的基尼系数。</p>
</div>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">17</span>, <span class="dv">22</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(y)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">yf=</span>(y <span class="sc">/</span> <span class="dv">60</span>))</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>yf)) <span class="sc">+</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>yf), <span class="at">fill=</span><span class="st">"grey"</span>, <span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">1</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">1</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="fu">length</span>(df<span class="sc">$</span>x)], <span class="at">yend=</span>df<span class="sc">$</span>yf[<span class="fu">length</span>(df<span class="sc">$</span>yf)], <span class="at">color=</span><span class="st">"red"</span>) <span class="sc">+</span> </span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">2</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">2</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">2</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">3</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">3</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">3</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">4</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">4</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">4</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">5</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">5</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">5</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">6</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">6</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">6</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.15</span>, <span class="at">y =</span> <span class="fl">0.02</span>, <span class="at">label =</span> <span class="st">"B1"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.3</span>, <span class="at">y =</span> <span class="fl">0.1</span>, <span class="at">label =</span> <span class="st">"B2"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.5</span>, <span class="at">y =</span> <span class="fl">0.2</span>, <span class="at">label =</span> <span class="st">"B3"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.7</span>, <span class="at">y =</span> <span class="fl">0.4</span>, <span class="at">label =</span> <span class="st">"B4"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.9</span>, <span class="at">y =</span> <span class="fl">0.6</span>, <span class="at">label =</span> <span class="st">"B5"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"people proportion"</span>, <span class="at">y=</span><span class="st">"incomes proportion"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-2_7_lc_area_seg" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2_7_lc_area_seg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_7_lc_area_seg-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2_7_lc_area_seg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.16: 求解 B 的面积
</figcaption>
</figure>
</div>
</div>
</div>
<div id="sol-2_7_b" class="proof solution">
<p><span class="proof-title"><em>答案 2.12</em>. </span>为了计算 <span class="math inline">\(B\)</span> 的面积（即洛伦兹曲线下的面积），如 <a href="#fig-2_7_lc_area_seg" class="quarto-xref">图&nbsp;<span>2.16</span></a> 所示，我们令 <span class="math inline">\(B = B1 + B2 + B3 + B4 + B5\)</span>，其中 <span class="math inline">\(B1\)</span> 是0~0.2 的洛伦兹曲线下的区域面积，<span class="math inline">\(B2\)</span> 是 0.2~0.4 之间的区域面积，<span class="math inline">\(B3\)</span> 是 0.4~0.6 之间的区域面积，<span class="math inline">\(B4\)</span> 是 0.6~0.8 之间的区域面积；<span class="math inline">\(B5\)</span> 是 0.8~1 之间的区域面积。现在，<span class="math inline">\(B1\)</span> 是一个三角形的面积，其底为 0.2，高为 5/60，因此：</p>
<p><span class="math display">\[
B1 = \frac{1}{2} \cdot 0.2 \cdot \frac{5}{60} = \frac{5}{600}
\]</span></p>
<p>对于 <span class="math inline">\(B2, B3, B4, B5\)</span> 而言，这些区域的面积由两部区域构成：顶部的三角形的面积和底部的矩形面积。如下图所示，以 <span class="math inline">\(B2\)</span> 为例，其面积由 <span class="math inline">\(B2-1\)</span> 和 <span class="math inline">\(B2-2\)</span> 两部分构成：</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">17</span>, <span class="dv">22</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(y)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">yf=</span>(y <span class="sc">/</span> <span class="dv">60</span>))</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>yf)) <span class="sc">+</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.6</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">0.6</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.05</span>)) <span class="sc">+</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">2</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">2</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">3</span>], <span class="at">yend=</span>df<span class="sc">$</span>yf[<span class="dv">3</span>]) <span class="sc">+</span> </span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">2</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">2</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">2</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">3</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">3</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">3</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">2</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">2</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">3</span>], <span class="at">yend=</span>df<span class="sc">$</span>yf[<span class="dv">2</span>], <span class="at">linetype=</span><span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.3</span>, <span class="at">y =</span> <span class="fl">0.1</span>, <span class="at">label =</span> <span class="st">"B2-1"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.3</span>, <span class="at">y =</span> <span class="fl">0.03</span>, <span class="at">label =</span> <span class="st">"B2-2"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"people proportion"</span>, <span class="at">y=</span><span class="st">"incomes proportion"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>因此，所有的三角形的底的长度都是 0.2，其对应的高分别为 <span class="math inline">\(\frac{5}{60}, \frac{7}{60}, \frac{9}{60}, \frac{17}{60}, \frac{22}{60}\)</span>。因此，所有的三角形的面积为：</p>
<p><span class="math display">\[
S_\triangle = \frac{1}{2} \cdot 0.2 \cdot \frac{5+7+9+17+22}{60} = 0.1
\]</span></p>
<p>四个矩形的长均是 0.2，其对应的高分别是 <span class="math inline">\(\frac{5}{60}, \frac{12}{60}, \frac{21}{60}, \frac{38}{60}\)</span>。因此，所有的矩形的面积为：</p>
<p><span class="math display">\[
S_\square = 0.2 \cdot \frac{5 + 12 + 21 + 38}{60} \thickapprox 0.25333
\]</span></p>
<p>所以 <span class="math inline">\(B = S_\triangle + S_\square =\)</span> <span class="math inline">\(0.1 + 0.25333 = 0.35333\)</span>，故而 <span class="math inline">\(G = 1 - 2B =\)</span> <span class="math inline">\(1 - 2 \cdot 0.35333 =\)</span> <span class="math inline">\(0.29334\)</span>。</p>
</div>
<p>一般而言，收入数据以升序进行排列，<span class="math inline">\(x_1 \le x_2 \le x_3 \le ... \le x_n\)</span>，令 <span class="math inline">\(s_j = x_1 + ... + x_j, j=1,...,n\)</span>，则洛伦兹曲线下方的所有三角形的底均是 <span class="math inline">\(\frac{1}{n}\)</span>，且其对应的高分别为 <span class="math inline">\(\frac{x_1}{s_n}\)</span>，<span class="math inline">\(\frac{x_2}{s_n}\)</span>，……，<span class="math inline">\(\frac{x_n}{s_n}\)</span>。</p>
<p>因此，所有三角形的面积为：</p>
<p><span class="math display">\[
S_\triangle=\frac{1}{2n}\frac{(x_1 + ... + x_n)}{s_n}=\frac{1}{2n}
\]</span></p>
<p>所有的矩形的长均为 <span class="math inline">\(\frac{1}{n}\)</span>，且其对应的高分别为 <span class="math inline">\(\frac{s_1}{s_n}\)</span>，<span class="math inline">\(\frac{s_2}{s_n}\)</span>，……，<span class="math inline">\(\frac{s_{n-1}}{s_n}\)</span>。</p>
<p>因此，所有矩形的面积为：</p>
<p><span class="math display">\[
S_\square = \frac{s_1 + s_2 + ... + s_{n-1}}{ns_n}
\]</span></p>
<p>所以：</p>
<p><span id="eq-2_7_002"><span class="math display">\[
B = \frac{1}{2n} +  \frac{s_1 + s_2 + ... + s_{n-1}}{ns_n}
\tag{2.20}\]</span></span></p>
<p>当所有人的收入都相等时，基尼系数为 0，因此直线与洛伦兹曲线之间的面积为 0。另一个极端的情况就是，当群体的 <span class="math inline">\(n\)</span> 个人中，只有一个人有收入，那么此时基尼系数达到最大值。对于第二种场景，洛伦兹曲线下的面积是一个三角形的面积，其底边长度为 <span class="math inline">\(\frac{1}{n}\)</span>，高度为 1（如 <a href="#fig-2_7_gini_max" class="quarto-xref">图&nbsp;<span>2.17</span></a>）。此时 <span class="math inline">\(B=\frac{1}{2n}\)</span>，因此 <span class="math inline">\(G=1-\frac{1}{n}\)</span>。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">60</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(y)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">yf=</span>(y <span class="sc">/</span> <span class="dv">60</span>))</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>yf)) <span class="sc">+</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>yf), <span class="at">fill=</span><span class="st">"grey"</span>, <span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">1</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">1</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="fu">length</span>(df<span class="sc">$</span>x)], <span class="at">yend=</span>df<span class="sc">$</span>yf[<span class="fu">length</span>(df<span class="sc">$</span>yf)], <span class="at">color=</span><span class="st">"red"</span>) <span class="sc">+</span> </span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">2</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">2</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">2</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">3</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">3</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">3</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">4</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">4</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">4</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">5</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">5</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">5</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span>df<span class="sc">$</span>x[<span class="dv">6</span>], <span class="at">y=</span>df<span class="sc">$</span>yf[<span class="dv">6</span>], <span class="at">xend=</span>df<span class="sc">$</span>x[<span class="dv">6</span>], <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"people proportion"</span>, <span class="at">y=</span><span class="st">"incomes proportion"</span>) <span class="sc">+</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(  </span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),   </span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.9</span>, <span class="at">y =</span> <span class="fl">0.25</span>, <span class="at">label =</span> <span class="st">"B"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.8</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">label =</span> <span class="st">"1-(1/n)"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">label =</span> <span class="st">"1"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">1</span>, <span class="at">label =</span> <span class="st">"1"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-2_7_gini_max" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2_7_gini_max-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="2_files/figure-html/fig-2_7_gini_max-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2_7_gini_max-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;2.17: 最大基尼系数
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="sec-2_8" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="sec-2_8"><span class="header-section-number">2.8</span> R</h2>
<p>如果我们要计算 <span class="math inline">\(x_1,...,x_n\)</span> 的样本均值和样本方差，我们可以在 R 中输入：</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(x_1,...,x_n)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>然后可以按下 <code>回车</code> 键，并输入 <code>mean(x)</code>，然后当再次按下 <code>回车</code> 时，就会打印出样本均值。当输入 <code>var(x)</code>，然后按下 <code>回车</code> 时，就会打印出样本方差。</p>
<p>例如，我们要计算：4，6，12，9，21，14 的样本均值和样本方差，我们可以用 R 按照如下方式获取：</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">9</span>,<span class="dv">21</span>,<span class="dv">14</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">mean</span>(x)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">11</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">var</span>(x)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">37.6</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> </span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>在 R 中，我们不需要输入行首的 <code>&gt;</code>，R 会自动为每一行补充提示符 <code>&gt;</code>，以提示我们输入代码。R 中的命令还有：</p>
<ul>
<li><code>sum(x)</code>：返回向量 <code>x</code> 中所有数据的和。</li>
<li><code>median(x)</code>：返回向量 <code>x</code> 中的所有数据的中位数。</li>
<li><code>sd(x)</code>：返回向量 <code>x</code> 中所有数据的标准差。</li>
</ul>
<p>如果 <span class="math inline">\(x=c(x_1,...,x_n)\)</span>，<span class="math inline">\(y=c(y_1,...,y_n)\)</span>，则：</p>
<ul>
<li><span class="math inline">\(x+y=c(x_1+y_1,...,x_n+y_n)\)</span></li>
<li><span class="math inline">\(x-y=c(x_1-y_1,...,x_n-y_n)\)</span></li>
<li><span class="math inline">\(x^2=c(x_1^2,...,x_n^2)\)</span></li>
<li><span class="math inline">\(\frac{x}{y}=c(\frac{x_1}{y_1},...,\frac{x_n}{y_n}), \ \forall y_i \ne 0\)</span></li>
</ul>
<p>如果 <span class="math inline">\(a\)</span> 是一个实数，则：</p>
<ul>
<li><span class="math inline">\(a + x = c(a+x_1,...,a+x_n)\)</span></li>
<li><span class="math inline">\(ax = c(ax_1,...,ax_n)\)</span></li>
<li><span class="math inline">\(\frac{x}{a}=c(\frac{x_1}{a},...,\frac{x_n}{a}), \ \forall a \ne 0\)</span></li>
<li><span class="math inline">\(\frac{a}{x}=c(\frac{a}{x_1},...,\frac{a}{x_n}), \ \forall x_i \ne 0\)</span></li>
</ul>
<p>对于成对数据 <span class="math inline">\(\{(x_i,y_i)\}, \ i=1,...,n\)</span>，我们可以使用如下命令获取其相关系数：</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">&lt;-</span> <span class="fu">c</span>(x1,...,xn) </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">&lt;-</span> <span class="fu">c</span>(y1,...,yn) </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">cor</span>(x, y)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>可以用 <code>plot(x, y)</code> 获取 <span class="math inline">\(\{(x_i,y_i)\}\)</span> 的散点图：</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">plot</span>(x, y)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>假设我们有如下的数据：<code>(4,10), (6,13), (12,22), (9,15), (21,30), (14,15)</code>，我们可以使用如下的 R 命令获取其样本相关系数和散点图：</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">9</span>, <span class="dv">21</span>, <span class="dv">14</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">22</span>, <span class="dv">15</span>, <span class="dv">30</span>, <span class="dv">15</span>) </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(x, y)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9041494</code></pre>
</div>
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, y)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>R 还可以用于数学计算，例如我们可以使用如下命令计算 <span class="math inline">\(\frac{18\sqrt{177}}{677}\)</span>：</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span><span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">177</span>)<span class="sc">/</span><span class="dv">677</span> </span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3537288</code></pre>
</div>
</div>
<ul>
<li>如果我们从向量 <code>x &lt;- c(x1, ..., xn)</code> 中选择第 <span class="math inline">\(i\)</span> 个位置的元素 <span class="math inline">\(x_i\)</span>，我们可以使用命令 <code>x[i]</code>。</li>
<li>如果希望从向量 <code>x</code> 中选择 <span class="math inline">\(i\)</span> 到 <span class="math inline">\(j\)</span> 的元素并构成一个新的向量，我们可以使用命令 <code>x[i:j]</code>。</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">18</span>, <span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">22</span>, <span class="dv">5</span>, <span class="dv">17</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">3</span>]</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18  9  7 22</code></pre>
</div>
</div>
<p>我们可以使用 R 计算基尼系数。对于向量 <code>x &lt;- c(x1, ..., xn)</code>，先利用 <code>sort(x)</code> 得到 关于向量 <code>x</code> 中数据的递增排序。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">22</span>, <span class="dv">5</span>, <span class="dv">17</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(x)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5  7  9 17 22</code></pre>
</div>
</div>
<p>如果我们想使用 <a href="#eq-2_7_001" class="quarto-xref">方程式&nbsp;<span>2.19</span></a> 和 <a href="#eq-2_7_002" class="quarto-xref">方程式&nbsp;<span>2.20</span></a> 来计算 <a href="#exr-2_7_b" class="quarto-xref">练习&nbsp;<span>2.11</span></a> 中的基尼系数，我们可以使用如下的代码：</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">22</span>, <span class="dv">5</span>, <span class="dv">17</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sort</span>(y)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(x)[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">10</span> <span class="sc">+</span> <span class="fu">sum</span>(s) <span class="sc">/</span> (<span class="dv">5</span> <span class="sc">*</span> <span class="fu">sum</span>(x))</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>G <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> B</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>G </span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2933333</code></pre>
</div>
</div>
<p>我们也可以在 R 中定义 <code>函数</code>。例如，我们想在 R 中定义函数 <span class="math inline">\(f\)</span> 以实现 <span class="math inline">\(f(x) = x^2\)</span>，可以使用如下的代码：</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">=</span> <span class="cf">function</span>(x){x <span class="sc">*</span> x}</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">4</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
<p>如果我们想实现 <span class="math inline">\(f(x) = e^x\)</span>，可以使用如下的代码：</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">=</span> <span class="cf">function</span>(x){<span class="fu">exp</span>(x)}</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">1</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.718282</code></pre>
</div>
</div>
<p>使用 <code>函数</code> 的概念，我们可以使用如下的代码以获取 <code>9, 7, 22, 5, 17</code> 的基尼系数：</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">=</span> <span class="cf">function</span>(x, j){<span class="fu">sum</span>(x[<span class="dv">1</span><span class="sc">:</span>j])}</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">22</span>, <span class="dv">5</span>, <span class="dv">17</span>)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sort</span>(y)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">10</span> <span class="sc">+</span> (<span class="fu">s</span>(x, <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">s</span>(x, <span class="dv">2</span>) <span class="sc">+</span> <span class="fu">s</span>(x, <span class="dv">3</span>) <span class="sc">+</span> <span class="fu">s</span>(x, <span class="dv">4</span>)) <span class="sc">/</span> (<span class="dv">5</span> <span class="sc">*</span> <span class="fu">s</span>(x, <span class="dv">5</span>))</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>G <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> B</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>G </span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2933333</code></pre>
</div>
</div>
</section>
<section id="习题" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="习题">习题</h2>
<ol type="1">
<li><p>以下是 1997 年 6 月，旧金山湾区每加仑标准无铅汽油的价格的样本数据。</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="ex">3.88,</span> 3.90, 3.93, 3.90, 3.93, 3.96, 3.88, 3.94, 3.96, 3.88, 3.94, 3.99, 3.98</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>使用如下的方式对数据进行描述：</p>
<ul>
<li>频率表</li>
<li>相对频率的线图</li>
</ul></li>
<li><p>解释一下如何构建一个饼图。如果数据集中的某个数据值的相对频率为 r，那么在饼图中，该扇区将会位于什么角度？</p></li>
<li><p>以下是西半球四个地区的石油储量估计数据（以十亿桶为单位）：</p>
<ul>
<li>United States 38.7</li>
<li>South America 22.6</li>
<li>Canada 8.8</li>
<li>Mexico 60.0</li>
</ul>
<p>请使用饼图来描述如上的数据。</p></li>
<li><p>选择一本书或一篇文章，计算前 100 个句子中每个句子的单词数，并使用茎叶图来展现这些数据。现在选择另一本由不同作者撰写的书或文章，并做同样的操作。这两个茎叶图看起来是否相似？你认为这种方法能否有效地判断不同的文章是否由不同的作者所写？</p></li>
<li><p>以下是每日上班通勤时间（以分钟为单位）的频率表：</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Travel time</th>
<th>Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>15</td>
<td>6</td>
</tr>
<tr class="even">
<td>18</td>
<td>5</td>
</tr>
<tr class="odd">
<td>22</td>
<td>4</td>
</tr>
<tr class="even">
<td>23</td>
<td>3</td>
</tr>
<tr class="odd">
<td>24</td>
<td>4</td>
</tr>
<tr class="even">
<td>25</td>
<td>2</td>
</tr>
<tr class="odd">
<td>26</td>
<td>4</td>
</tr>
<tr class="even">
<td>32</td>
<td>3</td>
</tr>
<tr class="odd">
<td>36</td>
<td>1</td>
</tr>
<tr class="even">
<td>48</td>
<td>1</td>
</tr>
</tbody>
</table>
<ul>
<li>频率表中的数据包含了几天的数据？</li>
<li>频率表中的总的通勤时间是多少？</li>
</ul></li>
<li><p><a href="#tbl-us_airline" class="quarto-xref">表格&nbsp;<span>2.10</span></a> 列出了 1985 年至 2006 年间，美国商业航空事故的次数以及由此造成的死亡总人数。</p>
<ul>
<li>绘制事故数的频率表</li>
<li>绘制事故数的折线图</li>
<li>绘制事故数的累积相对频率图</li>
<li>计算事故数的样本均值</li>
<li>计算事故数的样本中位数</li>
<li>找出事故数的样本众数</li>
<li>计算事故数的样本标准差</li>
</ul></li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../misc/US_airline.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df, <span class="at">align=</span><span class="st">"l"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-us_airline" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-us_airline-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.10: 美国商业航空公司 1985~2006 安全数据，数据来源： <em>National Transportation Safety Board</em>。
</figcaption>
<div aria-describedby="tbl-us_airline-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Year</th>
<th style="text-align: left;">Departures..millions.</th>
<th style="text-align: left;">Accidents</th>
<th style="text-align: left;">Fatalities</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1985</td>
<td style="text-align: left;">6.1</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">197</td>
</tr>
<tr class="even">
<td style="text-align: left;">1986</td>
<td style="text-align: left;">6.4</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1987</td>
<td style="text-align: left;">6.6</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">231</td>
</tr>
<tr class="even">
<td style="text-align: left;">1988</td>
<td style="text-align: left;">6.7</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">285</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1989</td>
<td style="text-align: left;">6.6</td>
<td style="text-align: left;">11</td>
<td style="text-align: left;">278</td>
</tr>
<tr class="even">
<td style="text-align: left;">1990</td>
<td style="text-align: left;">7.8</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1991</td>
<td style="text-align: left;">7.5</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">62</td>
</tr>
<tr class="even">
<td style="text-align: left;">1992</td>
<td style="text-align: left;">7.5</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">33</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1993</td>
<td style="text-align: left;">7.7</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">1994</td>
<td style="text-align: left;">7.8</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">239</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1995</td>
<td style="text-align: left;">8.1</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">166</td>
</tr>
<tr class="even">
<td style="text-align: left;">1996</td>
<td style="text-align: left;">7.9</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">342</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1997</td>
<td style="text-align: left;">9.9</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">1998</td>
<td style="text-align: left;">10.5</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1999</td>
<td style="text-align: left;">10.9</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">12</td>
</tr>
<tr class="even">
<td style="text-align: left;">2000</td>
<td style="text-align: left;">11.1</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">89</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2001</td>
<td style="text-align: left;">10.6</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">531</td>
</tr>
<tr class="even">
<td style="text-align: left;">2002</td>
<td style="text-align: left;">10.3</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2003</td>
<td style="text-align: left;">10.2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">22</td>
</tr>
<tr class="even">
<td style="text-align: left;">2004</td>
<td style="text-align: left;">10.8</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">13</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2005</td>
<td style="text-align: left;">10.9</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">22</td>
</tr>
<tr class="even">
<td style="text-align: left;">2006</td>
<td style="text-align: left;">11.2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">50</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<ol start="7" type="1">
<li><p>根据 <a href="#tbl-us_airline" class="quarto-xref">表格&nbsp;<span>2.10</span></a> 的数据，</p>
<ul>
<li>绘制事故导致的死亡人数的直方图</li>
<li>绘制事故导致的死亡人数的茎叶图</li>
<li>计算事故导致的死亡人数的的样本均值</li>
<li>计算事故导致的死亡人数的的样本中位数</li>
<li>计算事故导致的死亡人数的的样本标准差</li>
</ul></li>
<li><p>A 镇成年女性的体重样本均值大于 B 镇成年女性的体重样本均值。此外，A 镇成年男性的体重样本均值也大于 B 镇成年男性的体重样本均值。我们是否可以得出结论：A 镇成年人的体重样本均值大于 B 镇成年人的体重样本均值？请给出你的解释。</p></li>
<li><p>首位数定律（<em>Benford’s law for first digits</em>）指出：在许多现实生活中的数值数据集中，首位数字并不是以相等的比例出现，而是偏向于较小的数字。更具体地说，首位数定律指出，首位非零数字为 <span class="math inline">\(i, i=1,...,9\)</span> 的数据比例大约为 <span class="math inline">\(log_{10}{(i+1)}\)</span>。例如，<span class="math inline">\(log_{10}{(2)}=0.301\)</span>，这表明大约 30.1% 的数据的首位数字是 1。<a href="#tbl-2_9_bl" class="quarto-xref">表格&nbsp;<span>2.11</span></a> 给出了首位数定律中以 1~9 作为首位数字的数据的比例。</p>
<p>有趣的是，首位数定律已被证明可以适用于各种现实生活数据集，包括电费账单、街道地址、股票价格、人口数量、死亡率、河流长度、物理和数学常数，并且当数据值广泛分布时似乎最为准确。首位数定律最初是由美国天文学家西蒙・纽科姆（Simon Newcomb）在 1881 年发表的。1938 年，物理学家弗兰克・本福德（Frank Benford）在 20 个不同领域的数据集上测试了首位数定律，并表明在大多数情况下它都是一个很好的拟合。弗兰克・本福德测试的数据包括：河流的表面积、美国城市的人口规模、物理常数和分子量（<em>molecular weights</em>）等。</p>
<p>物理考试中的一个多选题为：以下哪个是 20℃ 下，100% 过氧化氢溶液的密度（单位为 <span class="math inline">\(g/{cm}^3\)</span>），(a) 7.3316、(b) 6.2421、(c) 1.4512、(d) 8.1818。如果你对过氧化氢一无所知，你会猜哪个答案是正确的？</p>
<div id="tbl-2_9_bl" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-2_9_bl-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;2.11: 首位数定律
</figcaption>
<div aria-describedby="tbl-2_9_bl-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th>First digit</th>
<th>Proportion of data having it as first digit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0.301</td>
</tr>
<tr class="even">
<td>2</td>
<td>0.176</td>
</tr>
<tr class="odd">
<td>3</td>
<td>0.125</td>
</tr>
<tr class="even">
<td>4</td>
<td>0.097</td>
</tr>
<tr class="odd">
<td>5</td>
<td>0.079</td>
</tr>
<tr class="even">
<td>6</td>
<td>0.067</td>
</tr>
<tr class="odd">
<td>7</td>
<td>0.058</td>
</tr>
<tr class="even">
<td>8</td>
<td>0.051</td>
</tr>
<tr class="odd">
<td>9</td>
<td>0.046</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div></li>
<li><p>A 公司总共有 100 名员工，而 B 公司总共有 110 名员工。假设 A 公司的所有员工的薪水总和比 B 公司高。</p>
<ul>
<li>对于 A 公司工资的中位数与 B 公司工资的中位数来说意味着什么？</li>
<li>对于 A 公司工资的平均数与 B 公司工资的平均数来说意味着什么？</li>
</ul></li>
<li><p>一个包含 198 个数据的数据集中，前 99 个数据的样本均值等于 120，而后 99 个数据的样本均值等于 100。关于整个数据集的样本均值，你能得出什么结论？</p>
<ul>
<li>关于整个数据集的样本中位数，你能得出什么结论？</li>
<li>关于整个数据集的样本众数，你能得出什么结论？</li>
</ul></li>
<li><p>下表给出了 1922 年英格兰的重大道路交通事故中，按照年龄、性别汇总的行人死亡人数数据。</p>
<ul>
<li>估算男性年龄的样本均值</li>
<li>估算女性年龄的样本均值</li>
<li>估算死亡男性的四分位数</li>
<li>估算死亡女性的四分位数</li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Age Range</th>
<th>Number of Males</th>
<th>Number of Females</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0-5</td>
<td>120</td>
<td>67</td>
</tr>
<tr class="even">
<td>5-10</td>
<td>184</td>
<td>120</td>
</tr>
<tr class="odd">
<td>10-15</td>
<td>44</td>
<td>22</td>
</tr>
<tr class="even">
<td>15-20</td>
<td>24</td>
<td>15</td>
</tr>
<tr class="odd">
<td>20-30</td>
<td>23</td>
<td>25</td>
</tr>
<tr class="even">
<td>30-40</td>
<td>50</td>
<td>22</td>
</tr>
<tr class="odd">
<td>40-50</td>
<td>60</td>
<td>40</td>
</tr>
<tr class="even">
<td>50-60</td>
<td>102</td>
<td>76</td>
</tr>
<tr class="odd">
<td>60-70</td>
<td>167</td>
<td>104</td>
</tr>
<tr class="even">
<td>70-80</td>
<td>150</td>
<td>90</td>
</tr>
<tr class="odd">
<td>80-100</td>
<td>49</td>
<td>27</td>
</tr>
</tbody>
</table></li>
<li><p>以下是 12 个相邻位置发现的煤炭样本中的含灰量占比数据：</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="ex">9.2,</span> 14.1, 9.8, 12.4, 16.0, 12.6, 22.7, 18.9, 21.0, 14.5, 20.4, 16.9</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>计算如上数据的样本均值</li>
<li>计算如上数据的样本标准差</li>
</ul></li>
<li><p>5 个数据的样本均值和样本方差分别是 <span class="math inline">\(\overline{x} = 104\)</span>，<span class="math inline">\(s^2 = 16\)</span>，如果其中的 3 个数是 102， 100， 105，另外两个数是什么？</p></li>
<li><p>假设你得到了美国 50 个州中每个州所有工人的平均工资。</p>
<ul>
<li>你认为这 50 个州的平均工资的样本均值会等于整个美国的工人平均工资吗？</li>
<li>如果对（a）的回答是否定的，请解释除了这 50 个平均值之外，还需要什么其他信息来确定整个国家的样本平均薪资。同时，解释你将如何使用这些额外信息来计算这个整个美国的工人平均工资。</li>
</ul></li>
<li><p>如下是 40 个晶体管的使用寿命（单位为小时）：</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="ex">112,</span> 121, 126, 108, 141, 104, 136, 134, </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="ex">121,</span> 118, 143, 116, 108, 122, 127, 140,</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="ex">113,</span> 117, 126, 130, 134, 120, 131, 133,</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="ex">118,</span> 125, 151, 147, 137, 140, 132, 119,</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="ex">110,</span> 124, 132, 152, 135, 130, 136, 128</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>计算如上数据的样本均值、样本中位数、样本众数</li>
<li>给出如上数据的累积相对频率图</li>
</ul></li>
<li><p>一个实验测量了 50 个粘土样本干燥后的收缩比率，并记录了以下数据：</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="ex">18.2</span> 21.2 23.1 18.5 15.6 20.8 19.4 15.4 21.2 13.4 </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="ex">16.4</span> 18.7 18.2 19.6 14.3 16.6 24.0 17.6 17.8 20.2 </span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="ex">17.4</span> 23.6 17.5 20.3 16.6 19.3 18.5 19.3 21.2 13.9 </span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="ex">20.5</span> 19.0 17.6 22.3 18.4 21.2 20.4 21.4 20.3 20.1 </span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="ex">19.6</span> 20.6 14.8 19.7 20.5 18.0 20.8 15.8 23.1 17.0</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><ol type="a">
<li>画出如上数据的茎叶图</li>
</ol></li>
<li><ol start="2" type="a">
<li>计算样本均值，样本中位数，样本众数</li>
</ol></li>
<li><ol start="3" type="a">
<li>计算样本方差</li>
</ol></li>
<li><ol start="4" type="a">
<li>从 13% 开始，以 1% 为间隔将如上的数据进行分组，并绘制直方图</li>
</ol></li>
<li><ol start="5" type="a">
<li>对于分组数据而言，假设每个数据点实际上位于其所在区间的中点，计算样本均值和样本方差，并与 (b) 和 (c) 的结果进行比较。为什么它们会不同？</li>
</ol></li>
</ul></li>
<li><p>如下是计算 <span class="math inline">\(\{x_i;\ i=1,...,n\}\)</span> 样本均值和样本方差的一种快速算法。首先计算前 <span class="math inline">\(j(j \ge 2)\)</span> 个数据的样本均值和方差：<span class="math inline">\(\overline{x}_j = \frac{\sum_{i=1}^{j}{x_i}}{j}\)</span>，<span class="math inline">\(s_j^2=\frac{\sum_{i=1}^{j}{(x_i - \overline{x})^2}}{j - 1}\)</span>。其中，<span class="math inline">\(\overline{x}_1 = x_1\)</span>，<span class="math inline">\(s_1^2 = 0\)</span>。则：</p>
<p><span class="math display">\[
\begin{align}
&amp; \overline{x}_{j+1} = \overline{x}_j + \frac{x_{j + 1} - \overline{x}}{j + 1} \\
&amp; s_{j+1}^2 = (1 - \frac{1}{j})s_j^2 + (j + 1)(\overline{x}_{j+1} - \overline{x}_j)^2
\end{align}
\]</span></p>
<ul>
<li><ol type="a">
<li>使用如上的算法计算 <code>3, 4, 7, 2, 9, 6</code> 的样本均值和样本方差</li>
</ol></li>
<li><ol start="2" type="a">
<li>使用普通的计算方式来校验 (a) 的结果</li>
</ol></li>
<li><ol start="3" type="a">
<li>验证如上算法中的 <span class="math inline">\(\overline{x}_{j+1}\)</span> 和 <span class="math inline">\(\overline{x}_{j}\)</span> 的关系</li>
</ol></li>
</ul></li>
<li><p>对于 <a href="#tbl-us_daily_min_temputer" class="quarto-xref">表格&nbsp;<span>2.5</span></a> 的数据，</p>
<ul>
<li>计算 1 月的平均气温的 90-分位值</li>
<li>计算 7 月的平均气温的 75-分位值</li>
</ul></li>
<li><p>根据 《纽约时报》在 2013 年 8 月 1 日两周前发布的讣告，找出如下的死亡年龄的四分位数。</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="ex">92,</span> 90, 92, 74, 69, 80, 94, 98, 65, 96, </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="ex">84,</span> 69, 86, 91, 88, 74, 97, 85, 88, 68, </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="ex">77,</span> 94, 88, 65, 76, 75, 60, 69, 97, 92, </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="ex">85,</span> 70, 80, 93, 91, 68, 82, 78, 89</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>我们按照各个大学在谷歌上的月搜索量对大学进行月度排名，在截止到 2013 年 6 月的 114 个月中，获得过月榜单 TOP 10 的大学的上榜次数如下表所示。</p>
<table class="caption-top table">
<colgroup>
<col style="width: 65%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th>University</th>
<th>Number of Months in Top 10</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Harvard University</td>
<td>114</td>
</tr>
<tr class="even">
<td>University of Texas, Austin</td>
<td>114</td>
</tr>
<tr class="odd">
<td>University of Michigan</td>
<td>114</td>
</tr>
<tr class="even">
<td>Stanford University</td>
<td>113</td>
</tr>
<tr class="odd">
<td>University of California Los Angeles (UCLA)</td>
<td>111</td>
</tr>
<tr class="even">
<td>University of California Berkeley</td>
<td>97</td>
</tr>
<tr class="odd">
<td>Penn State University</td>
<td>94</td>
</tr>
<tr class="even">
<td>Massachusetts Institute of Technology (MIT)</td>
<td>66</td>
</tr>
<tr class="odd">
<td>University of Southern California (USC)</td>
<td>63</td>
</tr>
<tr class="even">
<td>Ohio State University</td>
<td>52</td>
</tr>
<tr class="odd">
<td>Yale University</td>
<td>48</td>
</tr>
<tr class="even">
<td>University of Washington</td>
<td>33</td>
</tr>
</tbody>
</table>
<ul>
<li>计算样本均值</li>
<li>计算样本方差</li>
<li>计算样本的四分位数</li>
</ul></li>
<li><p>填写缺失的单词或短语以完成以下句子：“如果向一组数字中增加一个新的数字，如果新的数字____，则该数组的样本均值将增加。”</p></li>
<li><p>用箱线图表示第 20 题中的数据。</p></li>
<li><p>在一个石油化工企业中，在 36 个随机选择的时间点测量了平均颗粒物浓度（单位为 <span class="math inline">\(mg/m^3\)</span>），得到了如下的浓度数据：</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="ex">5,</span> 18,  15, 7,  23, 220, 130, 85, 103, 25, </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="ex">80,</span> 7,  24, 6,  13, 65,  37,  25, 24,  65, </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="ex">82,</span> 95, 77, 15, 70, 110, 44,  28, 33,  81, </span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="ex">29,</span> 14, 45, 92, 17, 53</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>使用直方图描述如上数据</li>
<li>如上的直方图是近似正态直方图吗？</li>
</ul></li>
<li><p>一位化学工程师想要研究盐水蒸发池中水的蒸发率，他获得了 4 年中盐水蒸发池 7 月份每天蒸发英寸数的 55 个数据。这些数据以下面的茎叶图给出，其最小数据为 0.02 英寸，最大数据为 0.56 英寸。</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="ex">.0</span>    2,6</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="ex">.1</span>    1,4</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="ex">.2</span>    1,1,1,3,3,4,5,5,5,6,9</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="ex">.3</span>    0,0,2,2,2,3,3,3,3,4,4,5,5,5,6,6,7,8,9 </span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="ex">.4</span>    0,1,2,2,2,3,4,4,4,5,5,5,7,8,8,8,9,9 </span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="ex">.5</span>    2,5,6</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>计算如上数据的：</p>
<ul>
<li>样本均值</li>
<li>样本中位数</li>
<li>样本标准差</li>
<li>如上的数据看起来符合近似正态分布吗？</li>
<li>位于样本均值 1 个标准差以内的数据占比是多少？</li>
</ul></li>
<li><p>以下是加利福尼亚大学伯克利分校工业工程与运筹学系录取的最近 30 名学生的 GPA（<em>grade point averages</em>）。</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="ex">3.46,</span> 3.72, 3.95, 3.55, 3.62, 3.80, 3.86, 3.71, 3.56, 3.49, </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="ex">3.96,</span> 3.90, 3.70, 3.61, 3.72, 3.65, 3.48, 3.87, 3.82, 3.91, </span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="ex">3.69,</span> 3.67, 3.72, 3.66, 3.79, 3.75, 3.93, 3.74, 3.50, 3.83</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><ol type="a">
<li>使用茎叶图来绘制如上的数据</li>
</ol></li>
<li><ol start="2" type="a">
<li>计算样本均值 <span class="math inline">\(\overline{x}\)</span></li>
</ol></li>
<li><ol start="3" type="a">
<li>计算样本标准差 <span class="math inline">\(s\)</span></li>
</ol></li>
<li><ol start="4" type="a">
<li>计算位于 <span class="math inline">\([\overline{x} - 1.5s, \overline{x} + 1.5s]\)</span> 的数据比例，并和切比雪夫不等式给出的下限比例进行对比</li>
</ol></li>
<li><ol start="5" type="a">
<li>计算位于 <span class="math inline">\([\overline{x} - 2s, \overline{x} + 2s]\)</span> 的数据比例，并和切比雪夫不等式给出的下限比例进行对比</li>
</ol></li>
</ul></li>
<li><p>第 26 题中的数据是否近似于正态分布？对于第 26 题的 (d) 和 (e) ，请使用经验法则给出的近似占比与实际占比进行比较。</p></li>
<li><p>你是否期望一个健身俱乐部所有会员的体重直方图会近似于正态分布？</p></li>
<li><p>对于第 16 题中的数据：</p>
<ul>
<li><ol type="a">
<li>计算样本均值和样本中位数</li>
</ol></li>
<li><ol start="2" type="a">
<li>这些数据符合近似正态分布吗？</li>
</ol></li>
<li><ol start="3" type="a">
<li>计算样本标准差 <span class="math inline">\(s\)</span></li>
</ol></li>
<li><ol start="4" type="a">
<li>计算位于 <span class="math inline">\([\overline{x} - 1.5s, \overline{x} + 1.5]\)</span> 区间的数据的占比</li>
</ol></li>
<li><ol start="5" type="a">
<li>对比 (d) 的结果和经验法则给出的结果</li>
</ol></li>
<li><ol start="6" type="a">
<li>对比 (d) 的结果和切比雪夫不等式给出的结果</li>
</ol></li>
</ul></li>
<li><p>以下是 12 名考试成绩大致相同的法学院学生的身高和起薪数据：</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Height (inches)</th>
<th>Salary</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>64</td>
<td>91</td>
</tr>
<tr class="even">
<td>65</td>
<td>94</td>
</tr>
<tr class="odd">
<td>66</td>
<td>88</td>
</tr>
<tr class="even">
<td>67</td>
<td>103</td>
</tr>
<tr class="odd">
<td>69</td>
<td>77</td>
</tr>
<tr class="even">
<td>70</td>
<td>96</td>
</tr>
<tr class="odd">
<td>72</td>
<td>105</td>
</tr>
<tr class="even">
<td>72</td>
<td>88</td>
</tr>
<tr class="odd">
<td>74</td>
<td>122</td>
</tr>
<tr class="even">
<td>74</td>
<td>102</td>
</tr>
<tr class="odd">
<td>75</td>
<td>90</td>
</tr>
<tr class="even">
<td>76</td>
<td>114</td>
</tr>
</tbody>
</table>
<ul>
<li>绘制数据的散点图</li>
<li>计算样本相关系数</li>
</ul></li>
<li><p>根据人们的站立姿势数据形成一个随机样本。针对样本中的人，还额外记录了每个人在过去一年中经历背痛的天数。令研究人员惊讶的是，这些数据表明良好的站姿与背痛天数之间存在正相关关系。这是否意味着良好的站姿会导致背痛？</p></li>
<li><p>如果我们把美国 50 个州中每个州的居民平均收入和居住在该州的外国出生的移民数量绘制为成对的数据图，那么这些成对数据将呈现正相关关系。我们能否得出结论，移民居民往往比土生土长的美国人的收入更高？如果不是，还能如何解释这个现象？</p></li>
<li><p>随机抽取 12 名高中三年级学生，并要求他们估算自己每周平均学习的小时数。以下的数据给出了估算结果和学生的 GPA。</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Hours</th>
<th>GPA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>6</td>
<td>2.8</td>
</tr>
<tr class="even">
<td>14</td>
<td>3.2</td>
</tr>
<tr class="odd">
<td>3</td>
<td>3.1</td>
</tr>
<tr class="even">
<td>22</td>
<td>3.6</td>
</tr>
<tr class="odd">
<td>9</td>
<td>3.0</td>
</tr>
<tr class="even">
<td>11</td>
<td>3.3</td>
</tr>
<tr class="odd">
<td>12</td>
<td>3.4</td>
</tr>
<tr class="even">
<td>5</td>
<td>2.7</td>
</tr>
<tr class="odd">
<td>18</td>
<td>3.1</td>
</tr>
<tr class="even">
<td>24</td>
<td>3.8</td>
</tr>
<tr class="odd">
<td>15</td>
<td>3.0</td>
</tr>
<tr class="even">
<td>17</td>
<td>3.9</td>
</tr>
</tbody>
</table>
<ul>
<li>计算学习小时数和 GPA 之间的样本相关系数。</li>
</ul></li>
<li><p>验证样本相关系数的特性 3。</p></li>
<li><p>验证样本相关系数的特性 4。</p></li>
<li><p>在一项针对二至四年级的儿童研究中，研究人员针对每个学生都做了阅读测试。在研究结果数据时，研究人员注意到学生的阅读测试分数和身高之间存在正相关关系。研究人员得出结论，身高较高的孩子阅读能力更好，因为他们可以更容易地看到黑板。你认为呢？</p></li>
<li><p>最近的一项研究发现，母乳喂养的婴儿与 6 岁时进行的词汇测试分数之间存在正相关关系。讨论在解释这项研究结果时可能遇到的困难。</p></li>
<li><p>一个群体的收入分别为 25、32、60、40、38、50，绘制其洛伦茨曲线并计算其基尼系数。</p></li>
<li><p>根据如下的年收入（以千美元为单位）频率表，绘制该群体的洛伦茨曲线并计算其基尼系数：</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Value</th>
<th>Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>30</td>
<td>2</td>
</tr>
<tr class="even">
<td>50</td>
<td>4</td>
</tr>
<tr class="odd">
<td>60</td>
<td>5</td>
</tr>
<tr class="even">
<td>90</td>
<td>4</td>
</tr>
<tr class="odd">
<td>100</td>
<td>3</td>
</tr>
<tr class="even">
<td>120</td>
<td>2</td>
</tr>
</tbody>
</table></li>
<li><p>如果样本中所有的数据都乘以一个大于 0 的常数 <span class="math inline">\(c\)</span>，基尼系数将会发生什么变化？如果样本中所有的数据都加上一个大于 0 的常数 <span class="math inline">\(c\)</span>，基尼系数又会发生什么变化？下降，保持不变，还是不好说？</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "已复制");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "已复制");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/wangwei1237\.github\.io\/introduction_to_probability_and_statistics\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="wangwei1237/introduction_to_probability_and_statistics" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapter_1/1.html" class="pagination-link" aria-label="统计学简介">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">统计学简介</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapter_3/3.html" class="pagination-link" aria-label="概率论基础">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">概率论基础</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright Wang Wei. All Rights Reserved.</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/wangwei1237/introduction_to_probability_and_statistics/edit/main/chapter_2/2.qmd" class="toc-action"><i class="bi bi-github"></i>编辑该页面</a></li><li><a href="https://github.com/wangwei1237/introduction_to_probability_and_statistics/issues/new" class="toc-action"><i class="bi empty"></i>报告问题</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>