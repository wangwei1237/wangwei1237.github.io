<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-Hans" xml:lang="zh-Hans"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; 随机变量和期望 – Introduction to Probability and Statistics for Engineers and Scientists（中文版）</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapter_5/5.html" rel="next">
<link href="../chapter_3/3.html" rel="prev">
<link href="../favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "没有结果",
    "search-matching-documents-text": "匹配的文档",
    "search-copy-link-title": "复制搜索链接",
    "search-hide-matches-text": "隐藏其它匹配结果",
    "search-more-match-text": "更多匹配结果",
    "search-more-matches-text": "更多匹配结果",
    "search-clear-button-title": "清除",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "取消",
    "search-submit-button-title": "提交",
    "search-label": "搜索"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="4&nbsp; 随机变量和期望 – Introduction to Probability and Statistics for Engineers and Scientists（中文版）">
<meta property="og:description" content="">
<meta property="og:site_name" content="Introduction to Probability and Statistics for Engineers and Scientists（中文版）">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../favicon.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Introduction to Probability and Statistics for Engineers and Scientists（中文版）</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="搜索"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="展开或折叠导航栏" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://wangwei1237.github.io/"> <i class="bi bi-house-fill" role="img">
</i> 
<span class="menu-text">博客</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-bookshelf" role="img">
</i> 
 <span class="menu-text">书籍</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-">    
        <li>
    <a class="dropdown-item" href="https://zh.d2l.ai/">
 <span class="dropdown-text">动手学深度学习</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://learnprompting.org/zh-Hans/docs/intro">
 <span class="dropdown-text">Learn Prompting</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://pan.baidu.com/s/1dciwgbhO-lfKyRo8lOqW9Q?pwd=cm9q">
 <span class="dropdown-text">Stabel Diffusion 提示词手册</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://wangwei1237.github.io/aboutme/"> <i class="bi bi-person-badge-fill" role="img">
</i> 
<span class="menu-text">关于</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/wangwei1237/introduction_to_probability_and_statistics" title="源代码" class="quarto-navigation-tool px-1" aria-label="源代码"><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="展开或折叠侧边栏导航" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapter_4/4.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">随机变量和期望</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="展开或折叠侧边栏导航" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">欢迎阅读</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../preface_17.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">译者序</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">序言</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_1/1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">统计学简介</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_2/2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">描述统计</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_3/3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">概率论基础</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_4/4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">随机变量和期望</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_5/5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">特殊的随机变量</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_6/6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">抽样分布</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_7/7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">参数估计</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_8/8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">假设检验</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_9/9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">回归</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_10/10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">方差分析</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_11/11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Goodness of fit tests and categorical data analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_12/12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Nonparametric hypothesis tests</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_13/13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Quality control</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_14/14.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Life testing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_15/15.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Simulation, bootstrap statistical methods, and permutation tests</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapter_16/16.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Machine learning and big data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">测试脚本</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">附录</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="展开或折叠此栏">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">APPENDIX OF TABLES</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">目录</h2>
   
  <ul>
  <li><a href="#随机变量" id="toc-随机变量" class="nav-link active" data-scroll-target="#随机变量"><span class="header-section-number">4.1</span> 随机变量</a></li>
  <li><a href="#随机变量的类型" id="toc-随机变量的类型" class="nav-link" data-scroll-target="#随机变量的类型"><span class="header-section-number">4.2</span> 随机变量的类型</a></li>
  <li><a href="#联合分布" id="toc-联合分布" class="nav-link" data-scroll-target="#联合分布"><span class="header-section-number">4.3</span> 联合分布</a>
  <ul class="collapse">
  <li><a href="#独立随机变量" id="toc-独立随机变量" class="nav-link" data-scroll-target="#独立随机变量"><span class="header-section-number">4.3.1</span> 独立随机变量</a></li>
  <li><a href="#条件分布" id="toc-条件分布" class="nav-link" data-scroll-target="#条件分布"><span class="header-section-number">4.3.2</span> 条件分布</a></li>
  </ul></li>
  <li><a href="#期望" id="toc-期望" class="nav-link" data-scroll-target="#期望"><span class="header-section-number">4.4</span> 期望</a></li>
  <li><a href="#sec-4_5" id="toc-sec-4_5" class="nav-link" data-scroll-target="#sec-4_5"><span class="header-section-number">4.5</span> 期望的特征</a>
  <ul class="collapse">
  <li><a href="#随机变量和的期望" id="toc-随机变量和的期望" class="nav-link" data-scroll-target="#随机变量和的期望"><span class="header-section-number">4.5.1</span> 随机变量和的期望</a></li>
  </ul></li>
  <li><a href="#方差" id="toc-方差" class="nav-link" data-scroll-target="#方差"><span class="header-section-number">4.6</span> 方差</a></li>
  <li><a href="#协方差以及随机变量的和的方差" id="toc-协方差以及随机变量的和的方差" class="nav-link" data-scroll-target="#协方差以及随机变量的和的方差"><span class="header-section-number">4.7</span> 协方差以及随机变量的和的方差</a></li>
  <li><a href="#矩生成函数" id="toc-矩生成函数" class="nav-link" data-scroll-target="#矩生成函数"><span class="header-section-number">4.8</span> 矩生成函数</a></li>
  <li><a href="#切比雪夫不等式和弱大数定律" id="toc-切比雪夫不等式和弱大数定律" class="nav-link" data-scroll-target="#切比雪夫不等式和弱大数定律"><span class="header-section-number">4.9</span> 切比雪夫不等式和弱大数定律</a></li>
  <li><a href="#习题" id="toc-习题" class="nav-link" data-scroll-target="#习题">习题</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/wangwei1237/introduction_to_probability_and_statistics/edit/main/chapter_4/4.qmd" class="toc-action"><i class="bi bi-github"></i>编辑该页面</a></li><li><a href="https://github.com/wangwei1237/introduction_to_probability_and_statistics/issues/new" class="toc-action"><i class="bi empty"></i>反馈问题</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-4" class="quarto-section-identifier"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">随机变量和期望</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="随机变量" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="随机变量"><span class="header-section-number">4.1</span> 随机变量</h2>
<p>当执行随机实验时，我们并不总是对实验结果的全部细节都感兴趣，我们仅对由结果确定的某些 <strong>数值量</strong>（<em>numerical quantity</em>）的值感兴趣。例如，在抛骰子时，对于每个骰子的点数而言，我们并不感兴趣；我们通常对两个骰子的点数之和感兴趣。也就是说，我们可能想知道点数总和是 7 的情况，而并不关心实际结果是否是：（1, 6）、（2, 5）、（3, 4）、（4, 3）、（5, 2）、（6, 1）。此外，对于土木工程师而言，他们可能不关心水库水位的日常涨落（我们可以将水库水位的日常涨落数据视为实验结果），他们只关心雨季结束时的水位。由实验结果确定的我们感兴趣的这些 <strong>量化指标</strong>（<em>quantities</em>），我们称为 <strong>随机变量</strong>（<em>random variables</em>）。</p>
<p>因为 <strong>随机变量</strong> 的值是由实验结果确定的，因此，对于 <strong>随机变量</strong> 的可能的值，我们可以对其给与概率赋值。</p>
<div id="exm-4_1_a" class="theorem example">
<p><span class="theorem-title"><strong>例 4.1</strong></span> 令 <span class="math inline">\(X\)</span> 表示随机变量：抛 2 个骰子的点数之和，则：</p>
<p><span id="eq-4_1_001"><span class="math display">\[
\begin{align}
P\{X=2\} &amp;= P(\{(1,1)\}) = \frac{1}{36} \\
P\{X=3\} &amp;= P(\{(1,2), (2,1)\}) = \frac{2}{36} \\
P\{X=4\} &amp;= P(\{(1,3), (2,2), (3,1)\}) = \frac{3}{36} \\
P\{X=5\} &amp;= P(\{(1,4), (2,3), (3,2), (4,1)\}) = \frac{4}{36} \\
P\{X=6\} &amp;= P(\{(1,5), (2,4), (3,3), (4,2), (5,1)\}) = \frac{5}{36} \\
P\{X=7\} &amp;= P(\{(1,6), (2,5), (3,4), (4,3), (5,2), (6,1)\}) = \frac{6}{36} \\
P\{X=8\} &amp;= P(\{(2,6), (3,5), (4,4), (5,3), (6,2)\}) = \frac{5}{36} \\
P\{X=9\} &amp;= P(\{(3,6), (4,5), (5,4), (6,3)\}) = \frac{4}{36} \\
P\{X=10\} &amp;= P(\{(4,6), (5,5), (6,4)\}) = \frac{3}{36} \\
P\{X=11\} &amp;= P(\{(5,6), (6,5)\}) = \frac{2}{36} \\
P\{X=12\} &amp;= P(\{(6,6)\}) = \frac{1}{36}
\end{align}
\tag{4.1}\]</span></span></p>
</div>
<p>换句话说，随机变量 <span class="math inline">\(X\)</span> 的取值为 2~12 之间的任何整数值，其每个取值的概率由 <a href="#eq-4_1_001" class="quarto-xref">式&nbsp;<span>4.1</span></a> 给出。由于 <span class="math inline">\(X\)</span> 必须为某个取值，因此我们必有：</p>
<p><span id="eq-4_1_002"><span class="math display">\[
1 = P(S) = P\Bigg( \bigcup_{i=2}^{12}{\{X=i\}} \Bigg) = \sum_{i=2}^{12}{P\{X=i\}}
\tag{4.2}\]</span></span></p>
<p>利用 <a href="#eq-4_1_001" class="quarto-xref">式&nbsp;<span>4.1</span></a> 可以非常简单的验证 <a href="#eq-4_1_002" class="quarto-xref">式&nbsp;<span>4.2</span></a>。</p>
<p>在这个实验中，我们感兴趣的另一个 <strong>随机变量</strong> 是第一个骰子的点数。令 <span class="math inline">\(Y\)</span> 表示 <strong>随机变量</strong>：抛两个骰子时第一个骰子的点数。则 <span class="math inline">\(Y\)</span> 的取值为 1~6 之间的任何值。也就是说：</p>
<p><span id="eq-4_1_003"><span class="math display">\[
P\{Y=i\} = \frac{1}{6}, i=1,2,3,4,5,6 \quad \blacksquare
\tag{4.3}\]</span></span></p>
<div id="exm-4_1_b" class="theorem example">
<p><span class="theorem-title"><strong>例 4.2</strong></span> 假设一个人购买了两个电子元器件，每个电子元器件或者有缺陷（用 <em>d</em> 表示）或者没有缺陷（用 <em>a</em> 表示）。则这两个电子元器件有四种可能的结果：(d, d)、(d, a)、(a, d)、(a, a)，<strong>假设</strong>这四种结果的概率分别为：0.09、0.21、0.21、0.49（其中 (d, d) 表示两个元器件都有缺陷，(d, a) 表示第一个元器件有缺陷、第二个元件没有缺陷，依此类推）。</p>
</div>
<p>我们令 <span class="math inline">\(X\)</span> 表示购买的两个电子元器件中没有缺陷的元器件数量，那么 <span class="math inline">\(X\)</span> 是一个 <strong>随机变量</strong>，且其取值为 0、1、2 中的一个：</p>
<p><span id="eq-4_1_004"><span class="math display">\[
\begin{align}
P\{X=0\} &amp;= 0.09 \\
P\{X=1\} &amp;= 0.42 \\
P\{X=2\} &amp;= 0.49
\end{align}
\tag{4.4}\]</span></span></p>
<p>如果我们主要关注这两个电子元器件是否至少有一个没有缺陷，则我们可以对 <strong>随机变量</strong> <span class="math inline">\(I\)</span> 作如下定义：</p>
<p><span id="eq-4_1_005"><span class="math display">\[
I = \begin{cases}
1, \quad &amp; if \ X=1, 2 \\
0, \quad &amp; if \ X=0
\end{cases}
\tag{4.5}\]</span></span></p>
<p>如果 <span class="math inline">\(A\)</span> 表示事件：至少一个元器件没有缺陷，则根据 <span class="math inline">\(A\)</span> 是否发生，<span class="math inline">\(I\)</span> 将等于 1 或 0。因此，我们称 <strong>随机变量</strong> <span class="math inline">\(I\)</span> 为 <strong>事件</strong> <span class="math inline">\(A\)</span> 的 <strong>指示随机变量</strong>（<em>indicator random variable</em>）。<span class="math inline">\(I\)</span> 的可能取值的概率为：</p>
<p><span id="eq-4_1_006"><span class="math display">\[
\begin{align}
&amp;P\{I=1\}=0.91 \\
&amp;P\{I=0\}=0.09 \qquad \blacksquare
\end{align}
\tag{4.6}\]</span></span></p>
<p>在 <a href="#exm-4_1_a" class="quarto-xref">例&nbsp;<span>4.1</span></a> 和 <a href="#exm-4_1_b" class="quarto-xref">例&nbsp;<span>4.2</span></a> 这两个例子中，我们感兴趣的 <strong>随机变量</strong> 的可能取值的数量是有限的。对于那些取值可以写成有限序列 <span class="math inline">\(x_1,..., x_n\)</span> 或者无限序列 <span class="math inline">\(x_1,...\)</span> 的 <strong>随机变量</strong> 称为 <strong>离散随机变量</strong>（<em>discrete random variables</em>）。例如，一个取值集合为非负整数的 <strong>随机变量</strong> 就是 <strong>离散随机变量</strong>。然而，也存在取值为连续数值的 <strong>随机变量</strong>，我们称这种 <strong>随机变量</strong> 为 <strong>连续随机变量</strong>（<em>continous random variables</em>）。例如，假定汽车的寿命位于某个区间 <span class="math inline">\((a,b)\)</span> 时，表示汽车寿命的 <strong>随机变量</strong> 就是 <strong>连续随机变量</strong>。</p>
<p><strong>随机变量</strong> <span class="math inline">\(X\)</span> 的累积分布函数（<em>cumulative distribution function</em>）<span class="math inline">\(F\)</span> 的定义如下：</p>
<p><span id="eq-4_1_007"><span class="math display">\[
F(x) = P\{X \le x\}
\tag{4.7}\]</span></span></p>
<p>也就是说，<span class="math inline">\(F(x)\)</span> 是 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 取值小于或等于 <span class="math inline">\(x\)</span> 的概率。</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注记
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>随机变量</strong> 的累积分布函数也可简称为 <strong>分布函数</strong>（<em>distribution function</em>）。</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
提示
</div>
</div>
<div class="callout-body-container callout-body">
<p>我们将使用 <span class="math inline">\(X \thicksim F\)</span> 来表示 <span class="math inline">\(F\)</span> 是 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的分布函数。</p>
</div>
</div>
<p>我们可以用 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的分布函数 <span class="math inline">\(F\)</span> 来回答所有关于 <span class="math inline">\(X\)</span> 的概率问题。例如，假如我们想计算 <span class="math inline">\(P\{a \lt X \le b\}\)</span>。要计算该概率，我们首先注意到 <strong>事件</strong> <span class="math inline">\({X \le b}\)</span> 可以表示为两个 <strong>互斥事件</strong> <span class="math inline">\({X \le a}\)</span> 和 <span class="math inline">\({a \lt X \le b}\)</span> 的并集。因此，根据 <strong>公理3</strong>（<a href="../chapter_3/3.html#sec-3_4" class="quarto-xref"><span>小节 3.4</span></a>），我们得到：</p>
<p><span id="eq-4_1_008"><span class="math display">\[
\begin{align}
P\{X \le b\}&amp;=P\{X \le a\} + P\{a \lt X \le b\} \\
\therefore P\{a \lt X \le b\} &amp;= F(b) - F(a)
\end{align}
\tag{4.8}\]</span></span></p>
<div id="exr-4_1_c" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.1</strong></span> 假设 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的分布函数为：</p>
<p><span class="math display">\[
F(x) = \begin{cases}
0, \quad &amp; x \le 0 \\
1-e^{-x^2}, \quad &amp; x \gt 0
\end{cases}
\]</span></p>
<p>计算 <span class="math inline">\(P\{X \gt 1\}\)</span>？</p>
</div>
<div id="sol-4_1_c" class="proof solution">
<p><span class="proof-title"><em>解 4.1</em>. </span><span class="math display">\[
\begin{align}
P\{X \gt 1\} &amp;= 1 - P\{X \le 1\} \\
&amp;= 1 - F(1) \\
&amp;= e^{-1} \\
&amp;= 0.368 \qquad \blacksquare
\end{align}
\]</span></p>
</div>
</section>
<section id="随机变量的类型" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="随机变量的类型"><span class="header-section-number">4.2</span> 随机变量的类型</h2>
<p>如前所述，取值为一个序列集的 <strong>随机变量</strong> 称为 <strong>离散随机变量</strong>。对于 <strong>离散随机变量</strong> <span class="math inline">\(X\)</span>，我们定义其 <strong>概率质量函数</strong> <span class="math inline">\(p(a)\)</span>（<em>probability mass function</em>）为：</p>
<p><span id="eq-4_2_001"><span class="math display">\[
p(a) = P\{X=a\}
\tag{4.9}\]</span></span></p>
<p>对于 <span class="math inline">\(a\)</span> 的可数个取值，其 <strong>概率质量函数</strong> <span class="math inline">\(p(a)\)</span> 为正数。也就是说，如果 <span class="math inline">\(X\)</span> 的取值必须为 <span class="math inline">\(x_1,x_2,...,x_n\)</span>，则 <span class="math inline">\(p(x_i) \gt 0\)</span>，<span class="math inline">\(i=1,2,...\)</span>；对于其他的取值，<span class="math inline">\(p(x)=0\)</span>。</p>
<p>因为 <span class="math inline">\(X\)</span> 必须为 <span class="math inline">\(x_i\)</span> 中的某个值，所以 <span class="math inline">\(\sum_{i=1}^{\infty}{p(x_i)}=1\)</span>。</p>
<div id="exm-4_2_a" class="theorem example">
<p><span class="theorem-title"><strong>例 4.3</strong></span> <strong>随机变量</strong> <span class="math inline">\(X\)</span> = 1，2，3，如果已知：<span class="math inline">\(p(1)=\frac{1}{2}\)</span>，<span class="math inline">\(p(2)=\frac{1}{3}\)</span>，则 <span class="math inline">\(p(3)=\frac{1}{6}\)</span>。<span class="math inline">\(p(x)\)</span> 的线图如 <a href="#fig-4_1" class="quarto-xref">图&nbsp;<span>4.1</span></a>。 <span class="math inline">\(\blacksquare\)</span></p>
</div>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">p =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">6</span>),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">start =</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">3</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">factor</span>(df<span class="sc">$</span>value, <span class="at">levels =</span> df<span class="sc">$</span>value, <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> value, <span class="at">y =</span> start, <span class="at">yend =</span> p, <span class="at">color =</span> value)) <span class="sc">+</span>  </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span>                    <span class="co"># 绘制水平线表示每个“条形”  </span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> p), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span>          <span class="co"># 在每个“条形”的末端添加点  </span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"x"</span>, <span class="at">y =</span> <span class="st">"p(x)"</span>) <span class="sc">+</span>  </span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.1</span>)) <span class="sc">+</span>  </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)           <span class="co"># 调整图例位置</span></span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-4_1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-4_1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="4_files/figure-html/fig-4_1-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-4_1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;4.1: <span class="math inline">\(p(x)\)</span> 的线图，<a href="#exm-4_2_a" class="quarto-xref">例&nbsp;<span>4.3</span></a>
</figcaption>
</figure>
</div>
</div>
</div>
<p>可以使用 <span class="math inline">\(p(x)\)</span> 来表示 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的累积分布函数 <span class="math inline">\(F\)</span>：</p>
<p><span id="eq-4_2_002"><span class="math display">\[
F(a) = \sum_{all \ x \le a}{p(x)}
\tag{4.10}\]</span></span></p>
<p>如果 <span class="math inline">\(X\)</span> 是一个离散随机变量，其可能的取值是 <span class="math inline">\(x_1,x_2,x_3,...\)</span>，其中 <span class="math inline">\(x_1&lt;x_2&lt;x_3&lt;...\)</span>，那么 <span class="math inline">\(X\)</span> 的分布函数 <span class="math inline">\(F\)</span> 是一个阶跃函数（<em>step function</em>）。也就是说，<span class="math inline">\(F\)</span> 的值在区间 <span class="math inline">\([x_{i−1},x_i)\)</span> 是恒定的，然后在 <span class="math inline">\(x_i\)</span> 处有大小为 <span class="math inline">\(p(x_i)\)</span> 的跃变。</p>
<p>例如，假设 <span class="math inline">\(X\)</span> 的概率质量函数（如 <a href="#exm-4_2_a" class="quarto-xref">例&nbsp;<span>4.3</span></a>）为：<span class="math inline">\(p(1)=\frac{1}{2}\)</span>，<span class="math inline">\(p(2)=\frac{1}{3}\)</span>，<span class="math inline">\(p(3)=\frac{1}{6}\)</span>。则 <span class="math inline">\(X\)</span> 的累积分布函数 <span class="math inline">\(F\)</span> 为：</p>
<p><span id="eq-4_2_003"><span class="math display">\[
F(a) = \begin{cases}
0, \quad &amp; a \lt 1 \\
\frac{1}{2}, \quad &amp; 1 \le a \lt 2 \\
\frac{5}{6}, \quad &amp; 2 \le a \lt 3 \\
1, \quad &amp; 3 \le a
\end{cases}
\tag{4.11}\]</span></span></p>
<p><a href="#eq-4_2_003" class="quarto-xref">式&nbsp;<span>4.11</span></a> 如 <a href="#fig-4_2" class="quarto-xref">图&nbsp;<span>4.2</span></a> 所示。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">p =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>cpf <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>p)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">cpf =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, df<span class="sc">$</span>cpf[<span class="dv">1</span>], df<span class="sc">$</span>cpf[<span class="dv">1</span>], df<span class="sc">$</span>cpf[<span class="dv">2</span>], df<span class="sc">$</span>cpf[<span class="dv">2</span>], df<span class="sc">$</span>cpf[<span class="dv">3</span>], df<span class="sc">$</span>cpf[<span class="dv">3</span>])</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">#df1$value &lt;- factor(df$value, levels = df$value, ordered = TRUE)</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df1, <span class="fu">aes</span>(<span class="at">x =</span> value, <span class="at">y =</span> cpf)) <span class="sc">+</span>  </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"x"</span>, <span class="at">y =</span> <span class="st">"F(x)"</span>) <span class="sc">+</span>  </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.1</span>)) <span class="sc">+</span>  </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)           <span class="co"># 调整图例位置</span></span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-4_2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-4_2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="4_files/figure-html/fig-4_2-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-4_2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;4.2: <span class="math inline">\(F(x)\)</span> 的折线图
</figcaption>
</figure>
</div>
</div>
</div>
<p><strong>离散随机变量</strong> 的可能取值是一个序列集合，但是我们通常必须考虑那些取值是一个区间的 <strong>随机变量</strong>。假设 <span class="math inline">\(X\)</span> 为一个取值是一个区间的 <strong>随机变量</strong>。如果存在一个定义域为所有实数 <span class="math inline">\(x \in (−\infty, \infty)\)</span> 的非负函数 <span class="math inline">\(f(x)\)</span>，且对于任意实数集 <span class="math inline">\(B\)</span>，<span class="math inline">\(f(x)\)</span> 都满足：</p>
<p><span id="eq-4_2_004"><span class="math display">\[
P\{X \in B\} = \int_{B}{f(x)\mathrm{d} x}
\tag{4.12}\]</span></span></p>
<p>则我们称 <span class="math inline">\(X\)</span> 是一个 <strong>连续随机变量</strong>（<em>continous random variable</em>），而函数 <span class="math inline">\(f(x)\)</span> 为 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的 <strong>概率密度函数</strong>（<em>probability density function</em>）。</p>
<p>换句话说，<a href="#eq-4_2_004" class="quarto-xref">式&nbsp;<span>4.12</span></a> 指出，对集合 <span class="math inline">\(B\)</span> 上的概率密度函数进行积分运算可以得到 <span class="math inline">\(X\)</span> 在 <span class="math inline">\(B\)</span> 中的概率。由于 <span class="math inline">\(X\)</span> 必须为某个值，所以 <span class="math inline">\(f(x)\)</span> 必须满足：</p>
<p><span id="eq-4_2_005"><span class="math display">\[
1 = P\{X \in (-\infty, \infty)\} = \int_{-\infty}^{\infty}{f(x)\mathrm{d} x}
\tag{4.13}\]</span></span></p>
<p>概率密度函数 <span class="math inline">\(f(x)\)</span> 可以用于回答所有关于 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的概率问题，例如，令 <span class="math inline">\(B=[a,b]\)</span>，根据 <a href="#eq-4_2_004" class="quarto-xref">式&nbsp;<span>4.12</span></a>，我们有：</p>
<p><span id="eq-4_2_006"><span class="math display">\[
P\{a \le X \le b\}=\int_{a}^{b}{f(x)\mathrm{d} x}
\tag{4.14}\]</span></span></p>
<p>在 <a href="#eq-4_2_006" class="quarto-xref">式&nbsp;<span>4.14</span></a> 中，如果令 <span class="math inline">\(a=b\)</span>，则：</p>
<p><span id="eq-4_2_007"><span class="math display">\[
P\{X=a\}=\int_{a}^{a}{f(x)\mathrm{d} x} = 0
\tag{4.15}\]</span></span></p>
<p>换句话说，对于 <strong>连续随机变量</strong> 而言，其取值为某个特殊值的概率为 0，如 <a href="#fig-4_3" class="quarto-xref">图&nbsp;<span>4.3</span></a> 所示。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="fl">0.1</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="sc">-</span>x)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)) <span class="sc">+</span> </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span><span class="dv">1</span>, <span class="at">y=</span><span class="fu">exp</span>(<span class="sc">-</span><span class="dv">1</span>), <span class="at">xend=</span><span class="dv">1</span>, <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x=</span><span class="dv">3</span>, <span class="at">y=</span><span class="fu">exp</span>(<span class="sc">-</span><span class="dv">3</span>), <span class="at">xend=</span><span class="dv">3</span>, <span class="at">yend=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">data =</span> <span class="fu">subset</span>(df, x <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> <span class="dv">3</span>), <span class="fu">aes</span>(<span class="at">ymin =</span> <span class="dv">0</span>, <span class="at">ymax =</span> y), <span class="at">fill =</span> <span class="st">"gray"</span>) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.02</span>, <span class="at">label =</span> <span class="st">"a"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">3</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.02</span>, <span class="at">label =</span> <span class="st">"b"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">2.2</span>, <span class="at">y =</span> <span class="fl">0.05</span>, <span class="at">label =</span> <span class="st">"P{a&lt;X&lt;b}"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">5</span>)  </span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-4_3" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-4_3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="4_files/figure-html/fig-4_3-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-4_3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;4.3: 概率密度函数 <span class="math inline">\(f(x)=\begin{cases} e^{-x}, \quad &amp; x \ge 0 \\ 0, \quad &amp; x \lt 0 \end{cases}\)</span>
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注记
</div>
</div>
<div class="callout-body-container callout-body">
<p>连续随机变量的概率是其密度函数 <span class="math inline">\(f(x)\)</span> 在某个区间上积分的结果，因此对于某个特殊的取值，其结果必然为 0。</p>
</div>
</div>
<p>累积分布函数 <span class="math inline">\(F(\cdot)\)</span> 和概率密度函数 <span class="math inline">\(f(\cdot)\)</span> 之间的关系如下所示：</p>
<p><span id="eq-4_2_008"><span class="math display">\[
\begin{align}
F(a)&amp;=P\{X \in (-\infty,a]\} = \int_{-\infty}^{a}{f(x)\mathrm{d} x} \\
两边&amp;求微分得：\\
\frac{dF(a)}{da}&amp;=f(a)
\end{align}
\tag{4.16}\]</span></span></p>
<p>也就是说，概率密度函数是累积分布函数的导数。根据 <a href="#eq-4_2_006" class="quarto-xref">式&nbsp;<span>4.14</span></a>，概率密度函数的更直观的解释如下：</p>
<p><span id="eq-4_2_009"><span class="math display">\[
P\{a - \frac{\varepsilon}{2} \le X \le a + \frac{\varepsilon}{2}\} = \int_{a-\frac{\varepsilon}{2}}^{a+\frac{\varepsilon}{2}}{f(x)\mathrm{d} x} \approx \varepsilon f(a)
\tag{4.17}\]</span></span></p>
<p>其中，<span class="math inline">\(\varepsilon\)</span> 是一个非常小的数。也就是说，<span class="math inline">\(X\)</span> 的取值位于区间 <span class="math inline">\([a - \frac{\varepsilon}{2},a + \frac{\varepsilon}{2}]\)</span> 内时的概率大约为 <span class="math inline">\(\varepsilon f(a)\)</span>。由此，我们可以看出，<span class="math inline">\(f(a)\)</span> 是对随机变量 <span class="math inline">\(X\)</span> 的取值接近 <span class="math inline">\(a\)</span> 的可能性大小的一种度量。</p>
<div id="exr-4_2_b" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.2</strong></span> 假设 <span class="math inline">\(X\)</span> 是一个连续随机变量，其概率密度函数为：</p>
<p><span class="math display">\[
f(x)=\begin{cases}
C(4x - 2x^2), \quad &amp;0 \lt x \lt 2 \\
0, \quad &amp;其它
\end{cases}
\]</span></p>
<p>则：</p>
<ul>
<li>计算 <span class="math inline">\(C\)</span> 的值？</li>
<li>计算 <span class="math inline">\(P\{X \gt 1\}\)</span>？</li>
</ul>
</div>
<div id="sol-4_2_b" class="proof solution">
<p><span class="proof-title"><em>解 4.2</em>. </span>因为 <span class="math inline">\(f(x)\)</span> 是一个概率密度函数，因此必有：<span class="math inline">\(\int_{-\infty}^{\infty}{f(x)\mathrm{d} x}=1\)</span>。因此，有：</p>
<p><span class="math display">\[
\begin{align}
C\int_0^2{(4x-2x^2)\mathrm{d} x} &amp;=1 \\
C\bigg(2x^2-\frac{2}{3}x^3\bigg)\Bigg|_{x=0}^{x=2} &amp;= 1
\end{align}
\]</span></p>
<p>所以，<span class="math inline">\(C = \frac{3}{8}\)</span>。所以，<span class="math inline">\(P\{X \gt 1\}=\int_{1}^{\infty}{f(x)\mathrm{d} x}=\frac{3}{8}\int_1^2{(4x-2x^2)\mathrm{d} x}=\frac{1}{2}\)</span>。 <span class="math inline">\(\blacksquare\)</span></p>
</div>
</section>
<section id="联合分布" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="联合分布"><span class="header-section-number">4.3</span> 联合分布</h2>
<p>对于一个给定的实验，我们不仅对单个 <strong>随机变量</strong> 的概率分布函数感兴趣；对两个或多个 <strong>随机变量</strong> 之间的关系，我们同样感兴趣。例如，在一项关于癌症可能原因的实验中，我们可能对每天平均吸烟数量与个体患癌症年龄之间的关系感兴趣。同样，工程师可能对钢板样品的抗剪强度和点焊直径之间的关系感兴趣。</p>
<p>为了描述两个 <strong>随机变量</strong> 之间的关系，我们定义 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的联合累积概率分布函数（<em>joint cumulative probability distribution function</em>）：</p>
<p><span id="eq-4_3_001"><span class="math display">\[
F(x,y) = P\{X \le x,Y \le y\}
\tag{4.18}\]</span></span></p>
<p>至少在理论上，可以根据联合概率分布函数来计算任何关于 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的概率。例如，可以从 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的联合分布函数 <span class="math inline">\(F\)</span> 中得到 <span class="math inline">\(X\)</span> 的分布函数 <span class="math inline">\(F_X\)</span>：</p>
<p><span id="eq-4_3_002"><span class="math display">\[
\begin{align}
F_X(x) &amp;= P\{X \le x\} \\
&amp;= P\{X \le x, Y \le \infty \} \\
&amp;= F(x, \infty)
\end{align}
\tag{4.19}\]</span></span></p>
<p>同理，<span class="math inline">\(Y\)</span> 的累积分布函数为 <span class="math inline">\(F_Y(y) = F(\infty, y)\)</span>。</p>
<p>如果 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 都是 <strong>离散随机变量</strong>，且其可能的取值分别为：<span class="math inline">\(x_1, x_2, ...\)</span> 和 <span class="math inline">\(y_1, y_2, ...\)</span>，定义 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的联合概率质量函数（<em>joint probability mass function</em>）<span class="math inline">\(p(x_i, y_j)\)</span> 为：</p>
<p><span id="eq-4_3_003"><span class="math display">\[
p(x_i, y_j) = P\{X = x_i, Y = y_j\}
\tag{4.20}\]</span></span></p>
<p>由于 <span class="math inline">\(Y\)</span> 必须取某个值 <span class="math inline">\(y_j\)</span>，并且所有的 <span class="math inline">\(y_j\)</span> 之间都是 <strong>互斥事件</strong>，因此 <strong>事件</strong> <span class="math inline">\(\{X = x_i\}\)</span> 可以写作 <span class="math inline">\(\{X = x_i, Y = Y_j\}\)</span> 在所有 <span class="math inline">\(j\)</span> 上的并集。即：</p>
<p><span id="eq-4_3_004"><span class="math display">\[
\{X = x_i\} = \bigcup_{all\ j}{\{X = x_i, Y = y_j\}}
\tag{4.21}\]</span></span></p>
<p>根据 <strong>公理3</strong>（<a href="../chapter_3/3.html#sec-3_4" class="quarto-xref"><span>小节 3.4</span></a>），有：</p>
<p><span id="eq-4_3_005"><span class="math display">\[
\begin{align}
P\{X = x_i\} &amp;= P\bigg(\bigcup_{all\ j}{\{X = x_i, Y = y_j\}}\bigg) \\
&amp;= \sum_{all \ j}{P\{X = x_i, Y = y_j\}} \\
&amp;= \sum_{all \ j}{p(x_i, y_j)}
\end{align}
\tag{4.22}\]</span></span></p>
<p>同理，我们可以得到 <span class="math inline">\(P\{Y = y_j\}\)</span>：</p>
<p><span id="eq-4_3_006"><span class="math display">\[
\begin{align}
P\{Y = y_i\} &amp;= \sum_{all \ i}{P\{X = x_i, Y = y_j\}} \\
&amp;= \sum_{all \ i}{p(x_i, y_j)}
\end{align}
\tag{4.23}\]</span></span></p>
<p>因此，<strong>随机变量</strong> 的联合概率质量函数总是可以决定单个 <strong>随机变量</strong> 的概率质量函数。然而，需要注意的是：反之，并不成立。即，即便知道 <span class="math inline">\(P\{X = x_i\}\)</span> 和 <span class="math inline">\(P\{Y = y_j\}\)</span> 的值也不能决定 <span class="math inline">\(P\{X = x_i, Y = y_j\}\)</span> 的值。</p>
<div id="exm-4_3_a" class="theorem example">
<p><span class="theorem-title"><strong>例 4.4</strong></span> 假设共有 12 块电池，其中包含 3 块新电池、4 块用过的但还有电量的电池、5 块没有电量的电池。现在，我们从这 12 块电池中随机抽取 3 块。令 <span class="math inline">\(X\)</span> 为抽取的电池中的新电池的数量，令 <span class="math inline">\(Y\)</span> 为抽取的电池中用过但还有电量的电池的数量。则 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的联合概率质量函数 <span class="math inline">\(p(i, j) = P\{X = i, Y = j\}\)</span> 为：</p>
<p><span class="math display">\[
p(i, j) = \frac{\left(\begin{array}{cc}  3 \\ i  \end{array}\right) \left(\begin{array}{cc}  4 \\ j  \end{array}\right) \left(\begin{array}{cc}  5 \\ 3 - i -j  \end{array}\right) }{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)}
\]</span></p>
<p>从 12 块电池里随机抽取 3 块电池的抽取方式为 <span class="math inline">\(\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)\)</span>。根据 <a href="../chapter_3/3.html#sec-3_5_1" class="quarto-xref"><span>小节 3.5.1</span></a> 中的 <strong>计数基本原理</strong>，抽取的 3 块电池中恰好有 <span class="math inline">\(i\)</span> 块新电池、<span class="math inline">\(j\)</span> 块用过但还有电量的电池、<span class="math inline">\(3 - i - j\)</span> 块没有电量的电池的抽取方式为 <span class="math inline">\(\left(\begin{array}{cc}  3 \\ i  \end{array}\right) \left(\begin{array}{cc}  4 \\ j  \end{array}\right) \left(\begin{array}{cc}  5 \\ 3 - i -j  \end{array}\right)\)</span>。因此：</p>
<p><span class="math display">\[
\begin{align}
p(0, 0) &amp;= \frac{\left(\begin{array}{cc}  5 \\ 3  \end{array}\right)}{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)} = \frac{10}{220} \\
p(0, 1) &amp;= \frac{\left(\begin{array}{cc}  4 \\ 1  \end{array}\right) \left(\begin{array}{cc}  5 \\ 2  \end{array}\right)}{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)} = \frac{40}{220} \\
p(0, 2) &amp;= \frac{\left(\begin{array}{cc}  4 \\ 2  \end{array}\right) \left(\begin{array}{cc}  5 \\ 1  \end{array}\right)}{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)} = \frac{30}{220} \\
p(0, 3) &amp;= \frac{\left(\begin{array}{cc}  4 \\ 3  \end{array}\right)}{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)} = \frac{4}{220} \\
p(1, 0) &amp;= \frac{\left(\begin{array}{cc}  3 \\ 1  \end{array}\right) \left(\begin{array}{cc}  5 \\ 2  \end{array}\right)}{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)} = \frac{30}{220} \\
p(1, 1) &amp;= \frac{\left(\begin{array}{cc}  3 \\ 1  \end{array}\right) \left(\begin{array}{cc}  4 \\ 1  \end{array}\right) \left(\begin{array}{cc}  5 \\ 1  \end{array}\right)}{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)} = \frac{60}{220} \\
p(1, 2) &amp;= \frac{\left(\begin{array}{cc}  3 \\ 1  \end{array}\right) \left(\begin{array}{cc}  4 \\ 2  \end{array}\right)}{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)} = \frac{18}{220} \\
p(2, 0) &amp;= \frac{\left(\begin{array}{cc}  3 \\ 2  \end{array}\right) \left(\begin{array}{cc}  5 \\ 1  \end{array}\right)}{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)} = \frac{15}{220} \\
p(2, 1) &amp;= \frac{\left(\begin{array}{cc}  3 \\ 2  \end{array}\right) \left(\begin{array}{cc}  4 \\ 1  \end{array}\right)}{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)} = \frac{12}{220} \\
p(3, 0) &amp;= \frac{\left(\begin{array}{cc}  3 \\ 3  \end{array}\right)}{\left(\begin{array}{cc}  12 \\ 3  \end{array}\right)} = \frac{1}{220}
\end{align}
\]</span></p>
<p>可以通过 <a href="#tbl-4_1" class="quarto-xref">表&nbsp;<span>4.1</span></a> 的表格格式来更简单的表示如上的概率。</p>
<div id="tbl-4_1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-4_1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表&nbsp;4.1: <span class="math inline">\(P\{X=i, Y=j\}\)</span>
</figcaption>
<div aria-describedby="tbl-4_1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><span class="math inline">\(j\)</span> = 0</th>
<th style="text-align: left;"><span class="math inline">\(j\)</span> = 1</th>
<th style="text-align: left;"><span class="math inline">\(j\)</span> = 2</th>
<th style="text-align: left;"><span class="math inline">\(j\)</span> = 3</th>
<th style="text-align: left;"><span class="math inline">\(P\{X = i\}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(i\)</span> = 0</td>
<td><span class="math inline">\(\frac{10}{220}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{40}{220}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{30}{220}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{4}{220}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{84}{220}\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(i\)</span> = 1</td>
<td><span class="math inline">\(\frac{30}{220}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{60}{220}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{10}{220}\)</span></td>
<td style="text-align: left;">0</td>
<td style="text-align: left;"><span class="math inline">\(\frac{108}{220}\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(i\)</span> = 2</td>
<td><span class="math inline">\(\frac{15}{220}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{12}{220}\)</span></td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;"><span class="math inline">\(\frac{27}{220}\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(i\)</span> = 3</td>
<td><span class="math inline">\(\frac{1}{220}\)</span></td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;"><span class="math inline">\(\frac{1}{220}\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(P\{Y = j\}\)</span></td>
<td><span class="math inline">\(\frac{56}{220}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{112}{220}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{48}{220}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{4}{220}\)</span></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>读者应该注意，通过计算行的和所得到的 <span class="math inline">\(X\)</span> 的概率质量函数和 <a href="#eq-4_3_005" class="quarto-xref">式&nbsp;<span>4.22</span></a> 的结果是一致的；同时，通过计算列的和所得到的 <span class="math inline">\(Y\)</span> 的概率质量函数和 <a href="#eq-4_3_006" class="quarto-xref">式&nbsp;<span>4.23</span></a> 的结果也是一致的。因为 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的各自的概率质量函数出现在 <a href="#tbl-4_1" class="quarto-xref">表&nbsp;<span>4.1</span></a> 所示的联合概率分布表的边缘（<em>margin</em>），因此，我们又常常称 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的各自的概率质量函数为 <strong>边缘概率质量函数</strong>（<em>marginal probability mass function</em>）。应该注意的是，为了检查类似 <a href="#tbl-4_1" class="quarto-xref">表&nbsp;<span>4.1</span></a> 这样的表的正确性，我们可以对表中的最后一行（或最右一列）求和，并验证其结果是否为 1。（为什么最后一行或最右一列的和必须等于 1？） <span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="exm-4_3_b" class="theorem example">
<p><span class="theorem-title"><strong>例 4.5</strong></span> 假设某个社区中，15% 的家庭没有孩子，20% 的家庭有 1 个孩子，35% 的家庭有 2 个孩子，30% 的家庭有 3 个孩子。又假设对于每个家庭而言，每个孩子是男孩或女孩的可能性相等并且独立。</p>
<p>如果从这个社区中随机选择一个家庭，那么这个家庭中男孩的数量 <span class="math inline">\(B\)</span> 和女孩的数量 <span class="math inline">\(G\)</span> 具有 <a href="#tbl-4_2" class="quarto-xref">表&nbsp;<span>4.2</span></a> 所示的联合概率质量函数。</p>
<div id="tbl-4_2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-4_2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表&nbsp;4.2: <span class="math inline">\(P\{B=i, G=j\}\)</span>
</figcaption>
<div aria-describedby="tbl-4_2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><span class="math inline">\(j\)</span> = 0</th>
<th style="text-align: left;"><span class="math inline">\(j\)</span> = 1</th>
<th style="text-align: left;"><span class="math inline">\(j\)</span> = 2</th>
<th style="text-align: left;"><span class="math inline">\(j\)</span> = 3</th>
<th style="text-align: left;"><span class="math inline">\(P\{B = i\}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(i\)</span> = 0</td>
<td>0.15</td>
<td style="text-align: left;">0.10</td>
<td style="text-align: left;">0.0875</td>
<td style="text-align: left;">0.0375</td>
<td style="text-align: left;">0.3750</td>
</tr>
<tr class="even">
<td><span class="math inline">\(i\)</span> = 1</td>
<td>0.10</td>
<td style="text-align: left;">0.175</td>
<td style="text-align: left;">0.1125</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.3875</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(i\)</span> = 2</td>
<td>0.0875</td>
<td style="text-align: left;">0.1125</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.2000</td>
</tr>
<tr class="even">
<td><span class="math inline">\(i\)</span> = 3</td>
<td>0.0375</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0.0375</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(P\{G = j\}\)</span></td>
<td>0.3750</td>
<td style="text-align: left;">0.3875</td>
<td style="text-align: left;">0.2000</td>
<td style="text-align: left;">0.0375</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>于是，我们可以得到如下的概率：</p>
<p><span class="math display">\[
\begin{align}
P\{B=0, G=0\} &amp;= P\{没有孩子\} = 0.20 \cdot \frac{1}{2} = 0.15 \\
P\{B=0, G=1\} &amp;= P\{有 1 个孩子且为女孩\} = 0.35 \cdot (\frac{1}{2})^2 = 0.1 \\
P\{B=0, G=3\} &amp;= P\{有 3 个孩子且都为女孩\} = = 0.30 \cdot (\frac{1}{2})^3 = 0.0375 \\
\end{align}
\]</span></p>
<p>您可以验证 <a href="#tbl-4_2" class="quarto-xref">表&nbsp;<span>4.2</span></a> 的其余部分，通过 <a href="#tbl-4_2" class="quarto-xref">表&nbsp;<span>4.2</span></a> 我们可以知道，所选择的家庭至少有一个女孩的概率为 0.625（<span class="math inline">\(1-P\{B=i, G=0\}\)</span>）。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<p><span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是两个连续 <strong>随机变量</strong>，对于 <span class="math inline">\(x \in (-\infty, \infty)\)</span> 和 <span class="math inline">\(y \in (-\infty, \infty)\)</span>，对于任何一个 <span class="math inline">\(x\)</span> 和 <span class="math inline">\(y\)</span> 构成的 <em>数据对</em> 集合 <span class="math inline">\(C\)</span>（<span class="math inline">\(C\)</span> 是一个二维平面中的集合），如果存在函数 <span class="math inline">\(f(x,y)\)</span>，使得：</p>
<p><span id="eq-4_3_007_433"><span class="math display">\[
P\{(X,Y) \in C\} = \iint_{(x,y) \in C}{f(x,y)\mathrm{d} x \mathrm{d} y}
\tag{4.24}\]</span></span></p>
<p>我们称 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是联合连续随机变量，称函数 <span class="math inline">\(f(x,y)\)</span> 为 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的 <strong>联合概率密度函数</strong>（<em>joint probability density function</em>）。如果令 <span class="math inline">\(A\)</span> 和 <span class="math inline">\(B\)</span> 为两个实数集，并令 <span class="math inline">\(C = \{(x,y): x \in A, y \in B\}\)</span>，则 <a href="#eq-4_3_007_433" class="quarto-xref">式&nbsp;<span>4.24</span></a> 可以写作：</p>
<p><span id="eq-4_3_008_434"><span class="math display">\[
P\{X \in A, Y \in B\} = \int_{B} \int_{A} {f(x,y)\mathrm{d} x \mathrm{d} y}
\tag{4.25}\]</span></span></p>
<p>因为：</p>
<p><span id="eq-4_3_009"><span class="math display">\[
\begin{align}
F(a,b) &amp;= P\{X \in (-\infty, a], Y \in (-\infty, b]\} \\
&amp;= \int_{-\infty}^{b} \int_{-\infty}^{a} {f(x,y)\mathrm{d} x \mathrm{d} y}
\end{align}
\tag{4.26}\]</span></span></p>
<p>所以，对 <a href="#eq-4_3_009" class="quarto-xref">式&nbsp;<span>4.26</span></a> 两边微分得到：</p>
<p><span id="eq-4_3_010"><span class="math display">\[
\frac{\partial^{2}{F(a,b)}}{\partial a \ \partial b} = f(a,b)
\tag{4.27}\]</span></span></p>
<p>也就是说，联合概率密度函数 <span class="math inline">\(f(\cdot)\)</span> 是联合概率分布函数 <span class="math inline">\(F(\cdot)\)</span> 的偏微分。根据 <a href="#eq-4_3_008_434" class="quarto-xref">式&nbsp;<span>4.25</span></a>，我们有：</p>
<p><span id="eq-4_3_011"><span class="math display">\[
\begin{align}
P\{a \lt X \lt a + \Delta a, b \lt Y \lt b + \Delta b\} &amp;= \int_{b}^{b + \Delta b} \int_{a}^{a + \Delta a} {f(x,y)\mathrm{d} x \mathrm{d} y} \\
&amp;\approx f(a,b) \Delta a \Delta b
\end{align}
\tag{4.28}\]</span></span></p>
<p>因为 <span class="math inline">\(\Delta a\)</span> 和 <span class="math inline">\(\Delta b\)</span> 都是非常小的数，并且 <span class="math inline">\(f(x,y)\)</span> 在 <span class="math inline">\((a,b)\)</span> 处是连续的。因此 <span class="math inline">\(f(a,b)\)</span> 是对 <span class="math inline">\((X,Y)\)</span> 靠近 <span class="math inline">\((a,b)\)</span> 的可能性大小的一种度量。</p>
<p>如果 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是联合连续随机变量，则 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 各自都是连续随机变量，则 <span class="math inline">\(X\)</span> 的概率密度函数为：</p>
<p><span id="eq-4_3_012_435"><span class="math display">\[
\begin{align}
P\{X \in A\} &amp;= P\{X \in A, Y \in (-\infty, \infty)\} \\
&amp;= \int_{A} \int_{-\infty}^{\infty} {f(x,y) \mathrm{d} y\mathrm{d} x} \\
&amp;= \int_{A}{f_X{(x)\mathrm{d} x}} \\
其中\ f_X{(x)} &amp;= \int_{-\infty}^{\infty}{f(x,y) \mathrm{d} y}
\end{align}
\tag{4.29}\]</span></span></p>
<p>同理，<span class="math inline">\(Y\)</span> 的概率密度函数为：</p>
<p><span id="eq-4_3_013_436"><span class="math display">\[
\begin{align}
P\{Y \in B\} &amp;= P\{X \in (-\infty, \infty), Y \in B\} \\
&amp;= \int_{B} \int_{-\infty}^{\infty} {f(x,y)\mathrm{d} x \mathrm{d} y} \\
&amp;= \int_{B}{f_Y{(y) \mathrm{d} y}} \\
其中\ f_Y{(y)} &amp;= \int_{-\infty}^{\infty}{f(x,y)\mathrm{d} x}
\end{align}
\tag{4.30}\]</span></span></p>
<div id="exr-4_3_c" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.3</strong></span> <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的联合概率密度函数如下：</p>
<p><span class="math display">\[
f(x,y) = \begin{cases}
2e^{-x}e^{-2y}, \quad &amp; 0 \lt x \lt \infty, 0 \lt y \lt \infty \\
0, \quad &amp; otherwise
\end{cases}
\]</span></p>
<p>计算：</p>
<ul>
<li><span class="math inline">\(P\{X \gt 1, Y \lt 1\}\)</span></li>
<li><span class="math inline">\(P\{X \lt Y\}\)</span></li>
<li><span class="math inline">\(P\{X \lt a\}\)</span></li>
</ul>
</div>
<div id="sol-4_3_c" class="proof solution">
<p><span class="proof-title"><em>解 4.3</em>. </span></p>
<div class="callout callout-style-default callout-tip callout-titled" title="$P\{X \gt 1, Y \lt 1\}$">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="math inline">\(P\{X \gt 1, Y \lt 1\}\)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math display">\[
\begin{align}
P\{X \gt 1, Y \lt 1\} &amp;= \int_{0}^{1} \int_{1}^{\infty} {2e^{-x}e^{-2y}\mathrm{d} x \mathrm{d} y} \\
&amp;= \int_{0}^{1}{2e^{-2y}(-e^{-x} \big |_{1}^{\infty})} \mathrm{d} y \\
&amp;= e^{-1}\int_{0}^{1}2e^{-2y} \mathrm{d} y \\
&amp;= e^{-1}(1-e^{-2})
\end{align}
\]</span></p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="$P\{X \lt Y\}$">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="math inline">\(P\{X \lt Y\}\)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math display">\[
\begin{align}
P\{X \lt Y\} &amp;= \iint_{(x,y):x \lt y}{2e^{-x}e^{-2y}\mathrm{d} x \mathrm{d} y} \\
&amp;= \int_{0}^{\infty} \int_{0}^{y} {2e^{-x}e^{-2y}\mathrm{d} x \mathrm{d} y} \\
&amp;= \int_{0}^{\infty}{2e^{-2y}(1-e^{-y}) \mathrm{d} y} \\
&amp;= \int_{0}^{\infty}{2e^{-2y} \mathrm{d} y} - \int_{0}^{\infty}{2e^{-3y} \mathrm{d} y} \\
&amp;= 1-\frac{2}{3} \\
&amp;= \frac{1}{3}
\end{align}
\]</span></p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="$P\{X \lt a\}$">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="math inline">\(P\{X \lt a\}\)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math display">\[
\begin{align}
P\{X \lt a\} &amp;= \int_{0}^{a} \int_{0}^{\infty}{2e^{-2y}e^{-x} \mathrm{d} y\mathrm{d} x} \\
&amp;= \int_{0}^{a}{e^{-x}\mathrm{d} x} \\
&amp;= 1-e^{-a}
\end{align}
\]</span></p>
</div>
</div>
<p><span class="math inline">\(\blacksquare\)</span></p>
</div>
<section id="独立随机变量" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="独立随机变量"><span class="header-section-number">4.3.1</span> 独立随机变量</h3>
<p>对于任意的两个实数集 <span class="math inline">\(A\)</span> 和 <span class="math inline">\(B\)</span>，如果随机变量 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 满足 <a href="#eq-4_3_014_437" class="quarto-xref">式&nbsp;<span>4.31</span></a>，我们称 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是相互独立的。</p>
<p><span id="eq-4_3_014_437"><span class="math display">\[
P\{X \in A, Y \in B\} = P\{X \in A\}P\{Y \in B\}
\tag{4.31}\]</span></span></p>
<p>换句话说，对于所有的 <span class="math inline">\(A\)</span>、<span class="math inline">\(B\)</span>，如果事件 <span class="math inline">\(E_A={X \in A}\)</span> 和 <span class="math inline">\(E_B={Y \in B}\)</span> 是相互独立的，那么 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 也是相互独立的。</p>
<p>根据 <a href="../chapter_3/3.html#sec-3_4" class="quarto-xref"><span>小节 3.4</span></a> 中的概率论 <strong>三大公理</strong>，对于所有的 <span class="math inline">\(a\)</span>、<span class="math inline">\(b\)</span>，<a href="#eq-4_3_014_437" class="quarto-xref">式&nbsp;<span>4.31</span></a> 满足：</p>
<p><span id="eq-4_3_015"><span class="math display">\[
P\{X \le a, Y \le b\} = P\{X \le a\}P\{Y \le b\}
\tag{4.32}\]</span></span></p>
<p>因此，就 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的联合分布函数 <span class="math inline">\(F\)</span> 而言，如果 <span class="math inline">\(F(a,b) = F_X(a)F_Y(b)\)</span>，则 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是独立的。</p>
<p>当 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是离散随机变量时，<a href="#eq-4_3_014_437" class="quarto-xref">式&nbsp;<span>4.31</span></a> 等价于：</p>
<p><span id="eq-4_3_016_438"><span class="math display">\[
p(x,y)=p_X{(x)}p_Y{(y)} \quad for \ all \ x,y
\tag{4.33}\]</span></span></p>
<p>其中，<span class="math inline">\(p_X\)</span> 和 <span class="math inline">\(p_Y\)</span> 分别为 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的概率质量函数。</p>
<p>如果 <a href="#eq-4_3_014_437" class="quarto-xref">式&nbsp;<span>4.31</span></a> 成立，那么我们令 <span class="math inline">\(A={x}\)</span>，<span class="math inline">\(B={y}\)</span>，于是我们能够得到 <a href="#eq-4_3_016_438" class="quarto-xref">式&nbsp;<span>4.33</span></a>。此外，如果 <a href="#eq-4_3_016_438" class="quarto-xref">式&nbsp;<span>4.33</span></a> 成立，那么对于任何集合 <span class="math inline">\(X \in A\)</span>、<span class="math inline">\(Y \in B\)</span>，都有：</p>
<p><span class="math display">\[
\begin{align}
P\{X \in A, Y \in B\} &amp;= \sum_{y \in B}\sum_{x \in A}{p(x,y)} \\
&amp;= \sum_{y \in B}\sum_{x \in A}{p_X{(x)}p_Y{(y)}} \\
&amp;= \sum_{y \in B}{p_Y{(y)}} \sum_{x \in A}{p_X{(x)}} \\
&amp;= P\{Y \in B\}P\{X \in A\} \\
&amp;= P\{X \in A\}P\{Y \in B\}
\end{align}
\]</span></p>
<p>即，<a href="#eq-4_3_016_438" class="quarto-xref">式&nbsp;<span>4.33</span></a> 成立也意味着 <a href="#eq-4_3_014_437" class="quarto-xref">式&nbsp;<span>4.31</span></a> 成立。因此，<a href="#eq-4_3_014_437" class="quarto-xref">式&nbsp;<span>4.31</span></a> 和 <a href="#eq-4_3_016_438" class="quarto-xref">式&nbsp;<span>4.33</span></a> 是等价的。</p>
<p>同理，当 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是连续随机变量时，<a href="#eq-4_3_014_437" class="quarto-xref">式&nbsp;<span>4.31</span></a> 等价于：对于所有的 <span class="math inline">\(x\)</span>、<span class="math inline">\(y\)</span>，都有 <span class="math inline">\(f(x,y) = f_X(x)f_Y(y)\)</span>。如果一个随机变量 <span class="math inline">\(X\)</span> 的取值不会改变另一个随机变量 <span class="math inline">\(Y\)</span> 的分布，那么我们可以大致认为 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是独立的。不独立的随机变量称为 <strong>依赖随机变量</strong>。</p>
<div id="exr-4_3_d" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.4</strong></span> 假设 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是两个独立随机变量，其概率密度函数均为：</p>
<p><span class="math display">\[
f(x)=\begin{cases}
e^{-x}, \quad &amp; x \gt 0 \\
0, \quad &amp; otherwise
\end{cases}
\]</span></p>
<p>求 随机变量 <span class="math inline">\(\frac{X}{Y}\)</span> 的概率密度函数？</p>
</div>
<div id="sol-4_3_d" class="proof solution">
<p><span class="proof-title"><em>解 4.4</em>. </span>首先，求 <span class="math inline">\(\frac{X}{Y}\)</span> 的概率分布函数 <span class="math inline">\(F\)</span>：</p>
<p><span class="math display">\[
\begin{align}
\forall a &amp; \gt 0, \\
F_{\frac{X}{Y}}{(a)} &amp;= P\{\frac{X}{Y} \le a\} \\
&amp;= \iint_{\frac{x}{y} \le a}{f(x,y)\mathrm{d} x \mathrm{d} y} \\
&amp;= \iint_{\frac{x}{y} \le a}{e^{-x}e^{-y}\mathrm{d} x \mathrm{d} y} \\
&amp;= \int_{0}^{\infty} \int_{0}^{ay} {e^{-x}e^{-y}\mathrm{d} x \mathrm{d} y} \\
&amp;= \int_{0}^{\infty} {(1-e^{-ay})e^{-y} \mathrm{d} y} \\
&amp;= \bigg(-e^{-y} + \frac{e^{-(a+1)y}}{a+1}\bigg) \bigg | _{0}^{\infty} \\
&amp;= 1 - \frac{1}{a+1}
\end{align}
\]</span></p>
<p>对 <span class="math inline">\(F_{\frac{X}{Y}}{(a)}\)</span> 求导得到 <span class="math inline">\(f_{\frac{X}{Y}(a)} = \frac{1}{(1+a)^2}\)</span>。 <span class="math inline">\(\blacksquare\)</span></p>
</div>
<p>我们可以用定义 2 个 <strong>随机变量</strong> 的联合概率分布函数的方式来定义 <span class="math inline">\(n\)</span> 个 <strong>随机变量</strong>的联合概率分布函数。对于 <span class="math inline">\(n\)</span> 个 <strong>随机变量</strong> <span class="math inline">\(X_1,X_2,...,X_n\)</span>，其联合累积概率分布函数 <span class="math inline">\(F(a_1,a_2,...,a_n)\)</span> 为：</p>
<p><span id="eq-4_3_017"><span class="math display">\[
F(a_1,a_2,...,a_n) = P\{X_1 \le a_1, X_2 \le a_2,..., X_n \le a_n\}
\tag{4.34}\]</span></span></p>
<p>对于离散随机变量，则其联合概率质量函数 <span class="math inline">\(p(x_1,x_2,...,x_n)\)</span> 为：</p>
<p><span id="eq-4_3_018"><span class="math display">\[
p(x_1,x_2,...,x_n) = P\{X_1=x_1, X_2=x_2,..., X_n=x_n\}
\tag{4.35}\]</span></span></p>
<p>此外，对于 <span class="math inline">\(n\)</span> 维空间中的集合 <span class="math inline">\(C\)</span>，如果存在一个函数 <span class="math inline">\(f(\cdot)\)</span> 使得：</p>
<p><span id="eq-4_3_019"><span class="math display">\[
P\{(X_1,X_2,...,X_n) \in C\} = \idotsint_{(x_1,...,x_n) \in C}{f(x_1,...,x_n)\mathrm{d} x_1 \cdots \mathrm{d} x_n}
\tag{4.36}\]</span></span></p>
<p>我们称 <span class="math inline">\(f(x_1,...,x_n)\)</span> 为这 <span class="math inline">\(n\)</span> 个联合连续随机变量的联合概率密度函数。</p>
<p>特殊的，对于任意的 <span class="math inline">\(n\)</span> 个实数集 <span class="math inline">\(A_1,A_2,...,A_n\)</span>：</p>
<p><span id="eq-4_3_020"><span class="math display">\[
\begin{align}
P\{X_1 \in A_1, X_2 \in A_2, ..., X_n \in A_n\} &amp;= \\
\int_{A_n} \int_{A_{n-1}} \cdots \int_{A_1}{f(x_1,...,x_n)\mathrm{d} x_1\mathrm{d} x_2 \cdots \mathrm{d} x_n} &amp;
\end{align}
\tag{4.37}\]</span></span></p>
<p>当然，也可以为两个之上的 <strong>随机变量</strong> 定义独立性。一般来的，对于 <span class="math inline">\(n\)</span> 个 <strong>随机变量</strong> <span class="math inline">\(X_1,X_2,...,X_n\)</span>，如果对于所有实数集 <span class="math inline">\(A_1,A_2,...,A_n\)</span> 都有：</p>
<p><span id="eq-4_3_021"><span class="math display">\[
P\{X_1 \in A_1, X_2 \in A_2, ..., X_n \in A_n\} = \Pi_{i=1}^{n}{P\{X_i \in A_i\}}
\tag{4.38}\]</span></span></p>
<p>则我们称这 <span class="math inline">\(n\)</span> 个随机变量时相互独立的。正如 <a href="#eq-4_3_014_437" class="quarto-xref">式&nbsp;<span>4.31</span></a> 和 <a href="#eq-4_3_016_438" class="quarto-xref">式&nbsp;<span>4.33</span></a> 所述，<a href="#eq-4_3_021" class="quarto-xref">式&nbsp;<span>4.38</span></a> 等价于 <a href="#eq-4_3_022" class="quarto-xref">式&nbsp;<span>4.39</span></a>：</p>
<p><span id="eq-4_3_022"><span class="math display">\[
P\{X_1 \le a_1, X_2 \le a_2, ..., X_n \le a_n\} = \Pi_{i=1}^{n}{P\{X_i \in a_i\}}
\tag{4.39}\]</span></span></p>
<p>对于一个随机变量的无限集合 <span class="math inline">\(S\)</span>，如果 <span class="math inline">\(S\)</span> 的所有的子集中的 <strong>随机变量</strong> 均是独立的，我们说 <span class="math inline">\(S\)</span> 中的所有随机变量之间是相互独立的。（<a href="../chapter_3/3.html#def-3_8_002" class="quarto-xref">定义&nbsp;<span>3.3</span></a> 的一般形式）</p>
<div id="exm-4_3_e" class="theorem example">
<p><span class="theorem-title"><strong>例 4.6</strong></span> 假设某支股票的股价的连续每日变化是一个独立且同分布的随机变量，其概率质量函数为：</p>
<p><span class="math display">\[
P\{第 i 日变化\} = \begin{cases}
-3, \quad &amp;概率为 0.05 \\
-2, \quad &amp;概率为 0.10 \\
-1, \quad &amp;概率为 0.20 \\
0, \quad &amp;概率为 0.30 \\
1, \quad &amp;概率为 0.20 \\
2, \quad &amp;概率为 0.10 \\
3, \quad &amp;概率为 0.05
\end{cases}
\]</span></p>
<p>令 <span class="math inline">\(X_i\)</span> 表示第 <span class="math inline">\(i\)</span> 天的股价变化，那么，这只股票在未来的连续 3 天里，股价分别上涨 1%、2%、0% 的概率为：</p>
<p><span class="math display">\[
P\{X_1=1, X_2=2, X_3=0\} = 0.20 \cdot 0.10 \cdot 0.30 = 0.006 \quad \blacksquare
\]</span></p>
</div>
</section>
<section id="条件分布" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="条件分布"><span class="header-section-number">4.3.2</span> 条件分布</h3>
<p>对于两个 <strong>随机变量</strong>，通常可以利用其中一个变量在另一个变量的给定值的情况下的条件分布来确定这两个 <strong>随机变量</strong> 之间的关系。回顾一下，对于任意两个事件 <span class="math inline">\(E\)</span> 和 <span class="math inline">\(F\)</span>，只要 <span class="math inline">\(P(F)&gt;0\)</span>，则在给定 <span class="math inline">\(F\)</span> 条件下 <span class="math inline">\(E\)</span> 的条件概率为：</p>
<p><span class="math display">\[
P(E|F)=\frac{P(EF)}{P(F)}
\]</span></p>
<p>因此，如果 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是两个离散随机变量，那么在给定 <span class="math inline">\(Y=y\)</span> 的条件下，<span class="math inline">\(X\)</span> 的条件概率质量函数为：</p>
<p><span class="math display">\[
\begin{align}
p_{X|Y}(x|y) &amp;= P\{X=x | Y=y\} \\
&amp;= \frac{P\{X=x, Y=y\}}{P\{Y=y\}} \\
&amp;= \frac{p(x,y)}{p_Y(y)}
\end{align}
\]</span></p>
<p>其中，对于所有的 <span class="math inline">\(y\)</span>，<span class="math inline">\(p_Y(y) \gt 0\)</span>。</p>
<div id="exr-4_3_f" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.5</strong></span> 在 <a href="#exm-4_3_b" class="quarto-xref">例&nbsp;<span>4.5</span></a> 中，如果我们知道所选择的这个家庭有 1 个女孩，计算该家庭的小孩中男孩数量的条件概率质量函数。</p>
</div>
<div id="sol-4_3_f" class="proof solution">
<p><span class="proof-title"><em>解 4.5</em>. </span>首先，根据 <a href="#tbl-4_2" class="quarto-xref">表&nbsp;<span>4.2</span></a>，<span class="math inline">\(P\{G=1\}=0.3875\)</span>，因此，</p>
<p><span class="math display">\[
\begin{align}
P\{B=0 | G=1\} &amp;= \frac{P\{B=0, G=1\}}{P\{G=1\}} = \frac{0.10}{0.3875} = \frac{8}{31} \\
P\{B=1 | G=1\} &amp;= \frac{P\{B=1, G=1\}}{P\{G=1\}} = \frac{0.175}{0.3875} = \frac{14}{31} \\
P\{B=2 | G=1\} &amp;= \frac{P\{B=2, G=1\}}{P\{G=1\}} = \frac{0.1125}{0.3875} = \frac{9}{31} \\
P\{B=3 | G=1\} &amp;= \frac{P\{B=3, G=1\}}{P\{G=1\}} = 0 \\
\end{align}
\]</span></p>
<p>因此，在有 1 个女孩的条件下，该家庭至少有 1 个男孩的概率为 <span class="math inline">\(\frac{23}{31}\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="exr-4_3_g" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.6</strong></span> 假设 <strong>随机变量</strong> <span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 的联合概率质量函数 <span class="math inline">\(p(x,y)\)</span> 为：</p>
<p><span class="math display">\[
p(0,0)=0.4, \quad p(0,1)=0.2, \quad p(1,0)=0.1, \quad p(1,1)=0.3
\]</span></p>
<p>计算 <span class="math inline">\(P\{X|Y=1\}\)</span>？</p>
</div>
<div id="sol-4_3_g" class="proof solution">
<p><span class="proof-title"><em>解 4.6</em>. </span><span class="math display">\[
\begin{align}
\because\ P\{Y = 1\} &amp;= \sum_{x}p(x,1) = p(0,1) + p(1,1) = 0.5 \\
\therefore\ P\{X=0|Y=1\} &amp;= \frac{p(0,1)}{P\{Y=1\}} = \frac{2}{5} \\
P\{X=1|Y=1\} &amp;= \frac{p(1,1)}{P\{Y=1\}} = \frac{3}{5} \qquad \blacksquare
\end{align}
\]</span></p>
</div>
<p>如果 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的联合概率密度函数为 <span class="math inline">\(f(x,y)\)</span>，则在 <span class="math inline">\(Y=y\)</span> 的条件下，<span class="math inline">\(X\)</span> 的条件概率密度函数为：</p>
<p><span id="eq-4_3_023"><span class="math display">\[
f_{X|Y}(x|y) = \frac{f(x,y)}{f_Y{(y)}}, \quad \forall y: \ f_Y(y) \gt 0
\tag{4.40}\]</span></span></p>
<p>在 <a href="#eq-4_3_023" class="quarto-xref">式&nbsp;<span>4.40</span></a> 的左边乘以 <span class="math inline">\(\Delta x\)</span>，右边乘以 <span class="math inline">\(\frac{\Delta x \Delta y}{\Delta y}\)</span> 得到：</p>
<p><span id="eq-4_3_024"><span class="math display">\[
\begin{align}
f_{X|Y}(x|y) \Delta x &amp;= \frac{f(x,y) \Delta x \Delta y}{f_Y{(y)} \Delta y} \\
&amp; \approx \frac{P\{x \le X \le x + \Delta x, y \le Y \le y + \Delta y\}}{P\{y \le Y \le y + \Delta y\}} \\
&amp;= P\{x \le X \le x + \Delta x\ | y \le Y \le y + \Delta y\}
\end{align}
\tag{4.41}\]</span></span></p>
<p>也就是说，对于非常小的 <span class="math inline">\(\Delta x\)</span> 和 <span class="math inline">\(\Delta y\)</span> ，<span class="math inline">\(f_{X|Y}(x|y) \Delta x\)</span> 表示在 <span class="math inline">\(Y \in [y, y + \Delta y]\)</span> 的条件下，<span class="math inline">\(X \in [x, x + \Delta x]\)</span> 的条件概率。</p>
<p>我们可以使用条件概率密度函数来定义：在给定一个随机变量的值下，另一个随机变量的条件概率。也就是说，如果 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 都是连续 <strong>随机变量</strong>，那么，对于任何集合 <span class="math inline">\(A\)</span>，都有：</p>
<p><span class="math display">\[
P\{X \in A, Y=y\} = \int_{A}f_{X|Y}(x|y)\mathrm{d} x
\]</span></p>
<div id="exr-4_3_h" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.7</strong></span> <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的联合概率密度函数为：</p>
<p><span class="math display">\[
f(x,y) = \begin{cases}
\frac{12}{5}x(2-x-y), \quad &amp; 0 \lt x \lt 1, 0 \lt y \lt 1\\
0, \quad &amp; otherwise
\end{cases}
\]</span></p>
<p>计算 <span class="math inline">\(Y=y: 0 \lt y \lt 1\)</span> 下，<span class="math inline">\(X\)</span> 的条件密度函数 <span class="math inline">\(f_{X|Y}(x|y)\)</span>。</p>
</div>
<div id="sol-4_3_h" class="proof solution">
<p><span class="proof-title"><em>解 4.7</em>. </span>对于 <span class="math inline">\(0 \lt x \lt 1\)</span>，<span class="math inline">\(0 \lt y \lt 1\)</span>，我们有：</p>
<p><span class="math display">\[
\begin{align}
f_{X|Y}(x|y) &amp;= \frac{f(x,y)}{f_Y(y)} \\
&amp;= \frac{f(x,y)}{\int_{-\infty}^{\infty}{f(x,y)\mathrm{d} x}} \\
&amp;= \frac{x(2-x-y)}{\int_0^1{x(2-x-y)\mathrm{d} x}} \\
&amp;= \frac{x(2-x-y)}{\frac{2}{3} - \frac{y}{2}} \\
&amp;= \frac{6x(2-x-y)}{4-3y} \quad \blacksquare
\end{align}
\]</span></p>
</div>
</section>
</section>
<section id="期望" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="期望"><span class="header-section-number">4.4</span> 期望</h2>
<p><strong>随机变量</strong> 的 <strong>期望</strong>（<em>expectation</em>）是概率论中最重要的概念之一。如果 <span class="math inline">\(X\)</span> 是一个离散 <strong>随机变量</strong>，其可能的取值为 <span class="math inline">\(x_1\)</span>，<span class="math inline">\(x_2\)</span>，……那么 <span class="math inline">\(X\)</span> 的 <strong>期望</strong> 或 <strong>期望值</strong> <span class="math inline">\(E[X]\)</span> 为：</p>
<p><span id="eq-4_4_001"><span class="math display">\[
E[X] = \sum_{i}{x_iP\{X = x_i\}}
\tag{4.42}\]</span></span></p>
<p>换句话说，<span class="math inline">\(X\)</span> 的 <strong>期望</strong> 是其可能取值的加权平均数，其中每个可能取值的权重为该值对应的概率。</p>
<p>例如，如果 <span class="math inline">\(X\)</span> 的概率质量函数为 <span class="math inline">\(p(0)=p(1)=\frac{1}{2}\)</span>，则 <span class="math inline">\(E[X]\)</span> 只是 <span class="math inline">\(X\)</span> 的两个可能取值（0、1）的平均数：</p>
<p><span class="math display">\[
E[X] = 0 \cdot \frac{1}{2} + 1 \cdot \frac{1}{2} = \frac{1}{2}
\]</span></p>
<p>如果 <span class="math inline">\(p(0)=\frac{1}{3}\)</span>，<span class="math inline">\(p(1)=\frac{2}{3}\)</span>，则 <span class="math inline">\(E[X]\)</span> 是其两个可能取值（0、1）的加权平均值，其中 1 的权重是 0 的 2 倍（因为 <span class="math inline">\(p(1)=2p(0)\)</span>）：</p>
<p><span class="math display">\[
E[X] = 0 \cdot \frac{1}{3} + 1 \cdot \frac{2}{3} = \frac{2}{3}
\]</span></p>
<p>我们也可以利用概率的频率解释（<a href="../chapter_3/3.html#sec-3_1" class="quarto-xref"><span>小节 3.1</span></a>）来定义随机变量的 <strong>期望</strong>。概率的评率解释认为，如果独立的重复执行一个实验无数次，那么对于任何事件 <span class="math inline">\(E\)</span>，<span class="math inline">\(E\)</span> 发生的概率 <span class="math inline">\(P(E)\)</span> 就是其发生的次数的占比。现在，考虑一个随机变量 <span class="math inline">\(X\)</span>，它的取值为 <span class="math inline">\(x_1,x_2,...,x_n\)</span>，其概率分别为 <span class="math inline">\(p(x_1),p(x_2),...,p(x_n)\)</span>。把 <span class="math inline">\(X\)</span> 想象成我们在一个 <em>机会游戏</em>（<em>game of chance</em>）中得到的奖金，也就是说，我们将赢得 <span class="math inline">\(x_i\)</span> 单位奖金的概率为 <span class="math inline">\(p(x_i)\)</span>。根据概率的频率解释，如果我们继续玩这个游戏，那么我们赢得 <span class="math inline">\(x_i\)</span> 的次数占比将是 <span class="math inline">\(p(x_i)\)</span>。因此，我们在 <span class="math inline">\(n\)</span> 次比赛中的平均奖金将是：</p>
<p><span id="eq-4_4_002"><span class="math display">\[
\sum_{i=1}^{n}{x_ip(x_i)} = E[X]
\tag{4.43}\]</span></span></p>
<p>为了更清楚地看到 <a href="#eq-4_4_002" class="quarto-xref">式&nbsp;<span>4.43</span></a> 所示的结论，假设我们玩 <span class="math inline">\(N\)</span> 次游戏，其中 <span class="math inline">\(N\)</span> 是一个非常大的数。在这些游戏中，我们将赢得 <span class="math inline">\(x_i\)</span> 的次数大约为 <span class="math inline">\(Np(x_i)\)</span>，因此我们在 <span class="math inline">\(N\)</span> 次比赛中的总奖金将是：</p>
<p><span class="math display">\[
\sum_{i=1}^{n}{x_i \cdot Np(x_i)}
\]</span></p>
<p>所以，我们可以获得的平均奖金为：</p>
<p><span class="math display">\[
\sum_{i=1}^{n}{\frac{x_i \cdot Np(x_i)}{N}} = \sum_{i=1}^{n}{x_ip(x_i)} = E[X]
\]</span></p>
<div id="exr-4_4_a" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.8</strong></span> 令 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 为我们抛一个骰子所获得的点数，计算 <span class="math inline">\(E[X]\)</span>。</p>
</div>
<div id="sol-4_4_a" class="proof solution">
<p><span class="proof-title"><em>解 4.8</em>. </span><span class="math display">\[
\begin{align}
\because\ &amp; p(1)=p(2)=p(3)=p(4)=p(5)=p(6)=\frac{1}{6} \\
\therefore\ &amp; E[X] = 1 \cdot \frac{1}{6} + 2 \cdot \frac{1}{6} + 3 \cdot \frac{1}{6} + 4 \cdot \frac{1}{6} + 5 \cdot \frac{1}{6} + 6 \cdot \frac{1}{6} = \frac{7}{2}
\end{align}
\]</span></p>
<p>读者应该注意，在 <a href="#exr-4_4_a" class="quarto-xref">习题&nbsp;<span>4.8</span></a> 中，<span class="math inline">\(X\)</span> 的期望值并不是 <span class="math inline">\(X\)</span> 的可能取值（也就是说，抛一个骰子，我们不可能得到 的点数）。因此，即使我们称 <span class="math inline">\(E[X]\)</span> 为 <span class="math inline">\(X\)</span> 的期望，我们也不能应该把 <span class="math inline">\(E[X]\)</span> 看作我们期望 <span class="math inline">\(X\)</span> 具有的值，而应该看作在大量重复实验中 <span class="math inline">\(X\)</span> 的平均值。也就是说，如果我们连续抛一个骰子，那么在抛了很多次之后，所得结果的平均点数将大约是 <span class="math inline">\(\frac{7}{2}\)</span>。（感兴趣的读者可以尝试一下这个实验。）<span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="exm-4_4_b" class="theorem example">
<p><span class="theorem-title"><strong>例 4.7</strong></span> 如果一个事件 <span class="math inline">\(A\)</span> 的 <strong>指示随机变量</strong> 为 <span class="math inline">\(I\)</span>，如果</p>
<p><span class="math display">\[
I = \begin{cases}
1, \quad &amp; 如果 A 发生\\
0, \quad &amp; 如果 A 不发生
\end{cases}
\]</span></p>
<p>则 <span class="math inline">\(E[I] = 1 \cdot P(A) + 0 \cdot P(A^c) = P(A)\)</span>。因此，<strong>指示随机变量</strong> 的期望就是对应的事件发生的概率。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="exm-4_4-c" class="theorem example">
<p><span class="theorem-title"><strong>例 4.8</strong></span> <em>熵（Entropy）</em>。给定一个 <strong>随机变量</strong> <span class="math inline">\(X\)</span>，<span class="math inline">\(X=x\)</span> 传递了多少信息（<em>information</em>）？让我们通过如下的方式来开始尝试量化 <span class="math inline">\(X=x\)</span> 中所传递的信息：<span class="math inline">\(X=x\)</span> 的信息量应该取决于 <span class="math inline">\(X\)</span> 等于 <span class="math inline">\(x\)</span> 的可能性。<span class="math inline">\(X\)</span> 等于 <span class="math inline">\(x\)</span> 的可能性越小，他所包含的信息就越多，这看起来是合理的。例如：如果 <span class="math inline">\(X\)</span> 表示抛两个骰子的点数之和，则 <span class="math inline">\(X = 12\)</span> 包含的信息量比 <span class="math inline">\(X = 7\)</span> 包含的信息量要大（因为 <span class="math inline">\(P\{X=12\}=\frac{1}{36}\)</span>，而 <span class="math inline">\(P\{X=7\}=\frac{1}{6}\)</span>）。</p>
<p>让我们用 <span class="math inline">\(I(p)\)</span> 来表示一个概率为 <span class="math inline">\(p\)</span> 的事件发生时的信息量。显然，<span class="math inline">\(I(p)\)</span> 应该是 <span class="math inline">\(p\)</span> 的非负递减函数。为了确定 <span class="math inline">\(I(p)\)</span>，令 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是独立 <strong>随机变量</strong>，假设 <span class="math inline">\(P\{X=x\}=p\)</span>、<span class="math inline">\(P\{Y=y\}=q\)</span>。那么 <span class="math inline">\(X=x\)</span>、<span class="math inline">\(Y=y\)</span> 包含多少信息量？</p>
<ul>
<li><p>首先，<span class="math inline">\(X=x\)</span> 中包含的信息量是 <span class="math inline">\(I(p)\)</span>。</p></li>
<li><p>此外，由于我们已经知道 <span class="math inline">\(Y=y\)</span> 的概率并不受 <span class="math inline">\(X=x\)</span> 的影响（因为 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是独立的），所以 <span class="math inline">\(Y=y\)</span> 中包含的额外信息量应该等于 $I(q)。</p></li>
<li><p>因此，<span class="math inline">\(X=x\)</span>、<span class="math inline">\(Y=y\)</span> 中的信息量为 <span class="math inline">\(I(p)+I(q)\)</span>。</p></li>
<li><p>另一方面，我们有 <span class="math inline">\(P\{X=x, Y=y\}=P\{X=x\}P\{Y=y\}=pq\)</span>，这意味着 <span class="math inline">\(X=x\)</span>、<span class="math inline">\(Y=y\)</span> 中的信息量为 <span class="math inline">\(I(pq)\)</span>。</p></li>
<li><p>因此，看起来，<span class="math inline">\(I\)</span> 应该满足：<span class="math inline">\(I(pq) = I(p) + I(q)\)</span>。</p></li>
<li><p>如果我们定义函数 <span class="math inline">\(G\)</span> 为：<span class="math inline">\(G(p)=I(2^{-p})\)</span>，于是有：</p>
<p><span class="math display">\[
\begin{align}
G(p+q) &amp;= I(2^{-(p+q)}) \\
&amp;= I(2^{-p} \cdot 2^{-q}) \\
&amp;= I(2^{-p}) + I(2^{-q}) \\
&amp;= G(p) + G(q)
\end{align}
\]</span></p>
<p>可以证明，满足上述关系的唯一的单调函数 <span class="math inline">\(G\)</span> 是 <span class="math inline">\(G(p) = cp\)</span>，其中 <span class="math inline">\(c\)</span> 为常数。</p></li>
<li><p>于是，我们有 <span class="math inline">\(I(2^{-p}) = cp\)</span>，令 <span class="math inline">\(q=2^{-p}\)</span>，则 <span class="math inline">\(I(q) = -c \log_2{q}\)</span>（其中，<span class="math inline">\(c\)</span> 是一个大于 0 的常数）。我们经常令 <span class="math inline">\(c=1\)</span>，并且说：用 <strong>位（<em>bits</em>）</strong> 来测量信息量。</p></li>
</ul>
<p>现在，考虑一个随机变量 <span class="math inline">\(X\)</span>，它的取值为 <span class="math inline">\(x_1,x_2,...,x_n\)</span>，其概率分别为 <span class="math inline">\(p_1,p_2,...,p_n\)</span>。因为 <span class="math inline">\(X=x\)</span> 的信息量为 <span class="math inline">\(-\log_2(p_i)\)</span>，因此，<span class="math inline">\(X=x_i\)</span> 所包含的信息量的 <strong>期望</strong> 为：</p>
<p><span class="math display">\[
H(X) = - \sum_{i=1}^{n}{p_i \log_2{p_i}}
\]</span></p>
<p>在信息论中，<span class="math inline">\(H(X)\)</span> 就是众所周知的 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的 <strong>熵（<em>entropy</em>）</strong>。 <span class="math inline">\(\blacksquare\)</span></p>
</div>
<p>我们还可以定义连续 <strong>随机变量</strong> 的 <strong>期望</strong>。假设 <span class="math inline">\(X\)</span> 是一个概率密度函数为 <span class="math inline">\(f\)</span> 的连续 <strong>随机变量</strong>。对于一个较小的数 <span class="math inline">\(\Delta x\)</span>，有：</p>
<p><span class="math display">\[
f(x) \Delta x \approx P\{x \lt X \lt x + \Delta x\}
\]</span></p>
<p>如果 <span class="math inline">\(x\)</span> 的权重等于 <span class="math inline">\(X\)</span> 在 <span class="math inline">\(x\)</span> 附近的概率，则 <span class="math inline">\(X\)</span> 的所有可能值的加权平均数就是 <span class="math inline">\(xf(x) \Delta x\)</span> 在所有 <span class="math inline">\(x\)</span> 上的积分。通常，定义 <span class="math inline">\(X\)</span> 的期望为：</p>
<p><span class="math display">\[
E[X] = \int_{-\infty}^{\infty}{xf(x) \mathrm{d} x}
\]</span></p>
<div id="exm-4_4_d" class="theorem example">
<p><span class="theorem-title"><strong>例 4.9</strong></span> 假设您在下午 5 点后的某个时间期待一条消息。根据经验，您知道在下午 5 点后的 <span class="math inline">\(X\)</span> 个小时内会收到消息，并且 <span class="math inline">\(X\)</span> 是一个 <strong>随机变量</strong>，其概率密度函数为：</p>
<p><span class="math display">\[
f(x) = \begin{cases}
\frac{1}{1.5}, \quad &amp; 0 \lt x \lt 1.5 \\
0, \quad &amp; otherwise
\end{cases}
\]</span></p>
<p>则下午 5 点之后可以收到消息的期望时间为：<span class="math inline">\(E[X] = \int_{0}^{1.5}{\frac{1}{1.5} \mathrm{d} x} = 0.75\)</span>。因此，您等待消息的时间平均为 45 分钟。 <span class="math inline">\(\blacksquare\)</span></p>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="备注">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
备注
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>期望</strong> 的概念类似于物理中的 <strong>重心</strong> 的概念。考虑一个离散 <strong>随机变量</strong> <span class="math inline">\(X\)</span>，其概率质量函数为 <span class="math inline">\(p(x_i), i \ge 1\)</span>。如果我们现在想象一个质量可以忽略不计的杆（<em>weightless rod</em>），在这根杆上的 <span class="math inline">\(x_i\)</span> 处的质量为 <span class="math inline">\(p(x_i)\)</span>（<span class="math inline">\(i \ge 1\)</span>)（见 <a href="#fig-4_4" class="quarto-xref">图&nbsp;<span>4.4</span></a>）。那么这根杆处于平衡状态的点称为重心（<em>the center fo gravity</em>）。对于那些熟悉统计学基础的读者来说，很容易证明这根杆的重心位于 <span class="math inline">\(E[X]\)</span> <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>。</p>
<div id="fig-4_4" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-4_4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/chapter_4/f_4_4.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-4_4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;4.4: 重心位于 0.9 处
</figcaption>
</figure>
</div></li>
<li><p><span class="math inline">\(E[X]\)</span> 的计量单位与 <span class="math inline">\(X\)</span> 相同。</p></li>
</ul>
</div>
</div>
</section>
<section id="sec-4_5" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="sec-4_5"><span class="header-section-number">4.5</span> 期望的特征</h2>
<p>假设我们给定一个 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 和其 <strong>概率分布</strong>。又假设，我们对计算 <span class="math inline">\(X\)</span> 的 <strong>期望</strong> 不感兴趣，而对计算关于 <span class="math inline">\(X\)</span> 的某个函数 <span class="math inline">\(g(X)\)</span> 的 <strong>期望</strong> 感兴趣。如何计算 <span class="math inline">\(g(X)\)</span> 的 <strong>期望</strong>？如下就是一种计算方法。由于 <span class="math inline">\(g(X)\)</span> 本身是一个 <strong>随机变量</strong>，因此 <span class="math inline">\(g(X)\)</span> 必存在一个概率分布，并且这个概率分布可以通过 <span class="math inline">\(X\)</span> 的概率分布来计算。一旦我们得到了 <span class="math inline">\(g(X)\)</span> 的分布，我们就可以通过期望的定义来计算 <span class="math inline">\(E[g(X)]\)</span>。</p>
<div class="callout callout-style-default callout-tip callout-titled" title="概率分布">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
概率分布
</div>
</div>
<div class="callout-body-container callout-body">
<p>概率分布即——离散 <strong>随机变量</strong> 的 <em>概率质量函数</em> 或连续 <strong>随机变量</strong> 的 <em>概率密度函数</em>。</p>
</div>
</div>
<div id="exr-4_5_a" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.9</strong></span> 假设 <span class="math inline">\(X\)</span> 的概率质量函数函数为：<span class="math inline">\(p(0)=0.2\)</span>，<span class="math inline">\(p(1)=0.5\)</span>，<span class="math inline">\(p(2)=0.3\)</span>，计算 <span class="math inline">\(E[X^2]\)</span>。</p>
</div>
<div id="sol-4_5_a" class="proof solution">
<p><span class="proof-title"><em>解 4.9</em>. </span>令 <span class="math inline">\(Y=X^2\)</span>，则 <span class="math inline">\(Y\)</span> 是一个取值为 <span class="math inline">\(0^2\)</span>，<span class="math inline">\(1^2\)</span>，<span class="math inline">\(2^2\)</span> 的 <strong>随机变量</strong>，并且其可能取值的概率分别为：</p>
<p><span class="math inline">\(p_Y(0) = P\{Y = 0^2\} = 0.2\)</span></p>
<p><span class="math inline">\(p_Y(1) = P\{Y = 1^2\} = 0.5\)</span></p>
<p><span class="math inline">\(p_Y(2) = P\{Y = 2^2\} = 0.3\)</span></p>
<p>因此，<span class="math inline">\(E[X^2] = E[Y] = 0 \cdot 0.2 + 1 \cdot 0.5 + 4 \cdot 0.3 = 1.7\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="exr-4_5_b" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.10</strong></span> 定位并修复某工厂的电气故障所需的时间（以小时为单位）是一个 <strong>随机变量</strong> <span class="math inline">\(X\)</span>，其概率密度函数为：</p>
<p><span class="math display">\[
f_X(x) = \begin{cases}
1, \quad &amp; 0 \lt x \lt 1 \\
0, \quad &amp; otherwise
\end{cases}
\]</span></p>
<p>如果对修复时间 <span class="math inline">\(x\)</span> 的细分成本是 <span class="math inline">\(x^3\)</span>，那么这种细分的期望成本是多少？</p>
</div>
<div id="sol-4_5_b" class="proof solution">
<p><span class="proof-title"><em>解 4.10</em>. </span>令 <span class="math inline">\(Y = X^3\)</span>，我们首先计算 <span class="math inline">\(Y\)</span> 的分布函数：</p>
<p><span class="math display">\[
\begin{align}
F_Y(a) &amp;= P\{Y \le a\} \\
&amp;= P\{X^3 \le a\} \\
&amp;= P\{X \le a^{\frac{1}{3}}\} \\
&amp;= \int_{0}^{a^{\frac{1}{3}}}{1  \mathrm{d} x} \\
&amp;= a^{\frac{1}{3}} \\
其中，&amp; 0 \le a \le 1
\end{align}
\]</span></p>
<p>对 <span class="math inline">\(F_Y(a)\)</span> 求导得到概率密度函数 <span class="math inline">\(f_Y(a)=\frac{1}{3}a^{-\frac{2}{3}},\ 0 \le a \le 1\)</span>。因此：</p>
<p><span class="math display">\[
\begin{align}
E[X^3] &amp;= E[Y] = \int_{-\infty}^{\infty}{a \cdot f_Y(a) da} \\
&amp;= \int_{0}^{1}{a \cdot a^{-\frac{2}{3}} da} \\
&amp;= \frac{1}{3} \int_{0}^{1}{a^{\frac{1}{3}}da} \\
&amp;= (\frac{1}{3} \cdot \frac{3}{4} \cdot a^{\frac{4}{3}}) \big |_{0}^{1} \\
&amp;= \frac{1}{4} \quad \blacksquare
\end{align}
\]</span></p>
</div>
<p>虽然上述过程允许我们可以在理论上利用 <span class="math inline">\(X\)</span> 的分布来计算 <span class="math inline">\(X\)</span> 的任何函数的 <strong>期望</strong>，但我们还有一种更简单的方法。例如，假设我们想计算 <span class="math inline">\(g(X)\)</span> 的 <strong>期望</strong>。当 <span class="math inline">\(X=x\)</span> 时，<span class="math inline">\(g(X)\)</span> 的取值为 $g(x)，因此 <span class="math inline">\(E[g(X)]\)</span> 应该是 <span class="math inline">\(g(X)\)</span> 的加权平均数，其中 <span class="math inline">\(g(x)\)</span> 的权重就是 <span class="math inline">\(X=x\)</span> 的概率（或概率密度）。事实上，我们可以证明上述过程是正确的，因此我们有以下的命题。</p>
<div id="prp-4_5_1" class="theorem proposition">
<p><span class="theorem-title"><strong>命题 4.1</strong></span> 一个 <strong>随机变量</strong> 的函数的 <strong>期望</strong>：</p>
<ul>
<li>如果一个离散 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的概率质量函数为 <span class="math inline">\(p(x)\)</span>，则对于任一函数 <span class="math inline">\(g\)</span>，<span class="math inline">\(E[g(X)] = \sum_{x}{g(x)p(x)}\)</span>。</li>
<li>如果一个连续 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的概率密度函数为 <span class="math inline">\(f(x)\)</span>，则对于任一函数 <span class="math inline">\(g\)</span>，<span class="math inline">\(E[g(X)] = \int_{-\infty}^{\infty}{g(x)f(x) \mathrm{d} x}\)</span>。</li>
</ul>
</div>
<div id="exm-4_5_c" class="theorem example">
<p><span class="theorem-title"><strong>例 4.10</strong></span> 利用 <a href="#prp-4_5_1" class="quarto-xref">命题&nbsp;<span>4.1</span></a> 来计算 <a href="#exr-4_5_a" class="quarto-xref">习题&nbsp;<span>4.9</span></a> 有：</p>
<p><span class="math inline">\(E[X^2] = 0^2 \cdot 0.2 + 1^2 \cdot 0.5 + 2^2 \cdot 0.3 = 1.7\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="exm-4_5_d" class="theorem example">
<p><span class="theorem-title"><strong>例 4.11</strong></span> 利用 <a href="#prp-4_5_1" class="quarto-xref">命题&nbsp;<span>4.1</span></a> 来计算 <a href="#exr-4_5_b" class="quarto-xref">习题&nbsp;<span>4.10</span></a> 有：</p>
<p><span class="math inline">\(E[X^3] = \int_{0}^{1}{x^3} \mathrm{d} x = \frac{1}{4}\)</span>。 <span class="math inline">\(\blacksquare\)</span></p>
</div>
<p>根据 <a href="#prp-4_5_1" class="quarto-xref">命题&nbsp;<span>4.1</span></a>，我们有 <a href="#cor-4_5_2" class="quarto-xref">推论&nbsp;<span>4.1</span></a>。</p>
<div id="cor-4_5_2" class="theorem corollary">
<p><span class="theorem-title"><strong>推论 4.1</strong></span> 如果 <span class="math inline">\(a\)</span> 和 <span class="math inline">\(b\)</span> 是常数，则 <span class="math inline">\(E[aX + b] = aE[X] + b\)</span>。</p>
</div>
<div class="proof">
<p><span class="proof-title"><em>证</em>. </span></p>
<ul>
<li>对于离散随机变量： <span class="math display">\[
\begin{align}
E[aX + b] &amp;= \sum_{x}{(ax + b)p(x)} \\
&amp;= a\sum_{x}{xp(x)} + b\sum_{x}{p(x)} \\
&amp;= aE[X] + b
\end{align}
\]</span></li>
<li>对于连续随机变量： <span class="math display">\[
\begin{align}
E[aX + b] &amp;= \int_{-\infty}^{\infty}{(ax + b)f(x) \mathrm{d} x} \\
&amp;= a\int_{-\infty}^{\infty}{xf(x) \mathrm{d} x} + b\int_{-\infty}^{\infty}{f(x) \mathrm{d} x} \\
&amp;= aE[X] + b \quad \blacksquare
\end{align}
\]</span></li>
</ul>
</div>
<p>如果令 <span class="math inline">\(a=0\)</span>，则根据 <a href="#cor-4_5_2" class="quarto-xref">推论&nbsp;<span>4.1</span></a> 有：<span class="math inline">\(E[b] = b\)</span>。也就是说，常量的 <strong>期望</strong> 就是它本身。（这符合你的直觉吗？）另外，如果我们令 <span class="math inline">\(b=0\)</span>，那么我们得到 <span class="math inline">\(E[aX] = aE[X]\)</span>。</p>
<p>换句话说，常数乘以 <strong>随机变量</strong> 的 <strong>期望</strong> 就是该常数乘以这个 <strong>随机变量</strong> 的期望。随机变量 <span class="math inline">\(X\)</span> 的 <strong>期望</strong> <span class="math inline">\(E[X]\)</span> 也称为 <span class="math inline">\(X\)</span> 的平均值或一阶矩（<em>the first moment</em>）。当 <span class="math inline">\(n \ge 1\)</span> 时，<span class="math inline">\(E[X^n]\)</span> 称为 <span class="math inline">\(X\)</span> 的 <span class="math inline">\(n\)</span>-阶矩。根据 <a href="#prp-4_5_1" class="quarto-xref">命题&nbsp;<span>4.1</span></a>，我们有：</p>
<p><span class="math display">\[
E[X^n] = \begin{cases}
\sum_{x}{x^np(x)}, \quad &amp; X 为离散随机变量\\
&amp; \\
&amp; \\
\int_{-\infty}^{\infty}{x^nf(x) \mathrm{d} x}, \quad &amp; X 为连续随机变量
\end{cases}
\]</span></p>
<section id="随机变量和的期望" class="level3" data-number="4.5.1">
<h3 data-number="4.5.1" class="anchored" data-anchor-id="随机变量和的期望"><span class="header-section-number">4.5.1</span> 随机变量和的期望</h3>
<p>对于 <a href="#prp-4_5_1" class="quarto-xref">命题&nbsp;<span>4.1</span></a> 而言，如果有两个 <strong>随机变量</strong> <span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span>，并且 <span class="math inline">\(g\)</span> 为关于 <span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 的函数，那么有：</p>
<p><span class="math display">\[
E[g(X,Y)] = \begin{cases}
\sum_{y} \sum_{x} g(x,y)p(x,y), \quad &amp; 离散随机变量\\
&amp; \\
&amp; \\
\int_{-\infty}^{\infty}\int_{-\infty}^{\infty}g(x,y)f(x,y) \mathrm{d} x \mathrm{d} y, \quad &amp; 连续随机变量
\end{cases}
\]</span></p>
<p>例如，如果 <span class="math inline">\(g(X,Y)=X+Y\)</span> 且 <span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 为连续 <strong>随机变量</strong>，则：</p>
<p><span class="math display">\[
\begin{align}
E[X+Y] &amp;= \int_{-\infty}^{\infty}\int_{-\infty}^{\infty}(x+y)f(x,y) \mathrm{d} x \mathrm{d} y \\
&amp;= \int_{-\infty}^{\infty}\int_{-\infty}^{\infty}xf(x,y) \mathrm{d} x \mathrm{d} y + \int_{-\infty}^{\infty}\int_{-\infty}^{\infty}yf(x,y) \mathrm{d} x \mathrm{d} y \\
&amp;= E[X] + E[Y]
\end{align}
\]</span></p>
<p>类似的，对于离散随机变量而言，也有：</p>
<p><span id="eq-4_5_001_451"><span class="math display">\[
E[X+Y]=E[X] + E[Y]
\tag{4.44}\]</span></span></p>
<p>重复应用 <a href="#eq-4_5_001_451" class="quarto-xref">式&nbsp;<span>4.44</span></a>，我们可以证明：任意数量的 <strong>随机变量</strong> 之和的 <strong>期望</strong> 等于它们各自 <strong>期望</strong> 的和。例如，</p>
<p><span class="math display">\[
\begin{align}
E[X+Y+Z] &amp;= E[(X+Y)+Z] \\
&amp;= E[X+Y] + E[Z]  \\
&amp;= E[X] + E[Y] + E[Z]  
\end{align}
\]</span></p>
<p>更一般的，对于任意的 <span class="math inline">\(n\)</span>，</p>
<p><span id="eq-4_5_002_452"><span class="math display">\[
E[X_1 + X_2 + ... + X_n] = E[X_1] + E[X_2] + ... + E[X_n]
\tag{4.45}\]</span></span></p>
<p><a href="#eq-4_5_002_452" class="quarto-xref">式&nbsp;<span>4.45</span></a> 是一个非常有用的公式，接下来，我们将通过一系列的例子来说明其作用。</p>
<div id="exr-4_5_e" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.11</strong></span> 抛两个骰子，计算两个骰子的和的期望值。</p>
</div>
<div id="sol-4_5_e" class="proof solution">
<p><span class="proof-title"><em>解 4.11</em>. </span>如果令 <span class="math inline">\(X\)</span> 是两个骰子的和，则</p>
<p><span class="math inline">\(E[X]=\sum_{i=2}^{12}{iP\{X=i\}}\)</span></p>
<p>我们令 <span class="math inline">\(X_1\)</span>、<span class="math inline">\(X_2\)</span> 分别表示这两个骰子的点数，则有 <span class="math inline">\(X = X_1 + X_2\)</span>，于是有：</p>
<p><span class="math inline">\(E[X] = E[X_1 + X_2] = E[X_1] + E[X_2]\)</span>，根据 <a href="#eq-4_5_002_452" class="quarto-xref">式&nbsp;<span>4.45</span></a> 有 <span class="math inline">\(E[X] = 7\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="exr-4_5_f" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.12</strong></span> 一家建筑公司最近投标了三个项目，这三个项目可以获得的利润分别为 1 万美元、2 万美元、4 万美元。对这三个项目，如果该公司中标的概率分别为 0.2、0.8、0.3，那么该公司的预期总利润是多少？</p>
</div>
<div id="sol-4_5_f" class="proof solution">
<p><span class="proof-title"><em>解 4.12</em>. </span>令 <span class="math inline">\(X_i\)</span> 表示投标的第 <span class="math inline">\(i\)</span> 个项目的利润，其中 <span class="math inline">\(i=1,2,3\)</span>。令 <span class="math inline">\(X\)</span> 表示总利润，则 <span class="math inline">\(X = X_1 + X_2 + X_3\)</span>。所以，</p>
<p><span class="math inline">\(E[X] = E[X_1 + X_2 + X_3] = E[X_1] + E[X_2] + E[X_3] = 3 万美元\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="exr-4_5_g" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.13</strong></span> 秘书打印出了 <span class="math inline">\(N\)</span> 封信件以及信件对应的信封。当信封掉在地板上时，他们会混在一起。如果这 <span class="math inline">\(N\)</span> 封信件以完全随机的方式放在已经混淆的信封里（每封信件放在任何一个信封的概率相同），则放到正确的信封中的信件数量的期望值是多少？</p>
</div>
<div id="sol-4_5_g" class="proof solution">
<p><span class="proof-title"><em>解 4.13</em>. </span>令 <span class="math inline">\(X\)</span> 表示放到正确的信封中的信件数量，则：</p>
<p><span class="math inline">\(X = X_1 + X_2 + ... + X_N\)</span>，其中 <span class="math inline">\(X_i = \begin{cases} 1, \quad &amp; 第 i 封信放在了第 i 个信封中\\ 0, \quad &amp; 其他 \end{cases}\)</span>。</p>
<p>由于第 <span class="math inline">\(i\)</span> 封信放入 <span class="math inline">\(N\)</span> 个信封中的可能性是相同的，因此，<span class="math inline">\(P\{X_i=1\}=\frac{1}{N}\)</span>。</p>
<p>所以有：<span class="math inline">\(E[X_i]=1 \cdot P\{X_i = 1\} + 0 \cdot P\{X_i = 0\} = \frac{1}{N}\)</span>，根据 <a href="#eq-4_5_002_452" class="quarto-xref">式&nbsp;<span>4.45</span></a> 有：</p>
<p><span class="math inline">\(E[X] = E[X_1] + ... + E[X_N] = \frac{1}{N} N =1\)</span>。</p>
<p>因此，不管有多少封信，平均来说，只有一封信会放在正确的信封里。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="exr-4_5_h" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.14</strong></span> 假设有 20 种不同类型的优惠券，并且每次获取优惠券时得到每一种优惠券的可能性都是相等的。如果现在获得了 10 张优惠券，计算其中包含的优惠券种类的预期数量。</p>
</div>
<div id="sol-4_5_h" class="proof solution">
<p><span class="proof-title"><em>解 4.14</em>. </span>令 <span class="math inline">\(X\)</span> 表示这 10 张优惠券中包含的优惠券类型的数量，则：</p>
<p><span class="math inline">\(X = X_1 + ... + X_20\)</span>，其中 <span class="math inline">\(X_i = \begin{cases} 1, \quad &amp; 至少有 1 张第 i 种优惠券\\ 0, \quad &amp; 其他 \end{cases}\)</span>。</p>
<p>所以有：</p>
<p><span class="math display">\[
\begin{align}
E[X_i] &amp;= P\{X_i = 1\} \\
&amp;= P\{在 10 张优惠券中至少有 1 张第 i 种优惠券\} \\
&amp;= 1 - P\{在 10 张优惠券中不存在第 i 种优惠券\} \\
&amp;= 1 - \bigg(\frac{19}{20}\bigg)^{10}
\end{align}
\]</span></p>
<p>所以 <span class="math inline">\(E[X] = E[X_1] + ... + E[X_20] = 20 \cdot \Bigg(1 - \big(\frac{19}{20}\big)^{10}\Bigg) = 8.025\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<p>当我们必须预测一个 <strong>随机变量</strong> 的值时，均值（<em>mean</em>）的一个重要属性就显现出来了。也就是说，假设要预测一个 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的值，如果我们预测 <span class="math inline">\(X\)</span> 将等于 <span class="math inline">\(c\)</span>，那么预测“误差”（或者称为：残差）的平方将是 <span class="math inline">\((X−c)^2\)</span>。接下来，我们将证明：当 <span class="math inline">\(X\)</span> 的预测值等于它的均值 <span class="math inline">\(\mu\)</span> 时，均方误差的值是最小的。</p>
<p>对于任何常数 <span class="math inline">\(c\)</span> 有：</p>
<p><span id="eq-4_5_005"><span class="math display">\[
\begin{align}
E[(X-c)^2] &amp;= E[(X - \mu + \mu - c)^2] \\
&amp;= E[(X - \mu)^2 + 2(X - \mu)(\mu - c) + (\mu -c)^2] \\
&amp;= E[(X - \mu)^2] + 2(\mu - c)E[(X - \mu)] + (\mu -c)^2 \\
&amp;= E[(X - \mu)^2] + (\mu -c)^2, \qquad \because E[X - \mu] = E[X] - \mu = 0 \\
&amp;\ge E[(X - \mu)^2]
\end{align}
\tag{4.46}\]</span></span></p>
<p>因此，当 <strong>随机变量</strong> 的平方误差的期望最小时，可以得到 <strong>随机变量</strong> 的最佳预测器——即其平均值。</p>
</section>
</section>
<section id="方差" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="方差"><span class="header-section-number">4.6</span> 方差</h2>
<p>给定一个 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 及其概率分布函数，如果我们能够定义某些合适的度量并用来总结质量函数的基本特征，那将是非常有用的。<strong>期望</strong> <span class="math inline">\(E[X]\)</span> 就是其中的一个度量。虽然 <span class="math inline">\(E[X]\)</span> 生成了 <span class="math inline">\(X\)</span> 的可能值的加权平均数，但 <span class="math inline">\(E[X]\)</span> 却没有告诉我们 <span class="math inline">\(X\)</span> 的这些可能值的变化。例如，当 <strong>随机变量</strong> <span class="math inline">\(W\)</span>、<span class="math inline">\(Y\)</span>、<span class="math inline">\(Z\)</span> 的概率质量函数分别为：</p>
<p><span class="math inline">\(W=0 \quad 概率为 1\)</span></p>
<p><span class="math inline">\(Y=\begin{cases} -1, \quad &amp; 概率为 \frac{1}{2}\\ 1, \quad &amp; 概率为 \frac{1}{2} \end{cases}\)</span></p>
<p><span class="math inline">\(Y=\begin{cases} -100, \quad &amp; 概率为 \frac{1}{2}\\ 100, \quad &amp; 概率为 \frac{1}{2} \end{cases}\)</span></p>
<p>虽然这三个 <strong>随机变量</strong> 的期望都是 0，但是 <span class="math inline">\(Y\)</span> 的变化幅度比 <span class="math inline">\(W\)</span> 要大，同时 <span class="math inline">\(Z\)</span> 的变化幅度比 <span class="math inline">\(Y\)</span> 也要大。</p>
<p>因为我们期望 <span class="math inline">\(X\)</span> 在其平均值 <span class="math inline">\(E[X]\)</span> 附近取值，所以可以利用 <span class="math inline">\(X\)</span> 的实际取值与 <span class="math inline">\(E[X]\)</span> 之间的距离来测量 <span class="math inline">\(X\)</span> 的变化。可以同过量化 <span class="math inline">\(E[|X − \mu|]\)</span> 来计算 <span class="math inline">\(X\)</span> 的实际取值与 <span class="math inline">\(E[X]\)</span> 之间的距离，其中 <span class="math inline">\(\mu = E[X]\)</span>，<span class="math inline">\(|X − \mu|\)</span> 代表 <span class="math inline">\(X - \mu\)</span> 的绝对值。然而，事实证明，在数学上处理 <span class="math inline">\(E[|X − \mu|]\)</span> 极其麻烦。因此，我们通常会用一个更容易处理的数据——即 <span class="math inline">\(X\)</span> 与其平均值之差的平方的期望。</p>
<div id="def-4_6_001" class="theorem definition">
<p><span class="theorem-title"><strong>定义 4.1</strong></span> 如果 <span class="math inline">\(X\)</span> 是一个均值为 <span class="math inline">\(\mu\)</span> 的 <strong>随机变量</strong>，则 <span class="math inline">\(X\)</span> 的 <strong>方差</strong>（<em>variance</em>）<span class="math inline">\(\textup{Var}(X)\)</span> 为：<span class="math inline">\(\textup{Var}(X) = E[(X - \mu)^2]\)</span>。</p>
</div>
<p>于是，我们有如下的推导：</p>
<p><span class="math display">\[
\begin{align}
\textup{Var}(X) &amp;= E[(X - \mu)^2] \\
&amp;= E[X^2 - 2 \mu X + \mu ^2] \\
&amp;= E[X^2] - 2 \mu E[X] + \mu ^2 \\
&amp;= E[X^2] - (E[X])^2 \quad \because E[X] = \mu \\
\end{align}
\]</span></p>
<p>所以有：</p>
<p><span id="eq-4_6_001_461"><span class="math display">\[
\textup{Var}(X) = E[X^2] - (E[X])^2
\tag{4.47}\]</span></span></p>
<p>换句话说，<span class="math inline">\(X\)</span> 的方差等于 <span class="math inline">\(X\)</span> 的平方的期望减去 <span class="math inline">\(X\)</span> 的期望的平方。实际上，通常，<a href="#eq-4_6_001_461" class="quarto-xref">式&nbsp;<span>4.47</span></a> 是计算 <span class="math inline">\(\textup{Var}(X)\)</span> 的最简单的方法。</p>
<div id="exr-4_6_a" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.15</strong></span> 令 <span class="math inline">\(X\)</span> 为抛一个骰子的点数，计算 <span class="math inline">\(\textup{Var}(X)\)</span>。</p>
</div>
<div id="sol-4_6_a" class="proof solution">
<p><span class="proof-title"><em>解 4.15</em>. </span>因为 <span class="math inline">\(P\{X=i\}=\frac{1}{6}\)</span>，<span class="math inline">\(i=1,2,...,6\)</span>，因此：</p>
<p><span class="math inline">\(E[X^2] = \sum_{i=1}^{6}{i^2 \cdot P\{X=i\}} = \frac{91}{6}\)</span>。</p>
<p>在 <a href="#exr-4_4_a" class="quarto-xref">习题&nbsp;<span>4.8</span></a> 中，我们知道 <span class="math inline">\(E[X]=\frac{7}{2}\)</span>，根据 <a href="#eq-4_6_001_461" class="quarto-xref">式&nbsp;<span>4.47</span></a>：</p>
<p><span class="math inline">\(\textup{Var}(X)=E[X^2] - (E[X])^2 = \frac{91}{6} - (\frac{7}{2})^2 = \frac{35}{12}\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="exm-4_6_b" class="theorem example">
<p><span class="theorem-title"><strong>例 4.12</strong></span> <strong>指示随机变量的方差</strong>，对于事件 <span class="math inline">\(A\)</span>，指示随机变量 <span class="math inline">\(I\)</span> 为：</p>
<p><span class="math inline">\(I = \begin{cases} 1, \quad &amp; 如果 A 发生\\ 0, \quad &amp; 如果 A 不发生 \end{cases}\)</span></p>
<p>根据 <a href="#exm-4_4_b" class="quarto-xref">例&nbsp;<span>4.7</span></a> 有，<span class="math inline">\(E[I] = P(A)\)</span>，所以有： <span class="math display">\[
\begin{align}
\textup{Var}(I) &amp;= E[I^2] - (E(I))^2 \\
&amp;= E[I] - (E[I])^2 \quad \because I^2=I \\
&amp;= E[I](1-E[I]) \\
&amp;= P(A)(1-P(A)) \qquad \blacksquare
\end{align}
\]</span></p>
</div>
<p>因为 <span class="math inline">\((X - \mu)^2 \ge 0\)</span>，因此，<span class="math inline">\(\textup{Var}(X) = E[(X - \mu)^2] \ge 0\)</span>，根据 <a href="#eq-4_6_001_461" class="quarto-xref">式&nbsp;<span>4.47</span></a> 有：</p>
<p><span id="eq-4_6_002"><span class="math display">\[
E[X^2] \ge \mu^2
\tag{4.48}\]</span></span></p>
<p>也就是说，一个 <strong>随机变量</strong> 的平方的 <strong>期望</strong> 至少与其 <strong>期望</strong> 的平方一样大。</p>
<div id="exm-4_6_c" class="theorem example">
<p><span class="theorem-title"><strong>例 4.13</strong></span> <strong>友谊悖论</strong>（<em>friendship paradox</em>）表明：平均而言，你的朋友的朋友数量比你的朋友数量要更多。更正式地，假设某个人群中有 <span class="math inline">\(n\)</span> 个人，标记为 <span class="math inline">\(1,2,...,n\)</span>，这些人中的某些人之间是朋友。这个 <em>朋友网络</em> （<em>friendship network</em>）可以用 <strong>图</strong>（<em>graphic</em>）来表示：用顶点表示每个人，然后用顶点与顶点之间的连线表示这些人是朋友。例如，如 <a href="#fig-4_5" class="quarto-xref">图&nbsp;<span>4.5</span></a> 所示，该社区中有 4 个人，第 1 个人和第 2 个人是朋友，第 1 个人和第 3 个人是朋友，第 1 个人和第 4 个人是朋友，第 2 个人和第 4 个人是朋友。</p>
<div class="cell">
<details class="code-fold">
<summary>代码</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)  </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">4</span>))  </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">graph_from_edgelist</span>(edges, <span class="at">directed =</span> <span class="cn">FALSE</span>)  </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(g)<span class="sc">$</span>label <span class="ot">&lt;-</span> vertices</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(g, <span class="at">vertex.label.cex =</span> <span class="fl">1.5</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-4_5" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-4_5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="4_files/figure-html/fig-4_5-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-4_5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;4.5: 一个朋友网络图
</figcaption>
</figure>
</div>
</div>
</div>
<p>令 <span class="math inline">\(f(i)\)</span> 表示第 <span class="math inline">\(i\)</span> 个人的朋友数，令 <span class="math inline">\(f=\sum_{i=1}^{n}{f(i)}\)</span>。在 <a href="#fig-4_5" class="quarto-xref">图&nbsp;<span>4.5</span></a> 中，<span class="math inline">\(f(1)=3\)</span>，<span class="math inline">\(f(2)=2\)</span>，<span class="math inline">\(f(3)=1\)</span>，<span class="math inline">\(f(4)=2\)</span>，<span class="math inline">\(f = 8\)</span>。</p>
<p>我们随机选择一个人，并用 <span class="math inline">\(X\)</span> 表示，<span class="math inline">\(X\)</span> 可以是 <span class="math inline">\(1,2,...,n\)</span> 中的任何一个，并且选取到的概率是一致的。也就是说，</p>
<p><span class="math inline">\(P(X=i)=\frac{1}{n}\)</span></p>
<p>根据 <a href="#prp-4_5_1" class="quarto-xref">命题&nbsp;<span>4.1</span></a>，<span class="math inline">\(X\)</span> 的朋友数量的期望 <span class="math inline">\(E[f(X)]\)</span> 为：</p>
<p><span class="math inline">\(E[f(X)] = \sum_{i=1}^{n}{f(i)P(X=i)}=\sum_{i=1}^{n}{\frac{f(i)}{n}} = \frac{f}{n}\)</span></p>
<p>假设这 <span class="math inline">\(n\)</span> 个人中的每个人都将他所有朋友的名字分别写在了一张单独的纸上（一个名字一张纸）。因此，一个有 <span class="math inline">\(k\)</span> 个朋友的人将使用 <span class="math inline">\(k\)</span> 张纸。因为第 <span class="math inline">\(i\)</span> 个人有 <span class="math inline">\(f(i)\)</span> 个朋友，因此总共会有 <span class="math inline">\(\sum_{i=1}^{n{f(i)}}\)</span> 张纸来记录名字。</p>
<p>现在随机选择一张纸，令 <span class="math inline">\(Y\)</span> 表示纸上的名字，并计算所选纸上的人的朋友数量的期望 <span class="math inline">\(E[f(Y)]\)</span>。</p>
<ul>
<li><p>首先，因为第 <span class="math inline">\(i\)</span> 个人有 <span class="math inline">\(f(i)\)</span> 个朋友， 所以有 <span class="math inline">\(f(i)\)</span> 张纸上的名字写的是 <span class="math inline">\(i\)</span>，因此，所选择的纸上的名字为 <span class="math inline">\(i\)</span> 的概率为 <span class="math inline">\(\frac{f(i)}{f}\)</span>，即：</p>
<p><span class="math inline">\(P(Y=i)=\frac{f(i)}{f}, i = 1,...,n\)</span></p></li>
<li><p>于是，<span class="math inline">\(E[f(Y)] = \sum_{i=1}^{n}{f(i)P(Y=i)} = \frac{\sum_{i=1}^{n}{f^2(i)}}{f}\)</span>。</p></li>
<li><p>因为 <span class="math inline">\(P(X=i)=\frac{1}{n}\)</span>，<span class="math inline">\(E[f(X)] = \frac{f}{n}\)</span>，所以 <span class="math inline">\(f = \frac{E[f(x)]}{P(X=i)}\)</span>，所以有：</p>
<p><span class="math display">\[
\begin{align}
E[f(Y)] &amp;= \frac{\sum_{i=1}^{n}{f^2(i)}}{f} \\
&amp;= \frac{\sum_{i=1}^{n}{f^2(i)P(X=i)}}{E[f(X)]} \\
&amp;= \frac{E[f^2(X)]}{E[f(X)]} \\
&amp;\ge E[f(X)], \ \because E[X^2] \ge \mu^2
\end{align}
\]</span></p></li>
</ul>
<p>因此，<span class="math inline">\(E[f(X)] \le E[f(Y)]\)</span>，这表明随机选择的某个人的平均朋友数量小于或等于其朋友的平均朋友数量。</p>
<div class="callout callout-style-default callout-tip callout-titled" title="备注">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
备注
</div>
</div>
<div class="callout-body-container callout-body">
<p>从直觉上讲，友谊悖论的原因在于：</p>
<ul>
<li>选择 <span class="math inline">\(X\)</span> 的概率是相同的（<span class="math inline">\(X\)</span> 为 <span class="math inline">\(n\)</span> 个人中的任何一个的概率是相同）。</li>
<li>选择 <span class="math inline">\(Y\)</span> 的概率与其朋友数量成正比。</li>
<li>所以，一个人拥有的朋友越多，这个人就越有可能是 <span class="math inline">\(Y\)</span>。因此，<span class="math inline">\(Y\)</span> 偏向于拥有大量朋友的那个人。</li>
<li>因此，<span class="math inline">\(Y\)</span> 拥有的平均朋友数量大于 <span class="math inline">\(X\)</span> 拥有的平均朋友数量也就不足为奇了。</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注记
</div>
</div>
<div class="callout-body-container callout-body">
<p>“友谊悖论”（friendship paradox）这一现象由社会学家斯科特·费尔德（Scott L. Feld）于1991年发现，其原因在于，那些在社交网络中连接较为广泛的人（即拥有较多朋友的人）更容易被其他人选为朋友，从而使得在统计上呈现出这样看似矛盾的结果。</p>
</div>
</div>
<p><span class="math inline">\(\blacksquare\)</span></p>
</div>
<p>对于任意的常数 <span class="math inline">\(a\)</span>、<span class="math inline">\(b\)</span>，有：</p>
<p><span id="eq-4_6_003_462"><span class="math display">\[
\textup{Var}(aX + b) = a^2 \textup{Var}(X)
\tag{4.49}\]</span></span></p>
<div class="proof">
<p><span class="proof-title"><em>证</em>. </span>令 <span class="math inline">\(\mu = E[X]\)</span>，根据 <a href="#cor-4_5_2" class="quarto-xref">推论&nbsp;<span>4.1</span></a> 有 <span class="math inline">\(E[aX + b] = a \mu + b\)</span>，根据方差的定义 <a href="#def-4_6_001" class="quarto-xref">定义&nbsp;<span>4.1</span></a> 有：</p>
<p><span class="math display">\[
\begin{align}
\textup{Var}(aX + b) &amp;= E[(aX + b - E[aX + b])^2] \\
&amp;= E[(aX + b - a \mu - b)^2] \\
&amp;= E[(aX - a \mu)^2] \\
&amp;= E[a^2(X - \mu)^2] \\
&amp;= a^2E[(X - \mu)^2] \\
&amp;= a^2\textup{Var}(X)
\end{align}
\]</span></p>
</div>
<p><a href="#eq-4_6_003_462" class="quarto-xref">式&nbsp;<span>4.49</span></a> 中，对于特定的 <span class="math inline">\(a\)</span> 和 <span class="math inline">\(b\)</span> 可以导出其他的推论。例如，如果 <span class="math inline">\(a=0\)</span>，则有：</p>
<p><span class="math inline">\(\textup{Var}(b) = 0\)</span></p>
<p>即：常数的方差为 0（这符合直觉吗？）。类似的，令 <span class="math inline">\(a = 1\)</span>，则有：</p>
<p><span class="math inline">\(\textup{Var}(X + b) = \textup{Var}(X)\)</span></p>
<p>也就是说，<strong>随机变量</strong> 加一个常数的方差等于该 <strong>随机变量</strong> 的方差。最后，令 <span class="math inline">\(b=0\)</span>，则有：</p>
<p><span class="math inline">\(\textup{Var}(aX) = a^2\textup{Var}(X)\)</span></p>
<p><span class="math inline">\(\sqrt{\textup{Var}(X)}\)</span> 称为 <span class="math inline">\(X\)</span> 的标准差（<em>standard deviation</em>）。<strong>随机变量</strong> 的标准差和均值具有相同的单位。</p>
<div class="callout callout-style-default callout-tip callout-titled" title="备注">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
备注
</div>
</div>
<div class="callout-body-container callout-body">
<p>与 <strong>均值</strong> 是质量分布的 <strong>重心</strong> 的概念类似，在力学中，<strong>方差</strong> 代表 <strong>惯性矩</strong>（<em>the moment of inertia</em>）。</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="惯性矩">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
惯性矩
</div>
</div>
<div class="callout-body-container callout-body">
<p>在力学中，惯性矩（又称转动惯量）是一个用于描述物体绕轴转动时惯性大小的物理量。</p>
<p>具体来说，它衡量了物体对于绕某一特定轴转动的抵抗能力。惯性矩越大，物体绕该轴转动就越困难，也就越不容易改变其转动状态；反之，惯性矩越小，物体就相对更容易改变其转动状态。</p>
<p>其数学定义通常是对于质量分布为 <span class="math inline">\(m_i\)</span>、距离转动轴为 <span class="math inline">\(r_i\)</span> 的多个质点组成的物体，惯性矩等于各质点质量与该质点到转动轴距离平方的乘积之和，即 <span class="math inline">\(I=\sum m_ir_i^2\)</span>。</p>
<p>例如，对于一个均匀圆盘，其绕中心轴的惯性矩与圆盘的质量和半径的平方有关；对于一个细长的直杆，绕垂直于杆且通过一端的轴转动时，其惯性矩也有特定的表达式。惯性矩在研究物体的转动运动、机械设计等方面都有着重要的应用。</p>
<p>方差和惯性矩有一定的相似性，但不能简单地说方差就是惯性矩。方差主要是用来描述一组数据离散程度的统计量。它反映了数据相对于均值的偏离程度。而惯性矩是在力学中用于衡量物体绕轴转动时惯性大小的物理量。</p>
<p>从某种意义上来说，它们有一些相似之处。比如两者都涉及到对“差异”或“偏离”的一种度量。在惯性矩中，是质量分布相对于转动轴的偏离程度；在方差中，是数据点相对于均值的偏离程度。</p>
</div>
</div>
</section>
<section id="协方差以及随机变量的和的方差" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="协方差以及随机变量的和的方差"><span class="header-section-number">4.7</span> 协方差以及随机变量的和的方差</h2>
<p>在 <a href="#sec-4_5" class="quarto-xref"><span>小节 4.5</span></a> 中，我们证明了任意数量的 <strong>随机变量</strong> 之和的 <strong>期望</strong> 等于它们各自 <strong>期望</strong> 的和（<a href="#eq-4_5_002_452" class="quarto-xref">式&nbsp;<span>4.45</span></a>）。但是，对于 <strong>方差</strong> 而言，却并非如此。例如：</p>
<p><span class="math display">\[
\begin{align}
Var(X+X) &amp;= Var(2X) \\
&amp;= 2^2 Var(X) \\
&amp;= 4 Var(X) \\
&amp; \ne Var(X) + Var(X)
\end{align}
\]</span></p>
<p>然而，当这些 <strong>随机变量</strong> 是独立的条件时，<strong>随机变量</strong> 的和的 <strong>方差</strong> 等于这些 <strong>随机变量</strong> 各自的方差的和。但是，在证明这一点之前，我们先定义两个 <strong>随机变量</strong> 的 <strong>协方差</strong>（<em>covariance</em>） 的概念。</p>
<div id="def-4_7_001" class="theorem definition">
<p><span class="theorem-title"><strong>定义 4.2</strong></span> 两个 <strong>随机变量</strong> <span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 的 <strong>协方差</strong> <span class="math inline">\(\textup{Cov}(X,Y)\)</span> 的定义如下：</p>
<p><span class="math inline">\(\textup{Cov}(X,Y) = E[(X - \mu_x)(Y - \mu_y)]\)</span>，其中 <span class="math inline">\(\mu_x\)</span> 和 <span class="math inline">\(\mu_y\)</span> 分别为 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的均值。</p>
</div>
<p>对 <a href="#def-4_7_001" class="quarto-xref">定义&nbsp;<span>4.2</span></a> 中的等式右边进行展开，则有：</p>
<p><span id="eq-4_7_001"><span class="math display">\[
\begin{align}
\textup{Cov}(X,Y) &amp;= E[XY - \mu_x Y -\mu_y X + \mu_x \mu_y] \\
&amp;= E[X,Y] - \mu_xE[Y] - \mu_yE[X] + \mu_x \mu_y \\
&amp;= E[XY] - \mu_x \mu_y - \mu_y \mu_x + \mu_x \mu_y \\
&amp;= E[XY] - E[X]E[Y]
\end{align}
\tag{4.50}\]</span></span></p>
<p>根据 <a href="#def-4_7_001" class="quarto-xref">定义&nbsp;<span>4.2</span></a>，我们可以知道 <strong>协方差</strong> 满足如下的性质：</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
提示
</div>
</div>
<div class="callout-body-container callout-body">
<p><span id="eq-4_7_002"><span class="math display">\[
\textup{Cov}(X,Y) = \textup{Cov}(Y,X)
\tag{4.51}\]</span></span></p>
<p><span id="eq-4_7_003"><span class="math display">\[
\textup{Cov}(X,X) = \textup{Var}(X)
\tag{4.52}\]</span></span></p>
<p><span id="eq-4_7_004"><span class="math display">\[
\textup{Cov}(aX, Y) = a \textup{Cov}(X, Y)
\tag{4.53}\]</span></span></p>
</div>
</div>
<p>与 <strong>期望</strong> 一样，<strong>协方差</strong> 也具有加和性（<em>additive property</em>）。</p>
<div id="lem-4_7_1" class="theorem lemma">
<p><span class="theorem-title"><strong>引理 4.1</strong></span> <span class="math inline">\(\textup{Cov}(X_1 + X_2, Y) = \textup{Cov}(X_1, Y) + \textup{Cov}(X_2,Y)\)</span></p>
</div>
<div class="proof">
<p><span class="proof-title"><em>证</em>. </span><span class="math display">\[
\begin{align}
\textup{Cov}(X_1 + X_2,Y) &amp;= E[(X_1+X_2)Y] - E[X_1+X_2]E[Y] \\
&amp;= E[X_1Y] + E[X_2Y]-(E[X_1] + E[X_2])E[Y] \\
&amp;= E[X_1Y] - E[X_1]E[Y] + E[X_2Y] - E[X_2]E[Y] \\
&amp;= \textup{Cov}(X_1,Y) + \textup{Cov}(X_2,Y) \quad \blacksquare
\end{align}
\]</span></p>
</div>
<p><a href="#lem-4_7_1" class="quarto-xref">引理&nbsp;<span>4.1</span></a> 的一般形式如下：</p>
<p><span id="eq-4_7_005_475"><span class="math display">\[
\textup{Cov}\bigg( \sum_{i=1}^{n}{X_i},Y \bigg) = \sum_{i=1}^{n}{\textup{Cov}(X_i,Y)}
\tag{4.54}\]</span></span></p>
<div id="prp-4_7_2" class="theorem proposition">
<p><span class="theorem-title"><strong>命题 4.2</strong></span> <span class="math display">\[
\textup{Cov}\bigg( \sum_{i=1}^{n}{X_i},\sum_{j=1}^{m}{Y_j} \bigg) = \sum_{i=1}^{n} \sum_{j=1}^{m} {\textup{Cov}(X_i,Y_j)}
\]</span></p>
</div>
<div class="proof">
<p><span class="proof-title"><em>证</em>. </span><span class="math display">\[
\begin{align}
\textup{Cov}\bigg( \sum_{i=1}^{n}{X_i},\sum_{j=1}^{m}{Y_j} \bigg) &amp;= \sum_{i=1}^{n}{\textup{Cov}\bigg(X_i, \sum_{j=1}^{m}{Y_j}\bigg)} \\
&amp;= \sum_{i=1}^{n}{\textup{Cov}\bigg(\sum_{j=1}^{m}{Y_j}, X_i\bigg)} \\
&amp;= \sum_{i=1}^{n} \sum_{j=1}^{m} {\textup{Cov}(Y_j,X_i)} \\
&amp;= \sum_{i=1}^{n} \sum_{j=1}^{m} {\textup{Cov}(X_i,Y_j)} \quad \blacksquare
\end{align}
\]</span></p>
</div>
<p>使用 <a href="#eq-4_7_003" class="quarto-xref">式&nbsp;<span>4.52</span></a> 可以得到 <strong>随机变量</strong> 之和的方差的公式。</p>
<div id="cor-4_7_3" class="theorem corollary">
<p><span class="theorem-title"><strong>推论 4.2</strong></span> <span class="math display">\[
\textup{Var}\bigg( \sum_{i=1}^{n}{X_i} \bigg) = \sum_{i=1}^{n}{\textup{Var}(X_i)} + \sum_{i=1}^{n} \sum_{\begin{align} &amp;j=1 \\ &amp;j \ne i \end{align}}^{n} {\textup{Cov}(X_i, X_j)}
\]</span></p>
</div>
<div class="proof">
<p><span class="proof-title"><em>证</em>. </span>因为 <span class="math inline">\(\textup{Cov}(X, X) = \textup{Var}(X)\)</span>（<a href="#eq-4_7_003" class="quarto-xref">式&nbsp;<span>4.52</span></a>），根据 <a href="#prp-4_7_2" class="quarto-xref">命题&nbsp;<span>4.2</span></a> 有：</p>
<p><span class="math display">\[
\begin{align}
\textup{Var}\bigg( \sum_{i=1}^{n}{X_i} \bigg) &amp;= \textup{Cov}\bigg( \sum_{i=1}^{n}{X_i}, \sum_{j=1}^{n}{X_j} \bigg) \\
&amp;= \sum_{i=1}^{n} \sum_{j=1}^{n} {\textup{Cov}(X_i, X_j)} \\
&amp;= \sum_{i=1}^{n} \bigg( \sum_{j \ne i}{\textup{Cov}(X_i, X_j)} + \textup{Cov}(X_i, X_i)\bigg) \\
&amp;= \sum_{i=1}^{n} \sum_{j \ne i} {\textup{Cov}(X_i, X_j)} + \sum_{i=1}^{n}{\textup{Cov}(X_i, X_i)} \\
&amp;= \sum_{i=1}^{n} \sum_{j \ne i} {\textup{Cov}(X_i, X_j)} + \sum_{i=1}^{n}{\textup{Var}(X_i)} \quad \blacksquare
\end{align}
\]</span></p>
</div>
<p>当 <span class="math inline">\(n = 2\)</span> 时，<a href="#cor-4_7_3" class="quarto-xref">推论&nbsp;<span>4.2</span></a> 变为：</p>
<p><span class="math inline">\(\textup{Var}(X+Y) = \textup{Var}(X) + \textup{Var}(Y) + \textup{Cov}(X,Y) + \textup{Cov}(Y,X)\)</span></p>
<p>根据 <a href="#eq-4_7_002" class="quarto-xref">式&nbsp;<span>4.51</span></a> 有：</p>
<p><span id="eq-4_7_006_476"><span class="math display">\[
\textup{Var}(X+Y) = \textup{Var}(X) + \textup{Var}(Y) + 2\textup{Cov}(X,Y)
\tag{4.55}\]</span></span></p>
<div id="thm-4_7_4" class="theorem">
<p><span class="theorem-title"><strong>定理 4.1</strong></span> 如果 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是独立 <strong>随机变量</strong>，则 <span class="math inline">\(\textup{Cov}(X,Y) = 0\)</span>。</p>
<p>更一般的，如果 <span class="math inline">\(X_1,...,X_n\)</span> 是相互独立的 <strong>随机变量</strong>，则 <span class="math inline">\(\textup{Var}\bigg( \sum_{i=1}^{n}{X_i} \bigg)=\sum_{i=1}^{n}{\textup{Var}(X_i)}\)</span>。</p>
<div class="proof">
<p><span class="proof-title"><em>证</em>. </span>要证明 <span class="math inline">\(\textup{Cov}(X,Y) = 0\)</span>，根据 <a href="#eq-4_7_001" class="quarto-xref">式&nbsp;<span>4.50</span></a> 可知，我们需要证明：</p>
<p><span class="math inline">\(E[XY] = E[X]E[Y]\)</span></p>
<p>如果 <span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 为独立离散随机变量，则有：</p>
<p><span class="math display">\[
\begin{align}
E[XY] &amp;= \sum_{j}^{} \sum_{i}^{} {x_i y_i P\{X=x_i, Y=y_j\}} \\
&amp;= \sum_{j}^{} \sum_{i}^{} {x_i y_i P\{X=x_i\}P\{Y=y_j\}} \quad \because X,Y 相互独立 \\
&amp;= \sum_{y}^{}{y_jP\{Y=y_j\}} \cdot \sum_{j}^{}{x_iP\{X=x_i\}} \\
&amp;= E[Y]E[X]
\end{align}
\]</span></p>
<p>故而有 <span class="math inline">\(\textup{Cov}(X,Y)=E[XY] - E[X]E[Y] = 0\)</span>。对于连续随机变量而言，该等式依然成立。所以 <a href="#thm-4_7_4" class="quarto-xref">定理&nbsp;<span>4.1</span></a> 得证。</p>
</div>
</div>
<div id="exr-4_7_a" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.16</strong></span> 抛 10 次骰子，计算这 10 次获得的点数之和的 <strong>方差</strong>。</p>
</div>
<div id="sol-4_7_a" class="proof solution">
<p><span class="proof-title"><em>解 4.16</em>. </span>令 <span class="math inline">\(X_i\)</span> 表示第 <span class="math inline">\(i\)</span> 次的点数，则根据 <a href="#exr-4_6_a" class="quarto-xref">习题&nbsp;<span>4.15</span></a> 有，<span class="math inline">\(\textup{Var}(X_i) = \frac{35}{12}\)</span>，所以： <span class="math display">\[
\begin{align}
\textup{Var}\bigg( \sum_{i=1}^{10}{X_i} \bigg) &amp;= \sum_{i=1}^{10}{\textup{Var}(X_i)} \\
&amp;= 10 \frac{35}{12} \\
&amp;= \frac{175}{6} \quad \blacksquare
\end{align}
\]</span></p>
</div>
<div id="exr-4_7_b" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.17</strong></span> 抛 10 次硬币，计算正面向上的次数的 <strong>方差</strong>。</p>
</div>
<div id="sol-4_7_b" class="proof solution">
<p><span class="proof-title"><em>解 4.17</em>. </span>令 <span class="math inline">\(I_j = \begin{cases} 1, \quad &amp; 第 j 次结果为正面向上\\ 0, \quad &amp; 第 j 次结果为反面向上 \end{cases}\)</span>，</p>
<p>则 正面向上的总次数为 <span class="math inline">\(\sum_{j=1}^{10}{I_j}\)</span>。</p>
<p>根据 <a href="#thm-4_7_4" class="quarto-xref">定理&nbsp;<span>4.1</span></a> 有：<span class="math inline">\(\textup{Var}\bigg( \sum_{j=1}^{10}{I_j} \bigg) = \sum_{j=1}^{10}{\textup{Var}(I_j)}\)</span>。</p>
<p>现在，由于 <span class="math inline">\(I_j\)</span> 是概率为 的 <strong>事件</strong> 的指示 <strong>随机变量</strong>，从 <a href="#exm-4_6_b" class="quarto-xref">例&nbsp;<span>4.12</span></a> 可知：</p>
<p><span class="math inline">\(\textup{Var}(I_j) = \frac{1}{2}(1-\frac{1}{2}) = \frac{1}{4}\)</span>，因此：</p>
<p><span class="math inline">\(\textup{Var}\bigg( \sum_{j=1}^{10}{I_j} \bigg) = \frac{10}{4}\)</span>。<span class="math inline">\(\blacksquare\)</span></p>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
重要
</div>
</div>
<div class="callout-body-container callout-body">
<p>两个 <strong>随机变量</strong> 的 <strong>协方差</strong> 可以作为一个重要指标以衡量它们之间的关系。例如，考虑 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是 <strong>事件</strong> <span class="math inline">\(A\)</span> 和 <strong>事件</strong> <span class="math inline">\(B\)</span> 是否发生的指标随机变量，即：</p>
<p><span class="math inline">\(X = \begin{cases} 1, \quad &amp; 如果 A 发生\\ &amp; \\ 0, \quad &amp; 如果 A 不发生 \end{cases},  \quad Y = \begin{cases} 1, \quad &amp; 如果 B 发生\\ &amp; \\ 0, \quad &amp; 如果 B 不发生 \end{cases}\)</span></p>
<p>并且：</p>
<p><span class="math inline">\(XY = \begin{cases} 1, \quad &amp; 如果 X=1, Y=1\\ &amp; \\ 0, \quad &amp; 其他 \end{cases}\)</span></p>
<p>因此：</p>
<p><span class="math inline">\(\begin{align} \textup{Cov}(X,Y) &amp;= E[XY] - E[X]E[Y] \\ &amp;= P\{X=1,Y=1\} - P\{X=1\}P\{Y=1\} \end{align}\)</span></p>
<p>故而：</p>
<p><span class="math inline">\(\begin{align} \textup{Cov}(X,Y) \gt 0 &amp; \Leftrightarrow P\{X=1,Y=1\} \gt P\{X=1\}P\{Y=1\} \\ &amp; \Leftrightarrow \frac{P \{X=1,Y=1\}}{P\{X=1\}} \gt P\{Y=1\} \\ &amp; \Leftrightarrow P\{Y=1|X=1\} \gt P\{Y=1\} \end{align}\)</span></p>
<p>如果 <span class="math inline">\(X=1\)</span> 时，<span class="math inline">\(Y=1\)</span> 的可能性更小，而 <span class="math inline">\(Y=0\)</span> 的可能性更大，则 <span class="math inline">\(\textup{Cov}(X,Y) \lt 0\)</span> 。（根据 <strong>协方差</strong> 的交换律，当 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 互换时，如上的内容仍然正确。）</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="相关系数">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
相关系数
</div>
</div>
<div class="callout-body-container callout-body">
<p>一般来说，<span class="math inline">\(\textup{Cov}(X,Y) \gt 0\)</span> 表明 <span class="math inline">\(Y\)</span> 会随着 <span class="math inline">\(X\)</span> 的增加而增加，而 <span class="math inline">\(\textup{Cov}(X,Y) \lt 0\)</span> 表明 <span class="math inline">\(Y\)</span> 会随着 <span class="math inline">\(X\)</span> 的增加而减少。可以用 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 之间的相关性来表示 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 之间关系的强度。<span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 之间的相关性是其 <strong>协方差</strong> 除以其各自 <strong>标准差</strong> 的乘积得到的 <strong>无量纲量</strong>（<em>dimensionless</em>）。即：</p>
<p><span id="eq-4_7_007"><span class="math display">\[
\textup{Corr}(X,Y) = \frac{\textup{Cov}(X,Y)}{\sqrt{\textup{Var}(X) \textup{Var}(Y)}}
\tag{4.56}\]</span></span></p>
<p>可以证明，<span class="math inline">\(\textup{Corr}(X,Y)\)</span> 的值总是介于 −1 和 +1 之间。</p>
</div>
</div>
</section>
<section id="矩生成函数" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="矩生成函数"><span class="header-section-number">4.8</span> 矩生成函数</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注记
</div>
</div>
<div class="callout-body-container callout-body">
<p>矩生成函数（<em>Moment Generating Function</em>）是概率论中的一个重要概念，主要用于描述 <strong>随机变量</strong> 的概率分布。矩生成函数是 <strong>随机变量</strong> 的特征函数，我们可以利用矩生成函数得到 <strong>随机变量</strong> 的所有矩（平均值、方差、偏度等统计量）。</p>
</div>
</div>
<p><strong>随机变量</strong> <span class="math inline">\(X\)</span> 的矩生成函数 <span class="math inline">\(\phi(t)\)</span> 的定义如下：</p>
<p><span id="eq-4_8_001"><span class="math display">\[
\phi(t) = E[e^{tX}] = \begin{cases}
\sum_{x}{e^{tx}p(x)}, \quad &amp; 如果 X 为离散随机变量 \\
&amp; \\
&amp; \\
\int_{-\infty}^{\infty}{e^{tx}f(x) \mathrm{d} x}, \quad &amp; 如果 X 为连续随机变量 \\
\end{cases}
\tag{4.57}\]</span></span></p>
<p>因为 <span class="math inline">\(X\)</span> 的所有的矩都可以通过对 <span class="math inline">\(\phi(t)\)</span> 求 <span class="math inline">\(k\)</span> 阶导数来获得，因此我们称 <span class="math inline">\(\phi(t)\)</span> 为矩生成函数。例如</p>
<ul>
<li><span class="math inline">\(\phi'(0)=E[X]\)</span>：</li>
</ul>
<p><span id="eq-4_8_002"><span class="math display">\[
\begin{align}
\phi'(t) &amp;= \frac{\mathrm{d} {E[e^{tX}]}}{\mathrm{d} t} \\
&amp;= E\bigg[ \frac{\mathrm{d} {e^{tX}}}{\mathrm{d} t} \bigg] \\
&amp;= E[Xe^{tX}] \\
\therefore \phi'(0) &amp;= E[Xe^{0 \cdot X}] = E[X]
\end{align}
\tag{4.58}\]</span></span></p>
<ul>
<li><span class="math inline">\(\phi''(0)=E[X^2]\)</span></li>
</ul>
<p><span id="eq-4_8_003"><span class="math display">\[
\begin{align}
\phi''(t) &amp;= \frac{\mathrm{d} {\phi'(t)}}{\mathrm{d} t} \\
&amp;= \frac{\mathrm{d} {E[Xe^{tX}]}}{\mathrm{d} t} \\
&amp;= E\bigg[ \frac{\mathrm{d} {(Xe^{tX})}}{\mathrm{d} t} \bigg] \\
&amp;= E[X^2e^{tX}] \\
\therefore \phi''(0) &amp;= E[X^2]
\end{align}
\tag{4.59}\]</span></span></p>
<ul>
<li>更一般的，在 <span class="math inline">\(t=0\)</span> 处的 <span class="math inline">\(\phi(t)\)</span> 的 <span class="math inline">\(n\)</span> 阶导数等于 <span class="math inline">\(E[X^n]\)</span>，即：</li>
</ul>
<p><span id="eq-4_8_004"><span class="math display">\[
\phi^{n}(0) = E[X^n], \quad n \ge 1
\tag{4.60}\]</span></span></p>
<p>矩生成函数的一个重要特性是：独立 <strong>随机变量</strong> 之和的矩生成函数是每个 <strong>随机变量</strong> 的矩生成函数的乘积。假设 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是独立 <strong>随机变量</strong>，其矩生成函数分别为 <span class="math inline">\(\phi_X(t)\)</span>、<span class="math inline">\(\phi_Y(t)\)</span>，则 <span class="math inline">\(X+Y\)</span> 的矩生成函数为：</p>
<p><span class="math inline">\(\begin{align} \phi_{X+Y}(t) &amp;= E[e^{t(X+Y)}] \\ &amp;= E[e^{tX}e^{tY}] \\ &amp;= E[e^{tX}]E[e^{tY}] \\ &amp;= \phi_X(t)\phi_Y(t) \end{align}\)</span></p>
<p>如果 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是相互独立的，则 <span class="math inline">\(e^{tX}\)</span> 和 <span class="math inline">\(e^{tY}\)</span> 也是独立的，所以根据 <a href="#thm-4_7_4" class="quarto-xref">定理&nbsp;<span>4.1</span></a> 有 <span class="math inline">\(E[e^{tX}e^{tY}] = E[e^{tX}]E[e^{tY}]\)</span>，所以上式得证。</p>
<p>矩生成函数的另一个重要的特性是：矩生成函数唯一地确定了 <strong>随机变量</strong> 的概率分布。也就是说，矩生成函数和 <strong>随机变量</strong> 的分布函数之间存在一一对应的关系。</p>
</section>
<section id="切比雪夫不等式和弱大数定律" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="切比雪夫不等式和弱大数定律"><span class="header-section-number">4.9</span> 切比雪夫不等式和弱大数定律</h2>
<p>我们从证明马尔可夫不等式（<em>Markov’s inequality</em>）开始本节的内容。</p>
<div id="prp-4_9_1" class="theorem proposition">
<p><span class="theorem-title"><strong>命题 4.3</strong></span> <strong>马尔可夫不等式</strong>：如果 <span class="math inline">\(X\)</span> 是一个取值为非负数的 <strong>随机变量</strong>，则对于任意的 <span class="math inline">\(a \gt 0\)</span> 有：</p>
<p><span class="math inline">\(P\{X \ge a\} \le \frac{E[X]}{a}\)</span></p>
<div class="proof">
<p><span class="proof-title"><em>证</em>. </span>我们给出了概率密度函数为 <span class="math inline">\(f\)</span> 的连续 <strong>随机变量</strong> <span class="math inline">\(X\)</span> 的证明。</p>
<p><span class="math display">\[
\begin{align}
E[X] &amp;= \int_{0}^{\infty}{xf(x) \mathrm{d} x} \\
&amp;= \int_{0}^{a}{xf(x) \mathrm{d} x} + \int_{a}^{\infty}{xf(x) \mathrm{d} x} \\
&amp; \ge \int_{a}^{\infty}{xf(x) \mathrm{d} x} \\
&amp; \ge \int_{a}^{\infty}{af(x) \mathrm{d} x} \\
&amp;= a\int_{a}^{\infty}{f(x) \mathrm{d} x} \\
&amp;= aP\{X \ge a\} \quad \blacksquare
\end{align}
\]</span></p>
</div>
</div>
<p>作为推论，我们得到 <a href="#prp-4_9_2" class="quarto-xref">命题&nbsp;<span>4.4</span></a>。</p>
<div id="prp-4_9_2" class="theorem proposition">
<p><span class="theorem-title"><strong>命题 4.4</strong></span> <strong>契比雪夫不等式</strong>：如果<span class="math inline">\(X\)</span> 是一个均值为 <span class="math inline">\(\mu\)</span> 方差为 <span class="math inline">\(\sigma^2\)</span> 的随机变量，则对于任意的 <span class="math inline">\(k \gt 0\)</span> 有：</p>
<p><span class="math inline">\(P\{|X - \mu| \ge k\} \le \frac{\sigma^2}{k^2}\)</span></p>
<div class="proof">
<p><span class="proof-title"><em>证</em>. </span>因为 <span class="math inline">\((X-\mu)^2\)</span> 是一个非负的随机变量，因此，令 <span class="math inline">\(a=k^2\)</span>，然后根据 <a href="#prp-4_9_1" class="quarto-xref">命题&nbsp;<span>4.3</span></a> 所示的马尔科夫不等式有：</p>
<p><span id="eq-4_9_001_491"><span class="math display">\[
P\{(X-\mu)^2 \ge k^2\} \le \frac{E[(X-\mu)^2]}{k^2}
\tag{4.61}\]</span></span></p>
<p><span class="math inline">\((X-\mu)^2 \ge k^2\)</span> 当且仅当 <span class="math inline">\(|X-\mu| \ge k\)</span>，所以 <a href="#eq-4_9_001_491" class="quarto-xref">式&nbsp;<span>4.61</span></a> 等价于：</p>
<p><span id="eq-4_9_002"><span class="math display">\[
P\{|X-\mu| \ge k\} \le \frac{E[(X-\mu)^2]}{k^2} = \frac{\sigma^2}{k^2}
\tag{4.62}\]</span></span></p>
<p>证毕。<span class="math inline">\(\blacksquare\)</span></p>
</div>
</div>
<p>马尔可夫不等式和切比雪夫不等式的重要性在于：在只知道概率分布的均值或均值和方差的情况下，我们可以利用马尔可夫不等式和切比雪夫不等式推导出概率的界限。当然，如果实际的概率分布是已知的，那么就可以精确的计算出待计算的概率，我们也就不需要计算概率的界限。</p>
<div id="exr-4_9_a" class="theorem exercise">
<p><span class="theorem-title"><strong>习题 4.18</strong></span> 已知工厂一周的产量是一个 <strong>随机变量</strong>，其平均值为 50。</p>
<ol type="1">
<li>本周的产量超过 75 的概率可以说是多少？</li>
<li>如果已知一周的产量的方差等于 25，那么本周产量在 40 和 60 之间的概率是多少？</li>
</ol>
</div>
<div id="sol-4_9_a" class="proof solution">
<p><span class="proof-title"><em>解 4.18</em>. </span>令 <span class="math inline">\(X\)</span> 为工厂一周的产量。</p>
<ol type="1">
<li><p>利用马尔科夫不等式可知：</p>
<p><span class="math inline">\(P\{X \gt 75\} \le \frac{E[X]}{75} = \frac{50}{75} = \frac{2}{3}\)</span></p></li>
<li><p>利用切比雪夫不等式可知：</p>
<p><span class="math inline">\(P\{|X-50| \ge 10\} \le \frac{\sigma^2}{10^2} = \frac{1}{4}\)</span>，所以：</p>
<p>$<span class="math inline">\(P\{|X-50| \lt 10\} \ge 1 - \frac{1}{4} = \frac{3}{4}\)</span>。</p>
<p>因此，本周产量在 40 和 60 之间的概率最小是 0.75。<span class="math inline">\(\blacksquare\)</span></p></li>
</ol>
</div>
<p>在 <a href="#eq-4_9_002" class="quarto-xref">式&nbsp;<span>4.62</span></a> 中，令 <span class="math inline">\(k = k\sigma\)</span>，我们可以将切比雪夫不等式改写为：</p>
<p><span id="eq-4_9_003"><span class="math display">\[
P\{|X - \mu| \ge k\sigma\} \le \frac{1}{k^2}
\tag{4.63}\]</span></span></p>
<p>因此，<strong>随机变量</strong> 与其 <strong>均值</strong> 相差超过 <span class="math inline">\(k\)</span> 个 <strong>标准差</strong> 的概率最大为 <span class="math inline">\(\frac{1}{k^2}\)</span>。</p>
<p>在本节的最后，我们将用切比雪夫不等式来证明弱大数定律（<em>weak law of large numbers</em>）。弱大数定律指出：在一个独立同分布的 <strong>随机变量</strong> 序列中，当 <span class="math inline">\(n\)</span> 趋向于无穷大时，前 <span class="math inline">\(n\)</span> 个 <strong>随机变量</strong> 的平均数（<em>average</em>）和该随机变量的均值（<em>mean</em>）的差值超过 <span class="math inline">\(\varepsilon\)</span> 的概率为 0。</p>
<div id="thm-4_9_3" class="theorem">
<p><span class="theorem-title"><strong>定理 4.2</strong></span> <strong>弱大数定律</strong>：令 <span class="math inline">\(X_1, X_2,...\)</span> 是一个独立同分布的 <strong>随机变量</strong> 序列，每个 <strong>随机变量</strong> 的均值都为 <span class="math inline">\(\mu\)</span>（<span class="math inline">\(E[X_i] = \mu\)</span>）。则，对于任意的 <span class="math inline">\(\varepsilon \gt 0\)</span>，有：</p>
<p><span class="math inline">\(P\bigg\{ \big| \frac{X_1 + X_2 + ... + X_n}{n} - \mu \big| \gt \varepsilon \bigg\} \rightarrow 0, \quad n \rightarrow \infty\)</span></p>
<div class="proof">
<p><span class="proof-title"><em>证</em>. </span>我们只能在 <strong>随机变量</strong> 的方差 <span class="math inline">\(\sigma^2\)</span> 为有限数的附加假设下证明 <a href="#thm-4_9_3" class="quarto-xref">定理&nbsp;<span>4.2</span></a>。因为：</p>
<p><span class="math inline">\(E\bigg[\frac{X_1 + X_2 + ... + X_n}{n}\bigg] = \mu\)</span>，<span class="math inline">\(\textup{Var}\bigg(\frac{X_1 + X_2 + ... + X_n}{n}\bigg) = \frac{\sigma^2}{n}\)</span></p>
<p>所以，根据 <a href="#prp-4_9_2" class="quarto-xref">命题&nbsp;<span>4.4</span></a> 的切比雪夫不等式有：</p>
<p><span class="math inline">\(P\bigg\{ \big| \frac{X_1 + X_2 + ... + X_n}{n} - \mu \big| \gt \varepsilon \bigg\} \le \frac{\sigma^2}{n \varepsilon^2}\)</span></p>
<p>证毕。<span class="math inline">\(\blacksquare\)</span></p>
</div>
</div>
<p>假设我们独立执行某个试验多次，令 <span class="math inline">\(E\)</span> 为某个固定 <strong>事件</strong>，用 <span class="math inline">\(P(E)\)</span> 表示 <span class="math inline">\(E\)</span> 在给定试验中发生的概率。令</p>
<p><span class="math inline">\(X_i = \begin{cases} 1, \quad &amp; 第 i 次试验中 E 发生\\ 0, \quad &amp; 第 i 次试验中 E 不发生 \end{cases}\)</span></p>
<p>则 <span class="math inline">\(X_1+X_2+...+X_n\)</span> 表示在 <span class="math inline">\(n\)</span> 次试验中，<span class="math inline">\(E\)</span> 发生的次数。因为 <span class="math inline">\(E[X_i]=P(E)\)</span>，所以根据弱大数定律，对于任意的 <span class="math inline">\(\varepsilon \gt 0\)</span>，无论 <span class="math inline">\(\varepsilon\)</span> 有多小，随着 <span class="math inline">\(n\)</span> 的增加，前 <span class="math inline">\(n\)</span> 次试验中 <span class="math inline">\(E\)</span> 发生的比例与 <span class="math inline">\(P(E)\)</span> 的差值超过 <span class="math inline">\(\varepsilon\)</span> 的概率会变为 0。</p>
</section>
<section id="习题" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="习题">习题</h2>
<ol type="1">
<li><p>根据考试成绩对 5 名男性和 5 名女性进行排名。假设所有人的分数都不相同，并且所有的 <span class="math inline">\(10!\)</span> 种可能的排名的可能性都相等。令 <span class="math inline">\(X\)</span> 表示女性获得的最高名次（例如，如果排名第 1 的是男性，而排名第 2 的是女性，则 <span class="math inline">\(X=2\)</span>）。找出 <span class="math inline">\(P\{X=i\}, i=1,2,3,...,8,9,10\)</span>。</p></li>
<li><p>设 <span class="math inline">\(X\)</span> 表示抛 <span class="math inline">\(n\)</span> 次硬币得到的正面向上的次数和反面向上的次数之差，则 <span class="math inline">\(X\)</span> 的可能值是多少？</p></li>
<li><p>在习题 2 中，如果假设硬币是公平的，对于 <span class="math inline">\(n=3\)</span>，则 <span class="math inline">\(X\)</span> 可能取值的对应的概率是多少？</p></li>
<li><p>随机变量 <span class="math inline">\(X\)</span> 的分布函数为： <span class="math display">\[
F(x) = \begin{cases}
0, \quad &amp; x \lt 0  \\
\frac{x}{2}, \quad &amp; 0 \le x \lt 1 \\
\frac{2}{3}, \quad &amp; 1 \le x \lt 2 \\
\frac{11}{12}, \quad &amp; 2 \le x \lt 3 \\
1, \quad &amp; 3 \le x \\
\end{cases}
\]</span></p>
<ul>
<li>画出分布函数的图</li>
<li>计算 <span class="math inline">\(P\{X \gt \frac{1}{2}\}\)</span>？</li>
<li>计算 <span class="math inline">\(P\{2 \lt X \le 4\}\)</span>？</li>
<li>计算 <span class="math inline">\(P\{X \le 3\}\)</span>？</li>
<li>计算 <span class="math inline">\(P\{X = 1\}\)</span>？</li>
</ul></li>
<li><p>假设随机变量 <span class="math inline">\(X\)</span> 的概率密度函数为： <span class="math display">\[
f(x) = \begin{cases}
cx^3, \quad &amp; 0 \le x \le 1 \\
0, \quad &amp; 其他
\end{cases}
\]</span></p>
<ul>
<li>计算 <span class="math inline">\(c\)</span> 的值？</li>
<li>计算 <span class="math inline">\(P\{0.4 \lt X \lt 0.8\}\)</span>？</li>
</ul></li>
<li><p>计算机在故障前运行的小时数是一个连续随机变量，其概率密度函数为：</p>
<p><span class="math display">\[
f(x) = \begin{cases}
\lambda e^{-\frac{x}{100}}, \quad &amp; x \ge 0 \\
0, \quad &amp; x \lt 0
\end{cases}
\]</span></p>
<ul>
<li>一台计算机在故障前工作了 50 到 150 小时的概率是多少？</li>
<li>工作不到 100 小时的概率是多少？</li>
</ul></li>
<li><p>收音机中某种电子管的寿命（以小时为单位）是一个随机变量，其概率密度函数为：</p>
<p><span class="math display">\[
f(x) = \begin{cases}
0, \quad &amp; x \le 100 \\
\frac{100}{x^2}, \quad &amp; x \gt 100
\end{cases}
\]</span></p>
<p>一台收音机中的 5 个这样的电子管中恰有 2 个必须在 150 小时内更换的概率是多少？假设在这段时间内，必须更换第 <span class="math inline">\(i\)</span> 个电子管的 <strong>事件</strong> <span class="math inline">\(E_i, i=1,2,3,4,5\)</span> 是独立的。</p></li>
<li><p>如果 <span class="math inline">\(X\)</span> 的概率密度函数为：</p>
<p><span class="math display">\[
f(x) = \begin{cases}
ce^{-2x}, \quad &amp; 0 \lt x \lt \infty \\
0, \quad &amp; x \lt 0
\end{cases}
\]</span></p>
<ul>
<li>计算 <span class="math inline">\(c\)</span>？</li>
<li>计算 <span class="math inline">\(P\{X \gt 2\}\)</span>？</li>
</ul></li>
<li><p>我们要检测 5 个晶体管，我们以随机的顺序每次检测 1 个晶体管，并检查哪一个晶体管有缺陷。假设 5 个晶体管中有 3 个有缺陷，令 <span class="math inline">\(N_1\)</span> 表示发现第 1 个缺陷晶体管时我们检测的次数，让 <span class="math inline">\(N_2\)</span> 表示发现第 2 个缺陷晶体管时额外增加的检测次数。计算 <span class="math inline">\(N_1\)</span> 和 <span class="math inline">\(N_2\)</span> 的联合概率质量函数。</p></li>
<li><p><span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的联合概率密度函数为：</p>
<p><span class="math inline">\(f(x,y)=\frac{6}{7}\big(x^2 + \frac{xy}{2}\big), \ 0 \lt x \lt 1, \ 0 \lt y \lt 2\)</span></p>
<ul>
<li>验证这确实是一个联合密度函数？</li>
<li>计算 <span class="math inline">\(X\)</span> 的边缘密度函数？</li>
<li>计算 <span class="math inline">\(P\{X \gt Y\}\)</span>？</li>
</ul></li>
<li><p>令 <span class="math inline">\(X_1, X_2, ..., X_n\)</span> 是符合 <span class="math inline">\(U(0,1)\)</span> 的均匀分布的独立随机变量。令 <span class="math inline">\(M = max(X_1, X_2, ...,X_n)\)</span>，则 <span class="math inline">\(M\)</span> 的分布函数为：</p>
<p><span class="math inline">\(F_M(x) = x^n, \ 0 \le x \le 1\)</span></p>
<p>计算 <span class="math inline">\(M\)</span> 的概率密度函数？</p></li>
<li><p><span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 的联合密度函数为：</p>
<p><span class="math inline">\(f(x,y)=\begin{cases} xe^{-(x+y)}, \quad &amp; x \gt 0, y \gt 0 \\ 0, \quad &amp; 其它 \end{cases}\)</span></p>
<ul>
<li>计算 <span class="math inline">\(X\)</span> 的边缘密度函数？</li>
<li>计算 <span class="math inline">\(Y\)</span> 的边缘密度函数？</li>
<li><span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是独立的吗？</li>
</ul></li>
<li><p><span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 的联合概率密度函数为：</p>
<p><span class="math inline">\(f(x,y)=\begin{cases} 2, \quad &amp; 0 \lt x \lt y, 0 \lt y \lt 1 \\ 0, \quad &amp; 其它 \end{cases}\)</span></p>
<ul>
<li>计算 <span class="math inline">\(X\)</span> 的边缘密度函数？</li>
<li>计算 <span class="math inline">\(Y\)</span> 的边缘密度函数？</li>
<li><span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是独立的吗？</li>
</ul></li>
<li><p>如果 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 的联合密度函数可以分解为仅依赖于 <span class="math inline">\(x\)</span> 的部分和仅依赖于 <span class="math inline">\(y\)</span> 的部分，则 <span class="math inline">\(X\)</span> 和 <span class="math inline">\(Y\)</span> 是独立的。如果：</p>
<p><span class="math inline">\(f(x,y)=k(x)h(y), \ -\infty \lt x \lt \infty, \ -\infty \lt x \lt \infty\)</span></p>
<p>证明，<span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 是相互独立的。</p></li>
<li><p>习题 14 与习题 12 和习题 13 的结果一致吗？</p></li>
<li><p>假设 <span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 是独立的连续随机变量，证明：</p>
<ul>
<li><span class="math inline">\(P\{X + Y \le a\} = \int_{-\infty}^{\infty}{F_X(a-y)f_Y(y)\mathrm{d} y}\)</span></li>
<li><span class="math inline">\(P\{X \le Y\} = \int_{-\infty}^{\infty}{F_X(y)f_Y(y)\mathrm{d} y}\)</span></li>
</ul>
<p>其中，<span class="math inline">\(f_Y\)</span> 是 <span class="math inline">\(Y\)</span> 的边缘概率密度函数，<span class="math inline">\(F_X\)</span> 是 <span class="math inline">\(X\)</span> 的边缘分布函数。</p></li>
<li><p>当电流 <span class="math inline">\(I\)</span>（单位为安培）流过电阻 <span class="math inline">\(R\)</span> 时（单位为欧姆），产生的功率（单位为瓦特）为 <span class="math inline">\(W=I^2R\)</span>。 假设 <span class="math inline">\(I\)</span> 和 <span class="math inline">\(R\)</span> 是独立随机变量且其概率密度函数为：</p>
<p><span class="math inline">\(f_I(x) = 6x(1-x), \quad 0 \le x \le 1\)</span></p>
<p><span class="math inline">\(f_R(x) = 2x, \quad 0 \le x \le 1\)</span></p>
<p>计算 <span class="math inline">\(W\)</span> 的概率密度函数？</p></li>
<li><p>在 <a href="#exm-4_3_b" class="quarto-xref">例&nbsp;<span>4.5</span></a> 中，计算所选择的家庭有 2 个女孩的条件概率质量函数？</p></li>
<li><p>计算 <span class="math inline">\(X\)</span> 在 <span class="math inline">\(Y=y\)</span> 时的条件概率密度函数：</p>
<ul>
<li><span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 的联合概率密度函数如习题 10</li>
<li><span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 的联合概率密度函数如习题 13</li>
</ul></li>
<li><p>证明 <span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 是独立随机变量当且仅当：</p>
<ul>
<li><span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 是离散随机变量且 <span class="math inline">\(P_{X|Y}(x|y)=p_X(x)\)</span></li>
<li><span class="math inline">\(X\)</span>、<span class="math inline">\(Y\)</span> 是连续随机变量且 <span class="math inline">\(f_{X|Y}(x|y)=f_X(x)\)</span></li>
</ul></li>
<li><p>计算习题 1 中随机变量的期望？</p></li>
<li><p>计算习题 3 中随机变量的期望？</p></li>
<li><p>每天晚上，不同的气象学家会预测第二天下雨的“概率”。为了判断这些人的预测水平，我们将按如下的规则给他们打分：如果气象学家预测明天下雨的概率为 <span class="math inline">\(p\)</span>，那么他们的得分为：</p>
<ul>
<li>如果明天确实下雨了，得分为：<span class="math inline">\(1 - (1 - p)^2\)</span></li>
<li>如果明天没有下雨，得分为：<span class="math inline">\(1 - p^2\)</span></li>
</ul>
<p>对于这些打分，我们将跟踪一定的时间，并得出结论：平均打分最高的气象学家就是最佳天气预测者。现在，假设某个气象学家已经了解到了打分的规则，并希望最大化自己的打分。如果该气象学家真的相信明天下雨的概率为 <span class="math inline">\(p^*\)</span>，那么为了最大化自己的打分，他预测明天下雨的概率 <span class="math inline">\(p\)</span> 应该是多少？</p></li>
<li><p>一家保险公司有一种保单，大意是：如果某个事件 <span class="math inline">\(E\)</span> 在一年内发生，则他们必须支付一笔钱 <span class="math inline">\(A\)</span>。如果保险公司估计 <span class="math inline">\(E\)</span> 在一年内发生的概率为 <span class="math inline">\(p\)</span>，保险公司应该向客户收取多少费用，以使得他们的预期利润将是 <span class="math inline">\(A\)</span> 的 10%？</p></li>
<li><p>4 辆载有来自同一所学校的 148 名学生的公共汽车来到一个足球场。公共汽车的载客量分别为：40名、33名、25名和50名。随机选择一名学生，令 <span class="math inline">\(X\)</span> 表示随机选择的这个学生所在的公共汽车上的学生数量。对于 4 辆车的 4 名司机，随机选择 1 名司机，令 <span class="math inline">\(Y\)</span> 表示该司机驾驶的公共汽车上的学生数量。</p>
<ul>
<li>你认为 <span class="math inline">\(E[X]\)</span> 和 <span class="math inline">\(E[Y]\)</span> 哪一个更大？为什么？</li>
<li>计算 <span class="math inline">\(E[X]\)</span> 和 <span class="math inline">\(E[Y]\)</span>。</li>
</ul></li>
<li><p>在一场多局游戏比赛中，两个参赛队伍中，如果有一个首先赢得 <span class="math inline">\(i\)</span> 局游戏，则游戏结束。假设每一局比赛都是独立的，且 <span class="math inline">\(A\)</span> 队获胜概率是 <span class="math inline">\(p\)</span>。当 <span class="math inline">\(i=2\)</span> 时：</p>
<ul>
<li>计算游戏局数的期望？</li>
<li>证明当 <span class="math inline">\(p=\frac{1}{2}\)</span> 时，该期望值最大？</li>
</ul></li>
<li><p><span class="math inline">\(X\)</span> 的概率密度函数为：</p>
<p><span class="math inline">\(f(x)=\begin{cases} a + bx^2, \quad &amp; 0 \le x \le 1\\ 0, \quad &amp; 其它 \end{cases}\)</span></p>
<p>如果 <span class="math inline">\(E[X] = \frac{3}{5}\)</span>，计算 <span class="math inline">\(a\)</span> 和 <span class="math inline">\(b\)</span>。</p></li>
<li><p>某电子管的寿命（单位为小时）是一个随机变量，其概率密度函数为：</p>
<p><span class="math inline">\(f(x) = a^2xe^{-ax}, \quad x \ge 0\)</span></p>
<p>计算该电子管的寿命的期望？</p></li>
<li><p>令 <span class="math inline">\(X_1, X_2,...,X_n\)</span> 是独立同分布的随机变量，其概率密度函数为：</p>
<p><span class="math inline">\(f(x) = \begin{cases} 1, \quad &amp; 0 \lt x \lt 1\\ 0, \quad &amp; 其它 \end{cases}\)</span></p>
<p>计算：</p>
<ul>
<li><span class="math inline">\(E[Max(X_1, X_2, ..., X_n)]\)</span></li>
<li><span class="math inline">\(E[Min(X_1, X_2, ..., X_n)]\)</span></li>
</ul></li>
<li><p>假设 <span class="math inline">\(X\)</span> 的概率密度函数为：</p>
<p><span class="math inline">\(f(x)=\begin{cases} 1, \quad &amp; 0 \lt x \lt 1\\ 0, \quad &amp; 其它 \end{cases}\)</span></p>
<p>根据如下的要求计算 <span class="math inline">\(E[X^n]\)</span>：</p>
<ul>
<li>先计算 <span class="math inline">\(X^n\)</span> 的概率密度，然后根据期望的定义计算 <span class="math inline">\(E[X^n]\)</span></li>
<li>利用 <a href="#prp-4_5_1" class="quarto-xref">命题&nbsp;<span>4.1</span></a> 计算 <span class="math inline">\(E[X^n]\)</span></li>
</ul></li>
<li><p>修理个人电脑所需的时间（以小时为单位）是一个随机变量，其密度函数为：</p>
<p><span class="math inline">\(f(x)=\begin{cases} \frac{1}{2}, \quad &amp; 0 \lt x \lt 2\\ 0, \quad &amp; 其它 \end{cases}\)</span></p>
<p>修理的费用取决于修理所需的时间，当修理所需时间为 <span class="math inline">\(x\)</span> 时，费用为 <span class="math inline">\(40 + 30 \sqrt{x}\)</span>。计算修理个人电脑的费用的期望。</p></li>
<li><p>如果 <span class="math inline">\(E[X] = 2\)</span>，<span class="math inline">\(E[X^2] = 8\)</span>，计算：</p>
<ul>
<li><span class="math inline">\(E[(2 + 4X)^2]\)</span>？</li>
<li><span class="math inline">\(E[X^2 + (X+1)^2]\)</span>？</li>
</ul></li>
<li><p>从包含 17 个白球和 23 个黑球的盒子中随机选择 10 个球。令 <span class="math inline">\(X\)</span> 表示所选白球的数量。利用如下的方式计算 <span class="math inline">\(E[X]\)</span>：</p>
<ul>
<li>定义适当的指示随机变量 <span class="math inline">\(X_i, i=1,...,10\)</span>，以满足 <span class="math inline">\(X = \sum_{i=1}^{10}{X_i}\)</span>。</li>
<li>定义适当的指示随机变量 <span class="math inline">\(Y_i, i=1,...,17\)</span>，以满足 <span class="math inline">\(X = \sum_{i=1}^{17}{Y_i}\)</span>。</li>
</ul></li>
<li><p>如果 <span class="math inline">\(X\)</span> 是具有分布函数 <span class="math inline">\(F\)</span> 的连续随机变量，则其中位数（<em>median</em>）的定义为令 <span class="math inline">\(F(m)=\frac{1}{2}\)</span> 的 <span class="math inline">\(m\)</span> 的值。如果随机变量的概率密度函数如下所示，计算其中位数：</p>
<ul>
<li><span class="math inline">\(f(x) = e^{-x}, \quad x \ge 0\)</span>。</li>
<li><span class="math inline">\(f(x) = 1, 0 \le x \le 1\)</span>。</li>
</ul></li>
<li><p>在预测随机变量的值方面，中位数和均值一样都是很重要的概念。如前所述（<a href="#eq-4_5_005" class="quarto-xref">式&nbsp;<span>4.46</span></a>），随机变量的均值是从最小化误差平方的期望的角度所得到的最佳预测器。而中位数则是通过最小化绝对误差的期望所得到的最佳预测器。也就是说，当 <span class="math inline">\(c\)</span> 是 <span class="math inline">\(X\)</span> 的分布函数的中位数时，<span class="math inline">\(E[|X − c|]\)</span> 的值最小。当 <span class="math inline">\(X\)</span> 是连续随机变量，且其分布函数和密度函数分别为 <span class="math inline">\(F\)</span> 和 <span class="math inline">\(f\)</span> 时，请证明如上的关于中位数的结论。提示：</p>
<p><span class="math display">\[
\begin{align}
E[|X-c|] &amp;= \int_{-\infty}^{\infty}{|x-c|f(x)\mathrm{d} x} \\
&amp;= \int_{-\infty}^{c}{|x-c|f(x)\mathrm{d} x} + \int_{c}^{\infty}{|x-c|f(x)\mathrm{d} x} \\
&amp;= \int_{-\infty}^{c}{(c-x)f(x)\mathrm{d} x} + \int_{c}^{\infty}{(x-c)f(x)\mathrm{d} x} \\
&amp;= cF(c) - \int_{-\infty}^{c}{xf(x)\mathrm{d} x} + \int_{c}^{\infty}{xf(x)\mathrm{d} x} - c[1 - F(c)]
\end{align}
\]</span></p>
<p>然后利用微积分求 <span class="math inline">\(c\)</span> 的最小值。</p></li>
<li><p>对于随机变量的分布函数 <span class="math inline">\(F\)</span>，如果有 <span class="math inline">\(F(m_p)=p\)</span>，则我们称 <span class="math inline">\(m_p\)</span> 为 <span class="math inline">\(100p\)</span>-百分位数。如果一个随机变量的概率密度函数为：</p>
<p><span class="math inline">\(f(x)=2e^{-2x}, \quad x \ge 0\)</span></p>
<p>求 <span class="math inline">\(m_p\)</span>。</p></li>
<li><p>一个社区由 100 对已婚夫妇组成。如果这个社区有 50 人去世了，那么剩下的 50 人中包含的夫妻数量的期望是多少？假设去世的人群随机来 <span class="math inline">\(\left(\begin{array}{cc}  200 \\  50 \end{array}\right)\)</span> 中的任何一组。提示：对于 <span class="math inline">\(i=1,...,100\)</span>，令</p>
<p><span class="math inline">\(X_i = \begin{cases}1, \quad &amp; 夫妻中没有人去世\\0, \quad &amp; 其它\end{cases}\)</span></p></li>
<li><p>某个试验的成功概率为 <span class="math inline">\(p\)</span>，如果独立执行 <span class="math inline">\(n\)</span> 次试验，计算其成功次数的期望和方差？计算中，试验之间的独立性是有必要的吗？</p></li>
<li><p>假设 <span class="math inline">\(X\)</span> 取值 1、2、3、4 中的任何一个数的概率都是一致的，计算：</p>
<ul>
<li><span class="math inline">\(E[X]\)</span>。</li>
<li><span class="math inline">\(Var(X)\)</span>。</li>
</ul></li>
<li><p>令 <span class="math inline">\(p_i=P\{X=i\}\)</span>，假设 <span class="math inline">\(p_1+p_2+p_3=1\)</span>。如果 <span class="math inline">\(E[X]=2\)</span>，求：</p>
<ul>
<li><span class="math inline">\(p_1\)</span>、<span class="math inline">\(p_2\)</span>、<span class="math inline">\(p_3\)</span>的最大值？</li>
<li><span class="math inline">\(Var(X)\)</span> 的最小值？</li>
</ul></li>
<li><p>抛 3 次硬币，计算其正面向上的次数的期望和方差？</p></li>
<li><p>该题涉及到 <a href="#exm-4_6_c" class="quarto-xref">例&nbsp;<span>4.13</span></a> 所示的友谊悖论。我们随机选择一个人 <span class="math inline">\(X\)</span>，并从 <span class="math inline">\(X\)</span> 的好友中随机选择一个人 <span class="math inline">\(W\)</span>。也就是说，在 <span class="math inline">\(X\)</span> 的 <span class="math inline">\(n\)</span> 位好友中，<span class="math inline">\(W\)</span> 是 <span class="math inline">\(X\)</span> 的好友的概率是 <span class="math inline">\(\frac{1}{n}\)</span>。在 <a href="#exm-4_6_c" class="quarto-xref">例&nbsp;<span>4.13</span></a> 中，已经证明了 <span class="math inline">\(E[f(W)] \ge E[f(X)]\)</span>，即随机选择的某个人的平均朋友数不大于其随机选择的朋友的平均朋友数。使用 <a href="#fig-4_5" class="quarto-xref">图&nbsp;<span>4.5</span></a> 给出的朋友圈证明该结论是正确的。</p></li>
<li><p>某种零件的重量是一个随机变量 <span class="math inline">\(X\)</span>，其概率密度函数为：</p>
<p><span class="math inline">\(f(z)=\begin{cases} z-8, \quad &amp; 8 \le z \le 9 \\ 10-z, \quad &amp; 9 \lt z \le 10 \\ 0, \quad &amp; 其它 \end{cases}\)</span></p>
<ul>
<li>计算随机变量 <span class="math inline">\(X\)</span> 的期望和方差？</li>
<li>工厂以 2 元的固定价格出售该零件，并且工厂保证：任何购买该零件的客户，如果发现该零件的重量低于 8.25，他们将退还货款。工厂生产该零件的成本与零件的重量关系为 <span class="math inline">\(\frac{x}{15} + 0.35\)</span>。计算每个零件的预期利润？</li>
</ul></li>
<li><p>在某次给定的选举中，令随机变量 <span class="math inline">\(X_i\)</span> 表是对候选人 <span class="math inline">\(i\)</span> 的投票支持率，假设 <span class="math inline">\(X_1\)</span> 和 <span class="math inline">\(X_2\)</span> 的概率密度函数为：</p>
<p><span class="math inline">\(f_{X_1, X_2}(x,y)=\begin{cases} 3(x+y), \quad &amp; x \ge 0, y \ge 0, 0 \le x +y \le 1\\ 0, \quad &amp; 其它 \end{cases}\)</span></p>
<ul>
<li>计算 <span class="math inline">\(X_1\)</span> 和 <span class="math inline">\(X_2\)</span> 的边缘密度函数？</li>
<li>对于 <span class="math inline">\(i=1,2\)</span>，计算 <span class="math inline">\(E[X_i]\)</span> 和 <span class="math inline">\(\textup{Var}(X_i)\)</span>？</li>
</ul></li>
<li><p>我们会根据产品的缺陷数量和生产厂家对产品进行分类。设随机变量 <span class="math inline">\(X_1\)</span> 表示单位产品的缺陷量（取值为 0，1，2，3），随机变量 <span class="math inline">\(X_2\)</span> 表示工厂编号（取值为 1，2）。随机选择一个产品，其联合概率质量函数如下表所示：</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><span class="math inline">\(X_2\)</span> = 1</th>
<th style="text-align: left;"><span class="math inline">\(X_2\)</span> = 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(X_1\)</span> = 0</td>
<td><span class="math inline">\(\frac{1}{8}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{1}{16}\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(X_1\)</span> = 1</td>
<td><span class="math inline">\(\frac{1}{16}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{1}{16}\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(X_1\)</span> = 2</td>
<td><span class="math inline">\(\frac{3}{16}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{1}{8}\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(X_1\)</span> = 3</td>
<td><span class="math inline">\(\frac{1}{8}\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\frac{1}{4}\)</span></td>
</tr>
</tbody>
</table>
<ul>
<li>计算 <span class="math inline">\(X_1\)</span>、<span class="math inline">\(X_2\)</span> 的边缘概率分布？</li>
<li>计算 <span class="math inline">\(E[X_1]\)</span>，<span class="math inline">\(E[X_2]\)</span>，<span class="math inline">\(\textup{Var}(X_1)\)</span>，<span class="math inline">\(\textup{Var}(X_2)\)</span>，<span class="math inline">\(\textup{Cov}(X_1, X_2)\)</span>？</li>
</ul></li>
<li><p>计算 习题 44 中的随机变量的相关性 <span class="math inline">\(\textup{Corr}(X_1, X_2)\)</span>？</p></li>
<li><p>验证 <a href="#eq-4_7_004" class="quarto-xref">式&nbsp;<span>4.53</span></a>？</p></li>
<li><p>用数学归纳法证明 <a href="#eq-4_7_005_475" class="quarto-xref">式&nbsp;<span>4.54</span></a>？</p></li>
<li><p>令 <span class="math inline">\(X\)</span> 的方差为 <span class="math inline">\(\sigma_x^2\)</span>，<span class="math inline">\(Y\)</span> 的方差为 <span class="math inline">\(\sigma_y^2\)</span>。</p>
<ul>
<li>当 <span class="math inline">\(0 \le \textup{Var}(\frac{X}{\sigma_x} + \frac{Y}{\sigma_y})\)</span> 时，有 <span class="math inline">\(-1 \le \textup{Corr}(X,Y)\)</span>。</li>
<li>当 <span class="math inline">\(0 \le \textup{Var}(\frac{X}{\sigma_x} - \frac{Y}{\sigma_y})\)</span> 时，有 <span class="math inline">\(-1 \le \textup{Corr}(X,Y) \le 1\)</span>。</li>
<li>当 <span class="math inline">\(\textup{Var}(Z) = 0\)</span> 时意味着 <span class="math inline">\(Z\)</span> 是一个常数。</li>
</ul>
<p>证明：</p>
<ul>
<li>当 <span class="math inline">\(Y=ax +b\)</span> 时，<span class="math inline">\(\textup{Corr}(X,Y)\)</span> 等于 1 或者 -1？</li>
<li>当 <span class="math inline">\(a &gt; 0\)</span> 时，<span class="math inline">\(\textup{Corr}(X,Y) = 1\)</span>，当 <span class="math inline">\(a &lt; 0\)</span> 时，<span class="math inline">\(\textup{Corr}(X,Y) = -1\)</span>？</li>
</ul></li>
<li><p>一个试验的结果取值为 1、2、3，并且各自的概率为 <span class="math inline">\(p_1,p_2,p_3\)</span>，并且 <span class="math inline">\(sum_{i=1}^{3} = 1\)</span>。对于 <span class="math inline">\(n\)</span> 次这样的相互独立的试验，令 <span class="math inline">\(N_i\)</span> 表示实验结果为 <span class="math inline">\(i\)</span> 的次数，证明：</p>
<ul>
<li><span class="math inline">\(\textup{Cov}(N_1, N_2) = -np_1p_2\)</span>?</li>
<li>请解释为什么如上的协方差是负数？</li>
</ul>
<p>提示：对于 <span class="math inline">\(i=1,...,n\)</span>，</p>
<p>令 <span class="math inline">\(X_i=\begin{cases} 1, \quad &amp; 第 i 次试验的结果为 1\\ 0, \quad &amp; 第 i 次试验的结果不为 1 \end{cases}\)</span>。</p>
<p>同理，令 <span class="math inline">\(Y_j=\begin{cases} 1, \quad &amp; 第 j 次试验的结果为 2\\ 0, \quad &amp; 第 j 次试验的结果不为 2 \end{cases}\)</span>。</p>
<p>然后证明 <span class="math inline">\(N_1 = \sum_{i=1}^{n}X_i\)</span>，<span class="math inline">\(N_2 = \sum_{j=1}^{n}Y_i\)</span>，然后利用 <a href="#prp-4_7_2" class="quarto-xref">命题&nbsp;<span>4.2</span></a> 和 <a href="#thm-4_7_4" class="quarto-xref">定理&nbsp;<span>4.1</span></a> 来证明 <span class="math inline">\(\textup{Cov}(N_1, N_2)\)</span>。</p></li>
<li><p>对于 <a href="#exr-4_5_f" class="quarto-xref">习题&nbsp;<span>4.12</span></a>，计算 <span class="math inline">\(\textup{Cov}(X_i,X_j)\)</span>，并用该结果证明 <span class="math inline">\(\textup{Var}(X) = 1\)</span>。</p></li>
<li><p>如果 <span class="math inline">\(X_1\)</span> 和 <span class="math inline">\(X_2\)</span> 的概率分布函数相同，证明：<span class="math inline">\(\textup{Cov}(X_1 - X_2, X_1 + X_2) = 0\)</span>（注意，此处没有假定 <span class="math inline">\(X_1\)</span> 和 <span class="math inline">\(X_2\)</span> 相互独立）。</p></li>
<li><p>假设 <span class="math inline">\(X\)</span> 的概率密度函数为：<span class="math inline">\(f(x)=e^{-x}, \ x \gt 0\)</span>。</p>
<ul>
<li>计算 <span class="math inline">\(X\)</span> 的矩生成函数，并用结果来确定 <span class="math inline">\(X\)</span> 的均值和方差。</li>
<li>直接根据概率密度函数计算 <span class="math inline">\(X\)</span> 的均值并用来该值来校验上一步中得出的结果。</li>
</ul></li>
<li><p>如果 <span class="math inline">\(X\)</span> 的概率密度函数为：<span class="math inline">\(f(x) = 1, \ 0 \lt x \lt 1\)</span>。</p>
<ul>
<li>计算 <span class="math inline">\(E[e^{tX}]\)</span>。</li>
<li>对 <span class="math inline">\(E[e^{tX}]\)</span> 求 <span class="math inline">\(n\)</span> 阶导数以得到 <span class="math inline">\(E[X^n]\)</span>，并校验结果。</li>
</ul></li>
<li><p>假设随机变量 <span class="math inline">\(X\)</span> 的均值和方差都是 20，计算 <span class="math inline">\(P\{0 \le X \le 40\}\)</span>？</p></li>
<li><p>根据过去的经验，教授知道学生期末考试的成绩是一个随机变量，并且其平均值为 75。</p>
<ul>
<li>学生考试成绩超过 85 的最大概率是多少？</li>
<li>假设教授知道学生考试成绩的方差为 25，那么学生成绩在 65 到 85 之间的概率如何？</li>
<li>最少有多少学生参加考试，才能确保该班级的平均水平在 70 到 80 之间的概率至少为 0.9？</li>
</ul></li>
<li><p>令 <span class="math inline">\(X\)</span> 的分布函数为 <span class="math inline">\(F_X\)</span>，<span class="math inline">\(Y\)</span> 的分布函数为 <span class="math inline">\(F_Y\)</span>，假设对于常数 <span class="math inline">\(a &gt; 0\)</span>，<span class="math inline">\(b &gt; 0\)</span>，有</p>
<p><span class="math inline">\(F_X(x) = F_Y\bigg(\frac{x-a}{b}\bigg)\)</span></p>
<ul>
<li>用 <span class="math inline">\(E[Y]\)</span> 来确定 <span class="math inline">\(E[X]\)</span>？</li>
<li>用 <span class="math inline">\(\textup{Var}(Y)\)</span> 来确定 <span class="math inline">\(\textup{Var}(X)\)</span>？</li>
</ul>
<p>提示：<span class="math inline">\(X\)</span> 与哪个随机变量的分布相同？</p></li>
</ol>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>为了证明这一点，我们必须证明这根杆绕点 <span class="math inline">\(E[X]\)</span> 转动的力矩之和等于 0。也就是说，我们必须证明 <span class="math inline">\(0=\sum_{i}{(x_i−E[X])p(x_i)}\)</span>。<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "已复制");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "已复制");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/wangwei1237\.github\.io\/introduction_to_probability_and_statistics\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="wangwei1237/introduction_to_probability_and_statistics" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapter_3/3.html" class="pagination-link" aria-label="概率论基础">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">概率论基础</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapter_5/5.html" class="pagination-link" aria-label="特殊的随机变量">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">特殊的随机变量</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright Wang Wei. All Rights Reserved.</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/wangwei1237/introduction_to_probability_and_statistics/edit/main/chapter_4/4.qmd" class="toc-action"><i class="bi bi-github"></i>编辑该页面</a></li><li><a href="https://github.com/wangwei1237/introduction_to_probability_and_statistics/issues/new" class="toc-action"><i class="bi empty"></i>反馈问题</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>