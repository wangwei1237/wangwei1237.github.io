<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>è§†é¢‘å‹ç¼©æ ‡å‡†å‘å±•ç®€å²</title>
    <url>/2021/07/27/The-History-of-the-Video-Codec-Improvement/</url>
    <content><![CDATA[<p>just for test.</p>
<style>
    .cd-timeline.svelte-1aijmz5 .svelte-1aijmz5,.cd-timeline.svelte-1aijmz5 .svelte-1aijmz5::after,.cd-timeline.svelte-1aijmz5 .svelte-1aijmz5::before{-webkit-box-sizing:border-box;box-sizing:border-box}.cd-timeline.svelte-1aijmz5{font-size:1.6rem;font-family:"Droid Serif", serif;color:#7f8c97;background-color:#e9f0f5}.cd-timeline.svelte-1aijmz5 a{color:#acb7c0;text-decoration:none}.cd-timeline.svelte-1aijmz5 img{max-width:100%}.cd-timeline.svelte-1aijmz5 h1,h2{font-family:"Open Sans", sans-serif;font-weight:bold}.cd-timeline.svelte-1aijmz5{overflow:hidden;margin:2em auto}.cd-timeline__container.svelte-1aijmz5{position:relative;width:90%;max-width:1170px;margin:0 auto;padding:2em 0}.cd-timeline__container.svelte-1aijmz5::before{content:'';position:absolute;top:0;left:18px;height:100%;width:4px;background:#d7e4ed}@media only screen and (min-width: 1170px){.cd-timeline.svelte-1aijmz5{margin-top:3em;margin-bottom:3em}.cd-timeline__container.svelte-1aijmz5::before{left:50%;margin-left:-2px}}.cd-timeline__block.svelte-1aijmz5{position:relative;margin:2em 0}.cd-timeline__block.svelte-1aijmz5:after{content:"";display:table;clear:both}.cd-timeline__block.svelte-1aijmz5:first-child{margin-top:0}.cd-timeline__block.svelte-1aijmz5:last-child{margin-bottom:0}@media only screen and (min-width: 1170px){.cd-timeline__block.svelte-1aijmz5{margin:4em 0}}.cd-timeline__img.svelte-1aijmz5{position:absolute;top:0;left:0;width:40px;height:40px;border-radius:50%;-webkit-box-shadow:0 0 0 4px white, inset 0 2px 0 rgba(0, 0, 0, 0.08), 0 3px 0 4px rgba(0, 0, 0, 0.05);box-shadow:0 0 0 4px white, inset 0 2px 0 rgba(0, 0, 0, 0.08), 0 3px 0 4px rgba(0, 0, 0, 0.05)}.cd-timeline__img.svelte-1aijmz5{background:#75ce66}@media only screen and (min-width: 1170px){.cd-timeline__img.svelte-1aijmz5{width:50px;height:50px;left:50%;margin-left:-25px;-webkit-transform:translateZ(0);transform:translateZ(0)}}@-webkit-keyframes svelte-1aijmz5-cd-bounce-1{0%{opacity:0;-webkit-transform:scale(0.5);transform:scale(0.5)}60%{opacity:1;-webkit-transform:scale(1.2);transform:scale(1.2)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes svelte-1aijmz5-cd-bounce-1{0%{opacity:0;-webkit-transform:scale(0.5);transform:scale(0.5)}60%{opacity:1;-webkit-transform:scale(1.2);transform:scale(1.2)}100%{-webkit-transform:scale(1);transform:scale(1)}}.cd-timeline__content.svelte-1aijmz5{position:relative;margin-left:60px;background:white;border-radius:0.25em;padding:1em;-webkit-box-shadow:0 3px 0 #d7e4ed;box-shadow:0 3px 0 #d7e4ed}.cd-timeline__content.svelte-1aijmz5:after{content:"";display:table;clear:both}.cd-timeline__content.svelte-1aijmz5::before{content:'';position:absolute;top:16px;right:100%;height:0;width:0;border:7px solid transparent;border-right:7px solid white}.cd-timeline__content.svelte-1aijmz5 h2.svelte-1aijmz5{color:#303e49}.cd-timeline__content.svelte-1aijmz5 p,.cd-timeline__date.svelte-1aijmz5{font-size:1.3rem}.cd-timeline__content.svelte-1aijmz5 p{margin:1em 0;line-height:1.6}.cd-timeline__date.svelte-1aijmz5{display:inline-block}.cd-timeline__date.svelte-1aijmz5{float:left;padding:.8em 0;opacity:.7}@media only screen and (min-width: 768px){.cd-timeline__content.svelte-1aijmz5 h2.svelte-1aijmz5{font-size:2rem}.cd-timeline__content.svelte-1aijmz5 p{font-size:1.6rem}.cd-timeline__date.svelte-1aijmz5{font-size:1.4rem}}@media only screen and (min-width: 1170px){.cd-timeline__content.svelte-1aijmz5{margin-left:0;padding:1.6em;width:45%;-webkit-transform:translateZ(0);transform:translateZ(0)}.cd-timeline__content.svelte-1aijmz5::before{top:24px;left:100%;border-color:transparent;border-left-color:white}.cd-timeline__date.svelte-1aijmz5{position:absolute;width:100%;left:122%;top:6px;font-size:1.6rem}.cd-timeline__block.svelte-1aijmz5:nth-child(even) .cd-timeline__content.svelte-1aijmz5{float:right}.cd-timeline__block.svelte-1aijmz5:nth-child(even) .cd-timeline__content.svelte-1aijmz5::before{top:24px;left:auto;right:100%;border-color:transparent;border-right-color:white}.cd-timeline__block.svelte-1aijmz5:nth-child(even) .cd-timeline__date.svelte-1aijmz5{left:auto;right:122%;text-align:right}}@-webkit-keyframes svelte-1aijmz5-cd-bounce-2{0%{opacity:0;-webkit-transform:translateX(-100px);transform:translateX(-100px)}60%{opacity:1;-webkit-transform:translateX(20px);transform:translateX(20px)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes svelte-1aijmz5-cd-bounce-2{0%{opacity:0;-webkit-transform:translateX(-100px);transform:translateX(-100px)}60%{opacity:1;-webkit-transform:translateX(20px);transform:translateX(20px)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}@-webkit-keyframes svelte-1aijmz5-cd-bounce-2-inverse{0%{opacity:0;-webkit-transform:translateX(100px);transform:translateX(100px)}60%{opacity:1;-webkit-transform:translateX(-20px);transform:translateX(-20px)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes svelte-1aijmz5-cd-bounce-2-inverse{0%{opacity:0;-webkit-transform:translateX(100px);transform:translateX(100px)}60%{opacity:1;-webkit-transform:translateX(-20px);transform:translateX(-20px)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}
    </style>
<section class="cd-timeline js-cd-timeline svelte-1aijmz5">
    <div class="cd-timeline__container svelte-1aijmz5">
        <div class="cd-timeline__block js-cd-block svelte-1aijmz5">
            <div class="cd-timeline__img cd-timeline__img--movie js-cd-img svelte-1aijmz5">
            </div>
            <div class="cd-timeline__content js-cd-content svelte-1aijmz5">
                <h2 class="svelte-1aijmz5">ECMAScript 1</h2>
                <p>First edition.</p>
<span id="more"></span>

                <span class="cd-timeline__date svelte-1aijmz5">1997-06</span>
            </div>
        </div><div class="cd-timeline__block js-cd-block svelte-1aijmz5">
            <div class="cd-timeline__img cd-timeline__img--movie js-cd-img svelte-1aijmz5">
            </div>
            <div class="cd-timeline__content js-cd-content svelte-1aijmz5">
                <h2 class="svelte-1aijmz5">ECMAScript 2</h2>
                <p>Editorial changes to keep the specification fully aligned with ISO/IEC 16262 international standard.</p>

                <span class="cd-timeline__date svelte-1aijmz5">1998-06</span>
            </div>
        </div><div class="cd-timeline__block js-cd-block svelte-1aijmz5">
            <div class="cd-timeline__img cd-timeline__img--movie js-cd-img svelte-1aijmz5">
            </div>
            <div class="cd-timeline__content js-cd-content svelte-1aijmz5">
                <h2 class="svelte-1aijmz5">ECMAScript 3</h2>
                <p>Added regular expressions, better string handling, new control statements, try/catch exception handling, tighter definition of errors, formatting for numeric output and other enhancements.</p>

                <span class="cd-timeline__date svelte-1aijmz5">1999-12</span>
            </div>
        </div><div class="cd-timeline__block js-cd-block svelte-1aijmz5">
            <div class="cd-timeline__img cd-timeline__img--movie js-cd-img svelte-1aijmz5">
            </div>
            <div class="cd-timeline__content js-cd-content svelte-1aijmz5">
                <h2 class="svelte-1aijmz5">Abandoned ECMAScript 4</h2>
                <p>Fourth Edition was abandoned, due to political differences concerning language complexity. Many features proposed for the Fourth Edition have been completely dropped; some were incorporated into the sixth edition.</p>

                <span class="cd-timeline__date svelte-1aijmz5">2000-01 - 2007-10-23</span>
            </div>
        </div>
    </div>
</section>
]]></content>
      <categories>
        <category>è§†é¢‘æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>ç¼–è§£ç å™¨</tag>
        <tag>å‹ç¼©æ ‡å‡†</tag>
      </tags>
  </entry>
  <entry>
    <title>GraphQL å®è·µ</title>
    <url>/2021/07/17/The-First-Python-Project-For-GraphQL/</url>
    <content><![CDATA[<p><img src="/2021/07/17/The-First-Python-Project-For-GraphQL/1.png" alt></p>
<blockquote>
<p>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚</p>
</blockquote>
<p>åœ¨ <a href="/2021/06/15/Preliminary-Exploration-of-the-GraphQL/">GraphQL åˆæ¢</a>ä¸€æ–‡ä¸­ï¼Œå¯¹ GraphQL è¿›è¡Œäº†åˆæ­¥çš„ä»‹ç»å’Œåˆ†æã€‚åœ¨å¯¹ GraphQL æœ‰äº†ä¸€å®šè®¤è¯†ä¹‹åï¼Œæ€»æƒ³ç€èƒ½åœ¨å®è·µä¸­çœŸæ­£çš„ä½“éªŒä¸€ä¸‹ GraphQLã€‚å®è·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†å˜›ï¼Œä¸å…¶è½»ä¿¡ä¸ç½‘ç»œä¸Šçš„å„ç§å¯¹æ¯”åˆ†æï¼Œå€’ä¸å¦‚çœŸæ­£çš„å»ä½“éªŒä¸€ä¸‹ã€‚</p>
<p>æ°å¥½è¿‘æœŸæœ‰ä¸€ä¸ªå°å‹çš„é¡¹ç›®éœ€è¦ä¼˜åŒ–ï¼Œäºæ˜¯å°±åœ¨è¯¥å°å‹é¡¹ç›®åŸºç¡€ä¸Šå®è·µäº† GraphQLã€‚ä¹‹å‰ï¼Œè¯¥é¡¹ç›®æ˜¯åŸºäº django æ¡†æ¶å¼€å‘çš„ REST APIï¼Œæ­¤æ¬¡å®è·µï¼Œé‡‡ç”¨ <a href="https://github.com/graphql-python/graphene-django">Graphene-Django</a> ä¸ºè¯¥é¡¹ç›®å¢åŠ äº†å¯¹åº”çš„ GraphQL APIã€‚</p>
<span id="more"></span>
<h2 id="é¡¹ç›®çš„ç®€åŒ–æ¨¡å‹">é¡¹ç›®çš„ç®€åŒ–æ¨¡å‹</h2>
<p>è¿™ä¸ªå°é¡¹ç›®çš„æ ¸å¿ƒå…¶å®å°±æ˜¯ä¸ºå„ç§è§†é¢‘ç‰©æ–™æä¾›ä¸€ä¸ªå­˜å‚¨å’Œæ£€ç´¢çš„å¾®æœåŠ¡ï¼Œè¯¥å¾®æœåŠ¡å…·æœ‰ä»¥ä¸‹çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>å­˜å‚¨è§†é¢‘ä»¥åŠè§†é¢‘çš„å…ƒæ•°æ®</li>
<li>æ ¹æ®ä¸åŒçš„æ¡ä»¶æ£€ç´¢æ»¡è¶³æ¡ä»¶çš„è§†é¢‘</li>
</ul>
<p>åœ¨è¯¥å¾®æœåŠ¡ä¸­çš„æ¯æ¡è§†é¢‘ï¼š</p>
<ul>
<li>éƒ½åŒ…å«è§†é¢‘æ ‡ç­¾ï¼ˆVideoTagï¼‰ä¿¡æ¯</li>
<li>åˆ©ç”¨è¯¥è§†é¢‘äº§ç”Ÿå…¶ä»–æ ¼å¼çš„è§†é¢‘ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºæ´¾ç”Ÿè§†é¢‘ï¼‰</li>
</ul>
<p>è¯¥é¡¹ç›®ç”¨åˆ°çš„æ•°æ®å­˜å‚¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br>
<img src="/2021/07/17/The-First-Python-Project-For-GraphQL/2.png" alt></p>
<ul>
<li><em>Video</em> è¡¨ä¸­å­˜å‚¨äº†è§†é¢‘çš„ç›¸å…³ä¿¡æ¯</li>
<li><em>DerivedVideo</em> è¡¨ä¸­å­˜å‚¨äº†æ´¾ç”Ÿè§†é¢‘çš„ç›¸å…³ä¿¡æ¯ï¼Œç”¨ä»¥è®°å½•æ ¹æ® parentId è§†é¢‘æ´¾ç”Ÿå‡ºçš„è§†é¢‘çš„ vid ä¿¡æ¯</li>
<li><em>VideoTag</em> è¡¨ä¸­å­˜å‚¨äº†è§†é¢‘çš„æ ‡ç­¾ä¿¡æ¯</li>
</ul>
<p>è¯¥å¾®æœåŠ¡çš„æ•´ä½“æ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼š<br>
<img src="/2021/07/17/The-First-Python-Project-For-GraphQL/3.png" alt></p>
<h2 id="graphql-çš„è¿ç§»æ€è·¯">GraphQL çš„è¿ç§»æ€è·¯</h2>
<p>å°†ç°æœ‰çš„ REST API è¿ç§»åˆ° GraphQL API æœ‰ä¸‰ç§æ€è·¯ï¼š</p>
<ul>
<li>å®Œå…¨æŒ‰ç…§ GraphQL å®ç°ç°æœ‰å¾®æœåŠ¡æä¾›çš„æ‰€æœ‰èƒ½åŠ›</li>
<li>åˆ©ç”¨ GraphQL å¯¹å½“å‰ç³»ç»Ÿçš„ç°æœ‰ä»£ç è¿›è¡Œæ•´åˆ<br>
<img src="/2021/07/17/The-First-Python-Project-For-GraphQL/4.png" alt></li>
<li>åˆ©ç”¨ GraphQL å¯¹å½“å‰ç³»ç»Ÿçš„ REST API è¿›è¡Œå°è£…<br>
<img src="/2021/07/17/The-First-Python-Project-For-GraphQL/5.png" alt></li>
</ul>
<p>è€ƒè™‘åˆ°å­¦ä¹ æˆæœ¬ï¼Œæ”¹é€ æˆæœ¬ï¼ŒæœåŠ¡æ€§èƒ½ç­‰é—®é¢˜ï¼Œæœ€ç»ˆæˆ‘ä»¬å†³å®šé‡‡ç”¨ç¬¬ 2 ç§æ–¹æ³•å¯¹å½“å‰çš„å¾®æœåŠ¡è¿›è¡Œ GraphQL å‡çº§ã€‚</p>
<h2 id="graphql-è¿ç§»è¿‡ç¨‹ä¸­çš„æ„Ÿæƒ³">GraphQL è¿ç§»è¿‡ç¨‹ä¸­çš„æ„Ÿæƒ³</h2>
<h4 id="graphql-æ”¹é€ ç¡®å®å…·æœ‰ä¸€å®šçš„æˆæœ¬">GraphQL æ”¹é€ ç¡®å®å…·æœ‰ä¸€å®šçš„æˆæœ¬</h4>
<p>åˆ©ç”¨æ–°æŠ€æœ¯æ”¹é€ è€çš„ç³»ç»Ÿå¿…é¡»è¦è€ƒè™‘çš„å› ç´ ä¹‹ä¸€å°±æ˜¯æˆæœ¬ï¼Œè¿™é‡Œé¢æ¶‰åŠåˆ°ï¼š</p>
<ul>
<li>æ–°æŠ€æœ¯çš„å­¦ä¹ æˆæœ¬</li>
<li>å¼€å‘çš„æˆæœ¬</li>
<li>å‡ºç°é—®é¢˜åçš„å®šä½æˆæœ¬</li>
<li>â€¦â€¦</li>
</ul>
<p>æˆ‘åœ¨ GraphQL è¿ç§»è¿‡ç¨‹æ‰€èŠ±è´¹çš„æˆæœ¬ä¸Šï¼Œé‡ç‚¹è¿˜æ˜¯å­¦ä¹ æˆæœ¬ï¼Œä¸»è¦æ¶‰åŠï¼š</p>
<ul>
<li>ç†è®ºå­¦ä¹ </li>
<li>æ¡†æ¶å­¦ä¹ ï¼š<a href="https://docs.graphene-python.org/en/stable/">Graphene</a> æ¡†æ¶ä»¥åŠ <a href="https://docs.graphene-python.org/projects/django/en/latest/">Graphene-Django</a> æ¡†æ¶</li>
</ul>
<p>å¹¶ä¸”ï¼Œæ•´ä¸ªå­¦ä¹ æ‰€èŠ±è´¹çš„æ—¶é—´æ¯”çœŸæ­£å¼€å‘çš„æ—¶é—´è¦é«˜å¾ˆå¤šï¼ŒçœŸæ­£ç”¨äº GraphQL API å¼€å‘æ‰€èŠ±è´¹çš„æ—¶é—´å¹¶ä¸å¤šã€‚</p>
<p>åœ¨æ•´ä¸ªçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ„Ÿè§‰ GraphQL API æ¯”èµ· REST API è€Œè¨€è¿˜æ˜¯ä¼šå¢åŠ å°‘è®¸çš„æˆæœ¬çš„ï¼Œå°¤å…¶æ˜¯å„ç§ type çš„å®šä¹‰ï¼Œç¡®å®ä¼šå¢åŠ ä¸€ç‚¹ç¼–ç çš„æˆæœ¬ã€‚å¦å¤–ï¼Œç”±äº GraphQL ç±»å‹ç³»ç»Ÿçš„é™åˆ¶ï¼ŒGraphQL API çš„å¼€å‘å†ä¹Ÿä¸èƒ½åƒ REST API é‚£æ ·éšå¿ƒæ‰€æ¬²äº†ã€‚GraphQL ç¡®å®éœ€è¦ä»æ¥å£æŠ½è±¡å¼€å§‹è®¾è®¡ï¼Œç„¶ååˆ°æ¥å£å®ç°ã€‚</p>
<p>ç»¼ä¸Šï¼ŒGraphQL API çš„å¼€å‘ç¡®å®è¦ç¨å¾®çš„å¤šèŠ±è´¹ä¸€ç‚¹æ—¶é—´ã€‚ä½†æ˜¯è¿™é¢å¤–çš„æ—¶é—´ä¼šå¸¦æ¥é¢å¤–çš„å¾ˆå¤šå¥½å¤„ï¼Œæ¯”å¦‚å’Œä»£ç åŒæ­¥çš„æ¥å£æ–‡æ¡£ã€‚</p>
<h4 id="graphql-çš„ä»£ç æ›´ç®€ç»ƒ">GraphQL çš„ä»£ç æ›´ç®€ç»ƒ</h4>
<p>ä¸ªäººæ„Ÿè§‰ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒGraphQL çš„ç±»å‹ç³»ç»Ÿä½¿å¾—å…¶æ›´å…·è¡¨è¾¾æ€§ï¼Œè¿™å¯ä»¥è®© GraphQL API çœ‹èµ·æ¥æ›´ç®€ç»ƒã€‚</p>
<p>å¦‚ä¸‹æ‰€ç¤ºçš„ GraphQL Schema ä¸­ï¼Œ<code>videoList</code> å­—æ®µçš„ç±»å‹ä¸º <code>VideoList</code>ï¼Œè€Œ <code>VideoList</code> ç±»å‹åˆ™åŒ…å«ä¸€ä¸ªç±»å‹ä¸º <code>[Video]</code> çš„å­—æ®µã€‚å› æ­¤å¯¹äº <code>videoList</code> å­—æ®µè€Œè¨€ï¼Œåªéœ€è¦å¤„ç† <code>total</code> å’Œ <code>hasMore</code> å­—æ®µå³å¯ã€‚ä»è¿™ä¸ªå±‚é¢ä¸Šè®²ï¼Œæ•´ä¸ªçš„ä»£ç ä¼šæ›´åŠ ç®€æ´ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">type</span> Query &#123;</span><br><span class="line">  video(vid: ID!): Video</span><br><span class="line">  videoList(first: Int!, </span><br><span class="line">            after: Int, </span><br><span class="line">            codec: VideoCodec, </span><br><span class="line">            <span class="built_in">format</span>: VideoDemux, </span><br><span class="line">            resolution: VideoResolution, </span><br><span class="line">            vid: Int): VideoList</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span> VideoList &#123;</span><br><span class="line">  videos: [Video!]</span><br><span class="line">  total: Int!</span><br><span class="line">  hasMore: Boolean!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°¤å…¶æ˜¯åœ¨å½“ <code>video</code> å’Œ <code>videoList.videos</code> æ‰€éœ€çš„æ•°æ®ä¸ä¸€è‡´æ—¶ï¼ŒGraphQL <em>æŒ‰éœ€è¯·æ±‚</em>çš„ç‰¹æ€§ä½¿å¾—æœåŠ¡ç«¯æ— éœ€é¢å¤–çš„æ”¹åŠ¨ï¼Œå³å¯å®ç°ä¸åŒçš„è¯·æ±‚æ–¹è¯·æ±‚ä¸åŒæ•°æ®ã€‚è€Œåœ¨ REST API çš„è€ç³»ç»Ÿä¸­ï¼Œå¯ä»¥éšå¤„çœ‹åˆ°ä¸ºäº†å…¼å®¹ä¸åŒè¯·æ±‚æ–¹çš„å„ç§è¡¥ä¸ä»£ç ã€‚</p>
<h4 id="graphql-æ›´åŠ é¢å‘æœåŠ¡ä½¿ç”¨è€…">GraphQL æ›´åŠ é¢å‘æœåŠ¡ä½¿ç”¨è€…</h4>
<p>GraphQL API å®Œæˆä¹‹åï¼Œæˆ‘ä»¬æ‰¾äº†å‡ åè¯¥æœåŠ¡çš„ä½¿ç”¨è€…æ¥äº²è‡ªä½“éªŒ GraphQL APIã€‚å¾—ç›Šäº GraphQL æä¾›çš„å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ¥å£æ–‡æ¡£ï¼Œå¤§å®¶æ™®éåé¦ˆä½¿ç”¨ GraphQL API æ¯”ä½¿ç”¨ REST API æ›´é¡ºç•…ï¼Œæ›´æ”¾å¿ƒï¼Œæ›´é«˜æ•ˆã€‚ä½¿ç”¨ GraphQL API åï¼Œå†ä¹Ÿä¸ç”¨åˆ°å¤„æ‰¾ API çš„æ–‡æ¡£äº†ã€‚</p>
<p><img src="/2021/07/17/The-First-Python-Project-For-GraphQL/6.gif" width="200px"></p>
<p>å¯¹äº <code>videoList</code>ï¼Œå¯ä»¥æ ¹æ®è§†é¢‘æ‰€ç”¨çš„ç¼–è§£ç å™¨ï¼ˆ<code>codec</code> å‚æ•°ï¼‰æ¥è¿›è¡Œç­›é€‰ã€‚å¯¹äºä¸‹æ¸¸æ¶ˆè´¹è€…è€Œè¨€ï¼Œå¦‚æœä½¿ç”¨ REST APIï¼Œåˆ™éœ€è¦é€šè¿‡å„ç§æ ¼å¼çš„æ¥å£æ–‡æ¡£æ‰èƒ½ç¡®å®šè¯¥å‚æ•°çš„å€¼ï¼›è€Œä½¿ç”¨ GraphQL APIï¼Œåˆ™ç›´æ¥é€šè¿‡å¦‚ä¸Šå›¾æ‰€ç¤ºçš„æ–‡æ¡£å³å¯æ˜ç¡®çš„äº†è§£åˆ°è¯¥å‚æ•°çš„å–å€¼èŒƒå›´ã€‚</p>
<p>å°¤å…¶æ˜¯å½“æ¥å£æ–‡æ¡£å’Œæ¥å£çš„å®ç°ä¸ä¸€è‡´çš„æ—¶å€™ï¼ŒREST API çš„æ–‡æ¡£å¯¹äºä½¿ç”¨è€…è€Œè¨€ï¼Œç®€ç›´å°±æ˜¯ä¸€åœºå™©æ¢¦ã€‚è€Œ GraphQL API çš„æ–‡æ¡£æ˜¯æ ¹æ® GraphQL Schema è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå› æ­¤ï¼ŒGraphQL å¤©ç„¶å°±å…·æœ‰æ–‡æ¡£å’Œä»£ç åŒæ­¥çš„ä¼˜åŠ¿ã€‚</p>
<p>å°¤å…¶æ˜¯åœ¨å¾®æœåŠ¡å¤§è¡Œå…¶é“çš„ç°åœ¨ï¼Œç›¸è¾ƒäº REST API è€Œè¨€ï¼Œæˆ‘è®¤ä¸º GraphQL API çš„æ•ˆç‡æ›´é«˜ã€‚è¿™é‡Œçš„æ•ˆç‡é›†ä¸­ä½“ç°åœ¨<em>æ²Ÿé€šæ•ˆç‡</em>å’Œ<em>åä½œæ•ˆç‡</em>ã€‚åœ¨ Sam Newman çš„ <em>Monolith to Microservices</em> çš„<a href="/monolith-to-microservices/docs/Breaking_Changes.html">ç ´åæ€§çš„æœåŠ¡å˜æ›´</a>ä¸­è®²çš„é‚£æ ·ï¼š</p>
<blockquote>
<p>å¾®æœåŠ¡ä½œä¸ºæ›´å¤§çš„ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†è€Œå­˜åœ¨ã€‚æ¯ä¸ªå¾®æœåŠ¡è¦ä¹ˆä½¿ç”¨å…¶ä»–å¾®æœåŠ¡æä¾›çš„åŠŸèƒ½ï¼Œè¦ä¹ˆå‘å…¶ä»–å¾®æœåŠ¡æä¾›è‡ªå·±çš„åŠŸèƒ½ï¼Œè¦ä¹ˆäºŒè€…å…¼è€Œæœ‰ä¹‹ã€‚å¯¹äºå¾®æœåŠ¡æ¶æ„è€Œè¨€ï¼Œæˆ‘ä»¬æ­£åœ¨åŠªåŠ›å®ç°å…¶ç‹¬ç«‹å¯éƒ¨ç½²æ€§ã€‚ä½†æ˜¯ä¸ºäº†å®ç°å…¶ç‹¬ç«‹éƒ¨ç½²ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å¯¹å¾®æœåŠ¡çš„ä¿®æ”¹ä¸ä¼šå¹²æ‰°å…¶ä¸‹æ¸¸æ¶ˆè´¹è€…ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œå¯¹äºå¾®æœåŠ¡æ¶æ„ä¸‹çš„ç³»ç»Ÿè€Œè¨€ï¼Œè™½ç„¶ä¸åŒçš„å¾®æœåŠ¡å†…éƒ¨å¯ä»¥åšåˆ°ç‹¬ç«‹éƒ¨ç½²ï¼Œä½†æ˜¯å´ä¸å¯é¿å…çš„ä¼šä½¿ç”¨åˆ°å…¶ä»–å›¢é˜Ÿæä¾›çš„å¾®æœåŠ¡ã€‚å½“å¾®æœåŠ¡çš„æ•°é‡ä¸æ–­å¢åŠ çš„åŒæ—¶æ›´å¸¦æ¥äº†å¼‚å¸¸å¤æ‚çš„æ²Ÿé€šã€åä½œæˆæœ¬ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæ²Ÿé€šæ•ˆç‡å¯èƒ½ä¼šæˆä¸ºé˜»ç¢å¼€å‘æ•ˆèƒ½çš„é‡è¦å› ç´ ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘è®¤ä¸ºï¼ŒGraphQL å¯¹äºå¾®æœåŠ¡æ¶æ„è€Œè¨€å…·å¤‡å¤©ç„¶çš„ä¼˜åŠ¿ã€‚å½“ç„¶ï¼Œå¦‚æœ REST API çš„æ¥å£æ–‡æ¡£èƒ½å¤Ÿåšåˆ°å’Œä»£ç å®ç°åŒæ­¥çš„è¯ï¼Œä½¿ç”¨ REST API ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯æœ‰å¤šå°‘å›¢é˜Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿ</p>
<h4 id="graphql-api-ç¡®å®ä¼šæœ‰æ€§èƒ½æŠ˜æŸ">GraphQL API ç¡®å®ä¼šæœ‰æ€§èƒ½æŠ˜æŸ</h4>
<p>åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œé‡‡ç”¨ç›¸åŒçš„ QPS å¯¹åŒä¸€åŠŸèƒ½çš„ä¸åŒå®ç°è¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Œæœ€ç»ˆçš„æµ‹è¯•ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2021/07/17/The-First-Python-Project-For-GraphQL/7.png" alt></p>
<p>ä»å‹æµ‹ç»“æœçœ‹ï¼ŒGraphQL API çš„è€—æ—¶æ¯” REST API çš„è€—æ—¶é«˜ <code>30ms</code> å·¦å³ã€‚ç”±äº GraphQL API å¼•å…¥äº† GraphQL Runtime å±‚æ¥è§£æ GraphQL API çš„è¯·æ±‚ï¼Œå› æ­¤ä»æ€§èƒ½è§’åº¦çœ‹ï¼ŒGraphQL API ä¼šä¸å¯é¿å…çš„å¸¦æ¥æ€§èƒ½æŸè€—ã€‚</p>
<p>ä½†æ˜¯ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒGraphQL æä¾›çš„æŒ‰éœ€ç´¢å–æ•°æ®çš„èƒ½åŠ›å¯ä»¥æœ€å¤§ç¨‹åº¦çš„é™ä½æ€§èƒ½æŠ˜æŸã€‚ä¾‹å¦‚åœ¨è¯·æ±‚è§†é¢‘åˆ—è¡¨çš„æ—¶å€™ï¼Œå¦‚æœä»…è¯·æ±‚æ¯ä¸ªè§†é¢‘çš„ vidï¼Œurl, videoMetainfo ä¿¡æ¯ï¼Œåˆ™ GraphQL API çš„æ€§èƒ½åŸºæœ¬ä¸Šèƒ½å’Œ REST API çš„æ€§èƒ½å·®å¼‚ä¼šä¸æ–­ç¼©å°ï¼ˆ<code>10ms</code> å·¦å³ï¼‰ï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2021/07/17/The-First-Python-Project-For-GraphQL/8.png" alt></p>
<p>è€Œåœ¨å¤§éƒ¨åˆ†çš„æƒ…å†µä¸‹ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å®¢æˆ·ç«¯è¯·æ±‚éƒ½éœ€è¦è·å–æ‰€æœ‰çš„æ•°æ®ï¼Œå› æ­¤ GraphQL æŒ‰éœ€ç´¢å–çš„ç‰¹æ€§åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¹Ÿè§£å†³äº†å¼•å…¥ GraphQL Runtime å±‚è€Œå¸¦æ¥çš„æ€§èƒ½æŠ˜æŸã€‚</p>
<p>å› æ­¤ï¼Œåœ¨è€ƒè™‘ GraphQL API æ€§èƒ½çš„æ—¶å€™ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘å’Œå¯¹æ¯”ï¼Œå¦åˆ™å¯èƒ½ä¼šåšå‡ºéå®¢è§‚çš„ç»“è®ºã€‚</p>
]]></content>
      <categories>
        <category>GraphQL</category>
      </categories>
      <tags>
        <tag>GraphQL-Python</tag>
        <tag>Graphene</tag>
        <tag>Graphene-Django</tag>
      </tags>
  </entry>
  <entry>
    <title>GraphQL åˆæ¢</title>
    <url>/2021/06/15/Preliminary-Exploration-of-the-GraphQL/</url>
    <content><![CDATA[<p><img src="/2021/06/15/Preliminary-Exploration-of-the-GraphQL/1.jpg" alt></p>
<p>å¯¹äº API è€Œè¨€ï¼ŒGraphQL è¢«è§†ä¸ºä¸€ç§é©å‘½æ€§çš„æ–°æ€è·¯ã€æ–°æŠ€æœ¯ã€‚GraphQL æ”¹å˜äº†å‰åç«¯å›¢é˜Ÿçš„äº¤äº’æ–¹å¼ã€é¢ è¦†äº†å‰åç«¯å›¢é˜Ÿçš„é€šä¿¡æ–¹å¼ï¼Œä½¿å¾—ä»–ä»¬å¯ä»¥æ›´é¡ºç•…è€Œé«˜æ•ˆåœ°åä½œã€‚</p>
<p>æ­£å¦‚Samer Bunaåœ¨å…¶è‘—ä½œ <a href="https://wangwei1237.gitee.io/shares/GraphQL_in_Action.pdf">ã€ŠGraphQL in Actionã€‹</a> ä¸­çš„åºè¨€ä¸­æ‰€è¯´çš„é‚£æ ·<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼š</p>
<blockquote>
<p>æ—©åœ¨ 2015 å¹´ï¼ŒFacebook é¦–æ¬¡å®£å¸ƒ GraphQL é¡¹ç›®æ—¶ï¼Œæˆ‘ç¬¬ä¸€æ¬¡å¬è¯´äº† GraphQLï¼Œé‚£ä¸ªæ—¶å€™ GraphQL å°±æ·±æ·±çš„å¸å¼•äº†æˆ‘ã€‚å¹¶ä¸”ï¼Œå­¦ä¹  GraphQL æ˜¯æˆ‘åšè¿‡çš„æœ€å¥½çš„æ—¶é—´æŠ•èµ„ä¹‹ä¸€ã€‚</p>
</blockquote>
<p>æœ€è¿‘ï¼Œåœ¨ä¸æ–­çš„äº†è§£ã€å­¦ä¹ ã€ä½¿ç”¨ GraphQL ä¹‹åï¼Œæˆ‘ä¹Ÿåƒ Samer Buna ä¸€æ ·ï¼Œè¢« GraphQL æ·±æ·±çš„å¸å¼•äº†ã€‚</p>
<span id="more"></span>
<h2 id="graphqlç®€ä»‹">GraphQLç®€ä»‹</h2>
<p>å…³äº GraphQL çš„ä»‹ç»ï¼Œç½‘ä¸Šå·²ç»æœ‰éå¸¸å¤šçš„èµ„æ–™äº†ï¼Œè¿™é‡Œä¸å†è¿‡å¤šæè¿°ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ <a href="https://graphql.cn/">GraphQL.org</a><sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ï¼Œ<a href="https://docs.github.com/en/graphql">GitHub GraphQL Docs</a><sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>ï¼Œä»¥åŠ <a href="https://wangwei1237.gitee.io/shares/GraphQL_in_Action.pdf">GraphQL in Action</a>ã€‚</p>
<h2 id="graphql-vs-rest">GraphQL vs. REST</h2>
<p>å…³äº GraphQL å’Œ REST ä¹‹é—´çš„è¯¦ç»†å¯¹æ¯”ï¼Œæˆ‘è®¤ä¸ºå¯ä»¥å‚è€ƒ <a href="https://www.apollographql.com/blog/graphql/basics/graphql-vs-rest/">GraphQL vs. REST</a> ä»¥åŠ <a href="https://www.howtographql.com/basics/1-graphql-is-the-better-rest/">GraphQL is the better REST</a>ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°äº†<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup> <sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup>ã€‚</p>
<h2 id="graphql-çš„ä¼˜åŠ¿">GraphQL çš„ä¼˜åŠ¿</h2>
<p>åœ¨  <a href="https://wangwei1237.gitee.io/shares/GraphQL_in_Action.pdf">ã€ŠGraphQL in Actionã€‹</a> ä¸­ï¼Œä½œè€…å¯¹ GraphQL çš„ä¼˜ç¼ºç‚¹åšäº†å¾ˆå…¨é¢çš„ä»‹ç»ï¼›åœ¨ <a href="https://graphql.org/">GraphQL çš„ç¤¾åŒºç½‘ç«™</a> ä¸Šï¼Œä¹Ÿå¯¹ GraphQL çš„ä¼˜ç‚¹åšäº†å…¨é¢çš„ä»‹ç»ï¼›ç”šè‡³ï¼Œå¯ä»¥ç”¨æœç´¢å¼•æ“æœç´¢å‡ºä¸€å † GraphQL ç›¸å…³çš„æ–‡ç« å’Œèµ„æºâ€¦â€¦</p>
<p>ä½†æ˜¯ï¼Œä½œä¸ºä¸€ä¸ªåˆšæ¥è§¦ GraphQL çš„é—¨å¤–æ±‰ï¼Œæˆ‘è¿˜æ˜¯å¸Œæœ›å†™ä¸€å†™è‡ªå·±å­¦ä¹  GraphQL ä¹‹åçš„æ„Ÿæƒ³ï¼Œå°¤å…¶æ˜¯æˆ‘è§‰çš„ GraphQL é‚£äº›èƒ½è®©æˆ‘æ¿€åŠ¨æ— æ¯”çš„ç‰¹æ€§ã€‚</p>
<h4 id="graphql-çš„å¼ºç±»å‹ç³»ç»Ÿ">GraphQL çš„å¼ºç±»å‹ç³»ç»Ÿ</h4>
<p>åœ¨ GraphQL ä¸­ï¼Œç±»å‹ç³»ç»Ÿç”¨äºæè¿° GraphQL Server çš„èƒ½åŠ›å¹¶ç”¨äºåˆ¤æ–­ä¸€ä¸ªæŸ¥è¯¢æ˜¯å¦æœ‰æ•ˆã€‚ç±»å‹ç³»ç»Ÿè¿˜æè¿°äº†æŸ¥è¯¢å‚æ•°çš„è¾“å…¥ç±»å‹ï¼Œå¹¶åœ¨ GraphQL Runtime ä¸­æ£€æŸ¥å‚æ•°å€¼çš„æœ‰æ•ˆæ€§ã€‚</p>
<p>ä¸€ä¸ª GraphQL æœåŠ¡æ˜¯é€šè¿‡å®šä¹‰<code>ç±»å‹</code>å’Œ<code>ç±»å‹</code>ä¸Šçš„<code>å­—æ®µ</code>æ¥åˆ›å»ºçš„ï¼Œç„¶åç»™æ¯ä¸ª<code>ç±»å‹</code>ä¸Šçš„æ¯ä¸ª<code>å­—æ®µ</code>æä¾›<code>è§£æå‡½æ•°</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ <a href="https://docs.github.com/en/graphql/overview/explorer">Github GraphQL Server</a> ä¸­ï¼Œä½¿ç”¨ <code>viewer</code> å­—æ®µæ¥æè¿°å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼Œè€Œ <code>viewer</code> çš„<code>ç±»å‹</code>ä¸º <code>User</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">  viewer: User!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type User &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  location: <span class="built_in">String</span></span><br><span class="line">  login: <span class="built_in">String</span>!</span><br><span class="line">  name: <span class="built_in">String</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€æ—¦å¯åŠ¨æŸä¸ª GraphQL Serverï¼Œå®ƒå°±èƒ½æ¥æ”¶ GraphQL æŸ¥è¯¢ï¼Œå¹¶éªŒè¯å’Œæ‰§è¡Œè¯¥æŸ¥è¯¢ã€‚GraphQL Server é¦–å…ˆä¼šæ£€æŸ¥è¯¥æŸ¥è¯¢ä»¥ç¡®ä¿å®ƒåªå¼•ç”¨äº†å·²å®šä¹‰çš„<code>ç±»å‹</code>å’Œ<code>å­—æ®µ</code>ï¼Œç„¶åè¿è¡ŒæŒ‡å®šçš„<code>è§£æå‡½æ•°</code>æ¥ç”Ÿæˆç»“æœã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <a href="https://docs.github.com/en/graphql/overview/explorer">Github GraphQL Server</a> ä¸­è¿è¡Œå¦‚ä¸‹çš„æŸ¥è¯¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query &#123; </span><br><span class="line">  viewer &#123; </span><br><span class="line">    login</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»å¦‚ä¸Šçš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼ŒGraphQL å®é™…ä¸Šæ˜¯ä¸€ç§å¼ºç±»å‹çš„ APIã€‚ä¸ä½¿ç”¨æ™®é€šçš„ REST API ç›¸æ¯”ï¼Œå¼ºç±»å‹ç³»ç»Ÿæ˜¯ GraphQL æœ€å¸å¼•æˆ‘çš„åœ°æ–¹ä¹‹ä¸€ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œæ­£æ˜¯ GraphQL å¼ºç±»å‹çš„ç‰¹æ€§ï¼Œå¼€åˆ›äº† API çš„æ–°å¤©åœ°ã€‚</p>
<p>åœ¨æˆ‘çœ‹æ¥ï¼ŒREST API ç¼ºä¹<code>ç±»å‹ç³»ç»Ÿ</code>ç‰¹æ€§åœ¨å¼€å‘ä¸­ä¼šå¼•å…¥å¾ˆå¤šçš„é—®é¢˜ï¼Œå·¥ä½œä¸­ï¼Œæˆ‘ç»å¸¸ä¼šé‡åˆ°å¦‚ä¸‹çš„æƒ…å†µï¼š</p>
<ul>
<li>ä¸Šæ¸¸æœåŠ¡ä¿®æ”¹äº† REST API çš„å­—æ®µç±»å‹è€Œæœªå‘¨çŸ¥ä¸‹æ¸¸æ¶ˆè´¹è€…å¯¼è‡´ä¸‹æ¸¸æœåŠ¡å¼‚å¸¸ç”šè‡³å´©æºƒ</li>
<li>æœåŠ¡ç«¯æœªè¿”å›ç‰¹å®šå­—æ®µå¯¼è‡´å®¢æˆ·ç«¯å´©æºƒ</li>
<li>å®¢æˆ·ç«¯è¯·æ±‚å‚æ•°å¼‚å¸¸ï¼Œå¯¼è‡´æœåŠ¡ç«¯çš„é”™è¯¯ç‡ä¸Šå‡</li>
<li>åˆ°å¤„æ‰¾å€Ÿå£æ–‡æ¡£ï¼Œå¥½ä¸å®¹æ˜“æ‰¾åˆ°äº†å¿½ç„¶å‘ç°ï¼Œæ¥å£æ–‡æ¡£å’Œæ¥å£çš„è¿”å›å¹¶ä¸ä¸€è‡´ï¼Œæ–‡æ¡£å¤ªæ»åäº†</li>
<li>â€¦â€¦</li>
</ul>
<p>å¦‚æœæœ‰ä¸€ä¸ªç±»å‹ç³»ç»Ÿè¿›è¡Œçº¦æŸï¼Œåˆ™æƒ…å†µä¼šå˜çš„æ›´å¥½ä¸€ç‚¹ã€‚å› æ­¤ï¼Œé’ˆå¯¹äº json æ ¼å¼çš„ REST API è€Œè¨€ï¼Œå¼€å§‹å‡ºç°ç±»ä¼¼ <a href="https://swagger.io/tools/swagger-ui/">Swagger UI</a> è¿™æ ·çš„å·¥å…·ï¼Œåˆ©ç”¨ <a href="https://json-schema.org/">Json Schema</a> æ¥å¼ºåŒ–å…¶ç±»å‹ç³»ç»Ÿã€‚è™½ç„¶å¦‚æ­¤ï¼Œä½†æ˜¯ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼ŒåŸºäº Json Schema çš„ REST API ç±»å‹ç³»ç»Ÿä»…ä»…æ˜¯ä¸€ä¸ªè§„èŒƒå’Œå»ºè®®è€Œå·²ï¼Œå›¢é˜Ÿä¸­çš„å…¶ä»–äººä¸ä½¿ç”¨ä¹Ÿæ²¡åŠæ³•ã€‚ä½†æ˜¯ï¼ŒGraphQL çš„ç±»å‹ç³»ç»Ÿæ˜¯å…¶æ ¹åŸºï¼Œæ‰€æœ‰äººå¿…é¡»éµå®ˆï¼Œè¿™å°±åœ¨å¤§å®¶å¯¹æ¥å£æè¿°å½¢æˆç»Ÿä¸€è®¤è¯†ä¸Šå‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚</p>
<p>åŒæ ·çš„é“ç†ï¼Œå¯¹äº <a href="https://github.com/Tencent/rapidjson/">rapidjson</a> è€Œè¨€ï¼Œä» v1.1 ç‰ˆæœ¬å¼€å§‹ï¼Œä¹ŸåŠ å…¥äº† JSON Schema åŠŸèƒ½ï¼Œä½¿å…¶å¯ä»¥åœ¨è§£ææˆ–ç”Ÿæˆ JSON æ—¶è¿›è¡Œæ ¡éªŒï¼Œä»¥é¿å…ç±»å‹é”™è¯¯çš„ json è€Œå¯¼è‡´çš„è§£ææ—¶å´©æºƒé—®é¢˜çš„å‘ç”Ÿã€‚</p>
<p>å¼±ç±»å‹è¯­è¨€å¼•å…¥ç±»å‹ç³»ç»Ÿä¹Ÿå˜å¾—è¶Šæ¥è¶Šæµè¡Œï¼Œä¾‹å¦‚å¾®è½¯çš„ <a href="https://www.typescriptlang.org/">TypeScript</a>ï¼ŒPHP7 çš„ <a href="https://www.php.net/manual/en/language.types.declarations.php">å¼ºç±»å‹æ¨¡å¼</a>ï¼Œè¿˜æœ‰ Facebook å¼€å‘çš„ <a href="https://hacklang.org/">Hackè¯­è¨€</a>â€¦â€¦</p>
<p>å¼±ç±»å‹è¯­è¨€ï¼Œçœ‹ä¼¼æ— æ‹˜æ— æŸï¼Œå®åˆ™å……æ»¡äº†æ··ä¹±ä¸å±é™©ï¼›å¼ºç±»å‹è¯­è¨€ï¼Œçœ‹ä¼¼ç”»åœ°ä¸ºç‰¢ï¼Œå®åˆ™æ˜¯å¦ä¸€ç§è‡ªç”±ã€‚åœ¨ GraphQL ç±»å‹ç³»ç»Ÿçš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç²¾ç¡®çš„æè¿°æˆ‘ä»¬çš„æ¥å£æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥åšåˆ°æ•°æ®æè¿°å’Œæ¥å£å®Œå…¨å¯¹åº”ã€‚è¿™ç§èƒ½åŠ›å¯¹äºå¤§å‹ã€å¤šäººåä½œå¼å›¢é˜Ÿè€Œè¨€ï¼Œè‡³å…³é‡è¦ã€‚å°¤å…¶æ˜¯å¾®æœåŠ¡ç››è¡Œçš„ä»Šå¤©ï¼Œæˆ‘è®¤ä¸ºï¼ŒGraphQL çš„å¼ºç±»å‹ç³»ç»Ÿä¸ºå¾®æœåŠ¡äº¤äº’æä¾›äº†æ–°çš„æ´»åŠ›ã€‚</p>
<h4 id="æˆ‘çš„åœ°ç›˜å¬æˆ‘çš„-ä»…è¦æˆ‘æ‰€éœ€">æˆ‘çš„åœ°ç›˜å¬æˆ‘çš„ï¼Œä»…è¦æˆ‘æ‰€éœ€</h4>
<p>åœ¨ GraphQL ä¸­ï¼ŒGraphQL Runtime ç¡®å®š GraphQL Server å¯ä»¥æä¾›çš„èƒ½åŠ›ï¼Œè€Œæ¶ˆè´¹ç«¯å…·ä½“è¦è·å–å“ªäº›æ•°æ®åˆ™å®Œå…¨ç”±æ¶ˆè´¹è€…è¯´äº†ç®—ã€‚å¯¹äºä¸‹æ¸¸æ¶ˆè´¹è€…è€Œè¨€çœŸæ­£åšåˆ°äº†ï¼šæˆ‘çš„åœ°ç›˜ï¼Œå¬æˆ‘çš„ï¼åªè¦æˆ‘æ‰€è¦çš„ï¼Œä¸å¤šä¹Ÿä¸å°‘ï¼</p>
<p>ä¹‹æ‰€ä»¥è¯´ GraphQL æ˜¯é©å‘½æ€§çš„æ–°æŠ€æœ¯ï¼Œæˆ‘è§‰å¾—å°±åœ¨äºæ­¤ã€‚GraphQL æ”¹å˜äº†æœåŠ¡ä¹‹é—´äº¤äº’çš„æ–¹å¼ï¼Œè®©é€šä¿¡åŒæ–¹åœ¨äº¤äº’çš„è¿‡ç¨‹ä¸­æ›´åŠ å¹³ç­‰ï¼Œæ”¹å˜äº†ä¹‹å‰å“åº”æ•°æ®å®Œå…¨ç”± Server ç«¯è¯´äº†ç®—çš„å±€é¢ã€‚å¦‚ä»Šï¼Œåœ¨ GraphQL ä¸­ï¼Œå®¢æˆ·ç«¯ï¼ˆæ¶ˆè´¹ç«¯ï¼‰å¯ä»¥ä»¥æ›´åŠ å¹³ç­‰çš„åœ°ä½ï¼Œæ›´åŠ ç§¯æçš„å‚ä¸åˆ°æ•´ä¸ªçš„æ•°æ®äº¤äº’è¿‡ç¨‹ã€‚</p>
<p>å€ŸåŠ©äº GraphQL çš„ç±»å‹ç³»ç»Ÿï¼Œå®¢æˆ·ç«¯å¯ä»¥æ›´åŠ è‡ªç”±çš„æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥è·å¾—è‡ªå·±çš„æ‰€éœ€ï¼Œè€Œæ— éœ€æ”¶åˆ° Server ç«¯çš„é™åˆ¶ã€‚</p>
<p>åœ¨æˆ‘çš„ä¸ªäººåšå®¢ç«™ç‚¹ä¸­ï¼Œæˆ‘é‡‡ç”¨ <a href="https://docs.github.com/en/actions">github action</a> æ¥ç¼–è¯‘å¹¶å‘å¸ƒç«™ç‚¹å†…å®¹ã€‚ç«™ç‚¹ä¸­ï¼Œä¼šæœ‰å¾ˆå¤šåŸºäº <a href="https://www.gitbook.com/">gitbook</a> çš„ä¹¦ç±ï¼Œå¹¶ä¸”æ¯ä¸€æœ¬ä¹¦éƒ½å¯¹åº”ä¸€ä¸ª github ä»“åº“ã€‚ä¸ºäº†åŠ å¿«ç«™ç‚¹çš„å‘å¸ƒé€Ÿåº¦ï¼Œå¯¹äºæ¯ä¸€æœ¬ä¹¦ç±è€Œè¨€ï¼Œéƒ½ä¼šæå‰ç¼–è¯‘å¹¶ä¸”å°†ç¼–è¯‘äº§ç‰©ç½®äº latest release ä¸­ã€‚åœ¨å‘å¸ƒä¸»ç«™å†…å®¹æ—¶ï¼Œæˆ‘åˆ©ç”¨ <a href="https://github.com/wangwei1237/wangwei1237.github.io_src/blob/master/build_books.sh">build_books.sh</a> è„šæœ¬æ¥è·å–ä¹¦ç±çš„ release äº§ç‰©ã€‚å¦‚æœé‡‡ç”¨REST APIï¼Œåˆ™ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œç›´æ¥è¯·æ±‚å¦‚ä¸‹çš„ <code>end point</code> å³å¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">https:<span class="comment">//api.github.com/repos/wangwei1237/$&#123;BOOKS[i]&#125;/releases/latest</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘åªéœ€è¦å¯¹åº”çš„ <code>assets.browser_download_url</code>å­—æ®µï¼Œä½†æ˜¯ä½¿ç”¨ REST API æˆ‘æ²¡åŠæ³•æ§åˆ¶æ¥å£çš„è¿”å›æ•°æ®ï¼Œå³ä¾¿æˆ‘åªéœ€è¦æŸä¸€ä¸ªå­—æ®µï¼Œæ¥å£è¿˜æ˜¯ä¼šè¿”ç»™æˆ‘æ‰€æœ‰çš„æ•°æ®ã€‚</p>
<p>è€Œå¦‚æœä½¿ç”¨ GraphQLï¼Œæˆ‘å°±å¯ä»¥è‡ªå·±è¯´äº†ç®—äº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// GraphQL Query</span></span><br><span class="line">query <span class="function"><span class="title">getBooksAssetUrl</span>(<span class="params">$repo: <span class="built_in">String</span>!, $owner: <span class="built_in">String</span>!</span>)</span> &#123; </span><br><span class="line">  <span class="function"><span class="title">repository</span>(<span class="params">name: $repo, owner: $owner</span>)</span> &#123;</span><br><span class="line">    latestRelease &#123;</span><br><span class="line">      <span class="function"><span class="title">releaseAssets</span>(<span class="params">first: <span class="number">1</span></span>)</span> &#123;</span><br><span class="line">        nodes &#123;</span><br><span class="line">          downloadUrl</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Query Variables</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;repo&quot;</span>: <span class="string">&quot;monolith-to-microservices&quot;</span>,</span><br><span class="line">  <span class="string">&quot;owner&quot;</span>: <span class="string">&quot;wangwei1237&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Query Response</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;repository&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;latestRelease&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;releaseAssets&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;nodes&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="string">&quot;downloadUrl&quot;</span>: <span class="string">&quot;https://github.com/wangwei1237/monolith-to-microservices/releases/download/v1.1.1/monolith-to-microservices.tar.gz&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒGraphQL å®Œç¾çš„é¿å…äº†ä¸å¿…è¦çš„æ•°æ®ä¼ è¾“ï¼ˆoverfetchingï¼‰<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup>,å°¤å…¶æ˜¯å¯¹äºå¦‚ä¸‹çš„åœºæ™¯ï¼šæµé‡è¾ƒå¤§ï¼Œç½‘ç»œè¾ƒå·®ï¼Œé’ˆå¯¹ä¸åŒçš„å®¢æˆ·ç«¯è¿”å›ä¸åŒæ•°æ®â€¦â€¦ï¼Œè¿™ä¸ªç‰¹æ€§å°¤ä¸ºé‡è¦ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªç‰¹æ€§æ”¹å˜äº†é€šä¿¡åŒæ–¹çš„è¯è¯­æƒã€‚</p>
<h4 id="ç²¾ç¡®é¢„æµ‹å“åº”æ•°æ®">ç²¾ç¡®é¢„æµ‹å“åº”æ•°æ®</h4>
<p>GraphQL ä¸ä½†æ”¹å˜äº†é€šä¿¡åŒæ–¹çš„è¯è¯­æƒï¼Œè¿˜ä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥ç²¾ç¡®çš„é¢„æµ‹æœåŠ¡ç«¯çš„å“åº”ã€‚åœ¨ä½¿ç”¨ REST API æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©å„ç§ API æ–‡æ¡£æ‰èƒ½<strong>å¤§æ¦‚</strong>é¢„æµ‹è¯·æ±‚çš„å“åº”ï¼Œåœ¨å¼€å‘ä¸­ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä»¶éå¸¸è®¨åŒçš„äº‹æƒ…ã€‚æ— æ³•ç²¾ç¡®çš„é¢„æµ‹è¯·æ±‚çš„å“åº”ï¼Œè¿™å›ç›´æ¥å¯¼è‡´ä»£ç çš„å®¹é”™æ€§å¤§å¤§æŠ˜æ‰£ã€‚è°èƒ½ç¡®ä¿æ‰€æœ‰çš„æ¥å£çš„æ¥å£æ–‡æ¡£éƒ½ä¼šè¯¦ç»†çš„ç©·ä¸¾æ‰€æœ‰æƒ…å†µä¸‹çš„æ¥å£å“åº”å‘¢ï¼Ÿæ®æˆ‘çš„ç»éªŒè€Œè¨€ï¼Œå¾ˆéš¾â€¦â€¦</p>
<p>å½“æˆ‘è¯·æ±‚ä¸€ä¸ªæ²¡æœ‰ release äº§ç‰©çš„çš„ä»“åº“æ—¶ï¼Œæ ¹æ® GraphQL çš„ç±»å‹ç³»ç»Ÿï¼Œæˆ‘ä¼šé¢„æµ‹åˆ°ï¼Œæ­¤æ—¶ GraphQL ä¼šè¿”å› nullï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// latestRelease type</span></span><br><span class="line">latestRelease: Release</span><br><span class="line"></span><br><span class="line"><span class="comment">// Query Variables</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;repo&quot;</span>: <span class="string">&quot;wangwei1237.github.io&quot;</span>,</span><br><span class="line">  <span class="string">&quot;owner&quot;</span>: <span class="string">&quot;wangwei1237&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Query Response</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;repository&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;latestRelease&quot;</span>: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="graphql-api-çš„ç‰ˆæœ¬æ§åˆ¶">GraphQL API çš„ç‰ˆæœ¬æ§åˆ¶</h4>
<p>å¯¹äº API çš„ç‰ˆæœ¬æ§åˆ¶è€Œè¨€ï¼ŒGraphQL å€Ÿé‰´äº†å…¶ä»–è¯­è¨€ä¸­çš„ <code>@deprecatedæ³¨è§£</code>ã€‚å¦‚æœç»å—è¿‡ REST API çš„ç‰ˆæœ¬æ§åˆ¶ä¹‹ç—›ï¼Œç»å—è¿‡é‚£äº› v1ï¼Œv2ï¼Œâ€¦â€¦ï¼Œé‚£ä¹ˆä½ ä¹Ÿä¼šåƒæˆ‘ä¸€æ ·ï¼Œå–œæ¬¢ GraphQL æä¾›çš„è¿™ä¸€ç‰¹æ€§ã€‚</p>
<p>æ‘˜å½•Samer Bunaåœ¨ <a href="https://wangwei1237.gitee.io/shares/GraphQL_in_Action.pdf">ã€ŠGraphQL in Actionã€‹</a> ä¸­çš„ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">  hello: <span class="built_in">String</span></span><br><span class="line">  currentTime: <span class="built_in">String</span></span><br><span class="line">  sumNumbersInRange(begin: Int!, end: Int!): Int! @deprecated(reason: <span class="string">&quot;use new fields numbersInRange&quot;</span>)</span><br><span class="line">  numbersInRange(begin: Int!, end: Int!): NumbersInRange!</span><br><span class="line">  taskMainList: [Task!]</span><br><span class="line">  taskInfo(taskId: ID!): Task!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;Aggregate info on a range numbers&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line">type NumbersInRange &#123;</span><br><span class="line">  sum: Int!</span><br><span class="line">  count: Int!</span><br><span class="line">  avg: Float!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äº <code>sumNumbersInRange</code> å­—æ®µï¼Œä½¿ç”¨ <code>@deprecated</code> æ ‡å¿—è¯¥å­—æ®µæ˜¯åºŸå¼ƒå­—æ®µï¼Œå¹¶ä¸”åˆ©ç”¨ <code>reason</code> å‚æ•°æ¥å°†è¯¥åºŸå¼ƒå­—æ®µå’Œæ¨èçš„æ–°å­—æ®µå…³è”èµ·æ¥ã€‚å¦‚æœé…åˆ IDE çš„ä»£ç æ‰«æèƒ½åŠ›ï¼Œå½“åœ¨æ¥å£ä¸­è¯·æ±‚ <code>sumNumbersInRange</code> çš„æ—¶å€™ï¼ŒIDE ç»™å‡ºå¯¹åº”çš„åºŸå¼ƒæç¤ºå’ŒåŸå› ï¼Œé‚£ä¹ˆç»è¿‡ä¸€æ®µæ—¶é—´çš„è¿­ä»£ï¼Œæ ‡è®°ä¸º <code>@deprecated</code> çš„å­—æ®µå°±ä¼šæ…¢æ…¢æ¶ˆå¤±åœ¨äº§å“ä»£ç ä¸­ã€‚è¿™ä¼šä½¿å¾— API çš„ç‰ˆæœ¬ç®¡ç†æ›´åŠ å®¹æ˜“ï¼Œä¹Ÿä½¿å¾—å®¢æˆ·ç«¯æ›´åŠ å®¹æ˜“ç†è§£ API çš„è¿›åŒ–å’Œå‘åå…¼å®¹ã€‚</p>
<p>è€Œä½¿ç”¨ REST API çš„æ—¶å€™ï¼Œåœ¨æ²¡æœ‰è¿™ç§ç±»ä¼¼æœºåˆ¶çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ç»å¸¸ä¼šä½¿ç”¨äº†ä¸Šæ¸¸æœåŠ¡å‡†å¤‡ <code>deprecated</code> çš„å­—æ®µï¼Œå› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡†å¤‡åºŸå¼ƒçš„å­—æ®µä¸å¾—ä¸ä¸ºäº†å…¼å®¹è€Œæ°¸ä¹…çš„ä¿ç•™åœ¨äº†æœåŠ¡ä¹‹ä¸­ã€‚</p>
<p>æˆ‘è§è¿‡ä¸€ä¸ª REST APIï¼Œè¿™ä¸ª API ç»è¿‡å¥½å‡ å¹´çš„å‘å±•ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šè¿”å› 10K+ çš„æ•°æ®ï¼Œå¹¶ä¸”é‡Œé¢æœ‰å¾ˆå¤šå­—æ®µçš„å«ä¹‰åŸºæœ¬ä¸€è‡´ï¼Œåªä¸è¿‡æ˜¯æœ‰äº›å­—æ®µä¸ºäº†å…¼å®¹æŸä¸ªç‰¹å®šçš„éœ€æ±‚è€Œå¢åŠ ã€‚è¿™ä¸ª API ä¸­çš„å­—æ®µè°ä¹Ÿä¸æ•¢åŠ¨ï¼Œèƒ½åšçš„åªèƒ½æ˜¯éšç€éœ€æ±‚çš„å¢åŠ è€Œä¸æ–­çš„å¢åŠ è¯¥ API çš„è§„æ¨¡ã€‚å¼€å‘è¿™ä¸ª API æ˜¯ä¸€ä»¶éå¸¸å¯æ€•çš„äº‹æƒ…ã€‚</p>
<h2 id="å®¢è§‚çœ‹å¾…-graphql-çš„ç¼ºç‚¹">å®¢è§‚çœ‹å¾… GraphQL çš„ç¼ºç‚¹</h2>
<p>æ–°ç”Ÿä¹‹ç‰©ï¼Œå…¶è²Œå¿…ä¸‘ã€‚è™½ç„¶ GraphQL å·²ç»å‘å±•äº†å‡ å¹´ï¼Œä½†æ˜¯å®é™…ä¸Šè€Œè¨€ GraphQL è¿˜ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ–°é¢–çš„æŠ€æœ¯ã€‚æ ¹æ® <a href="https://wangwei1237.gitee.io/shares/GraphQL_in_Action.pdf">ã€ŠGraphQL in Actionã€‹</a> ä¸­çš„ç¬¬ 1.3 èŠ‚çš„ä»‹ç»ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼ŒGraphQL ä»ç„¶æœ‰å¾ˆå¤šçš„é—®é¢˜éœ€è¦è§£å†³ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å®‰å…¨æ€§é—®é¢˜</li>
<li>ç¼“å­˜é—®é¢˜</li>
<li>å­¦ä¹ é—¨æ§›é—®é¢˜</li>
<li>â€¦â€¦</li>
</ul>
<p>è™½ç„¶å¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯è®¤ä¸º GraphQL å¼€åˆ›äº† API äº¤äº’çš„æ–°å¤©åœ°ï¼Œä»£è¡¨ç€æ–°çš„æŠ€æœ¯çš„å‘å±•æ–¹å‘ã€‚å¹¶ä¸”æˆ‘ä¹Ÿå‘ç°ï¼Œç›®å‰æ•´ä¸ª GraphQL ç¤¾åŒºä¹Ÿåœ¨åšå¾ˆå¤šçš„å·¥ä½œæ¥è§£å†³ç›®å‰çš„ä¸€äº›é—®é¢˜ã€‚ä¾‹å¦‚ Facebook ä¸ºäº†è§£å†³ç¼“å­˜é—®é¢˜è€Œå¼€å‘çš„ dataloader åº“ï¼Œ<a href="https://www.apollographql.com/">apollo graphql</a> åœ¨æ¨åŠ¨ GraphQL å·¥ä¸šè½åœ°æ–¹é¢æ‰€åšçš„å„ç§åŠªåŠ›ï¼Œâ€¦â€¦</p>
<p>æ­£å¦‚æˆ‘åœ¨ <a href="/2021/05/01/how-to-improve-the-work-efficiency/">å¦‚ä½•æå‡å·¥ä½œæ•ˆç‡</a> ä¸€æ–‡ä¸­è¯´çš„é‚£æ ·ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬å¿…é¡»è®¤è¯†åˆ°ï¼ŒçŸ­æœŸçœ‹ï¼Œæ–°æŠ€æœ¯ä¼šè§£å†³æˆ‘ä»¬å½“å‰çš„é—®é¢˜ï¼Œä½†æ˜¯æ–°æŠ€æœ¯å¿…ç„¶ä¼šå¼•å…¥æ–°çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ—¶ä¿±è¿›ï¼Œåœ¨æ–°çš„åœºæ™¯ä¸‹ä¸æ–­è§£å†³æ–°æŠ€æœ¯å¸¦æ¥çš„é—®é¢˜ã€‚è¿™æœ‰è¿™æ ·ï¼Œæ‰èƒ½ä¸æ–­çš„æå‡å·¥ä½œæ•ˆç‡ã€‚</p>
<p>æˆ‘ä»¬ä¸èƒ½å› ä¸ºå µè½¦ï¼Œå°±å›é€€åˆ°è‡ªè¡Œè½¦çš„æ—¶ä»£ï¼›æˆ‘ä»¬ä¸èƒ½å› ä¸ºæœ‰å‡å¸ï¼Œå°±å›é€€åˆ°ç‰©ç‰©äº¤æ¢çš„æ—¶ä»£ï¼›â€¦â€¦</p>
</blockquote>
<p>å¹¶ä¸”ï¼Œç›®å‰çœ‹ï¼ŒGraphQL æ­£åœ¨å˜çš„è¶Šæ¥è¶Šæµè¡Œã€‚Postman åšå®¢ç«™ç‚¹çš„ <a href="https://blog.postman.com/postman-v7-2-supports-graphql/">Postman v7.2 Supports GraphQL</a> ä¸­æåˆ°ï¼š</p>
<blockquote>
<p>å¦‚æœæ‚¨ä¸€ç›´åœ¨ç­‰å¾… Postman å¯¹ GraphQL çš„æ”¯æŒï¼Œé‚£ä¹ˆç°åœ¨å¯ä»¥ç»“æŸè¿™ç§ç­‰å¾…äº†ã€‚éšç€ Postman v7.2 çš„å‘å¸ƒï¼ŒPostman å·²ç»æ”¯æŒ GraphQLï¼åœ¨ GitHub ä¸Šï¼Œ<a href="https://github.com/postmanlabs/postman-app-support/issues/1669">GraphQL çš„å†…ç½®æ”¯æŒ</a>ä¸€ç›´æ˜¯æˆ‘ä»¬çš„ç¬¬äºŒå¤§æœ€å—æ¬¢è¿çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¾ˆé«˜å…´å°†è¿™ä¸ªæµè¡Œçš„è§„èŒƒå¼•å…¥ Postman åº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<h2 id="æ˜¯å¦é©¬ä¸Šä½¿ç”¨-graphql">æ˜¯å¦é©¬ä¸Šä½¿ç”¨ GraphQL</h2>
<p>å³ä¾¿å¦‚æ­¤ï¼Œåœ¨ç¡®å®šæ˜¯å¦è¦ä½¿ç”¨ GraphQL æŠ€æœ¯æ—¶ï¼Œéœ€è¦åšè®¤çœŸçš„åˆ†æï¼Œä¸”ä¸å¯ä¸ºäº†è¿½æ–°è€Œé‡‡ç”¨ GraphQLã€‚</p>
<p>å¦‚æœæ‰€æä¾›æœåŠ¡çš„ä¸‹æ¸¸æ¶ˆè´¹è€…è¾ƒå°‘å¹¶ä¸”èŒƒå›´ä¹Ÿè¾ƒå°‘ï¼Œé‚£ä¹ˆè¿˜æ˜¯æ¨èä½¿ç”¨ REST APIã€‚ä½†æ˜¯å¦‚æœæä¾›çš„æœåŠ¡æ˜¯ç±»ä¼¼ Github Open API è¿™æ ·çš„è§„æ¨¡è¾ƒå¤§çš„æœåŠ¡ï¼Œæˆ–è€…ä½¿ç”¨è¯¥æœåŠ¡çš„ä¸‹æ¸¸æ¶ˆè´¹è€…èŒƒå›´è¾ƒå¤§ã€æ•°é‡è¾ƒå¤šï¼Œæˆ‘è®¤ä¸ºé‡‡ç”¨ GraphQL ç¡®å®æ˜¯ä¸Šä¸Šä¹‹é€‰ã€‚</p>
<p>æ€»ä¹‹ï¼Œè¶Šæ˜¯æ¶‰åŠåˆ°å›¢é˜Ÿäº¤äº’å¤šã€å›¢é˜Ÿåä½œå¤šçš„æœåŠ¡ï¼Œæˆ‘è¶Šæ˜¯å»ºè®®é‡‡ç”¨ GraphQLã€‚å› ä¸ºåä½œæœ€å¤æ‚çš„åœ°æ–¹åœ¨äº <code>communication</code>ï¼Œè€Œ GraphQL å°±æ˜¯é©æ–°å¤šæ–¹åä½œçš„ä¸€ç§æ–°æŠ€æœ¯ã€‚å°±åƒä¸‡ç»´ç½‘å½»åº•æ”¹å˜äº†äººç±»ä¸–ç•Œçš„äº¤æµæ–¹å¼ä¸€æ ·ï¼Œæˆ‘æƒ³ï¼ŒGraphQL æ­£åœ¨å½»åº•æ”¹å˜ API çš„äº¤æµæ–¹å¼ï¼Œå°¤å…¶æ˜¯åœ¨å¾®æœåŠ¡æ¶æ„ä¸­<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup> <sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup> <sup class="footnote-ref"><a href="#fn9" id="fnref9">[9]</a></sup>ã€‚</p>
<p><img src="/2021/06/15/Preliminary-Exploration-of-the-GraphQL/2.png" alt></p>
<h2 id="å­¦ä¹ èµ„æº">å­¦ä¹ èµ„æº</h2>
<ul>
<li><a href="https://spec.graphql.cn/">https://spec.graphql.cn/</a></li>
<li><a href="https://graphql.org/">https://graphql.org/</a> or <a href="https://graphql.cn">https://graphql.cn</a></li>
<li><a href="https://graphql.org/swapi-graphql/">https://graphql.org/swapi-graphql/</a></li>
<li><a href="https://docs.github.com/en/graphql">https://docs.github.com/en/graphql</a></li>
<li><a href="https://docs.github.com/en/graphql/overview/explorer">https://docs.github.com/en/graphql/overview/explorer</a></li>
<li><a href="https://www.apollographql.com/docs/">https://www.apollographql.com/docs/</a></li>
<li><a href="https://www.howtographql.com">https://www.howtographql.com</a></li>
<li><a href="https://wangwei1237.gitee.io/shares/GraphQL_in_Action.pdf">https://wangwei1237.gitee.io/shares/GraphQL_in_Action.pdf</a></li>
<li><a href="https://github.com/graphql/graphql-playground">https://github.com/graphql/graphql-playground</a></li>
</ul>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>Samer Buna. GraphQL in Action. Manning Publications, March 9, 2021. <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://graphql.org/">https://graphql.org/</a>, <a href="https://graphql.cn/">https://graphql.cn/</a>. <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn3" class="footnote-item"><p><a href="https://docs.github.com/en/graphql">Github Docs: GitHub GraphQL API</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn4" class="footnote-item"><p><a href="https://www.apollographql.com/blog/graphql/basics/graphql-vs-rest/">GraphQL vs. REST</a>. <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn5" class="footnote-item"><p><a href="https://www.howtographql.com/basics/1-graphql-is-the-better-rest/">GraphQL is the better REST</a> <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn6" class="footnote-item"><p><a href="https://www.prisma.io/blog/top-5-reasons-to-use-graphql-b60cfa683511">Reasons to use GraphQL | Top 5 Reasons Why and How to use GraphQL</a> <a href="#fnref6" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn7" class="footnote-item"><p><a href="https://www.cloudbees.com/blog/graphql-as-an-api-gateway-to-micro-services">GraphQL as an API Gateway to Microservices</a> <a href="#fnref7" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn8" class="footnote-item"><p><a href="https://www.infoq.com/news/2021/03/netflix-graphql-microservices/">Netflix Embraces GraphQL Microservices for Rapid Application Development</a> <a href="#fnref8" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn9" class="footnote-item"><p><a href="https://netflixtechblog.com/beyond-rest-1b76f7c20ef6">Beyond RESTâ€”â€”Rapid Development with GraphQL Microservices</a> <a href="#fnref9" class="footnote-backref">â†©ï¸</a></p>
</li>
</ol>
</section>
]]></content>
      <categories>
        <category>GraphQL</category>
      </categories>
      <tags>
        <tag>GraphQL</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸åŒåˆ†è¾¨ç‡è§†é¢‘çš„æ¨èç ç‡</title>
    <url>/2021/05/28/Recommended-video-bitrates-for-different-resolutions/</url>
    <content><![CDATA[<p>è§†é¢‘çš„æ¸…æ™°åº¦ä¼šå—åˆ°å¤šç§å› ç´ çš„å½±å“ï¼šåˆ†è¾¨ç‡ï¼Œå¸§ç‡ï¼Œè‰²æ·±â€¦â€¦å¯¹äºUGCç±»å‹çš„è§†é¢‘ä¸šåŠ¡è€Œè¨€ï¼Œä¸ºäº†ä¿è¯æ•´ç«™è§†é¢‘çš„è´¨é‡ï¼Œéœ€è¦å¯¹ç”¨æˆ·ä¸Šä¼ çš„è§†é¢‘è´¨é‡è¿›è¡Œä¸€ç‚¹çš„åˆ¤æ–­ã€‚è™½ç„¶ä¸æ˜¯ç»å¯¹å‡†ç¡®ï¼Œä½†æ˜¯ï¼Œç ç‡ä¹Ÿæ˜¯ä¸€ç§ç›¸å¯¹æœ‰æ•ˆçš„è¯„ä¼°æŒ‡æ ‡ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p><img src="/2021/05/28/Recommended-video-bitrates-for-different-resolutions/1.png" alt></p>
<p>åœ¨YouTubeçš„å¸®åŠ©æ–‡æ¡£ä¸­ï¼Œå°±æä¾›äº†ä¸€ä»½å»ºè®®ç”¨äºæŒ‡å¯¼ç”¨æˆ·è®¾ç½®å…¶ä¸Šä¼ çš„è§†é¢‘çš„ç¼–ç å‚æ•°<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ã€‚æœ¬æ–‡å¯¹ç ç‡çš„æ¨èæ•°æ®è¿›è¡Œäº†æ‘˜å½•ã€‚</p>
<span id="more"></span>
<h2 id="sdrè§†é¢‘çš„æ¨èç ç‡">SDRè§†é¢‘çš„æ¨èç ç‡</h2>
<table>
<thead>
<tr>
<th style="text-align:left">Type</th>
<th style="text-align:left">Video Bitrate <br> æ ‡å‡†å¸§ç‡(24, 25, 30) <br> ç¼–ç å™¨(H264)</th>
<th style="text-align:left">Video Bitrate <br> é«˜å¸§ç‡(48, 50, 60) <br> ç¼–ç å™¨(H264)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">2160p (4K)</td>
<td style="text-align:left">35â€“45 Mbps</td>
<td style="text-align:left">53â€“68 Mbps</td>
</tr>
<tr>
<td style="text-align:left">1440p (2K)</td>
<td style="text-align:left">16 Mbps</td>
<td style="text-align:left">24 Mbps</td>
</tr>
<tr>
<td style="text-align:left">1080p</td>
<td style="text-align:left">8 Mbps</td>
<td style="text-align:left">12 Mbps</td>
</tr>
<tr>
<td style="text-align:left">720p</td>
<td style="text-align:left">5 Mbps</td>
<td style="text-align:left">7.5 Mbps</td>
</tr>
<tr>
<td style="text-align:left">480p</td>
<td style="text-align:left">2.5 Mbps</td>
<td style="text-align:left">4 Mbps</td>
</tr>
<tr>
<td style="text-align:left">360p</td>
<td style="text-align:left">1 Mbps</td>
<td style="text-align:left">1.5 Mbps</td>
</tr>
</tbody>
</table>
<h2 id="hdrè§†é¢‘çš„æ¨èç ç‡">HDRè§†é¢‘çš„æ¨èç ç‡</h2>
<table>
<thead>
<tr>
<th style="text-align:left">Type</th>
<th style="text-align:left">Video Bitrate <br> æ ‡å‡†å¸§ç‡(24, 25, 30) <br> ç¼–ç å™¨(H264)</th>
<th style="text-align:left">Video Bitrate <br> é«˜å¸§ç‡(48, 50, 60) <br> ç¼–ç å™¨(H264)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">2160p (4K)</td>
<td style="text-align:left">44â€“56 Mbps</td>
<td style="text-align:left">66â€“85 Mbps</td>
</tr>
<tr>
<td style="text-align:left">1440p (2K)</td>
<td style="text-align:left">20 Mbps</td>
<td style="text-align:left">30 Mbps</td>
</tr>
<tr>
<td style="text-align:left">1080p</td>
<td style="text-align:left">10 Mbps</td>
<td style="text-align:left">15 Mbps</td>
</tr>
<tr>
<td style="text-align:left">720p</td>
<td style="text-align:left">6.5 Mbps</td>
<td style="text-align:left">9.5 Mbps</td>
</tr>
<tr>
<td style="text-align:left">480p</td>
<td style="text-align:left">Not supported</td>
<td style="text-align:left">Not supported</td>
</tr>
<tr>
<td style="text-align:left">360p</td>
<td style="text-align:left">Not supported</td>
<td style="text-align:left">Not supported</td>
</tr>
</tbody>
</table>
<h2 id="éŸ³é¢‘çš„æ¨èç ç‡">éŸ³é¢‘çš„æ¨èç ç‡</h2>
<table>
<thead>
<tr>
<th style="text-align:left">Type</th>
<th style="text-align:left">Audio Bitrate <br> é‡‡æ ·ç‡(96K/48K HZ) <br> ç¼–ç å™¨(AAC-LC)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Mono</td>
<td style="text-align:left">128 kbps</td>
</tr>
<tr>
<td style="text-align:left">Stereo</td>
<td style="text-align:left">384 kbps</td>
</tr>
<tr>
<td style="text-align:left">5.1</td>
<td style="text-align:left">512 kbps</td>
</tr>
</tbody>
</table>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://www.muvi.com/blogs/video-bitrate-or-resolution-what-makes-video-streaming-better.html">https://www.muvi.com/blogs/video-bitrate-or-resolution-what-makes-video-streaming-better.html</a>. <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://support.google.com/youtube/answer/1722171?hl=en&amp;ref_topic=9257782">https://support.google.com/youtube/answer/1722171?hl=en&amp;ref_topic=9257782</a>. <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p>
</li>
</ol>
</section>
]]></content>
      <categories>
        <category>IVQA</category>
      </categories>
      <tags>
        <tag>ç ç‡</tag>
        <tag>è§†é¢‘æ¸…æ™°åº¦</tag>
      </tags>
  </entry>
  <entry>
    <title>github commit messagesä¸­çš„emojiä½¿ç”¨æŒ‡å—</title>
    <url>/2021/05/05/An-emoji-guide-for-github-commit-messages/</url>
    <content><![CDATA[<p><img src="/2021/05/05/An-emoji-guide-for-github-commit-messages/1.gif" alt></p>
<p>åœ¨git commit messagesä¸­ä½¿ç”¨emojiè¡¨æƒ…å¯ä»¥åŒ…å«å¾ˆå¤šæœ‰ç”¨ä¿¡æ¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿæå‡commit messageçš„é˜…è¯»ä½“éªŒã€‚ä½†æ˜¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨commit messageä¸­ï¼Œemojiä¸èƒ½ä¹±ç”¨ï¼Œå¦åˆ™å®¹æ˜“å¯¼è‡´è¯¯è§£ã€‚ä¸ºäº†è§£é‡Šå¹¶æ ‡å‡†åŒ–commit messageä¸­çš„emojiï¼Œ<a href="https://gitmoji.dev/">Gitmojié¡¹ç›®</a>åº”è¿è€Œç”Ÿã€‚</p>
<p>æˆ‘ä»¬åœ¨commit messageä¸­ä½¿ç”¨emojiçš„æ—¶å€™ï¼Œä¹Ÿåº”è¯¥å°½é‡éµå¾ª<a href="(https://gitmoji.dev/)">Gitmoji</a>çš„è§„èŒƒï¼Œé¿å…å¼•èµ·ä¸å¿…è¦çš„è¯¯ä¼šã€‚</p>
<span id="more"></span>
<p>åœ¨commit messageä¸­ä½¿ç”¨emojiå¯ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿä»…é€šè¿‡emojiå°±å¯ä»¥è½»æ¾ç¡®å®šæ­¤æ¬¡ä»£ç çš„æäº¤æ„å›¾ã€‚</p>
<p><a href="https://gitmoji.dev/">Gitmojié¡¹ç›®</a>ä¸­æè¿°çš„emojiçš„å«ä¹‰å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">è¡¨æƒ…</th>
<th style="text-align:left">emoji</th>
<th style="text-align:left">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ğŸ¨</td>
<td style="text-align:left"><code>:art</code></td>
<td style="text-align:left">æ”¹è¿›ç»“æ„å’Œä»£ç æ ¼å¼</td>
</tr>
<tr>
<td style="text-align:center">âš¡ï¸</td>
<td style="text-align:left"><code>:zap:</code></td>
<td style="text-align:left">ä¼˜åŒ–æ€§èƒ½</td>
</tr>
<tr>
<td style="text-align:center">ğŸ”¥</td>
<td style="text-align:left"><code>:fire:</code></td>
<td style="text-align:left">ç§»é™¤ä»£ç æˆ–æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">ğŸ›</td>
<td style="text-align:left"><code>:bug:</code></td>
<td style="text-align:left">ä¿®å¤ bug</td>
</tr>
<tr>
<td style="text-align:center">ğŸš‘</td>
<td style="text-align:left"><code>:ambulance:</code></td>
<td style="text-align:left">å…³é”®ä¿®è¡¥ç¨‹åº</td>
</tr>
<tr>
<td style="text-align:center">âœ¨</td>
<td style="text-align:left"><code>:sparkles:</code></td>
<td style="text-align:left">å¼•å…¥æ–°åŠŸèƒ½</td>
</tr>
<tr>
<td style="text-align:center">ğŸ“</td>
<td style="text-align:left"><code>:memo:</code></td>
<td style="text-align:left">å¢åŠ æˆ–è€…å‡çº§æ–‡æ¡£</td>
</tr>
<tr>
<td style="text-align:center">ğŸš€</td>
<td style="text-align:left"><code>:rocket:</code></td>
<td style="text-align:left">éƒ¨ç½²æ–°åŠŸèƒ½</td>
</tr>
<tr>
<td style="text-align:center">ğŸ’„</td>
<td style="text-align:left"><code>:lipstick:</code></td>
<td style="text-align:left">å‡çº§ UI å’Œæ ·å¼æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">ğŸ‰</td>
<td style="text-align:left"><code>:tada</code></td>
<td style="text-align:left">åˆæ¬¡æäº¤</td>
</tr>
<tr>
<td style="text-align:center">âœ…</td>
<td style="text-align:left"><code>:white_check_mark:</code></td>
<td style="text-align:left">å¢åŠ æˆ–å‡çº§æµ‹è¯•ç”¨ä¾‹</td>
</tr>
<tr>
<td style="text-align:center">ğŸ”’</td>
<td style="text-align:left"><code>:lock:</code></td>
<td style="text-align:left">ä¿®å¤å®‰å…¨é—®é¢˜</td>
</tr>
<tr>
<td style="text-align:center">ğŸ”–</td>
<td style="text-align:left"><code>:bookmark:</code></td>
<td style="text-align:left">å‘ç‰ˆ/ç‰ˆæœ¬tags</td>
</tr>
<tr>
<td style="text-align:center">ğŸš¨</td>
<td style="text-align:left"><code>:rotating_light:</code></td>
<td style="text-align:left">ä¿®å¤ç¼–è¯‘è­¦å‘Šæˆ–è€…linterè­¦å‘Š</td>
</tr>
<tr>
<td style="text-align:center">ğŸš§</td>
<td style="text-align:left"><code>:construction:</code></td>
<td style="text-align:left">å·¥ä½œåœ¨è¿›è¡Œä¸­</td>
</tr>
<tr>
<td style="text-align:center">ğŸ’š</td>
<td style="text-align:left"><code>:green_heart:</code></td>
<td style="text-align:left">ä¿®å¤ CI æ„å»ºé—®é¢˜</td>
</tr>
<tr>
<td style="text-align:center">â¬‡ï¸</td>
<td style="text-align:left"><code>:arrow_down:</code></td>
<td style="text-align:left">é™çº§ä¾èµ–åº“</td>
</tr>
<tr>
<td style="text-align:center">â¬†ï¸</td>
<td style="text-align:left"><code>:arrow_up:</code></td>
<td style="text-align:left">å‡çº§ä¾èµ–åº“</td>
</tr>
<tr>
<td style="text-align:center">ğŸ“Œ</td>
<td style="text-align:left"><code>:pushpin:</code></td>
<td style="text-align:left">Pin dependencies to specific versions.</td>
</tr>
<tr>
<td style="text-align:center">ğŸ‘·</td>
<td style="text-align:left"><code>:construction_worker:</code></td>
<td style="text-align:left">å¢åŠ æˆ–è€…å‡çº§CIæ„å»ºç³»ç»Ÿ</td>
</tr>
<tr>
<td style="text-align:center">ğŸ“ˆ</td>
<td style="text-align:left"><code>:chart_with_upwards_trend:</code></td>
<td style="text-align:left">å¢åŠ æˆ–å‡çº§åˆ†æä»£ç /è·Ÿè¸ªä»£ç </td>
</tr>
<tr>
<td style="text-align:center">â™»ï¸</td>
<td style="text-align:left"><code>:recycle:</code></td>
<td style="text-align:left">é‡æ„ä»£ç </td>
</tr>
<tr>
<td style="text-align:center">â•</td>
<td style="text-align:left"><code>:heavy_plus_sign:</code></td>
<td style="text-align:left">å¢åŠ ä¾èµ–é¡¹</td>
</tr>
<tr>
<td style="text-align:center">â–</td>
<td style="text-align:left"><code>:heavy_minus_sign:</code></td>
<td style="text-align:left">åˆ é™¤ä¾èµ–é¡¹</td>
</tr>
<tr>
<td style="text-align:center">ğŸ”§</td>
<td style="text-align:left"><code>:wrench:</code></td>
<td style="text-align:left">å¢åŠ æˆ–å‡çº§é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">ğŸ”¨</td>
<td style="text-align:left"><code>:hammer:</code></td>
<td style="text-align:left">å¢åŠ æˆ–æ›´æ–°è„šæœ¬</td>
</tr>
<tr>
<td style="text-align:center">ğŸŒ</td>
<td style="text-align:left"><code>:globe_with_meridians:</code></td>
<td style="text-align:left">å›½é™…åŒ–å’Œæœ¬åœ°åŒ–</td>
</tr>
<tr>
<td style="text-align:center">âœï¸</td>
<td style="text-align:left"><code>:pencil2:</code></td>
<td style="text-align:left">ä¿®å¤é”™åˆ«å­—</td>
</tr>
<tr>
<td style="text-align:center">ğŸ’©</td>
<td style="text-align:left"><code>:poop:</code></td>
<td style="text-align:left">ç¼–å†™äº†éœ€è¦æ”¹è¿›çš„é”™è¯¯ä»£ç </td>
</tr>
<tr>
<td style="text-align:center">âª</td>
<td style="text-align:left"><code>:rewind:</code></td>
<td style="text-align:left">è¿˜åŸå˜æ›´</td>
</tr>
<tr>
<td style="text-align:center">ğŸ”€</td>
<td style="text-align:left"><code>:twisted_rightwards_arrows:</code></td>
<td style="text-align:left">åˆå¹¶åˆ†æ”¯</td>
</tr>
<tr>
<td style="text-align:center">ğŸ“¦</td>
<td style="text-align:left"><code>:package:</code></td>
<td style="text-align:left">å¢åŠ æˆ–æ›´æ–°å·²ç»ç¼–è¯‘çš„æ–‡ä»¶æˆ–package</td>
</tr>
<tr>
<td style="text-align:center">ğŸ‘½</td>
<td style="text-align:left"><code>:alien:</code></td>
<td style="text-align:left">å› ä¸ºå¤–éƒ¨APIçš„æ›´æ”¹è€Œæ›´æ–°ä»£ç </td>
</tr>
<tr>
<td style="text-align:center">ğŸšš</td>
<td style="text-align:left"><code>:truck:</code></td>
<td style="text-align:left">ç§»åŠ¨æˆ–è€…é‡å‘½åèµ„æº(ä¾‹å¦‚ï¼šfiles, paths, routes)</td>
</tr>
<tr>
<td style="text-align:center">ğŸ“„</td>
<td style="text-align:left"><code>:page_facing_up:</code></td>
<td style="text-align:left">å¢åŠ æˆ–æ›´æ–°è®¸å¯æ–‡ä»¶ï¼ˆlicenseï¼‰</td>
</tr>
<tr>
<td style="text-align:center">ğŸ’¥</td>
<td style="text-align:left"><code>:boom:</code></td>
<td style="text-align:left">å¼•å…¥äº†ç ´åæ€§ä¿®æ”¹</td>
</tr>
<tr>
<td style="text-align:center">ğŸ±</td>
<td style="text-align:left"><code>:bento:</code></td>
<td style="text-align:left">å¢åŠ æˆ–æ›´æ–°assets</td>
</tr>
<tr>
<td style="text-align:center">â™¿ï¸</td>
<td style="text-align:left"><code>:wheelchair:</code></td>
<td style="text-align:left">Improve accessibility</td>
</tr>
<tr>
<td style="text-align:center">ğŸ’¡</td>
<td style="text-align:left"><code>:bulb:</code></td>
<td style="text-align:left">åœ¨æºä»£ç ä¸­å¢åŠ æˆ–æ›´æ–°æ³¨é‡Š</td>
</tr>
<tr>
<td style="text-align:center">ğŸ»</td>
<td style="text-align:left"><code>:beers:</code></td>
<td style="text-align:left">Write code drunkenly</td>
</tr>
<tr>
<td style="text-align:center">ğŸ’¬</td>
<td style="text-align:left"><code>:speech_balloon:</code></td>
<td style="text-align:left">Add or update text and literals</td>
</tr>
<tr>
<td style="text-align:center">ğŸ—ƒ</td>
<td style="text-align:left"><code>:card_file_box:</code></td>
<td style="text-align:left">æ‰§è¡Œä¸æ•°æ®åº“ç›¸å…³çš„æ›´æ”¹</td>
</tr>
<tr>
<td style="text-align:center">ğŸ”Š</td>
<td style="text-align:left"><code>:loud_sound:</code></td>
<td style="text-align:left">å¢åŠ æˆ–å‡çº§æ—¥å¿—</td>
</tr>
<tr>
<td style="text-align:center">ğŸ”‡</td>
<td style="text-align:left"><code>:mute:</code></td>
<td style="text-align:left">åˆ é™¤æ—¥å¿—</td>
</tr>
<tr>
<td style="text-align:center">ğŸ‘¥</td>
<td style="text-align:left"><code>:busts_in_silhouette:</code></td>
<td style="text-align:left">Add or update contributor(s).</td>
</tr>
<tr>
<td style="text-align:center">ğŸš¸</td>
<td style="text-align:left"><code>:children_crossing:</code></td>
<td style="text-align:left">æ”¹å–„ç”¨æˆ·ä½“éªŒ/å¯ç”¨æ€§ã€‚</td>
</tr>
<tr>
<td style="text-align:center">ğŸ—</td>
<td style="text-align:left"><code>:building_construction:</code></td>
<td style="text-align:left">è¿›è¡Œæ¶æ„ä¸Šçš„ä¿®æ”¹</td>
</tr>
<tr>
<td style="text-align:center">ğŸ“±</td>
<td style="text-align:left"><code>:iphone:</code></td>
<td style="text-align:left">è¿›è¡Œå“åº”å¼è®¾è®¡</td>
</tr>
<tr>
<td style="text-align:center">ğŸ¤¡</td>
<td style="text-align:left"><code>:clown_face:</code></td>
<td style="text-align:left">Mock things</td>
</tr>
<tr>
<td style="text-align:center">ğŸ¥š</td>
<td style="text-align:left"><code>:egg:</code></td>
<td style="text-align:left">å¢åŠ æˆ–æ›´æ–°èœå•</td>
</tr>
<tr>
<td style="text-align:center">ğŸ™ˆ</td>
<td style="text-align:left"><code>:see_no_evil:</code></td>
<td style="text-align:left">å¢åŠ æˆ–æ›´æ–°.gitignoreæ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:center">ğŸ“¸</td>
<td style="text-align:left"><code>:camera_flash:</code></td>
<td style="text-align:left">æ·»åŠ æˆ–æ›´æ–°å¿«ç…§</td>
</tr>
<tr>
<td style="text-align:center">âš—ï¸</td>
<td style="text-align:left"><code>:alembic:</code></td>
<td style="text-align:left">Perform experiments</td>
</tr>
<tr>
<td style="text-align:center">ğŸ”</td>
<td style="text-align:left"><code>:mag:</code></td>
<td style="text-align:left">æ”¹å–„SEO</td>
</tr>
<tr>
<td style="text-align:center">ğŸ·</td>
<td style="text-align:left"><code>:label:</code></td>
<td style="text-align:left">å¢åŠ æˆ–æ›´æ–°ç±»å‹ï¼ˆtypesï¼‰</td>
</tr>
<tr>
<td style="text-align:center">ğŸŒ±</td>
<td style="text-align:left"><code>:seedling:</code></td>
<td style="text-align:left">å¢åŠ æˆ–æ›´æ–°seed files</td>
</tr>
<tr>
<td style="text-align:center">ğŸš©</td>
<td style="text-align:left"><code>:triangular_flag_on_post:</code></td>
<td style="text-align:left">Add, update, or remove feature flags</td>
</tr>
<tr>
<td style="text-align:center">ğŸ¥…</td>
<td style="text-align:left"><code>:goal_net:</code></td>
<td style="text-align:left">Catch errors</td>
</tr>
<tr>
<td style="text-align:center">ğŸ’«</td>
<td style="text-align:left"><code>:dizzy:</code></td>
<td style="text-align:left">Add or update animations and transitions</td>
</tr>
<tr>
<td style="text-align:center">ğŸ—‘</td>
<td style="text-align:left"><code>:wastebasket:</code></td>
<td style="text-align:left">Deprecate code that needs to be cleaned up</td>
</tr>
<tr>
<td style="text-align:center">ğŸ›‚</td>
<td style="text-align:left"><code>:passport_control:</code></td>
<td style="text-align:left">å¤„ç†ä¸æˆæƒã€è§’è‰²å’Œæƒé™ç›¸å…³çš„ä»£ç </td>
</tr>
<tr>
<td style="text-align:center">âš°ï¸</td>
<td style="text-align:left"><code>:coffin:</code></td>
<td style="text-align:left">åˆ é™¤æ— æ•ˆä»£ç </td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>emoji</tag>
        <tag>commit message</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•æå‡å·¥ä½œæ•ˆç‡</title>
    <url>/2021/05/01/how-to-improve-the-work-efficiency/</url>
    <content><![CDATA[<p><img src="/2021/05/01/how-to-improve-the-work-efficiency/0.jpeg" alt></p>
<blockquote>
<div align="right"> å›å­æ€§éå¼‚ä¹Ÿï¼Œå–„å‡äºç‰©ä¹Ÿã€‚</div>
</blockquote>
<p>å‰å‡ å¤©ï¼Œåœ¨ä¸€æ¬¡ä¼šè®®ä¸Šï¼Œæœ‰åŒå­¦é—®æˆ‘ï¼š<em>å¦‚ä½•æ‰èƒ½æå‡å·¥ä½œæ•ˆç‡ï¼Ÿ</em> å’Œä»¥å¾€çš„ç­”ç–‘ç¯èŠ‚ä¸åŒï¼Œæˆ‘è¿™æ¬¡æ²¡æœ‰ç»™å‡ºæ˜ç¡®çš„ã€é©¬ä¸Šå¯è¡Œçš„æ–¹æ³•ï¼Œç›¸åï¼Œæˆ‘ä»…ä»…æ˜¯ç»™å‡ºäº†è‡ªå·±å¯¹â€œ<em>å¦‚ä½•æå‡å·¥ä½œæ•ˆç‡</em>â€çš„æ€è€ƒã€‚</p>
<p>é‰´äºæ—¶é—´çš„å…³ç³»ï¼Œå½“æ—¶æ²¡æœ‰å±•å¼€æ¥è®²ï¼Œå¯¹å½“æ—¶çš„å†…å®¹è¿›è¡Œäº†æ¢³ç†ã€ä¸°å¯Œå’Œæ‰©å±•ï¼Œå°±å½¢æˆäº†è¿™ç¯‡æ–‡ç« ã€‚</p>
<span id="more"></span>
<h2 id="æ—¥å…‰ä¹‹ä¸‹-å¹¶æ— æ–°äº‹">æ—¥å…‰ä¹‹ä¸‹ï¼Œå¹¶æ— æ–°äº‹</h2>
<blockquote>
<p>å·²æœ‰çš„äº‹ï¼Œåå¿…å†æœ‰ï¼›å·²è¡Œçš„äº‹ï¼Œåå¿…å†è¡Œã€‚æ—¥å…‰ä¹‹ä¸‹ï¼Œå¹¶æ— æ–°äº‹ã€‚</p>
<div align="right">ã€Šåœ£ç»Â·ä¼ é“ä¹¦ã€‹1:9</div>
</blockquote>
<p>å•çº¯å°±å·¥ä½œæ•ˆç‡æå‡è¿™ä»¶äº‹è€Œè¨€ï¼Œç¡®å®ä¹Ÿå¹¶ä¸æ˜¯ä¸€ä»¶æ–°é²œçš„äº‹æƒ…ã€‚æœ‰å¤ªå¤šçš„ä¹¦ç±åœ¨è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯</li>
<li>å“æœ‰æˆæ•ˆçš„ç®¡ç†è€…</li>
<li>ç•ªèŒ„å·¥ä½œæ³•å›¾è§£</li>
<li>â€¦â€¦</li>
</ul>
<p>æˆ‘ä»¬ä¹Ÿç¡®å®å¯ä»¥é€šè¿‡å®è·µè¿™äº›ä¹¦ç±ä¸­çš„å…·ä½“æ–¹æ³•æ¥æå‡è‡ªå·±çš„å·¥ä½œæ•ˆç‡ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬æ¥ä¸‹æ¥ç»§ç»­æ€è€ƒå¦‚ä¸‹çš„é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬åˆå°†å¦‚ä½•å±•å¼€å‘¢ï¼š</p>
<ul>
<li>æˆ‘ä»¬å¦‚ä½•è¿›ä¸€æ­¥æå‡å·¥ä½œæ•ˆç‡ï¼Ÿ</li>
<li>æå‡æ•ˆç‡çš„å¤§æ–¹å‘æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<p><a href="https://book.douban.com/author/1323905/">å¤§å«Â·å…‹é‡Œæ–¯è’‚å®‰</a> çš„â€œå¤§å†å²â€ç†è®ºæŒ‡å‡ºï¼šå¯ä»¥ä¾æ®æ•´ä¸ªäººç±»çš„å‘å±•å†å²å¯¹æœªæ¥å³å°†å‘ç”Ÿçš„ä¸€åˆ‡åšå‡ºåˆç†çš„åˆ¤æ–­ï¼Œç”¨é•¿è¿œçš„ã€æ¯”è¾ƒçš„æ€ç»´æ¥çœ‹å¾…é—®é¢˜ã€‚</p>
<p>äººç±»æ”¹é€ è‡ªç„¶çš„ç¤¾ä¼šæ´»åŠ¨å·²ç»è¿›è¡Œäº†å‡ åƒå¹´ï¼ŒåŒæ—¶æˆ‘ä»¬çš„å·¥ä½œä¹Ÿæ˜¯ä¸€ç§äººç±»æ”¹é€ è‡ªç„¶çš„æ´»åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿ç”¨â€œå¤§å†å²â€ç†è®ºæ¥æ€è€ƒ<em>å¦‚ä½•æå‡å·¥ä½œæ•ˆç‡</em>è¿™ä¸€é—®é¢˜ï¼Ÿ</p>
<h2 id="å¤§å†å²ç†è®º">å¤§å†å²ç†è®º</h2>
<p>å…³äºå¤§å†å²ç†è®ºçš„å…·ä½“å†…å®¹ï¼Œå¯ä»¥å‚è€ƒå¤§å«Â·å…‹é‡Œæ–¯è’‚å®‰çš„è‘—ä½œ <a href="https://item.jd.com/44600326697.html">ã€Šèµ·æº-ä¸‡ç‰©å¤§å†å²ã€‹</a>ã€‚</p>
<div class="douban-card-block">
	<a class="douban-card" href="https://book.douban.com/subject/30428815">
		<div class="douban-card-bgimg" style="background-image: url('https://images.weserv.nl/?url=https://img9.doubanio.com/view/subject/s/public/s32278451.jpg');"></div>
		<div class="douban-card-left">
			<div class="douban-card-img" style="background-image: url('https://images.weserv.nl/?url=https://img9.doubanio.com/view/subject/s/public/s32278451.jpg');"></div>
		</div>
		<div class="douban-card-right" style="line-height: 1.7;">
			<div class="douban-card-item"><span>ä¹¦å: </span><strong>èµ·æº</strong></div>
			<div class="douban-card-item"><span>ä½œè€…: </span><span>[ç¾]å¤§å«Â·å…‹é‡Œæ–¯è’‚å®‰</span></div>
			<div class="douban-card-item"><span>å‡ºç‰ˆå¹´ä»½: </span><span>2019-4-10</span></div>
			<div class="douban-card-item"><span>è¯„åˆ†: </span><span>7.7</span></div>
		</div>
	</a>
</div>
<style>
	.douban-card-block {
		display: flex;
		justify-content: center;
		align-items: center;
		width: 100%;
		max-height: 400px;
	}
	.douban-card {
		display: flex;
		margin: 30px 10px;
		padding: 15px;
		border-radius: 10px;
		position: relative;
		justify-content: center;
		align-items: center;
		overflow: hidden;
		color: antiquewhite;
		text-decoration: none;
	}
	.douban-card:hover {
		text-decoration: none;
	}
	.douban-card-bgimg {
		position: absolute;
		width: 115%;
		height: 115%;
		filter: blur(15px) brightness(0.6);
		background-size: 100%;
		background-position: center;
		background-repeat: no-repeat;
	}
	.douban-card-img {
		position: relative;
		height: 130px;
		width: 80px;
		background-size: 100%;
		background-position: center;
		background-repeat: no-repeat;
	}
	.douban-card-img {
		position: relative;
		height: 130px;
		width: 80px;
	}
	.douban-card-left {
		position: relative;
		display: flex;
		flex-direction: column;
		align-items: center;
	}
	.douban-card-right {
		position: relative;
		display: flex;
		flex-direction: column;
		margin-left: 12px;
		font-size: 16px;
		font-family: 'Courier New', Courier, monospace;
		line-height: 1.3;
		color: antiquewhite;
	}
	.douban-card-item {
		margin-top: 4px;
	}
</style>
<blockquote>
<p>å¤§å†å²å¯ä»¥ä¸ºæˆ‘ä»¬ç†è§£è‡ªå®‡å®™å¤§çˆ†ç‚¸è‡³ä»Šçš„ä¸€åˆ‡å†å²æä¾›æ¡†æ¶ã€‚</p>
<p>é€šå¸¸ï¼Œåœ¨å­¦æ ¡é‡Œï¼Œç§‘å­¦å’Œå†å²æ˜¯åˆ†å¼€æ•™æˆçš„ï¼Œæœ‰ä¸“é—¨çš„ç‰©ç†è¯¾ï¼Œä¹Ÿæœ‰ä¸“é—¨çš„è®²è¿°æ–‡æ˜èµ·æºçš„è¯¾ç¨‹ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¤§å†å²æ‰“ç ´äº†è¿™ä¸€ç•Œé™ã€‚</p>
<p>æ¯å½“æˆ‘å­¦åˆ°æ–°çŸ¥è¯†ï¼Œä¸è®ºæ˜¯ç”Ÿç‰©å­¦ã€å†å²å­¦ï¼Œè¿˜æ˜¯å…¶ä»–ä»»ä½•ä¸€é—¨å­¦ç§‘ï¼Œæˆ‘æ€»æ˜¯ä¼šåŠªåŠ›å°†å®ƒæ”¾ç½®åœ¨å¤§å†å²çš„æ¡†æ¶ä¸­ã€‚</p>
<p>å†ä¹Ÿæ²¡æœ‰å…¶ä»–å…¶ä»–è¯¾ç¨‹ä¼šå¯¹æˆ‘çœ‹å¾…ä¸–ç•Œçš„æ–¹å¼äº§ç”Ÿå¦‚æ­¤ä¹‹å¤§çš„å½±å“ã€‚</p>
<div align="right">â€”â€”æ¯”å°”Â·ç›–èŒ¨</div>
</blockquote>
<p>åœ¨æ¼«é•¿çš„å†å²é•¿æ²³ä¸­ï¼Œäººç±»å…±ç»å†äº†ï¼šæ—§çŸ³å™¨æ—¶ä»£ã€æ–°çŸ³å™¨æ—¶ä»£ã€é’é“œå™¨æ—¶ä»£ã€é“å™¨æ—¶ä»£ã€è’¸æ±½æœºæ—¶ä»£ã€ç”µåŠ›æ—¶ä»£ï¼Œç„¶ååˆ°è¾¾äº†ç›®å‰çš„ä¿¡æ¯æ—¶ä»£ã€‚</p>
<p>å›é¡¾å†å²çš„é•¿æ²³ï¼Œæˆ‘ä»¬å‘ç°ï¼Œäººç±»çš„å‘å±•ä¹Ÿæ˜¯å·¥å…·è¿›åŒ–çš„å†ç¨‹ã€‚æ¯ä¸€æ¬¡å·¥å…·çš„å‡çº§æ¢ä»£ï¼Œéƒ½å½±å“ç€äººç±»ç¤¾ä¼šçš„å‘å±•æ–¹å‘å’Œäººä»¬çš„ç”Ÿæ´»æ–¹å¼ã€‚å„è¡Œå„ä¸šåœ¨æ¯ä¸€æ¬¡å·¥å…·å±‚çº§æå‡åå‘ç”Ÿç€å·¨å¤§çš„å˜åŒ–ï¼Œäººç±»ç”Ÿæ´»çš„èˆ’é€‚ç¨‹åº¦ä¹Ÿéšç€å·¥å…·å±‚çº§çš„ä¸æ–­æå‡è€Œæ”¹å–„ã€‚</p>
<p>å½“å¹´ï¼Œå”ç„å®—ä¸ºäº†åšå¾—ç¾äººä¸€ç¬‘ï¼Œåƒé‡Œå¿«éª‘é€è”æï¼Œæ‰æœ‰äº†â€œ<em>ä¸€éª‘çº¢å°˜å¦ƒå­ç¬‘ï¼Œæ— äººçŸ¥æ˜¯è”ææ¥</em>â€çš„å…¸æ•…ã€‚ç„¶è€Œï¼Œç°åœ¨ï¼Œåœ¨äº¤é€šå·¥å…·ï¼Œç‰©æµæŠ€æœ¯ç­‰é«˜é€Ÿå‘è¾¾çš„ä»Šå¤©ï¼Œåƒä¸Šæ–°é²œçš„è”æå·²ç»ä¸æ˜¯ä»€ä¹ˆéš¾äº‹äº†ã€‚</p>
<p><img src="/2021/05/01/how-to-improve-the-work-efficiency/1.jpeg" alt></p>
<blockquote>
<div align="right"> ä¸€éª‘çº¢å°˜å¦ƒå­ç¬‘ï¼Œæ— äººçŸ¥æ˜¯è”ææ¥ã€‚</div>
</blockquote>
<p>å› æ­¤ï¼Œä»å¤§å†å²ç†è®ºæ–¹é¢æ¥çœ‹ï¼Œæˆ‘è®¤ä¸ºï¼Œæå‡å·¥ä½œæ•ˆç‡çš„æœ¬è´¨æ˜¯â€œ<strong>æå‡å·¥ä½œä¸­æ‰€ä½¿ç”¨çš„å·¥å…·çš„å±‚çº§</strong>â€ã€‚è¿™é‡Œæˆ‘è¯´çš„â€œå·¥å…·â€æ³›æŒ‡æˆ‘ä»¬å·¥ä½œä¸­ä½¿ç”¨çš„å„ç±»æŠ€æœ¯ã€å¹³å°ã€å·¥å…·ã€è„šæœ¬â€¦â€¦</p>
<h2 id="æå‡å·¥å…·çš„å±‚çº§">æå‡å·¥å…·çš„å±‚çº§</h2>
<p>ä»å†å²çš„è¿›ç¨‹çœ‹ï¼Œå·¥å…·çš„æ°´å¹³ååº”ç”Ÿäº§åŠ›æ°´å¹³ï¼Œæ˜¯ç”Ÿäº§åŠ›æ°´å¹³çš„é‡è¦æ ‡å¿—ã€‚å› æ­¤è¦ä»æ ¹æœ¬ä¸Šæå‡å·¥ä½œæ•ˆç‡ï¼Œé¦–è¦çš„è¿˜æ˜¯è¦<strong>æå‡å·¥ä½œä¸­æ‰€ä½¿ç”¨çš„å·¥å…·çš„å±‚çº§</strong>ã€‚</p>
<p>å·¥å…·å±‚çº§ä¸ä½†å½±å“æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ï¼Œæœ‰æ—¶å€™ç”šè‡³ä¼šå†³å®šæˆ‘ä»¬æ˜¯å¦å¯ä»¥å®ŒæˆæŸé¡¹å·¥ä½œã€‚æ­£æ‰€è°“ï¼šæ²¡æœ‰é‡‘åˆšé’»ï¼Œæ‹¦ä¸äº†ç“·å™¨æ´»ï¼Œè¯´çš„å°±æ˜¯è¿™ä¸ªé“ç†ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœç°åœ¨è®©æˆ‘ä»¬ç”¨å¦‚ä¸‹å›¾æ‰€ç¤ºçš„â€œæ‰“å­”å¡â€<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>æ¥ç¼–å†™ç¨‹åºï¼Œæˆ‘ä»¬å¤šé•¿æ—¶é—´èƒ½å†™å‡ºä¸€ä¸ªå¯ä»¥è¾“å‡º <code>hello world</code> çš„ç¨‹åºå‘¢ï¼Ÿè€Œç°åœ¨ï¼Œå€ŸåŠ©æ›´å¯Œæœ‰è¡¨ç°æ€§çš„è¯­è¨€å’Œæ›´é«˜çº§çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡ ç§’å†…å°±å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œä¸æ˜¯å—ï¼Ÿ</p>
<p><img src="/2021/05/01/how-to-improve-the-work-efficiency/2.jpeg" alt></p>
<h2 id="å·¥å…·ä¸å…·ä½“åœºæ™¯ç›¸ç»“åˆ">å·¥å…·ä¸å…·ä½“åœºæ™¯ç›¸ç»“åˆ</h2>
<blockquote>
<p>å¦‚æˆ‘è§£ä½›æ‰€è¯´ä¹‰ï¼Œæ— æœ‰å®šæ³•ï¼Œåé˜¿è€¨å¤šç½—ä¸‰è—ä¸‰è©æï¼›äº¦æ— æœ‰å®šæ³•ï¼Œå¦‚æ¥å¯è¯´ã€‚</p>
<div align="right">â€”â€”ã€Šé‡‘åˆšç»ã€‹</div>
</blockquote>
<p>æ³•æ— å®šæ³•ï¼Œä¸€åˆ‡äº‹ç‰©éƒ½ä¾èµ–äºä¸€å®šçš„å› ç¼˜æˆ–æ¡ä»¶æ‰èƒ½å­˜åœ¨ï¼Œæœ¬èº«æ²¡æœ‰ä»»ä½•è´¨çš„è§„å®šæ€§ã€‚ç”±æ­¤è§‚ä¹‹ï¼Œä¸€åˆ‡çš„æŠ€æœ¯å’Œå·¥å…·ï¼Œéƒ½éœ€è¦ä¾èµ–ä¸€å®šçš„åœºæ™¯æ‰èƒ½å­˜åœ¨ï¼Œè„±ç¦»åœºæ™¯çš„æŠ€æœ¯å’Œå·¥å…·ä¹Ÿä¸èƒ½å‘æŒ¥åº”æœ‰çš„ä½œç”¨ã€‚åŒæ—¶ï¼Œæ³•æ— å®šæ³•è¿˜æé†’æˆ‘ä»¬ï¼šè‡ªå·±çš„è§‰æ‚Ÿæ— æ³•ç§»æ¤ç»™åˆ«äººï¼Œè§‰æ‚Ÿéœ€è¦è¦é è‡ªè¯ã€è‡ªä¿®ã€è‡ªè§‚æ¥ä½“éªŒã€‚</p>
<p><img src="/2021/05/01/how-to-improve-the-work-efficiency/3.jpg" alt></p>
<p>åœ¨å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°è„±ç¦»å…·ä½“åœºæ™¯è€Œæ‰§ç€äºå¼•å…¥æœ€é«˜å±‚çº§çš„å·¥å…·çš„æƒ…å†µï¼Œæˆ‘ç§°è¿™ç§è¡Œä¸ºä¸ºï¼š<strong>æƒŸå·¥å…·è®º</strong>ã€‚</p>
<p>åœ¨ã€ŠMonolith to Microservicesã€‹ä¸€ä¹¦çš„ç¬¬ <a href="/monolith-to-microservices/docs/Understanding_the_Goal.html">2.1èŠ‚</a> ä¸­ï¼Œä½œè€…æåˆ°ï¼š<em>ä¸äº†è§£ç›®æ ‡è¿˜ä¼šè®©æˆ‘ä»¬é¢ä¸´é™·å…¥è´§ç‰©å´‡æ‹œçš„é£é™©ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±ä¼šå‡è®¾ï¼šâ€œå¦‚æœå¾®æœåŠ¡å¯¹ Netflix æœ‰å¥½å¤„ï¼Œé‚£ä¹ˆå¾®æœåŠ¡å¯¹æˆ‘ä»¬ä¹Ÿæœ‰å¥½å¤„ï¼â€</em></p>
<p>ä»¥å‡ºè¡Œæ•ˆç‡ä¸ºä¾‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ±½è½¦çš„å‡ºè¡Œæ•ˆç‡æ¯”è‡ªè¡Œè½¦è¦é«˜ã€‚ä½†æ˜¯å¯¹äºæ—©é«˜å³°å µè½¦æ—¶çš„çŸ­ç¨‹è¡Œç¨‹è€Œè¨€ï¼Œè‡ªè¡Œè½¦çš„æ•ˆç‡è¦è¿œè¿œé«˜äºæ±½è½¦ã€‚</p>
<p>å†ä»¥ä»£ç ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿè€Œè¨€ï¼Œç›®å‰ Git å·²ç»æˆä¸ºç›®å‰æœ€æµè¡Œçš„ä»£ç ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ˜¯å¦æœ‰æ€è€ƒè¿‡ï¼š</p>
<ul>
<li>Git æ˜¯å¦é€‚ç”¨äºæˆ‘ä»¬ï¼Ÿ</li>
<li>å¦‚æœè®©æˆ‘ä»¬ä¸ºå…¬å¸é€‰æ‹©ä¸€æ¬¾ SCMï¼ˆSource Code Managementï¼‰ å·¥å…·ï¼Œæˆ‘ä»¬ä¼šå¦‚ä½•é€‰æ‹©ï¼Ÿæˆ‘ä»¬ä¼šé€‰æ‹© Git å—ï¼Ÿ</li>
</ul>
<p>ä» <a href="https://zhuanlan.zhihu.com/p/368422885">Google å’Œ Facebook ä¸ºä»€ä¹ˆä¸ç”¨ git ç®¡ç†æºç ï¼Ÿ</a> è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å‘ç°ï¼Œè™½ç„¶ Git éå¸¸ä¼˜ç§€ï¼Œä½†æ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œ Git è¿˜æ˜¯æœ‰å…¶å›ºæœ‰çš„é—®é¢˜ã€‚ä»æˆ‘çš„ä½¿ç”¨ç»éªŒè€Œè¨€ï¼Œ Git æ— æ³•åª <code>pull</code> ä»£ç åº“çš„å…¶ä¸­éƒ¨åˆ† path ç‰¹æ€§ç»å¸¸è®©æˆ‘å¿ƒæœ‰çƒ¦æ¼ï¼Œè€Œ Subversion å°±å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬çš„æ ¸å¿ƒç‚¹æ˜¯è¦ä¿è¯åŒä¸€ä¸ªä»£ç ä»“åº“çš„ä¸åŒéƒ¨åˆ†åˆ†å±ä¸åŒè§’è‰²ï¼ˆä¸åŒè§’è‰²å…·æœ‰ä¸åŒæƒé™ï¼‰æ¥ç®¡ç†æ—¶ï¼Œæˆ‘ä»¬è¿˜ä¼šé€‰æ‹© Git å—ï¼Ÿ<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p>
<p>å› æ­¤ï¼Œåœ¨å…·ä½“å·¥å…·çš„ä½¿ç”¨ä¸­ï¼Œä¸èƒ½æƒŸå·¥å…·è®ºï¼Œéœ€è¦ç»“åˆå…·ä½“çš„åœºæ™¯ï¼Œç»“åˆæˆ‘ä»¬è‡ªå·±çš„ç›®æ ‡æ¥ä½¿ç”¨å·¥å…·ã€‚å¦åˆ™ï¼Œå·¥å…·ä¸ä½†æ— æ³•æå‡æ•ˆç‡ï¼Œåè€Œä¼šæˆä¸ºåˆ¶çº¦æ•ˆç‡çš„å› ç´ ã€‚</p>
<h2 id="æ²¡æœ‰å·¥å…·æ˜¯é“¶å¼¹">æ²¡æœ‰å·¥å…·æ˜¯é“¶å¼¹</h2>
<blockquote>
<p>åœ¨æ‰€æœ‰ææ€–æ°‘é—´ä¼ è¯´çš„å¦–æ€ªä¸­ï¼Œæœ€å¯æ€•çš„æ˜¯äººç‹¼ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥å®Œå…¨å‡ºä¹æ„æ–™åœ°ä»ç†Ÿæ‚‰çš„é¢å­”å˜æˆå¯æ€•çš„æ€ªç‰©ã€‚ä¸ºäº†å¯¹ä»˜äººç‹¼ï¼Œæˆ‘ä»¬åœ¨å¯»æ‰¾å¯ä»¥æ¶ˆç­å®ƒä»¬çš„é“¶å¼¹ã€‚</p>
<p>å¤§å®¶ç†Ÿæ‚‰çš„è½¯ä»¶é¡¹ç›®å…·æœ‰ä¸€äº›äººç‹¼çš„ç‰¹æ€§ï¼ˆè‡³å°‘åœ¨éæŠ€æœ¯ç»ç†çœ‹æ¥ï¼‰ï¼Œå¸¸å¸¸çœ‹ä¼¼ç®€å•æ˜äº†çš„ä¸œè¥¿ï¼Œå´æœ‰å¯èƒ½å˜æˆä¸€ä¸ªè½åè¿›åº¦ã€è¶…å‡ºé¢„ç®—ã€å­˜åœ¨å¤§é‡ç¼ºé™·çš„æ€ªç‰©ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¬åˆ°äº†è¿‘ä¹ç»æœ›çš„å¯»æ±‚é“¶å¼¹çš„å‘¼å”¤ï¼Œå¯»æ±‚ä¸€ç§å¯ä»¥ä½¿è½¯ä»¶æˆæœ¬åƒè®¡ç®—æœºç¡¬ä»¶æˆæœ¬ä¸€æ ·é™ä½çš„å°šæ–¹å®å‰‘ã€‚</p>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬çœ‹çœ‹è¿‘åå¹´æ¥çš„æƒ…å†µï¼Œæ²¡æœ‰é“¶å¼¹çš„è¸ªè¿¹ã€‚æ²¡æœ‰ä»»ä½•æŠ€æœ¯æˆ–ç®¡ç†ä¸Šçš„è¿›å±•ï¼Œèƒ½å¤Ÿç‹¬ç«‹åœ°è®¸è¯ºåœ¨ç”Ÿäº§ç‡ã€å¯é æ€§æˆ–ç®€æ´æ€§ä¸Šå–å¾—æ•°é‡çº§çš„æé«˜ã€‚</p>
<div align="right">â€”â€”ã€Šäººæœˆç¥è¯ã€‹ç¬¬16ç« </div>
</blockquote>
<p>ä»å†å²çš„ç»éªŒçœ‹ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ç§æŠ€æœ¯é©æ–°èƒ½å¤Ÿç™¾åˆ†ç™¾çš„è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ç§æŠ€æœ¯é©æ–°èƒ½å¤Ÿåœ¨æ²¡æœ‰ä»»ä½•æˆæœ¬çš„å‰æä¸‹è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•ä¸€ç§æŠ€æœ¯é©æ–°èƒ½å¤Ÿåœ¨ä¸å¼•å…¥æ–°é—®é¢˜çš„æ¡ä»¶ä¸‹è§£å†³æ‰€æœ‰é—®é¢˜ã€‚æ­£å¦‚ Sam Newman åœ¨ <a href="/monolith-to-microservices/docs/What_Are_Microservices.html">ã€ŠMonolith to Microservicesã€‹</a> ä¸€ä¹¦ä¸­è¯´çš„é‚£æ ·ï¼š</p>
<blockquote>
<p>æ­£å¦‚æˆ‘çš„è€åŒäº‹ã€è€æœ‹å‹ã€å¾®æœåŠ¡ä¸“å®¶ James Lewis æ‰€è¯´ï¼šâ€œMicroservices buy you optionsâ€ã€‚</p>
</blockquote>
<p><code>buy</code> è¿™ä¸ªè¯å‘Šè¯«æˆ‘ä»¬ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ç§æŠ€æœ¯é©æ–°æ˜¯å…è´¹çš„ï¼Œæˆ‘ä»¬éƒ½å¿…é¡»ä»˜å‡ºä¸€å®šçš„æˆæœ¬æ‰èƒ½æ¢å–åˆ°æŠ€æœ¯é©æ–°å¸¦æ¥çš„ä¾¿åˆ©ã€‚</p>
<p>ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œæ ¹æ®æˆ‘åœ¨å·¥ä½œä¸­çš„è§‚å¯Ÿï¼Œå¤§å¤šæ•°äººåœ¨å¼•å…¥æ–°æŠ€æœ¯ï¼Œæ–°å·¥å…·çš„æ—¶å€™ï¼Œéƒ½åªæƒ³æå–æ–°æŠ€æœ¯çš„æˆæœï¼Œè€Œä¸æƒ³ä¸ºä¹‹ä»˜å‡ºæ±—æ°´ã€‚</p>
<p>æˆ‘ä»¬è¿˜æ€»æ˜¯è¯¯è§£â€œè‡ªç”±è½¯ä»¶â€çš„å«ä¹‰ã€‚å®é™…ä¸Šï¼Œâ€œè‡ªç”±è½¯ä»¶â€æ˜¯å…³ä¹è‡ªç”±çš„é—®é¢˜ï¼Œä¸ä»·æ ¼æ— å…³ï¼Œè½¯ä»¶å¦‚ä½•å®šä»·å¹¶ä¸å½±å“å®ƒæ˜¯å¦è¢«å½’ç±»ä¸ºè‡ªç”±è½¯ä»¶ã€‚åœ¨è‹±æ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Free Softwareï¼ŒFree ä¸€è¯æ—¢æœ‰è‡ªç”±ï¼Œä¹Ÿæœ‰å…è´¹çš„æ„æ€ã€‚è€Œ Free Software ä¸­çš„ Free æ˜¯æŒ‡â€œè‡ªç”±è¨€è®ºâ€ä¸­çš„è‡ªç”±ï¼Œè€Œéâ€œå…è´¹â€ã€‚<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p>
<p>æˆ‘ä»¬å…è´¹ä»â€œè‡ªç”±è½¯ä»¶â€è·å¾—å…¶ä¾¿åˆ©ï¼Œä½†å´ä¸æƒ³èŠ±æ—¶é—´æ¥è´¡çŒ®è‡ªå·±çš„æƒ³æ³•ï¼Œå¯¼è‡´æˆ‘ä»¬æ‰€ä½¿ç”¨çš„ç‰ˆæœ¬å’Œâ€œç¤¾åŒºâ€ç‰ˆæœ¬ä¹‹é—´çš„å·®è·è¶Šæ¥è¶Šå¤§ï¼Œè¿›è€Œå¯¼è‡´æ— æ³•æŒç»­è·å–æ–°æŠ€æœ¯çš„ä¾¿åˆ©ã€‚ç”šè‡³æœ‰æ—¶å€™ï¼Œå½“å‘å±•åˆ°ä¸€å®šé˜¶æ®µï¼Œæœ€åˆä¸ºäº†è§£å†³é—®é¢˜è€Œå¼•å…¥çš„â€œè‡ªç”±è½¯ä»¶â€ï¼Œåè€Œæˆäº†å½±å“æ•ˆç‡çš„ä¸»è¦å› ç´ ã€‚</p>
<p>æˆ‘ä»¬å…è´¹å¼•å…¥é©æ–°æŠ€æœ¯ï¼Œä½†æ˜¯å´ä¸æƒ³èŠ±è´¹æ—¶é—´æ¥æå‡è‡ªå·±çš„èƒ½åŠ›ã€ç»´æŠ¤æ–°æŠ€æœ¯ã€‚å½“åœ¨ä½¿ç”¨æ–°æŠ€æœ¯é‡åˆ°äº›è®¸é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„è‚Œè‚‰è®°å¿†å°±å¼€å§‹å‘æŒ¥ä¸»å¯¼ä½œç”¨ï¼Œè¿›è€Œå¼€å§‹æ‰“é€€å ‚é¼“ï¼Œå¯¼è‡´åœ¨æŠ€æœ¯é©æ–°ä¸Šå‡ºç°â€œååå¤å¤â€çš„æƒ…å†µã€‚æˆ‘æ‰€ç»å†çš„ä¸åŒå›¢é˜Ÿå¯¹å¾…è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ€åº¦ï¼Œéƒ½æœ‰åŠ›çš„è¯æ˜äº†è¿™ä¸€ç‚¹ã€‚</p>
<p>æˆ‘ä»¬æ€»æƒ³ç€åªè¦å¼•å…¥æŸç§æ–°æŠ€æœ¯ï¼Œæˆ‘ä»¬æ‰€é¢ä¸´çš„é—®é¢˜å°±ä¸€ä¸‹éƒ½è§£å†³äº†ã€‚æˆ‘ä»¬æ€»æƒ³ç€å¯»æ‰¾ä¸€ç§â€œé“¶å¼¹â€æ¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜ã€‚ä»å¤§å†å²ç†è®ºçš„è§‚ç‚¹æ¥çœ‹ï¼Œè¿™æ€ä¹ˆå¯èƒ½ä¼šå®ç°å‘¢ï¼Ÿ</p>
<p>ä¸–ç•Œä¸Šï¼Œå¤§æ±Ÿå¤§æ²³ï¼Œå¤§å¤šå¼¯å¼¯æ›²æ›²ï¼Œå³ä½¿æ‰€å¤„å¹³åŸä¹‹å¤„çš„æ²³æµï¼Œä¹Ÿä¿æŒèœ¿èœ’ä¹‹æ€ã€‚<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></p>
<p>åˆ˜ç¦¹é”¡è¯´ï¼šâ€œä¹æ›²é»„æ²³ä¸‡é‡Œæ²™ï¼Œæµªæ·˜é£ç°¸è‡ªå¤©æ¶¯ã€‚â€</p>
<p><img src="/2021/05/01/how-to-improve-the-work-efficiency/4.jpeg" alt></p>
<p>é©¬å…‹æ€è¯´ï¼šç¤¾ä¼šå‘å±•æ˜¯å‰è¿›æ€§å’Œæ›²æŠ˜æ€§çš„ç»Ÿä¸€ï¼Œäº‹ç‰©çš„å‘å±•ä¸æ˜¯ç›´çº¿å¼å‰è¿›è€Œæ˜¯èºæ—‹å¼ä¸Šå‡çš„ï¼Œæ˜¯ä¸€ä¸ªå¦å®šä¹‹å¦å®šçš„è¿‡ç¨‹ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»è®¤è¯†åˆ°ï¼ŒçŸ­æœŸçœ‹ï¼Œæ–°æŠ€æœ¯ä¼šè§£å†³æˆ‘ä»¬å½“å‰çš„é—®é¢˜ï¼Œä½†æ˜¯æ–°æŠ€æœ¯å¿…ç„¶ä¼šå¼•å…¥æ–°çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ—¶ä¿±è¿›ï¼Œåœ¨æ–°çš„åœºæ™¯ä¸‹ä¸æ–­è§£å†³æ–°æŠ€æœ¯å¸¦æ¥çš„é—®é¢˜ã€‚è¿™æœ‰è¿™æ ·ï¼Œæ‰èƒ½ä¸æ–­çš„æå‡å·¥ä½œæ•ˆç‡ã€‚</p>
<p>æˆ‘ä»¬ä¸èƒ½å› ä¸ºå µè½¦ï¼Œå°±å›é€€åˆ°è‡ªè¡Œè½¦çš„æ—¶ä»£ï¼›æˆ‘ä»¬ä¸èƒ½å› ä¸ºæœ‰å‡å¸ï¼Œå°±å›é€€åˆ°ç‰©ç‰©äº¤æ¢çš„æ—¶ä»£ï¼›â€¦â€¦</p>
<h2 id="å¤©äººåˆä¸€">å¤©äººåˆä¸€</h2>
<p>è™½ç„¶å·¥å…·æ˜¯ç”Ÿäº§åŠ›çš„æ ‡å¿—ï¼Œä½†æ˜¯äººæ˜¯ç”Ÿäº§åŠ›çš„ä¸»ä½“ï¼Œæ˜¯é¦–è¦çš„ç”Ÿäº§åŠ›ï¼Œæ˜¯ç”Ÿäº§åŠ›çš„ä¸»å¯¼å› ç´ ã€‚å› æ­¤ï¼Œåœ¨æå‡å·¥å…·å±‚çº§çš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½å¿½è§†â€œäººâ€åœ¨æ•ˆç‡æå‡ä¸­çš„é‡è¦ä½œç”¨ã€‚</p>
<p>ä¸ºäº†æœ€å¤§å¯èƒ½çš„æå‡æ•ˆç‡ï¼Œæˆ‘ä»¬éœ€è¦åˆ†ææ¸…æ¥šï¼š</p>
<ul>
<li>äººæ“…é•¿å¤„ç†ä»€ä¹ˆå·¥ä½œï¼Ÿ</li>
<li>å·¥å…·ã€æŠ€æœ¯ã€å¹³å°æ“…é•¿å¤„ç†ä»€ä¹ˆå·¥ä½œï¼Ÿ</li>
<li>äººå’Œå·¥å…·å¦‚ä½•æœ‰æ•ˆç»“åˆï¼Ÿ</li>
</ul>
<p>è¿™é‡Œï¼Œæˆ‘ç§°è¿™ç§ï¼Œäººå’Œå·¥å…·çš„å…³ç³»ä¸ºâ€œå¤©äººåˆä¸€â€ï¼Œåªè¦å½“äººçš„æ•ˆèƒ½å’Œå·¥å…·çš„æ•ˆèƒ½ç´§å¯†é…åˆåœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡æ‰èƒ½å¾—åˆ°æœ€å¤§ç¨‹åº¦çš„æå‡ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¦å‘æŒ¥è‡ªæˆ‘çš„æ€ç»´ä¼˜åŠ¿ï¼Œç»“åˆå…·ä½“çš„åœºæ™¯ï¼ŒæŠŠå„ç§å·¥å…·æœ‰æ•ˆçš„æ•´åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€å¥—å®Œæ•´çš„å·¥å…·ä½“ç³»ï¼Œè¿™æœ‰è¿™æ ·ï¼Œæ‰èƒ½æå‡æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚</p>
<p>åœ¨æˆ‘ä»¬è§£å†³è§†é¢‘è´¨é‡è¯„ä¼°çš„æ•´ä¸ªå·¥ä½œä¸­ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨â€œå¤©äººåˆä¸€â€çš„æ€è·¯ï¼ŒæŠŠ <code>shell</code>ã€<code>c++</code>ã€<code>python</code> ç­‰è¯­è¨€æœ‰æœºçš„æ•´åˆåœ¨ä¸€èµ·ï¼Œä¸åŒè¯­è¨€åœ¨ç³»ç»Ÿçš„ä¸åŒéƒ¨åˆ†å‘æŒ¥å„è‡ªçš„ä¼˜åŠ¿ï¼Œæ—¢èƒ½ä¿è¯æ‰§è¡Œæ•ˆç‡ï¼Œåˆèƒ½ä¿è¯å¼€å‘æ•ˆç‡â€¦â€¦</p>
<div class="bili_video"><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="https://player.bilibili.com/player.html?aid=540619133&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div></div>
<h2 id="å·¥å…·çš„ä¸‰ä¸ªæ€ç»´å±‚æ¬¡">å·¥å…·çš„ä¸‰ä¸ªæ€ç»´å±‚æ¬¡</h2>
<blockquote>
<p>å‚ç¦…ä¹‹åˆï¼Œçœ‹å±±æ˜¯å±±ï¼Œçœ‹æ°´æ˜¯æ°´ï¼›</p>
<p>ç¦…æœ‰æ‚Ÿæ—¶ï¼Œçœ‹å±±ä¸æ˜¯å±±ï¼Œçœ‹æ°´ä¸æ˜¯æ°´ï¼›</p>
<p>ç¦…ä¸­å½»æ‚Ÿï¼Œçœ‹å±±ä»æ˜¯å±±ï¼Œçœ‹æ°´ä»æ˜¯æ°´ã€‚</p>
<div align="right">â€”â€”é’åŸè¡Œæ€ç¦…å¸ˆ</div>
</blockquote>
<p><img src="/2021/05/01/how-to-improve-the-work-efficiency/5.jpeg" alt></p>
<p>è®°å¾—å¤§å­¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ã€Šè®¾è®¡æ¨¡å¼ã€‹è€å¸ˆè¯´ï¼šè®¾è®¡æ¨¡å¼æœ‰ä¸‰ä¸ªå±‚æ¬¡ï¼š</p>
<ul>
<li>ä¸æ‡‚è®¾è®¡æ¨¡å¼ï¼Œæ‰€ä»¥æ²¡æ³•ä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼›</li>
<li>äº†è§£è®¾è®¡æ¨¡å¼ï¼Œå“ªé‡Œéƒ½æƒ³ç”¨è®¾è®¡æ¨¡å¼ï¼Œå¤„å¤„æ˜¯æ¨¡å¼ï¼Œå¤„å¤„æ˜¯åæ¨¡å¼ï¼›</li>
<li>é€å½»è®¾è®¡æ¨¡å¼ï¼Œä»£ç çœ‹ä¼¼æ²¡ç”¨è®¾è®¡æ¨¡å¼ï¼Œå´å¤„å¤„ä½“ç°è®¾è®¡æ¨¡å¼çš„æ€æƒ³ï¼›</li>
</ul>
<p>æ‰€ä»¥ï¼Œåœ¨æ•ˆç‡æå‡çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹å¾…å·¥å…·ä¹Ÿéœ€è¦è¾¾åˆ°ï¼šçœ‹å±±ä»æ˜¯å±±ï¼Œçœ‹æ°´ä»æ˜¯æ°´çš„å¢ƒç•Œã€‚</p>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://zhuanlan.zhihu.com/p/53300998">ä¸Šä¸–çºªçš„è€ç¨‹åºå‘˜æ˜¯å¦‚ä½•ç¼–ç¨‹çš„</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn2" class="footnote-item"><p><a href="https://zhuanlan.zhihu.com/p/368422885">Googleå’ŒFacebookä¸ºä»€ä¹ˆä¸ç”¨gitç®¡ç†æºç ï¼Ÿ</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn3" class="footnote-item"><p><a href="http://www.gnu.org/philosophy/free-sw.zh-cn.html">ä»€ä¹ˆæ˜¯è‡ªç”±è½¯ä»¶ï¼Ÿ</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn4" class="footnote-item"><p><a href="https://www.zhihu.com/question/27696813/answer/93053445">ä¸ºä»€ä¹ˆæ²³æµéƒ½æ˜¯å¼¯å¼¯æ›²æ›²çš„ï¼Ÿ</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p>
</li>
</ol>
</section>
]]></content>
      <categories>
        <category>æ–‡åŒ–</category>
      </categories>
      <tags>
        <tag>æ–¹æ³•è®º</tag>
        <tag>å¤§å†å²ç†è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>FFmpegä¸­åŸºäºæ·±åº¦å­¦ä¹ æ¨¡å‹çš„ç›®æ ‡æ£€æµ‹</title>
    <url>/2021/04/27/object-detection-based-on-dnn-detect-in-FFmpeg/</url>
    <content><![CDATA[<p><img src="/2021/04/27/object-detection-based-on-dnn-detect-in-FFmpeg/1.png" alt></p>
<p>ä»FFmpegçš„ä»£ç æäº¤è®°å½•<a href="https://github.com/FFmpeg/FFmpeg/commit/aa9ffdaa1eaeb5e16fb6b89852f38ff488d81173"><strong>lavfi: add filter dnn_detect for object detection</strong></a>ä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼ŒFFmpegå·²ç»ä»¥æ»¤é•œçš„å½¢å¼æä¾›äº†åŸºäºDNNçš„ç›®æ ‡æ£€æµ‹èƒ½åŠ›ã€‚</p>
<span id="more"></span>
<h2 id="dnn-detectæ»¤é•œ">dnn_detectæ»¤é•œ</h2>
<p>åœ¨FFmpegä¸­ï¼ŒåŸºäºDNNçš„ç›®æ ‡æ£€æµ‹èƒ½åŠ›ç”±<code>dnn_detectæ»¤é•œ</code>ï¼ˆ<a href="https://github.com/FFmpeg/FFmpeg/blob/master/libavfilter/vf_dnn_detect.c">vf_dnn_detect.c</a>ï¼‰æä¾›ã€‚æ ¹æ®è¯¥èƒ½åŠ›çš„ä½œè€…æ‰€æä¾›çš„èµ„æ–™<a href="https://mp.weixin.qq.com/s?__biz=MzI3MjU1MjU1Mw==&amp;mid=2247483828&amp;idx=1&amp;sn=df8fe902868ca2a0ea1cf50fff28ff95"><em>ç›®æ ‡æ£€æµ‹ï¼ŒFFmpegä¸­ç¬¬ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ æ¨¡å‹çš„è§†é¢‘åˆ†æåŠŸèƒ½</em></a>å¯çŸ¥ï¼š</p>
<blockquote>
<p>å½“å‰ç›®æ ‡æ£€æµ‹åªæ”¯æŒOpenVINOåç«¯ï¼Œåç»­è¿˜å°†å°½å¿«åŠ å…¥æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚åŸºäºTensorFlowæ¨¡å‹çš„ç›®æ ‡æ£€æµ‹ã€æ”¯æŒOpenVINOåç«¯çš„ç›®æ ‡è¯†åˆ«ã€ç›®æ ‡æ£€æµ‹å’Œè¯†åˆ«ç»“æœçš„å¯è§†åŒ–ç­‰ã€‚</p>
</blockquote>
<p>æ ¹æ®<a href="https://mp.weixin.qq.com/s?__biz=MzI3MjU1MjU1Mw==&amp;mid=2247483828&amp;idx=1&amp;sn=df8fe902868ca2a0ea1cf50fff28ff95"><em>ç›®æ ‡æ£€æµ‹ï¼ŒFFmpegä¸­ç¬¬ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ æ¨¡å‹çš„è§†é¢‘åˆ†æåŠŸèƒ½</em></a>ä¸€æ–‡æä¾›çš„demoå¯çŸ¥ï¼Œåœ¨å½“å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæ£€æµ‹ç»“æœæ˜¯é€šè¿‡<code>showinfoæ»¤é•œ</code>ä»¥æ—¥å¿—çš„å½¢å¼è¾“å‡ºçš„ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@9d26c3a57bc7:/workspace# ffmpeg -i cici.jpg -vf dnn_detect=dnn_backend=openvino:model=face-detection-adas-0001.xml:input=data:output=detection_out:confidence=0.6:labels=face-detection-adas-0001.label,showinfo -f null -</span><br><span class="line">...</span><br><span class="line">[Parsed_showinfo_1 @ 0x561cf20c1f40]   side data - detection bounding boxes:</span><br><span class="line">[Parsed_showinfo_1 @ 0x561cf20c1f40] source: face-detection-adas-0001.xml</span><br><span class="line">[Parsed_showinfo_1 @ 0x561cf20c1f40] index: 0,  region: (1005, 813) -&gt; (1086, 905), label: face, confidence: 10000/10000.</span><br><span class="line">[Parsed_showinfo_1 @ 0x561cf20c1f40] index: 1,  region: (888, 839) -&gt; (967, 926), label: face, confidence: 6917/10000.</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>æ—¥å¿—æ ¼å¼çš„æ£€æµ‹ç»“æœä¸åˆ©äºç›´è§‚çš„åˆ†æï¼Œå› æ­¤æˆ‘å¯¹è¯¥æ»¤é•œåšäº†ç®€å•çš„ä¿®æ”¹ï¼Œä¸ºå…¶å¢åŠ äº†æ£€æµ‹ç»“æœæ¡†é€‰çš„èƒ½åŠ›ï¼Œä»¥ä¾¿å¯ä»¥æ›´æ–¹ä¾¿çš„è¯„ä¼°<code>dnn_detect</code>çš„æ£€æµ‹èƒ½åŠ›ã€‚å…·ä½“æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2021/04/27/object-detection-based-on-dnn-detect-in-FFmpeg/2.jpg" alt></p>
<h2 id="dnn-detectæ»¤é•œçš„å®‰è£…">dnn_detectæ»¤é•œçš„å®‰è£…</h2>
<h4 id="å®‰è£…libtensorflow">å®‰è£…libtensorflow</h4>
<p>ä»<a href="https://storage.googleapis.com/tensorflow/">https://storage.googleapis.com/tensorflow/</a>ä¸­é€‰æ‹©é€‚åˆçš„libtensorflowç‰ˆæœ¬ä¸‹è½½å³å¯ï¼Œç”±äºæˆ‘æ˜¯åœ¨MacOSä¸Šè¿›è¡Œçš„å®éªŒï¼Œå› æ­¤æˆ‘é€‰æ‹©äº†<a href="https://storage.googleapis.com/tensorflow/libtensorflow/libtensorflow-cpu-darwin-x86_64-2.4.1.tar.gz">libtensorflow/libtensorflow-cpu-darwin-x86_64-2.4.1.tar.gz</a>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd workspace</span><br><span class="line">wget https:&#x2F;&#x2F;storage.googleapis.com&#x2F;tensorflow&#x2F;libtensorflow&#x2F;libtensorflow-cpu-darwin-x86_64-2.4.1.tar.gz --no-check-certificate</span><br><span class="line">tar xzvf libtensorflow-cpu-darwin-x86_64-2.4.1.tar.gz</span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…openvino-toolkit">å®‰è£…openvino_toolkit</h4>
<p>è¿›å…¥<a href="https://software.intel.com/content/www/us/en/develop/tools/openvino-toolkit/download.html">openvino_toolkitçš„ä¸‹è½½é¡µé¢</a>ï¼Œæ ¹æ®æç¤ºé€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ä¸‹è½½å¹¶å®‰è£…å³å¯ã€‚MacOSçš„openvino_toolkitå®‰è£…æ¯”è¾ƒç®€å•ï¼Œä¸‹è½½å¯¹åº”çš„dmgæ–‡ä»¶ä¹‹åï¼Œä¸€è·¯ç‚¹å‡»é»˜è®¤ï¼Œç„¶åå®‰è£…å°±å¯ä»¥ã€‚é»˜è®¤ä¼šå°†ç›¸å…³çš„åº“æ–‡ä»¶å®‰è£…åœ¨<code>/opt/intel/openvino_2021</code>ç›®å½•ã€‚</p>
<h4 id="é‡æ–°ç¼–è¯‘ffmpeg">é‡æ–°ç¼–è¯‘FFmpeg</h4>
<ul>
<li>
<p>æ‹‰å–FFmpegçš„masteråˆ†æ”¯ä»£ç ã€‚</p>
</li>
<li>
<p>æ ¹æ®<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2021/04/27/object-detection-based-on-dnn-detect-in-FFmpeg/vf_dnn_detect.7a6ea6ce2a.patch">vf_dnn_detect.7a6ea6ce2a.patch</a>ä¿®æ”¹<code>dnn_detect</code>çš„ä»£ç ã€‚</p>
</li>
<li>
<p>è®¾ç½®ç›¸å…³çš„ç¯å¢ƒå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:\</span><br><span class="line">/opt/intel/openvino_2021/inference_engine/lib/intel64:\</span><br><span class="line">/opt/intel/openvino_2021/inference_engine/external/tbb/lib:\</span><br><span class="line">/opt/intel/openvino_2021/deployment_tools/ngraph/lib:\</span><br><span class="line">/workspace/tensorflow/lib:\</span><br><span class="line">/workspace/ffmpeg/outputs/lib</span><br><span class="line"></span><br><span class="line">export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:\</span><br><span class="line">/workspace/ffmpeg/outputs/lib</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç¼–è¯‘FFmpeg</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;configure --prefix&#x3D;.&#x2F;outputs \</span><br><span class="line">... \</span><br><span class="line">--enable-libtensorflow \</span><br><span class="line">--enable-libopenvino \</span><br><span class="line">--extra-cflags&#x3D;&quot;-I&#x2F;workspace&#x2F;tensorflow&#x2F;include -I&#x2F;opt&#x2F;intel&#x2F;openvino_2021&#x2F;inference_engine&#x2F;include&quot; \</span><br><span class="line">--extra-ldflags&#x3D;&quot;-L&#x2F;workspace&#x2F;tensorflow&#x2F;lib -L&#x2F;opt&#x2F;intel&#x2F;openvino_2021&#x2F;inference_engine&#x2F;lib&#x2F;intel64&quot;</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ ¹æ®<a href="https://mp.weixin.qq.com/s?__biz=MzI3MjU1MjU1Mw==&amp;mid=2247483828&amp;idx=1&amp;sn=df8fe902868ca2a0ea1cf50fff28ff95"><em>ç›®æ ‡æ£€æµ‹ï¼ŒFFmpegä¸­ç¬¬ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ æ¨¡å‹çš„è§†é¢‘åˆ†æåŠŸèƒ½</em></a>ä¸­çš„demoä¸‹è½½å¯¹åº”çš„æ¨¡å‹å’Œç›¸å…³æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ffplayæ’­æ”¾ã€‚</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd outputs &amp;&amp; .&#x2F;bin&#x2F;ffplay -i test.mp4 \</span><br><span class="line">-vf &quot;dnn_detect&#x3D;dnn_backend&#x3D;openvino:model&#x3D;model&#x2F;face-detection-adas-0001.xml:input&#x3D;data:output&#x3D;detection_out:confidence&#x3D;0.6:labels&#x3D;model&#x2F;face-detection-adas-0001.label&quot;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/04/27/object-detection-based-on-dnn-detect-in-FFmpeg/3.jpg" alt></p>
</li>
</ul>
<h2 id="dnn-detectæ»¤é•œå‚æ•°">dnn_detectæ»¤é•œå‚æ•°</h2>
<p>ä»<a href="https://github.com/FFmpeg/FFmpeg/blob/master/libavfilter/vf_dnn_detect.c">vf_dnn_detect.c</a>å¯çŸ¥ï¼Œ<code>dnn_detectæ»¤é•œ</code>çš„å‚æ•°ä¸»è¦æœ‰ï¼š</p>
<ul>
<li>dnn_backendï¼šæ§åˆ¶dnnçš„åç«¯ï¼Œç›®å‰åªæ”¯æŒopenvivo</li>
<li>confidenceï¼šdnnç›®æ ‡æ£€æµ‹æ—¶çš„ç½®ä¿¡é˜ˆå€¼ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µæ¥è®¾ç½®</li>
<li>labelsï¼šæŒ‡å®šæ£€æµ‹ä½¿ç”¨æ¨¡å‹æ‰€å¯¹åº”çš„labelæ–‡ä»¶è·¯å¾„</li>
<li>modelï¼šæŒ‡å®šæ£€æµ‹ä½¿ç”¨æ¨¡å‹æ‰€å¯¹åº”çš„modelæ–‡ä»¶è·¯å¾„</li>
<li>inputï¼šæ¨¡å‹çš„è¾“å…¥</li>
<li>outputï¼šæ¨¡å‹çš„è¾“å‡º</li>
<li>backend_configs, optionsï¼šè¿™ä¸¤ä¸ªå‚æ•°éƒ½å¯¹åº”çš„æ˜¯æ¨¡å‹åç«¯çš„ç›¸å…³é…ç½®</li>
<li>asyncï¼šè®¾ç½®æ˜¯å¦å¯ç”¨å¼‚æ­¥çš„DNNæ¥å£ï¼Œé»˜è®¤ä¸ºå¼‚æ­¥</li>
</ul>
<p>åœ¨ä½¿ç”¨ä¸­ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ¥è®¾ç½®æ»¤é•œçš„ç›¸å…³å‚æ•°ï¼Œè¿›è€Œè¾¾åˆ°è‡ªå·±çš„ç›®çš„ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡è®¾ç½®<code>async</code>æ¥å¯ç”¨åŒæ­¥DNNæ¥å£ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;ffplay -i test.mp4 \</span><br><span class="line">    -vf &quot;dnn_detect&#x3D;dnn_backend&#x3D;openvino:model&#x3D;model&#x2F;face-detection-adas-0001.xml:input&#x3D;data:output&#x3D;detection_out:confidence&#x3D;0.6:labels&#x3D;model&#x2F;face-detection-adas-0001.label:async&#x3D;0&quot;</span><br></pre></td></tr></table></figure>
<h2 id="dnn-detectçš„å…¶ä»–æ¨¡å‹">dnn_detectçš„å…¶ä»–æ¨¡å‹</h2>
<p>åœ¨å¦‚ä¸Šçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨äººè„¸æ£€æµ‹æ¨¡å‹ä½œä¸ºä¾‹å­æ¼”ç¤ºäº†FFmpegä¸­çš„DNNç›®æ ‡æ£€æµ‹ã€‚å®é™…ä¸Šï¼Œä½œä¸ºä¸€ä¸ªé€šç”¨çš„æ»¤é•œï¼Œæ›¿æ¢æ¨¡å‹ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œå…¶ä»–ç±»å‹çš„ç›®æ ‡æ£€æµ‹ã€‚</p>
<p>åœ¨<a href="https://github.com/openvinotoolkit/open_model_zoo">openvinotoolkit/open_model_zoo</a>ä¸­ï¼Œä»‹ç»äº†å¾ˆå¤šé¢„è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿æ¥ç›´æ¥ç”¨ã€‚å„é¢„è®­ç»ƒæ¨¡å‹å¯ä»¥ä»<a href="https://download.01.org/opencv/">download.01.org/opencv/</a>ä¸‹è½½ã€‚é€‰æ‹©æ¨¡å‹çš„æ—¶å€™ï¼ŒåŠ¡å¿…ä¿è¯ä¸‹è½½å’Œæ‰€ä½¿ç”¨çš„OpenVINOç‰ˆæœ¬å¯¹åº”çš„æ¨¡å‹ï¼Œå¦åˆ™ï¼Œå¯èƒ½ä¼šå¯¼è‡´åŠ è½½æ¨¡å‹å¤±è´¥çš„é—®é¢˜ã€‚</p>
<p><img src="/2021/04/27/object-detection-based-on-dnn-detect-in-FFmpeg/4.jpg" alt></p>
]]></content>
      <categories>
        <category>è§†é¢‘æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>FFMpeg</tag>
        <tag>ç›®æ ‡æ£€æµ‹</tag>
        <tag>dnn_detect</tag>
      </tags>
  </entry>
  <entry>
    <title>å·ç§¯è¿ç®—ä»¥åŠé«˜æ–¯æ»¤æ³¢å™¨çš„æ„é€ </title>
    <url>/2021/04/14/convolution-and-the-gaussian-convolution-kernel/</url>
    <content><![CDATA[<h2 id="å·ç§¯çš„æ•°å­¦å®šä¹‰">å·ç§¯çš„æ•°å­¦å®šä¹‰</h2>
<p>åœ¨å›¾åƒåˆ†æå’Œå›¾åƒå¤„ç†ä¸­ï¼Œ<strong>å·ç§¯</strong>(<em>convolution</em>)æ˜¯ä¸€ç§éå¸¸é‡è¦çš„è¿ç®—ã€‚å·ç§¯æ˜¯ä¸€ä¸ªç§¯åˆ†è¿ç®—ï¼Œå…¶ååº”çš„æ˜¯å‡½æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>åœ¨å¦ä¸€ä¸ªå‡½æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>ä¸Šç§»åŠ¨æ—¶æ‰€å åŠ çš„é‡ã€‚å‡½æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span></span></span></span>åœ¨æœ‰é™åŸŸ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,t]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span><span class="mclose">]</span></span></span></span>ä¸Šçš„ä¸€ç»´å·ç§¯ä¸ºï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mi>f</mi><mo>âˆ—</mo><mi>h</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mo>âˆ«</mo><mn>0</mn><mi>t</mi></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mi>h</mi><mo stretchy="false">(</mo><mi>t</mi><mo>âˆ’</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mi mathvariant="normal">d</mi><mi>Ï„</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mo>âˆ«</mo><mn>0</mn><mi>t</mi></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>t</mi><mo>âˆ’</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mi>h</mi><mo stretchy="false">(</mo><mi>Ï„</mi><mo stretchy="false">)</mo><mi mathvariant="normal">d</mi><mi>Ï„</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
(f*h)(t) &amp;= \int^{t}_{0}f(\tau)h(t-\tau)\mathrm{d}\tau \\
&amp;= \int^{t}_{0}f(t - \tau)h(\tau)\mathrm{d}\tau
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.510812em;vertical-align:-2.505406em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.005406em;"><span style="top:-5.005406em;"><span class="pstrut" style="height:3.543456em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">h</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.543456em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.505406em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.005406em;"><span style="top:-5.005406em;"><span class="pstrut" style="height:3.543456em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5434560000000002em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span><span style="top:-3.8129000000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault" style="margin-right:0.1132em;">Ï„</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.543456em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5434560000000002em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span><span style="top:-3.8129000000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault" style="margin-right:0.1132em;">Ï„</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.505406em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå·ç§¯ç§¯åˆ†çš„ä¸Šä¸‹é™å®é™…ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi><mo separator="true">,</mo><mo>+</mo><mi mathvariant="normal">âˆ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(-\infty, +\infty)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord">âˆ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">+</span><span class="mord">âˆ</span><span class="mclose">)</span></span></span></span>ï¼Œä½†æ˜¯æ­¤å¤„æˆ‘ä»¬å‡è®¾è´Ÿåæ ‡éƒ¨åˆ†çš„å€¼ä¸º0ï¼Œå› æ­¤è¿™é‡Œå¯ä»¥é™å®šåœ¨åŒºé—´<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,t]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span><span class="mclose">]</span></span></span></span>ä¸­ã€‚<sup>[1]</sup></p>
<span id="more"></span>
<p>æ ¹æ®ä¸€ç»´å·ç§¯çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å‡½æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>åœ¨å¦ä¸€ä¸ªå‡½æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>ä¸Šç§»åŠ¨æ—¶çš„å·ç§¯ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mi>f</mi><mo>âˆ—</mo><mi>h</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mo>âˆ«</mo><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow><mrow><mo>+</mo><mi mathvariant="normal">âˆ</mi></mrow></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo>âˆ’</mo><mi>a</mi><mo separator="true">,</mo><mi>y</mi><mo>âˆ’</mo><mi>b</mi><mo stretchy="false">)</mo><mi mathvariant="normal">d</mi><mi>a</mi><mi mathvariant="normal">d</mi><mi>b</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mo>âˆ«</mo><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow><mrow><mo>+</mo><mi mathvariant="normal">âˆ</mi></mrow></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo>âˆ’</mo><mi>a</mi><mo separator="true">,</mo><mi>y</mi><mo>âˆ’</mo><mi>b</mi><mo stretchy="false">)</mo><mi>h</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mi mathvariant="normal">d</mi><mi>a</mi><mi mathvariant="normal">d</mi><mi>b</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
(f*h)(x,y) &amp;= \int^{+\infty}_{-\infty}f(a,b)h(x-a,y-b)\mathrm{d}a\mathrm{d}b \\ 
&amp;= \int^{+\infty}_{-\infty}f(x-a,y-b)h(a,b)\mathrm{d}a\mathrm{d}b
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.583024em;vertical-align:-2.541512em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.041512em;"><span style="top:-5.041512em;"><span class="pstrut" style="height:3.521231em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">h</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.521231em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.541512em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.041512em;"><span style="top:-5.041512em;"><span class="pstrut" style="height:3.521231em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5212310000000002em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">âˆ</span></span></span></span><span style="top:-3.8129000000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">+</span><span class="mord mtight">âˆ</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.970281em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault">a</span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault">b</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.521231em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5212310000000002em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">âˆ</span></span></span></span><span style="top:-3.8129000000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">+</span><span class="mord mtight">âˆ</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.970281em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault">a</span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.541512em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<h2 id="æ•°å­—å›¾åƒåˆ†æä¸­çš„å·ç§¯">æ•°å­—å›¾åƒåˆ†æä¸­çš„å·ç§¯</h2>
<p>æ•°å­—å›¾åƒæ˜¯ä¸€ä¸ªäºŒç»´çš„ç¦»æ•£æ•°æ®ï¼Œå› æ­¤å¯¹äºæ•°å­—å›¾åƒè€Œè¨€ï¼Œéœ€è¦å°†ç§¯åˆ†è¿ç®—ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ«</mo></mrow><annotation encoding="application/x-tex">\int</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.11112em;vertical-align:-0.30612em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">âˆ«</span></span></span></span>)æ”¹ä¸ºåŠ å’Œè¿ç®—ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ‘</mo></mrow><annotation encoding="application/x-tex">\sum</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span></span></span></span>ï¼‰ï¼Œä»è€Œå¾—åˆ°<strong>ç¦»æ•£å·ç§¯</strong>(<em>discrete convolution</em>)ã€‚</p>
<p>å¯¹äºæ•°å­—å›¾åƒè€Œè¨€ï¼Œåœ¨å›¾åƒå¹³é¢ä¸Šå­˜åœ¨æœ‰é™çš„å®šä¹‰åŸŸï¼Œå¯¹äºå®šä¹‰åŸŸä¹‹å¤–çš„ç¦»æ•£å·ç§¯ç»“æœä¸º0ã€‚å› æ­¤ï¼Œè¿™ä¸ªç‰¹ç‚¹å¹¶ä¸å¦¨ç¢æˆ‘ä»¬åœ¨æ•°å­—å›¾åƒä¸Šæ‰§è¡Œå·ç§¯è¿ç®—ã€‚æ­¤æ—¶ï¼Œå·ç§¯è¡¨ç¤ºçš„æ˜¯ä½¿ç”¨æ»¤æ³¢å™¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span></span></span></span>å¯¹å›¾åƒæ‰§è¡Œä¸€ä¸ªçº¿æ€§æ»¤æ³¢å¤„ç†ã€‚</p>
<p>æˆ‘ä»¬åœ¨å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>çš„ä¸€ä¸ªå±€éƒ¨é‚»åŸŸ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi></mrow><annotation encoding="application/x-tex">\mathcal{O}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em;">O</span></span></span></span></span>å†…è®¡ç®—å…¶æ‰€æœ‰åƒç´ çš„çº¿æ€§ç»„åˆï¼Œé‚»åŸŸ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi></mrow><annotation encoding="application/x-tex">\mathcal{O}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em;">O</span></span></span></span></span>ä¸­çš„å„ä¸ªåƒç´ çš„æƒé‡ç”±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>æ¥ç¡®å®šã€‚å› æ­¤ï¼Œå¯¹äºå›¾åƒä¸­çš„åƒç´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>ï¼Œæˆ‘ä»¬åœ¨å…¶é‚»åŸŸ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi></mrow><annotation encoding="application/x-tex">\mathcal{O}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em;">O</span></span></span></span></span>å†…ä½¿ç”¨æ»¤æ³¢å™¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span></span></span></span>å¯¹å…¶æ‰§è¡Œå·ç§¯è¿ç®—ï¼Œå¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">g(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>=</mo><mstyle scriptlevel="0" displaystyle="true"><munder><mo>âˆ‘</mo><mrow><mo stretchy="false">(</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo><mo>âˆˆ</mo><mi mathvariant="script">O</mi></mrow></munder><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo>âˆ’</mo><mi>m</mi><mo separator="true">,</mo><mi>j</mi><mo>âˆ’</mo><mi>n</mi><mo stretchy="false">)</mo><mi>h</mi><mo stretchy="false">(</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">g(i,j)=\displaystyle\sum_{(m,n)\in\mathcal{O}}f(i-m,j-n)h(m,n)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.5660100000000003em;vertical-align:-1.516005em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.808995em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">m</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">n</span><span class="mclose mtight">)</span><span class="mrel mtight">âˆˆ</span><span class="mord mtight"><span class="mord mathcal mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.516005em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span></p>
<p>åœ¨ä¸Šå¼ä¸­ï¼Œç§°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span></span></span></span>ä¸º<strong>å·ç§¯æ©è†œ</strong>(<em>convolution mask</em>)æˆ–è€…æ»¤æ³¢å™¨ï¼Œå¹¶ä¸”ä¸€èˆ¬ä¼šé€‰æ‹©å…·æœ‰å¥‡æ•°è¡Œå’Œåˆ—çš„çŸ©å½¢é‚»åŸŸ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi></mrow><annotation encoding="application/x-tex">\mathcal{O}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em;">O</span></span></span></span></span>ï¼Œä»¥æ–¹ä¾¿ç¡®å®šé¢†åŸŸçš„ä¸­å¿ƒã€‚<sup>[1]</sup></p>
<h2 id="åˆ©ç”¨é«˜æ–¯æ»¤æ³¢å™¨æ¥æ¨¡ç³Šå›¾åƒ">åˆ©ç”¨é«˜æ–¯æ»¤æ³¢å™¨æ¥æ¨¡ç³Šå›¾åƒ</h2>
<p>é€šå¸¸ï¼Œå›¾åƒå¤„ç†è½¯ä»¶ä¼šæä¾›â€œæ¨¡ç³Šâ€ï¼ˆblurï¼‰æ»¤é•œï¼Œä½¿å›¾ç‰‡äº§ç”Ÿæ¨¡ç³Šçš„æ•ˆæœã€‚å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2021/04/14/convolution-and-the-gaussian-convolution-kernel/1.jpeg" alt></p>
<p>æ¨¡ç³Šçš„æœ¬è´¨å°±æ˜¯åˆ©ç”¨åƒç´ é‚»åŸŸ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi></mrow><annotation encoding="application/x-tex">\mathcal{O}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em;">O</span></span></span></span></span>å†…å…¶ä»–åƒç´ çš„çº¿æ€§è¿ç®—æ¥è®¡ç®—è¯¥åƒç´ çš„å€¼ï¼Œä»è€Œæé«˜è¯¥åƒç´ å’Œé‚»åŸŸå†…å…¶ä»–åƒç´ ä¹‹é—´çš„ç›¸å…³æ€§ã€‚</p>
<p>æ¨¡ç³Šçš„æ–¹å¼å’Œæ•ˆæœå–å†³äºçº¿æ€§è¿ç®—æ—¶çš„æ»¤æ³¢å™¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span></span></span></span>çš„é€‰å–ã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span></span></span></span>çš„é€‰æ‹©æœ‰å¾ˆå¤šï¼Œå…¶ä¸­æœ‰ä¸€ç§å°±æ˜¯é«˜æ–¯æ»¤æ³¢å™¨ï¼Œå…¶å¯¹åº”çš„æ¨¡ç³Šæ•ˆæœç§°ä¹‹ä¸ºâ€œé«˜æ–¯æ¨¡ç³Šâ€ã€‚â€œé«˜æ–¯æ¨¡ç³Šâ€çš„æœ¬è´¨å°±æ˜¯åˆ©ç”¨é«˜æ–¯å‡½æ•°ç”Ÿæˆçº¿æ€§è¿ç®—æ—¶å„åƒç´ çš„æƒé‡ï¼Œå³åˆ©ç”¨é«˜æ–¯å‡½æ•°ï¼ˆå½“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¼</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\mu=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Î¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>ä¸”å„æ–¹å‘çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span></span></span></span>ç›¸ç­‰æ—¶ï¼‰ç”Ÿæˆæ»¤æ³¢å™¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span></span></span></span>ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mi>Ï€</mi><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow></mfrac><msup><mi>e</mi><mrow><mo>âˆ’</mo><mfrac><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup></mrow><mrow><mn>2</mn><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow></mfrac></mrow></msup></mrow><annotation encoding="application/x-tex">G(x,y) = \frac{1}{2\pi\sigma^2}e^{-\frac{x^2+y^2}{2\sigma^2}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">Ï€</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.3013099999999997em;"><span style="top:-3.4534200000000004em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2112714285714286em;"><span style="top:-2.5061857142857145em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9384399999999999em;"><span style="top:-2.93844em;margin-right:0.1em;"><span class="pstrut" style="height:2.64444em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.4623857142857144em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.04844em;"><span style="top:-3.04844em;margin-right:0.1em;"><span class="pstrut" style="height:2.64444em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.04844em;"><span style="top:-3.04844em;margin-right:0.1em;"><span class="pstrut" style="height:2.64444em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.49381428571428565em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span></span></span></span>ä¸­å¿ƒç‚¹çš„åæ ‡ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(0,0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span>ï¼Œåˆ™æ•´ä¸ª<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span></span></span></span>çš„åæ ‡å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2021/04/14/convolution-and-the-gaussian-convolution-kernel/2.png" alt></p>
<p>åˆ©ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>çš„å…¬å¼ï¼Œå³å¯è®¡ç®—å¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span></span></span></span>ä¸ºæŒ‡å®šå€¼æ—¶çš„é«˜æ–¯æ»¤æ³¢å™¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">h</span></span></span></span>ã€‚å…·ä½“ç»†èŠ‚æ­¤å¤„ä¸å†èµ˜è¿°ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="http://www.ruanyifeng.com/blog/2012/11/gaussian_blur.html">é«˜æ–¯æ¨¡ç³Šçš„ç®—æ³•</a>ã€‚</p>
<h2 id="ä¸ä¾èµ–å…¶ä»–åº“ç”Ÿæˆé«˜æ–¯æ»¤æ³¢å™¨">ä¸ä¾èµ–å…¶ä»–åº“ç”Ÿæˆé«˜æ–¯æ»¤æ³¢å™¨</h2>
<p>å½“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¼</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\mu=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Î¼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>ä¸”å„æ–¹å‘çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span></span></span></span>ç›¸ç­‰æ—¶ï¼Œå¯¹äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>æˆ‘ä»¬å¾—åˆ°ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><mstyle scriptlevel="0" displaystyle="true"><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow></mstyle></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mi>Ï€</mi><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow></mfrac><msup><mi>e</mi><mrow><mo>âˆ’</mo><mo stretchy="false">(</mo><msup><mi>i</mi><mn>2</mn></msup><mo>+</mo><msup><mi>j</mi><mn>2</mn></msup><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>2</mn><msup><mi>Ïƒ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></msup></mrow><mstyle scriptlevel="0" displaystyle="true"><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mi>Ï€</mi><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow></mfrac><msup><mi>e</mi><mrow><mo>âˆ’</mo><mo stretchy="false">(</mo><msup><mi>i</mi><mn>2</mn></msup><mo>+</mo><msup><mi>j</mi><mn>2</mn></msup><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>2</mn><msup><mi>Ïƒ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></msup></mrow></mstyle></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mi>Ï€</mi><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow></mfrac><msup><mi>e</mi><mrow><mo>âˆ’</mo><mo stretchy="false">(</mo><msup><mi>i</mi><mn>2</mn></msup><mo>+</mo><msup><mi>j</mi><mn>2</mn></msup><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>2</mn><msup><mi>Ïƒ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></msup></mrow><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mi>Ï€</mi><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow></mfrac><mstyle scriptlevel="0" displaystyle="true"><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><msup><mi>e</mi><mrow><mo>âˆ’</mo><mo stretchy="false">(</mo><msup><mi>i</mi><mn>2</mn></msup><mo>+</mo><msup><mi>j</mi><mn>2</mn></msup><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>2</mn><msup><mi>Ïƒ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></msup></mstyle></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><msup><mi>e</mi><mrow><mo>âˆ’</mo><mo stretchy="false">(</mo><msup><mi>i</mi><mn>2</mn></msup><mo>+</mo><msup><mi>j</mi><mn>2</mn></msup><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>2</mn><msup><mi>Ïƒ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></msup><mstyle scriptlevel="0" displaystyle="true"><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><msup><mi>e</mi><mrow><mo>âˆ’</mo><mo stretchy="false">(</mo><msup><mi>i</mi><mn>2</mn></msup><mo>+</mo><msup><mi>j</mi><mn>2</mn></msup><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>2</mn><msup><mi>Ïƒ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></msup></mstyle></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}

h(i,j)&amp;=\frac{G(i,j)}{\displaystyle\sum_{i,j}{G(i,j)}} \\
&amp;=\frac{\frac{1}{2\pi\sigma^2}e^{-(i^2+j^2)/(2\sigma^2)}}{\displaystyle\sum_{i,j}{\frac{1}{2\pi\sigma^2}e^{-(i^2+j^2)/(2\sigma^2)}}} \\
&amp;=\frac{\frac{1}{2\pi\sigma^2}e^{-(i^2+j^2)/(2\sigma^2)}}{\frac{1}{2\pi\sigma^2}\displaystyle\sum_{i,j}e^{-(i^2+j^2)/(2\sigma^2)}} \\
&amp;=\frac{e^{-(i^2+j^2)/(2\sigma^2)}}{\displaystyle\sum_{i,j}e^{-(i^2+j^2)/(2\sigma^2)}}

\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:17.421323em;vertical-align:-8.4606615em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:8.9606615em;"><span style="top:-11.255581500000002em;"><span class="pstrut" style="height:3.72192em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span><span style="top:-6.879879499999999em;"><span class="pstrut" style="height:3.72192em;"></span><span class="mord"></span></span><span style="top:-2.232742499999998em;"><span class="pstrut" style="height:3.72192em;"></span><span class="mord"></span></span><span style="top:2.0849595em;"><span class="pstrut" style="height:3.72192em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:8.4606615em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:8.9606615em;"><span style="top:-11.255581500000002em;"><span class="pstrut" style="height:3.72192em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.050005em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span><span style="top:-3.280005em;"><span class="pstrut" style="height:3.050005em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.727005em;"><span class="pstrut" style="height:3.050005em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.3537820000000003em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-6.879879499999999em;"><span class="pstrut" style="height:3.72192em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.72192em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.32144em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">Ï€</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0369199999999998em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.55144em;"><span class="pstrut" style="height:3.32144em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.05644em;"><span class="pstrut" style="height:3.32144em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ï€</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9869199999999998em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.625217em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.232742499999998em;"><span class="pstrut" style="height:3.72192em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.72192em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.050005em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ï€</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0369199999999998em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.280005em;"><span class="pstrut" style="height:3.050005em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.785005em;"><span class="pstrut" style="height:3.050005em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ï€</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9869199999999998em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.3537820000000003em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:2.0849595em;"><span class="pstrut" style="height:3.72192em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6639199999999998em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.050005em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0369199999999998em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.280005em;"><span class="pstrut" style="height:3.050005em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.727005em;"><span class="pstrut" style="height:3.050005em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9869199999999998em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.3537820000000003em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:8.4606615em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>ä½¿ç”¨pythonå¾—åˆ°äºŒç»´çš„é«˜æ–¯æ»¤æ³¢å™¨çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gaussian_kernel_2d</span>(<span class="params">sigma, width</span>):</span></span><br><span class="line">    <span class="keyword">if</span> width == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> np.ones((<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    kernel_radius = np.floor(width &gt;&gt; <span class="number">1</span>)</span><br><span class="line">    ax            = np.arange(-kernel_radius, kernel_radius + <span class="number">1.</span>, dtype=np.float32)</span><br><span class="line">    xx, yy        = np.meshgrid(ax, ax)</span><br><span class="line">    kernel        = np.exp(-(xx**<span class="number">2</span> + yy**<span class="number">2</span>) / (<span class="number">2.</span> * sigma**<span class="number">2</span>))</span><br><span class="line">    <span class="keyword">return</span> kernel / np.<span class="built_in">sum</span>(kernel)</span><br></pre></td></tr></table></figure>
<p>è¯¦ç»†ä»£ç å¯ä»¥å‚è€ƒ<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2021/04/14/convolution-and-the-gaussian-convolution-kernel/gaussian_cov_kernel.ipynb">é«˜æ–¯æ»¤æ³¢å™¨çš„ç”Ÿæˆå’Œå¯è§†åŒ–</a>ã€‚</p>
<h2 id="æ»¤æ³¢å™¨çš„å¯åˆ†ç¦»ç‰¹æ€§">æ»¤æ³¢å™¨çš„å¯åˆ†ç¦»ç‰¹æ€§</h2>
<p>å›¾åƒå¤„ç†ä¸­çš„<strong>å¯åˆ†ç¦»æ»¤æ³¢å™¨</strong>(<em>separable filter</em>)å¯ä»¥å†™æˆä¸¤ä¸ªæ›´ç®€å•çš„æ»¤æ³¢å™¨çš„ä¹˜ç§¯ã€‚é€šå¸¸ï¼Œå¯ä»¥æŠŠäºŒç»´å·ç§¯è¿ç®—åˆ†ç¦»ä¸ºä¸¤ä¸ªä¸€ç»´æ»¤æ³¢å™¨ï¼Œä»è€Œé™ä½å›¾åƒçš„å·ç§¯è¿ç®—å¤æ‚åº¦ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¯¹äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>Ã—</mo><mi>H</mi></mrow><annotation encoding="application/x-tex">W \times H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span></span></span></span>çš„å›¾åƒï¼Œå¦‚æœé‡‡ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>Ã—</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n \times n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>çš„äºŒç»´æ»¤æ³¢å™¨ï¼Œåˆ™å·ç§¯è¿ç®—çš„å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>M</mi><mo separator="true">â‹…</mo><mi>N</mi><mo separator="true">â‹…</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(MÂ·NÂ·n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œè€Œå¦‚æœç”¨ä¸¤ä¸ª<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>Ã—</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1 \times n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>çš„ä¸€ç»´æ»¤æ³¢å™¨ï¼Œåˆ™å·ç§¯è¿ç®—çš„å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>2</mn><mi>M</mi><mo separator="true">â‹…</mo><mi>N</mi><mo separator="true">â‹…</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(2MÂ·NÂ·n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>ã€‚<sup>[4]</sup></p>
<p>Karas Pavelå’ŒSvoboda Davidåœ¨<a href="https://www.intechopen.com/books/design-and-architectures-for-digital-signal-processing/algorithms-for-efficient-computation-of-convolution">Algorithms for Efficient Computation of Convolution</a><sup>[5]</sup>çš„<strong>3. Separable convolution</strong>éƒ¨åˆ†æŒ‡å‡ºï¼š</p>
<p>ç»™å®šä¸€ä¸ªè¡Œå‘é‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>u</mi><mo stretchy="true">â†’</mo></mover><mo>=</mo><mo stretchy="false">(</mo><msub><mi>u</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>u</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>u</mi><mi>m</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overrightarrow{u}=(u_1,u_2,...u_m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9525600000000001em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9525600000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">u</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>å’Œä¸€ä¸ªåˆ—å‘é‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mover accent="true"><mi>v</mi><mo stretchy="true">â†’</mo></mover><mi>T</mi></msup><mo>=</mo><mo stretchy="false">(</mo><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>v</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overrightarrow{v}^T=(v_1,v_2,...,v_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9525600000000001em;vertical-align:0em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9525600000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œåˆ™å…¶äºŒè€…çš„å·ç§¯å®šä¹‰ä¸ºï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mover accent="true"><mi>u</mi><mo stretchy="true">â†’</mo></mover><mo>âˆ—</mo><mover accent="true"><mi>v</mi><mo stretchy="true">â†’</mo></mover></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mover accent="true"><mi>v</mi><mo stretchy="true">â†’</mo></mover><mtext>Â </mtext><mover accent="true"><mi>u</mi><mo stretchy="true">â†’</mo></mover></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>v</mi><mi>n</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>âˆ—</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>u</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>u</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>u</mi><mi>m</mi></msub></mrow></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>1</mn></msub><msub><mi>u</mi><mn>1</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>1</mn></msub><msub><mi>u</mi><mn>2</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>1</mn></msub><msub><mi>u</mi><mn>3</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>1</mn></msub><msub><mi>u</mi><mi>m</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>2</mn></msub><msub><mi>u</mi><mn>1</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>2</mn></msub><msub><mi>u</mi><mn>2</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>2</mn></msub><msub><mi>u</mi><mn>3</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>2</mn></msub><msub><mi>u</mi><mi>m</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>3</mn></msub><msub><mi>u</mi><mn>1</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>3</mn></msub><msub><mi>u</mi><mn>2</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>3</mn></msub><msub><mi>u</mi><mn>3</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mn>3</mn></msub><msub><mi>u</mi><mi>m</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>Â Â Â Â Â Â </mtext><mi mathvariant="normal">.</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>Â Â Â Â Â Â Â Â Â Â Â Â </mtext><mi mathvariant="normal">.</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">.</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mi>n</mi></msub><msub><mi>u</mi><mn>1</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mi>n</mi></msub><msub><mi>u</mi><mn>2</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mi>n</mi></msub><msub><mi>u</mi><mn>3</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>v</mi><mi>n</mi></msub><msub><mi>u</mi><mi>m</mi></msub></mrow></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="bold">A</mi><mrow><mi>n</mi><mo>Ã—</mo><mi>m</mi></mrow></msub></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
\overrightarrow{u}*\overrightarrow{v}&amp;=\overrightarrow{v}\ \overrightarrow{u} \\
&amp;=\begin{pmatrix}
v_1 \\
v_2 \\
. \\
. \\
. \\
v_n \end{pmatrix} * \begin{pmatrix} u_1, u_2, ..., u_m\end{pmatrix} \\
&amp;=\begin{pmatrix}
v_1u_1 &amp; v_1u_2 &amp; v_1u_3 &amp; ... &amp; v_1u_m \\
v_2u_1 &amp; v_2u_2 &amp; v_2u_3 &amp; ... &amp; v_2u_m \\
v_3u_1 &amp; v_3u_2 &amp; v_3u_3 &amp; ... &amp; v_3u_m \\
. &amp; . &amp; . &amp; . &amp; . \\
. &amp; . &amp; . &amp; \ \ \ \ \ \ . &amp; . \\
. &amp; . &amp; . &amp; \ \ \ \ \ \ \ \ \ \ \ \ . &amp; . \\
v_nu_1 &amp; v_nu_2 &amp; v_nu_3 &amp; ... &amp; v_nu_m
\end{pmatrix} \\
&amp;=\mathbf{A}_{n \times m}
\end{aligned}

</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:19.312780000000004em;vertical-align:-9.406390000000002em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:9.90639em;"><span style="top:-15.40389em;"><span class="pstrut" style="height:6.450060000000001em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9525600000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">u</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9525600000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span></span></span><span style="top:-10.89384em;"><span class="pstrut" style="height:6.450060000000001em;"></span><span class="mord"></span></span><span style="top:-2.7937299999999983em;"><span class="pstrut" style="height:6.450060000000001em;"></span><span class="mord"></span></span><span style="top:2.296330000000001em;"><span class="pstrut" style="height:6.450060000000001em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:9.406390000000002em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:9.90639em;"><span style="top:-15.40389em;"><span class="pstrut" style="height:6.450060000000001em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9525600000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mspace">Â </span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9525600000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">u</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span></span></span><span style="top:-10.89384em;"><span class="pstrut" style="height:6.450060000000001em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8500500000000004em;"><span style="top:-0.44997000000000076em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â</span></span></span><span style="top:-1.5999800000000008em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-2.1949900000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-2.7900000000000005em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-3.3850100000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-3.9800200000000006em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-4.57503em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-4.61003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-5.85005em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â›</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.3500499999999995em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.850000000000001em;"><span style="top:-6.010000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.810000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.6100000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-1.2100000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-0.009999999999999953em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.35em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8500500000000004em;"><span style="top:-0.44997000000000076em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â </span></span></span><span style="top:-1.5999800000000008em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-2.1949900000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-2.7900000000000005em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-3.3850100000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-3.9800200000000006em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-4.57503em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-4.61003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-5.85005em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.3500499999999995em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8500000000000001em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35000000000000003em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span></span></span><span style="top:-2.7937299999999983em;"><span class="pstrut" style="height:6.450060000000001em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.450060000000001em;"><span style="top:0.1500399999999994em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â</span></span></span><span style="top:-0.9999700000000006em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-1.5949800000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-2.1899900000000008em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-2.7850000000000006em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-3.3800100000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-3.97502em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-4.57003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-5.16504em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-5.210040000000001em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âœ</span></span></span><span style="top:-6.450060000000001em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â›</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.9500599999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.450000000000001em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.210000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.0100000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-1.8100000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-0.6100000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:0.5900000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.450000000000001em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.210000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.0100000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-1.8100000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-0.6100000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:0.5900000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.450000000000001em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.210000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.0100000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-1.8100000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-0.6100000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:0.5900000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.450000000000001em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span></span></span><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span></span></span><span style="top:-4.210000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span></span></span><span style="top:-3.0100000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-1.8100000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mord">.</span></span></span><span style="top:-0.6100000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mord">.</span></span></span><span style="top:0.5900000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.450000000000001em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.210000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.0100000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-1.8100000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:-0.6100000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">.</span></span></span><span style="top:0.5900000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.450060000000001em;"><span style="top:0.1500399999999994em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â </span></span></span><span style="top:-0.9999700000000006em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-1.5949800000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-2.1899900000000008em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-2.7850000000000006em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-3.3800100000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-3.97502em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-4.57003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-5.16504em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-5.210040000000001em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>âŸ</span></span></span><span style="top:-6.450060000000001em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:3.9500599999999997em;"><span></span></span></span></span></span></span></span></span></span><span style="top:2.296330000000001em;"><span class="pstrut" style="height:6.450060000000001em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">A</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.25833100000000003em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">Ã—</span><span class="mord mathdefault mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:9.406390000000002em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>å¹¶ä¸”ï¼Œå½“ä¸”ä»…å½“çŸ©é˜µ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="bold">A</mi><mrow><mi>n</mi><mo>Ã—</mo><mi>m</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathbf{A}_{n \times m}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.894441em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">A</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.25833100000000003em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">Ã—</span><span class="mord mathdefault mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>çš„ç§©<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo stretchy="false">(</mo><mi mathvariant="bold">A</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r(\mathbf{A})=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">A</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>æ—¶ï¼Œæ»¤æ³¢å™¨æ‰æ˜¯å¯åˆ†ç¦»çš„æ»¤æ³¢å™¨ã€‚Gaussianæ»¤æ³¢å™¨å’ŒSobelæ»¤æ³¢å™¨å°±æ˜¯è¿™ç§å¯åˆ†ç¦»çš„æ»¤æ³¢å™¨ã€‚</p>
<p>åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¯¹äºäºŒç»´é«˜æ–¯æ»¤æ³¢å™¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">h(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>è€Œè¨€ï¼Œæˆ‘ä»¬å°†å…¶åˆ†ç¦»æˆä¸¤ä¸ªä¸€ç»´æ»¤æ³¢å™¨ã€‚å¯¹å›¾åƒçš„äºŒç»´å·ç§¯è¿ç®—ä»è€Œç®€åŒ–ä¸ºå¯¹å›¾åƒçš„ä¸¤æ¬¡ä¸€ç»´å·ç§¯ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>h</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><msub><mi>h</mi><mi>x</mi></msub><mo>âˆ—</mo><msub><mi>h</mi><mi>y</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">(</mo><mi>f</mi><mo>âˆ—</mo><mi>h</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>f</mi><mo>âˆ—</mo><mo stretchy="false">(</mo><msub><mi>h</mi><mi>x</mi></msub><mo>âˆ—</mo><msub><mi>h</mi><mi>y</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mi>f</mi><mo>âˆ—</mo><msub><mi>h</mi><mi>x</mi></msub><mo stretchy="false">)</mo><mo>âˆ—</mo><msub><mi>f</mi><mi>y</mi></msub></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
h(x,y) &amp;= (h_x * h_y)(x) \\
(f*h)(x,y) &amp;= f*(h_x * h_y) \\
&amp;=(f*h_x)*f_y
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.500000000000002em;vertical-align:-2.000000000000001em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">h</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span><span style="top:-1.6599999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-1.6599999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>åŒæ—¶ï¼Œåˆ©ç”¨å¦‚ä¸Šçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨ä¸€ç»´é«˜æ–¯æ»¤æ³¢å™¨çš„ç»“æœç”ŸæˆäºŒç»´é«˜æ–¯æ»¤æ³¢å™¨ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gaussian_kernel_2d_acc</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">if</span> self.width == <span class="number">1</span>:</span><br><span class="line">        self.kernel = np.ones((<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    self.gaussian_kernel_1d()</span><br><span class="line">    k = self.kernel</span><br><span class="line">    self.kernel = k.reshape(self.width,<span class="number">1</span>) * k.reshape(<span class="number">1</span>,self.width)</span><br></pre></td></tr></table></figure>
<p>æ›´è¯¦ç»†çš„ä»£ç å¯ä»¥å‚è€ƒ<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2021/04/14/convolution-and-the-gaussian-convolution-kernel/gaussian_cov_kernel_acc.ipynb">é«˜æ–¯æ»¤æ³¢å™¨çš„ç”Ÿæˆ</a>ã€‚</p>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>[1]: å›¾åƒå¤„ç†ã€åˆ†æä¸æœºå™¨è§†è§‰ï¼ˆç¬¬4ç‰ˆï¼‰<br>
[2]: <a href="https://www.zhihu.com/question/22298352">å¦‚ä½•é€šä¿—æ˜“æ‡‚çš„è§£é‡Šå·ç§¯ï¼Ÿ</a><br>
[3]: <a href="http://www.ruanyifeng.com/blog/2012/11/gaussian_blur.html">é«˜æ–¯æ¨¡ç³Šçš„ç®—æ³•</a><br>
[4]: <a href="https://en.wikipedia.org/wiki/Separable_filter">separable filter</a><br>
[5]: Karas Pavel and Svoboda David (January 16th 2013). Algorithms for Efficient Computation of Convolution, Design and Architectures for Digital Signal Processing, Gustavo Ruiz and Juan A. Michell, IntechOpen, DOI: 10.5772/51942. Available from: <a href="https://www.intechopen.com/books/design-and-architectures-for-digital-signal-processing/algorithms-for-efficient-computation-of-convolution">https://www.intechopen.com/books/design-and-architectures-for-digital-signal-processing/algorithms-for-efficient-computation-of-convolution</a></p>
]]></content>
      <categories>
        <category>ç®—æ³•ä¸æ•°å­¦</category>
      </categories>
      <tags>
        <tag>å·ç§¯</tag>
        <tag>é«˜æ–¯æ»¤æ³¢å™¨</tag>
        <tag>å›¾åƒæ»¤æ³¢</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•åœ¨MacOSä¸‹ç¼–è¯‘vmafå¹¶è®­ç»ƒè‡ªå·±çš„æ¨¡å‹</title>
    <url>/2021/03/24/how-to-complie-VMAF-for-the-MacOS/</url>
    <content><![CDATA[<p><a href="https://github.com/Netflix/vmaf">VMAF</a>æ˜¯Netflixå¼€å‘çš„ã€ç”¨äºè¯„ä¼°è§†é¢‘æ„ŸçŸ¥è´¨é‡çš„ç®—æ³•ã€‚VMAFåŒ…æ‹¬ä¸€ä¸ªç‹¬ç«‹çš„Cè¯­è¨€åº“libvmafåŠå…¶å¯¹è¯¥åº“çš„PythonåŒ…è£…ã€‚åœ¨Pythonåº“ä¸­ï¼Œè¿˜æä¾›äº†ä¸€ç»„å·¥å…·ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·å¯ä»¥è®­ç»ƒå’Œæµ‹è¯•è‡ªå®šä¹‰çš„VMAFæ¨¡å‹ã€‚ç›®å‰ä¸ºæ­¢ï¼Œåœ¨å·¥ä¸šå®è·µä¸­ï¼ŒVMAFæ˜¯è§†é¢‘è´¨é‡è¯„ä¼°é¢†åŸŸä¸­æœ€ä¼˜ç§€çš„å…¨å‚è€ƒè¯„ä¼°ç®—æ³•ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨MacOSä¸Šç¼–è¯‘å¹¶ä½¿ç”¨VMAFçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ä¼šæœ‰ä¸€äº›é—®é¢˜å¯¼è‡´æ— æ³•ç¼–è¯‘æˆåŠŸï¼Œå¹¶ä¸”å’Œæ¨¡å‹è®­ç»ƒç›¸å…³çš„pythonä»£ç ä¹Ÿå­˜åœ¨æŸäº›å°çš„å†²çªï¼Œå¯¼è‡´åœ¨æ•´ä¸ªæ¨¡å‹è®­ç»ƒçš„è¿‡ç¨‹ä¼šå‡ºç°æŸäº›å¼‚å¸¸ã€‚</p>
<p>æœ¬æ–‡å°±æ˜¯å¯¹è‡ªå·±åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜çš„æ€»ç»“ã€‚</p>
<p><img src="/2021/03/24/how-to-complie-VMAF-for-the-MacOS/1.jpeg" alt></p>
<span id="more"></span>
<p>æˆ‘æ‰€ä½¿ç”¨çš„VMAFçš„ç‰ˆæœ¬ä¸ºcommit idä¸º<a href="https://github.com/Netflix/vmaf/commit/6f1f0c98845e4e9c34ae0bdfa00aee5c91fa6e0c">6f1f0c98</a>çš„è¿™æ¬¡æäº¤ã€‚é‡åˆ°çš„æ‰€æœ‰é—®é¢˜ä¹Ÿéƒ½æ˜¯åŸºäºè¿™æ¬¡æäº¤ï¼Œè¿™ä¸€ç‚¹è¦é¢å¤–æ³¨æ„ã€‚ä¸»è¦è§£å†³çš„é—®é¢˜å’Œå…·ä½“çš„è§£å†³æ–¹æ³•å¯ä»¥å‚è€ƒæ–‡ç« æ¥ä¸‹æ¥çš„éƒ¨åˆ†ã€‚</p>
<h2 id="libvmaf-test-toolsé“¾æ¥é—®é¢˜">libvmaf test/toolsé“¾æ¥é—®é¢˜</h2>
<p>åœ¨ç¼–è¯‘libvmafçš„<code>C</code>åº“çš„æ—¶å€™ï¼Œå‘ç°å½“ç¼–è¯‘<code>test</code>å’Œ<code>tools</code>ç›®å½•ä¸‹çš„æ–‡ä»¶æ—¶ï¼Œä¼šå‡ºç°å¼‚å¸¸ã€‚</p>
<p>ç»è¿‡æ’æŸ¥ä»¥åï¼Œå‘ç°æ˜¯å¯¹åº”çš„ç¼–è¯‘äº§å‡ºçš„é“¾æ¥åº“å‡ºç°äº†å¼‚å¸¸ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œå¦‚æœé…ç½®<code>default_library</code>ä¸º<code>both</code>ï¼Œåˆ™ä¼šäº§å‡ºlibvmafçš„é™æ€é“¾æ¥åº“å’ŒåŠ¨æ€é“¾æ¥åº“ï¼Œå¹¶ä¸”åœ¨äº§å‡º<code>test</code>å’Œ<code>tools</code>ç›¸å…³å¯¹è±¡æ—¶ï¼Œä¼šä¼˜å…ˆé€‰æ‹©é‡‡ç”¨é™æ€é“¾æ¥åº“è¿›è¡Œé“¾ç¼–ã€‚å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vmaf &#x3D; executable(</span><br><span class="line">    &#39;vmaf&#39;,</span><br><span class="line">    ...</span><br><span class="line">    link_with : get_option(&#39;default_library&#39;) &#x3D;&#x3D; &#39;both&#39; ? libvmaf.get_static_lib() : libvmaf,</span><br><span class="line">    ...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ä¸ç¡®å®šä¸ºä»€ä¹ˆè¿™é‡Œé‡‡ç”¨é™æ€é“¾æ¥åº“æ—¶ä¼šå‡ºç°å¼‚å¸¸ï¼Œä½†æ˜¯æŠŠé™æ€é“¾æ¥åº“æ”¹æˆåŠ¨æ€é“¾æ¥åº“ä¹‹åï¼Œæ•´ä¸ªå·¥ç¨‹å°±å¯ä»¥æˆåŠŸç¼–è¯‘äº†ã€‚è‡³äºåŸå› ï¼Œç­‰æœ‰æ—¶é—´å†ä»”ç»†å®šä½ä¸€ä¸‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vmaf &#x3D; executable(</span><br><span class="line">    &#39;vmaf&#39;,</span><br><span class="line">    ...</span><br><span class="line">    link_with : libvmaf,</span><br><span class="line">    ...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="libsvmåº“çš„è·¯å¾„è®¾ç½®é—®é¢˜">libsvmåº“çš„è·¯å¾„è®¾ç½®é—®é¢˜</h2>
<p>åœ¨ä½¿ç”¨pythonç›®å½•ä¸‹æä¾›çš„ç›¸å…³å·¥å…·è¿›è¡Œæ¨¡å‹è®­ç»ƒçš„æ—¶å€™ï¼Œæœ€ç»ˆä¼šä½¿ç”¨<code>python/vmaf/svmutil.py</code>æ¥å®ç°å¯¹<code>libsvm</code>åº“çš„è°ƒç”¨ï¼Œè¿›è€Œæ ¹æ®è®­ç»ƒæ•°æ®äº§å‡º<code>SVM</code>çš„æ¨¡å‹æ–‡ä»¶ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨<code>svmutil.py</code>ä¸­ä¼šé…ç½®<code>libsvm</code>åº“çš„è·¯å¾„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè·¯å¾„çš„é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">libsvm_path &#x3D; VmafConfig.root_path(&#39;third_party&#39;, &#39;libsvm&#39;, &#39;python&#39;)</span><br></pre></td></tr></table></figure>
<p>è€Œå®é™…ä¸Šï¼Œåœ¨æˆ‘æ‰€ç¼–è¯‘çš„æœºå™¨ä¸Šï¼Œä½¿ç”¨<code>pip3 install libsvm</code>ä¹‹åï¼Œ<code>libsvm</code>çš„è·¯å¾„å¹¶éæ˜¯å¦‚ä¸ŠæŒ‡å®šçš„è·¯å¾„ï¼Œå› æ­¤ä¼šå¯¼è‡´åœ¨è°ƒç”¨<code>libsvm</code>æ—¶å‡ºç°å¼‚å¸¸ï¼Œæ ¹æ®è‡ªå·±ç¼–è¯‘æœºå™¨çš„å…·ä½“æƒ…å†µï¼Œä¿®æ”¹<code>libsvm_path</code>çš„è·¯å¾„å³å¯è§£å†³é—®é¢˜ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">libsvm_path &#x3D; VmafConfig.root_path(&#39;site-packages&#39;, &#39;libsvm&#39;)</span><br></pre></td></tr></table></figure>
<h2 id="matplotlibä¸­è®¾ç½®backendä¸ºaggå¸¦æ¥çš„é—®é¢˜">Matplotlibä¸­è®¾ç½®backendä¸ºaggå¸¦æ¥çš„é—®é¢˜</h2>
<p>å…³äºMatplotlibä¸­çš„backendç›¸å…³çš„é—®é¢˜ï¼Œæ­¤å¤„ä¸å†è¯¦ç»†å±•å¼€ï¼Œå…·ä½“å¯ä»¥å‚è§<a href="/2020/04/28/Matplotlib-s-backends-and-non-interactive-backends-for-rendering/">matplotlibçš„backendsä»¥åŠéäº¤äº’å¼ç»˜å›¾</a>ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨vmafä¸­ï¼ŒMatplotlibçš„backendä¼šè®¾ç½®ä¸ºaggæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨<a href="https://github.com/Netflix/vmaf/blob/master/python/vmaf/script/run_vmaf_training.py">python/vmaf/script/run_vmaf_training.py</a>ä¸­ï¼Œå°±è¿›è¡Œäº†ç›¸å…³çš„é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"></span><br><span class="line">import matplotlib</span><br><span class="line">matplotlib.use(&#39;Agg&#39;)</span><br></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨<code>libsvm</code>è®­ç»ƒå®Œæ¨¡å‹ä¹‹åï¼Œä¼šå¯¹VMAFçš„<code>SRCC</code>ï¼Œ<code>PCC</code>ç­‰æŒ‡æ ‡è¿›è¡Œè®¡ç®—ï¼Œå¹¶åˆ©ç”¨<code>python/vmaf/config.py</code>ä¸­çš„<code>DisplayConfig.show()</code>æœ€ç»ˆè°ƒç”¨<code>matplotlib</code>æ¥è¿›è¡Œç»“æœçš„å¯è§†åŒ–å±•ç°ã€‚ä½†æ˜¯ï¼Œåœ¨<code>DisplayConfig.show()</code>ä¸­ï¼Œå´æ˜¯ä½¿ç”¨æ˜¯å¦å­˜åœ¨å‚æ•°<code>write_to_dir</code>æ¥åˆ¤æ–­è°ƒç”¨ä»€ä¹ˆ<code>backends</code>ï¼Œè¿™å°±ä¼šå’Œä¹‹å‰çš„<code>Agg</code>é…ç½®å‡ºç°å†²çªï¼Œå› æ­¤è¿™é‡Œéœ€è¦åšä¸€ä¸ªç®€å•çš„å‡çº§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> matplotlib.rcParams[<span class="string">&#x27;backend&#x27;</span>] == <span class="string">&#x27;agg&#x27;</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;write_to_dir&#x27;</span> <span class="keyword">in</span> kwargs:</span><br><span class="line">        <span class="built_in">format</span> = kwargs[<span class="string">&#x27;format&#x27;</span>] <span class="keyword">if</span> <span class="string">&#x27;format&#x27;</span> <span class="keyword">in</span> kwargs <span class="keyword">else</span> <span class="string">&#x27;png&#x27;</span></span><br><span class="line">        filedir = kwargs[<span class="string">&#x27;write_to_dir&#x27;</span>] <span class="keyword">if</span> kwargs[<span class="string">&#x27;write_to_dir&#x27;</span>] <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> VmafConfig.workspace_path(<span class="string">&#x27;output&#x27;</span>)</span><br><span class="line">        os.makedirs(filedir, exist_ok=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">for</span> fignum <span class="keyword">in</span> plt.get_fignums():</span><br><span class="line">            fig = plt.figure(fignum)</span><br><span class="line">            fig.savefig(os.path.join(filedir, <span class="built_in">str</span>(fignum) + <span class="string">&#x27;.&#x27;</span> + <span class="built_in">format</span>), <span class="built_in">format</span>=<span class="built_in">format</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">format</span> = <span class="string">&#x27;png&#x27;</span></span><br><span class="line">        filedir = VmafConfig.workspace_path(<span class="string">&#x27;output&#x27;</span>)</span><br><span class="line">        os.makedirs(filedir, exist_ok=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">for</span> fignum <span class="keyword">in</span> plt.get_fignums():</span><br><span class="line">            fig = plt.figure(fignum)</span><br><span class="line">            fig.savefig(os.path.join(filedir, <span class="built_in">str</span>(fignum) + <span class="string">&#x27;.&#x27;</span> + <span class="built_in">format</span>), <span class="built_in">format</span>=<span class="built_in">format</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šï¼Œåªæœ‰åœ¨MacOSä¸Šæ‰ä¼šå‡ºç°è¯¥é—®é¢˜ï¼Œå› æ­¤æ›´åˆç†çš„æ–¹å¼æ˜¯æ ¹æ®ç³»ç»Ÿæ¥è®¾ç½®Matplotlibçš„backendsï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹Configç±»ã€‚å…·ä½“å¯ä»¥å‚è€ƒ<a href="https://github.com/Netflix/vmaf/pull/852">è¿™é‡Œçš„è®¨è®º</a>ã€‚</p>
<h2 id="libvmafçš„ç‰¹å¾å’Œpythonä¸­ä½¿ç”¨çš„ç‰¹å¾çš„å·®å¼‚">libvmafçš„ç‰¹å¾å’Œpythonä¸­ä½¿ç”¨çš„ç‰¹å¾çš„å·®å¼‚</h2>
<h4 id="libvmafç§å„ç‰¹å¾çš„ç±»å‹">libvmafç§å„ç‰¹å¾çš„ç±»å‹</h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼–è¯‘å‡ºæ¥çš„libvmafåº“ä½¿ç”¨çš„æ˜¯integerç±»å‹çš„ç‰¹å¾ï¼Œå…·ä½“å¦‚<code>meson_option.txt</code>æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">option(&#39;enable_float&#39;,</span><br><span class="line">    type: &#39;boolean&#39;,</span><br><span class="line">    value: false,</span><br><span class="line">    description: &#39;Compile floating-point feature extractors into the library&#39;)</span><br></pre></td></tr></table></figure>
<h4 id="pythonè®­ç»ƒæ¨¡å‹æ—¶å„ç‰¹å¾çš„ç±»å‹">pythonè®­ç»ƒæ¨¡å‹æ—¶å„ç‰¹å¾çš„ç±»å‹</h4>
<p>åœ¨ä½¿ç”¨pythonæ¥è®­ç»ƒæ¨¡å‹æ—¶ï¼Œä¼šæ ¹æ®<code>run_vmaf_training.py</code>æŒ‡å®šçš„ç‰¹å¾æ–‡ä»¶æ¥ç¡®å®šæ˜¯æŠ½å–<code>float</code>ç±»å‹çš„ç‰¹å¾è¿˜æ˜¯<code>integer</code>ç±»å‹çš„ç‰¹å¾ã€‚</p>
<p>å½“<code>feature_dict</code>çš„keyä¸º<code>VMAF_integer_feature</code>æ—¶ï¼Œåˆ™æŠ½å–çš„æ˜¯<code>integer</code>ç±»å‹çš„ç‰¹å¾ï¼Œå½“keyä¸º<code>VMAF_feature</code>æ—¶ï¼ŒæŠ½å–çš„ä¸º<code>float</code>ç±»å‹çš„ç‰¹å¾ã€‚å…·ä½“çš„åˆ¤æ–­é€»è¾‘ä½äº<a href="https://github.com/Netflix/vmaf/blob/master/python/vmaf/core/feature_assembler.py">feature_assembler.py</a>ä¸­çš„<code>FeatureAssembler.run()</code>ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27; æŠ½å–å„ç‰¹å¾çš„integerç±»å‹ç‰¹å¾</span></span><br><span class="line"><span class="string">feature_dict = &#123;</span></span><br><span class="line"><span class="string">    &#x27;VMAF_integer_feature&#x27;: [&#x27;vif_scale0&#x27;, </span></span><br><span class="line"><span class="string">                             &#x27;vif_scale1&#x27;, </span></span><br><span class="line"><span class="string">                             &#x27;vif_scale2&#x27;, </span></span><br><span class="line"><span class="string">                             &#x27;vif_scale3&#x27;, </span></span><br><span class="line"><span class="string">                             &#x27;adm2&#x27;, </span></span><br><span class="line"><span class="string">                             &#x27;motion&#x27;]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span> æŠ½å–å„ç‰¹å¾çš„<span class="built_in">float</span>ç±»å‹ç‰¹å¾</span><br><span class="line">feature_dict = &#123;</span><br><span class="line">    <span class="string">&#x27;VMAF_feature&#x27;</span>: [<span class="string">&#x27;vif_scale0&#x27;</span>, </span><br><span class="line">                             <span class="string">&#x27;vif_scale1&#x27;</span>, </span><br><span class="line">                             <span class="string">&#x27;vif_scale2&#x27;</span>, </span><br><span class="line">                             <span class="string">&#x27;vif_scale3&#x27;</span>, </span><br><span class="line">                             <span class="string">&#x27;adm2&#x27;</span>, </span><br><span class="line">                             <span class="string">&#x27;motion&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¿æŒlibvmafå’Œpythonçš„å¯¹åº”">ä¿æŒlibvmafå’Œpythonçš„å¯¹åº”</h4>
<p>å› æ­¤ï¼Œåœ¨è‡ªå·±è®­ç»ƒæ¨¡å‹çš„æ—¶å€™è¦ç‰¹åˆ«æ³¨æ„ï¼šåŠ¡å¿…ä¿è¯libvmafå’Œpythonä¸¤å¤„çš„ç‰¹å¾ç±»å‹å¿…é¡»å¯¹åº”èµ·æ¥ã€‚</p>
<ol>
<li>
<p>å¯ä»¥ä¿®æ”¹<code>meson_option.txt</code>çš„é…ç½®ï¼Œè®©<code>libvmaf</code>çš„floatç±»å‹çš„ç‰¹å¾ç”Ÿæ•ˆï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨<code>feature_dict['VMAF_feature']</code>æ¥è®­ç»ƒæ¨¡å‹ã€‚</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">option(&#39;enable_float&#39;,</span><br><span class="line">    type: &#39;boolean&#39;,</span><br><span class="line">    value: true,</span><br><span class="line">    description: &#39;Compile floating-point feature extractors into the library&#39;)</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šçš„æ‰€æœ‰æ”¹åŠ¨ï¼Œå¯ä»¥å‚è€ƒ<a href="update.diff">update.diff</a>ã€‚</p>
</li>
<li>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™ä½¿ç”¨<code>-Denable_float=true</code>æ¥å¼€å¯floatç±»å‹çš„ç‰¹å¾æ”¯æŒã€‚</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">meson setup build -Denable_float&#x3D;true</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä½¿ç”¨<code>feature_dict['VMAF_integer_feature']</code>æ¥è®­ç»ƒæ¨¡å‹ï¼Œæ­¤æ—¶ä¸éœ€è¦ä¿®æ”¹libvmafçš„ç¼–è¯‘è„šæœ¬ã€‚ä½†æ˜¯éœ€è¦ä¿®æ”¹<a href="https://github.com/Netflix/vmaf/blob/master/python/vmaf/core/feature_extractor.py">feature_extractor.py</a>ï¼Œå°†<code>VmafIntegerFeatureExtractor</code>ç±»ä¸­çš„<code>float_ansnr</code>ç‰¹å¾å»æ‰ã€‚å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ExternalProgramCaller.call_vmafexec_multi_features(</span><br><span class="line">    [&#39;adm&#39;, &#39;vif&#39;, &#39;motion&#39;],</span><br><span class="line">    yuv_type, ref_path, dis_path, w, h, log_file_path, logger, options&#x3D;&#123;</span><br><span class="line">        &#39;adm&#39;: &#123;&#39;debug&#39;: True&#125;,</span><br><span class="line">        &#39;vif&#39;: &#123;&#39;debug&#39;: True&#125;,</span><br><span class="line">        &#39;motion&#39;: &#123;&#39;debug&#39;: True&#125;,</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
      <categories>
        <category>IVQA</category>
      </categories>
      <tags>
        <tag>VMAF</tag>
      </tags>
  </entry>
  <entry>
    <title>VIFè´¨é‡è¯„ä¼°æ–¹æ³•ç®€ä»‹</title>
    <url>/2021/03/05/intoduction-to-VIF/</url>
    <content><![CDATA[<p>è§†è§‰ä¿¡æ¯ä¿çœŸåº¦ï¼ˆVIFï¼‰æ˜¯åŸºäº<a href="https://en.wikipedia.org/wiki/Scene_statistics">è‡ªç„¶åœºæ™¯ç»Ÿè®¡ï¼ˆ<em>natural scene statistics</em>ï¼‰</a>å’Œ<a href="https://wangwei1237.gitee.io/digital-video-concept/docs/2_2_0_TheHumanVisualSystem.html">äººç±»è§†è§‰ç³»ç»Ÿï¼ˆ<em>human visual system</em>ï¼‰</a>æå–å›¾åƒä¿¡æ¯çš„ä¸€ç§å…¨å‚è€ƒçš„å›¾åƒè´¨é‡è¯„ä¼°æŒ‡æ ‡ï¼Œå¹¶ä¸”ä¸äººç±»å¯¹è§†è§‰è´¨é‡çš„åˆ¤æ–­å…·æœ‰è‰¯å¥½çš„ç›¸å…³æ€§ã€‚</p>
<p>2006å¹´ï¼ŒHamid R Sheikhå’ŒAlan Bovikåœ¨å¾·å…‹è¨æ–¯å¤§å­¦å¥¥æ–¯æ±€åˆ†æ ¡çš„å›¾åƒå’Œè§†é¢‘å·¥ç¨‹å®éªŒå®¤ï¼ˆ<em>LIVE: Laboratory for Image and Video Engineering</em>ï¼‰æå‡ºäº†<a href="https://live.ece.utexas.edu/research/Quality/VIF.htm">VIFç®—æ³•</a>ã€‚</p>
<p><img src="/2021/03/05/intoduction-to-VIF/1.gif" alt></p>
<span id="more"></span>
<h2 id="èƒŒæ™¯çŸ¥è¯†">èƒŒæ™¯çŸ¥è¯†</h2>
<h4 id="è‡ªç„¶åœºæ™¯ç»Ÿè®¡-nss-natural-scene-statistics">è‡ªç„¶åœºæ™¯ç»Ÿè®¡ï¼ˆ<em>NSS: natural scene statistics</em>ï¼‰</h4>
<p>ä½¿ç”¨å¯ä»¥åœ¨å…‰è°±èŒƒå›´å†…è¿›è¡Œæ“ä½œçš„é«˜è´¨é‡çš„<strong>æ•è·è®¾å¤‡</strong>ï¼ˆçº¢å¤–æ‹æ‘„ä»ªã€ç›¸æœºç­‰ï¼‰è€Œè·å–åˆ°çš„<strong>è§†è§‰ç¯å¢ƒ</strong>çš„å›¾åƒå’Œè§†é¢‘ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè‡ªç„¶åœºæ™¯ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬æåˆ°æœ¯è¯­<code>è‡ªç„¶åœºæ™¯(NS:natural scene)</code>çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬æŒ‡çš„å°±æ˜¯æˆ‘ä»¬æ‰€æ‹æ‘„çš„ï¼Œæˆ‘ä»¬æ‰€å¤„çš„ï¼Œè¿™ä¸ªä¸–ç•Œçš„ç…§ç‰‡æˆ–è§†é¢‘ã€‚è¿™ä¸å…¶ä»–ç±»å‹çš„ä¿¡æ¯å®Œå…¨ä¸åŒï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ–‡æœ¬</li>
<li>è®¡ç®—æœºç”Ÿæˆçš„å›¾å½¢</li>
<li>å¡é€šæˆ–è€…åŠ¨ç”»</li>
<li>ç»˜ç”»æˆ–è€…ç»˜å›¾</li>
<li>éšæœºå™ªå£°</li>
<li>åˆ©ç”¨<code>nonvisual stimuli</code>ç”Ÿæˆçš„å›¾åƒæˆ–è€…è§†é¢‘ï¼Œä¾‹å¦‚é›·è¾¾ã€å£°å‘ã€X-raysã€è¶…å£°æˆåƒæŠ€æœ¯ç­‰</li>
</ul>
<p><code>è‡ªç„¶åœºæ™¯</code>æ„æˆäº†æ‰€æœ‰ç±»å‹çš„å›¾åƒé›†åˆä¸­çš„æå°çš„å­é›†ã€‚</p>
<p><code>åœºæ™¯ç»Ÿè®¡</code>æ˜¯æ„ŸçŸ¥é¢†åŸŸä¸­çš„ä¸€é—¨å­¦ç§‘ã€‚åœºæ™¯ç»Ÿè®¡æ¶‰åŠåˆ°ä¸åœºæ™¯æœ‰å…³çš„ç»Ÿè®¡è§„å¾‹ï¼Œå¹¶åŸºäºå¦‚ä¸‹çš„å‰æï¼šè®¾è®¡ä¸€ä¸ªæ„ŸçŸ¥ç³»ç»Ÿæ¥è§£é‡Šåœºæ™¯ã€‚</p>
<p>å¾ˆå¤šç ”ç©¶è€…è¯•å›¾é€šè¿‡ç ”ç©¶<a href="https://link.springer.com/article/10.1023/A:1021889010444"><code>è‡ªç„¶åœºæ™¯</code>çš„ç»Ÿè®¡ä¿¡æ¯æ¥äº†è§£å…¶ç»“æ„</a>ã€‚ç ”ç©¶äººå‘˜è®¤ä¸ºï¼Œè‡ªç„¶ç¯å¢ƒäº§ç”Ÿçš„è§†è§‰åˆºæ¿€ä¿ƒè¿›äº†HVSçš„è¿›åŒ–ï¼Œå¹¶ä¸”ï¼Œè‡ªç„¶åœºæ™¯å»ºæ¨¡å’ŒHVSå»ºæ¨¡åœ¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<a href="https://baike.baidu.com/item/%E5%AF%B9%E5%81%B6%E7%90%86%E8%AE%BA/9582786">å¯¹å¶é—®é¢˜</a>ã€‚</p>
<p>ç»“åˆä¿¡å·æ£€æµ‹ç†è®ºï¼ˆ<em>signal detection theory</em>ï¼‰ï¼Œä¿¡æ¯è®ºï¼ˆ<em>information theory</em>ï¼‰æˆ–ä¼°è®¡ç†è®ºï¼ˆ<em>estimation theory.</em>ï¼‰ï¼Œè‡ªç„¶åœºæ™¯ç»Ÿè®¡å¯ç”¨äºå®šä¹‰è§‚å¯Ÿè€…çš„è¡Œä¸ºã€‚ç›®å‰ï¼Œè‡ªç„¶åœºæ™¯ç»Ÿè®¡æ¨¡å‹æœ€æˆåŠŸçš„åº”ç”¨ä¹‹ä¸€å°±æ˜¯å›¾ç‰‡å’Œè§†é¢‘çš„å¯æ„ŸçŸ¥çš„è´¨é‡é¢„æµ‹ã€‚ä¹‹æ‰€ä»¥å¯ä»¥å¦‚æ­¤åº”ç”¨ï¼Œå…¶åŸºæœ¬çš„å‰ææ˜¯ï¼š</p>
<ul>
<li>å›¾åƒã€è§†é¢‘é€šå¸¸ä¼šæ¶‰åŠè‡ªç„¶åœºæ™¯</li>
<li>å›¾åƒã€è§†é¢‘çš„å¤±çœŸä¼šæ”¹å˜è‡ªç„¶åœºæ™¯çš„ç»Ÿè®¡ä¿¡æ¯</li>
<li>äººç±»è§†è§‰ç³»ç»Ÿå¯¹è‡ªç„¶åœºæ™¯ç»Ÿè®¡ä¿¡æ¯çš„å˜åŒ–éå¸¸æ•æ„Ÿ</li>
</ul>
<h4 id="vmaf">VMAF</h4>
<p>ä»¥VIFä¸ºåŸºç¡€ï¼ŒNetflixå¼€å‘äº†åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè§†é¢‘è´¨é‡è¯„ä¼°é¢†åŸŸçš„æœ€ä¼˜ç§€çš„å…¨å‚è€ƒè¯„ä¼°ç®—æ³•ï¼š<a href="https://netflixtechblog.com/toward-a-practimathcal-perceptual-video-quality-metric-653f208b9652">VMAFï¼ˆ<em>Video Multimethod Assessment Fusion</em>ï¼‰</a>ã€‚</p>
<p>VMAFè®¤ä¸ºæ¯ä¸ªåŸºæœ¬æµ‹é‡æŒ‡æ ‡éƒ½åœ¨è§†é¢‘ç‰¹å¾ã€å¤±çœŸç±»å‹å’Œå¤±çœŸåº¦ä¸Šæœ‰ä¸åŒçš„è¡¨ç°ï¼Œé€šè¿‡æœºå™¨å­¦ä¹ ç®—æ³•å¯ä»¥å°†åŸºç¡€çš„æµ‹é‡æŒ‡æ ‡èåˆå¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚å½“å‰ï¼ŒVMAFç®—æ³•ä½¿ç”¨VIFã€DLMï¼ˆ<em>ç»†èŠ‚æŸå¤±æŒ‡æ ‡</em>ï¼‰ã€è¿åŠ¨ï¼ˆ<em>ç›¸é‚»å¸§å·®å¼‚</em>ï¼‰ä½œä¸ºåŸºæœ¬æµ‹é‡æŒ‡æ ‡ï¼Œå¹¶ä½¿ç”¨SVMç®—æ³•å¯¹æµ‹é‡æŒ‡æ ‡è¿›è¡Œèåˆæ¥é¢„æµ‹æœ€ç»ˆç»“æœã€‚VMAFåŸºæœ¬åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2021/03/05/intoduction-to-VIF/2.png" alt></p>
<p>è™½ç„¶ï¼ŒVMAFçš„æ•ˆæœæ¯”PSNRå’ŒSSIMè¦å¥½ï¼Œä½†æ˜¯å…¶è¿è¡Œé€Ÿåº¦å´è¾ƒæ…¢ï¼Œåœ¨éƒ¨åˆ†æœºå™¨ä¸Šç”šè‡³å°äº1å¸§/ç§’ã€‚</p>
<p>åŒæ—¶ï¼Œè™½ç„¶å¼€æºçš„VMAFä¹Ÿå¯ä»¥å¾—åˆ°è¾ƒå¥½çš„å¾—åˆ†ï¼Œä½†æ˜¯ä¸Netflixå…¬å¸ƒçš„åˆ†å€¼ç›¸æ¯”ä»ç„¶ç¨æœ‰é€Šè‰²ã€‚æˆ–è®¸æ˜¯å› ä¸ºVMAFæœªå¼€æºçš„éƒ¨åˆ†ä¸­åŒ…å«äº†æ›´å¤šçš„æ•°æ®é›†è®­ç»ƒæ¨¡å‹å’ŒGPUçš„æ”¯æŒã€‚</p>
<h2 id="vifç®—æ³•">VIFç®—æ³•</h2>
<h4 id="vifç®—æ³•çš„æ ¸å¿ƒæ€æƒ³">VIFç®—æ³•çš„æ ¸å¿ƒæ€æƒ³</h4>
<p>VIFç®—æ³•å°†å›¾åƒ/è§†é¢‘çš„è´¨é‡è¯„ä¼°é—®é¢˜çœ‹ä½œä¸€ä¸ªä¿¡æ¯ä¿çœŸçš„é—®é¢˜ï¼Œå¹¶ä»ä¿¡æ¯é€šä¿¡å’Œå…±äº«çš„è§’åº¦æ¥è¯„ä¼°å›¾åƒ/è§†é¢‘çš„è´¨é‡ã€‚</p>
<p>VIFè®¤ä¸ºï¼š</p>
<ul>
<li>äººçœ¼æ‰€çœ‹åˆ°çš„å›¾åƒæ˜¯é€šè¿‡HVSè¿‡æ»¤ä¹‹åè€Œæå–åˆ°çš„ä¿¡æ¯ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œäººç±»è§†è§‰ç³»ç»Ÿä¹Ÿæ˜¯ä¸€ä¸ªç®€å•çš„å¤±çœŸé€šé“</li>
<li>åœ¨ç»è¿‡HVSä¹‹å‰ï¼Œå¤±çœŸå›¾åƒåªæ˜¯æ¯”åŸå§‹å›¾åƒå¤šç»è¿‡äº†ä¸€ä¸ªå¤±çœŸé€šé“</li>
<li>åˆ©ç”¨ä¿¡æ¯è®ºçš„ç†è®ºï¼ŒæŠŠäººçœ¼ä»å¤±çœŸå›¾åƒä¸­æå–åˆ°çš„ä¿¡æ¯å’Œäººçœ¼ä»åŸå§‹å›¾åƒä¸­æå–åˆ°çš„ä¿¡æ¯è¿›è¡Œå¯¹æ¯”ï¼Œä»è€Œå¾—åˆ°ç¬¦åˆäººä¸»è§‚æ„ŸçŸ¥çš„å›¾åƒè´¨é‡</li>
</ul>
<p>æ•´ä½“VIFç®—æ³•ä¸­åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š<code>Source Model</code>ï¼Œ<code>Distortion Model</code>ï¼Œ<code>HVS Model</code>ï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2021/03/05/intoduction-to-VIF/1.gif" alt></p>
<h4 id="source-model">Source Model</h4>
<p><code>Source Model</code>ä¹Ÿç§°ä¸ºåŸå§‹å›¾åƒå»ºæ¨¡ï¼Œä¸ºäº†æ¨¡æ‹ŸHVSçš„å¤šé€šé“ç‰¹æ€§ï¼ŒVIFç®—æ³•åˆ©ç”¨<a href="/2020/03/18/introduction-to-image-pyramid/">é«˜æ–¯é‡‘å­—å¡”</a>å°†å›¾åƒåˆ†æˆå››ä¸ªä¸åŒçš„å°ºåº¦ï¼Œç„¶åå°†æ¯ä¸€ä¸ªå°ºåº¦åˆ†æˆå¤§å°ä¸ä¸€çš„å—ï¼Œæ¯ä¸€ä¸ªå—ä¸­çš„æ‰€æœ‰åƒç´ ç»„æˆä¸€ä¸ªå‘é‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>c</mi><mo stretchy="true">â†’</mo></mover></mrow><annotation encoding="application/x-tex">\overrightarrow{c}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9525600000000001em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9525600000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span></span></span></span>ï¼Œå¹¶ä½¿ç”¨é«˜æ–¯æ··åˆæ¨¡å‹å¯¹å‘é‡è¿›è¡Œå»ºæ¨¡ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">C</mi><mo>=</mo><mi mathvariant="script">S</mi><mo separator="true">â‹…</mo><mi mathvariant="script">U</mi><mo>=</mo><mo stretchy="false">{</mo><msub><mi>S</mi><mi>i</mi></msub><mo separator="true">â‹…</mo><msub><mover accent="true"><mi>U</mi><mo stretchy="true">â†’</mo></mover><mi>i</mi></msub><mo>:</mo><mi>i</mi><mo>âˆˆ</mo><mi>I</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\mathcal{C} = \mathcal{S} Â· \mathcal{U} = \{ S_i Â· \overrightarrow{U}_i : i \in I \}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.05834em;">C</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.075em;">S</span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.09931em;">U</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.45533em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.20533em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mclose">}</span></span></span></span></span></p>
<p>å¯¹äº<code>Source Model</code>è€Œè¨€ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mclose">)</span></span></span></span>è¡¨ç¤ºç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>ä¸ªå—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br>
<img src="/2021/03/05/intoduction-to-VIF/3.jpg" alt></p>
<p>åœ¨è®¡ç®—æ—¶ï¼Œå¯ä»¥åˆ©ç”¨ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>å—ä¸­çš„ç³»æ•°æ¥ä¼°è®¡ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>å—çš„å‚æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span>ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mover accent="true"><mi>s</mi><mo stretchy="true">^</mo></mover><mi>i</mi><mn>2</mn></msubsup><mo>=</mo><mover accent="true"><mrow><mi>C</mi><mi>o</mi><mi>v</mi></mrow><mo stretchy="true">^</mo></mover><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\widehat{s}_i^2 = \widehat{Cov}(C,C)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1111079999999998em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.67056em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span></span></span><span class="svg-align" style="width:calc(100% - 0.11112em);margin-left:0.11112em;top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.24em;"><svg width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.23333em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.98333em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.3em;"><svg width="100%" height="0.3em" viewbox="0 0 2364 300" preserveaspectratio="none"><path d="M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z"/></svg></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose">)</span></span></span></span></span></p>
<h4 id="distortion-model">Distortion Model</h4>
<p>å¯¹äº<code>Distortion Model</code>è€Œè¨€ï¼Œä¸ºäº†èƒ½å¤Ÿè®©<code>Distortion Model</code>ä¸­çš„è®¡ç®—å¯ä»¥æˆç«‹ï¼Œè®ºæ–‡é‡‡ç”¨å±€éƒ¨ä¼°è®¡çš„æ–¹å¼æ¥è·å–<code>distortion channel</code>çš„å‚æ•°ã€‚</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">D</mi><mo>=</mo><mrow><mi mathvariant="script">G</mi><mi mathvariant="script">C</mi></mrow><mo>+</mo><mi mathvariant="script">V</mi><mo>=</mo><mo stretchy="false">{</mo><msub><mi>g</mi><mi>i</mi></msub><msub><mover accent="true"><mi>C</mi><mo stretchy="true">â†’</mo></mover><mi>i</mi></msub><mo>+</mo><msub><mover accent="true"><mi>V</mi><mo stretchy="true">â†’</mo></mover><mi>i</mi></msub><mo>:</mo><mi>i</mi><mo>âˆˆ</mo><mi>I</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\mathcal{D} = \mathcal{GC} + \mathcal{V} = \{g_i {\overrightarrow{C}}_i+{\overrightarrow{V}}_i:i \in I\}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em;">D</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.78055em;vertical-align:-0.09722em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.0593em;">G</span><span class="mord mathcal" style="margin-right:0.05834em;">C</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.45533em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.20533em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.35533em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.20533em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mclose">}</span></span></span></span></span></p>
<p>å…·ä½“åšæ³•ä¸ºï¼Œåœ¨å¦‚ä¸‹å›¾æ‰€ç¤ºçš„å°æ³¢å˜æ¢ä¹‹åçš„é¢‘åŸŸå›¾ä¸­ï¼Œå¯¹äºå›¾ä¸­çš„ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>ä¸ªç³»æ•°è€Œè¨€ï¼Œæˆ‘ä»¬é‡‡ç”¨ä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>ä¸ºä¸­å¿ƒçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>Ã—</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">B \times B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>çš„ç³»æ•°å—ä¸Šä¼°è®¡ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>ä¸ªç³»æ•°å¯¹åº”çš„å‚æ•°ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">g_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mrow><mi>v</mi><mo separator="true">,</mo><mi>i</mi></mrow><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\sigma_{v,i}^{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20888em;vertical-align:-0.394772em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.441336em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">i</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.394772em;"><span></span></span></span></span></span></span></span></span></span>ã€‚</p>
<p>å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">g_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸ºåœ¨è¯¥å¯¹åº”å—ä¹‹ä¸Šçš„éšæœºåœº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">{G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">G</span></span></span></span></span>çš„å€¼ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mrow><mi>v</mi><mo separator="true">,</mo><mi>i</mi></mrow><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\sigma_{v,i}^{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20888em;vertical-align:-0.394772em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.441336em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">i</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.394772em;"><span></span></span></span></span></span></span></span></span></span>ä¸ºåœ¨è¯¥å¯¹åº”å—ä¹‹ä¸Šçš„éšæœºåœº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">{V}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span></span></span></span></span>çš„æ–¹å·®ã€‚<br>
<img src="/2021/03/05/intoduction-to-VIF/4.jpg" alt></p>
<p>æ­¤æ—¶ï¼Œ<code>Distortion Model</code>ä¸­çš„å‚è€ƒä¿¡å·å’ŒæŠ˜æŸä¿¡å·éƒ½èƒ½è·å–ï¼Œå› æ­¤å¯ä»¥å¾ˆå®¹æ˜“çš„ç”¨å¦‚ä¸‹æ‰€ç¤ºæ–¹æ³•æ¥å¯¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">g_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mrow><mi>v</mi><mo separator="true">,</mo><mi>i</mi></mrow><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\sigma_{v,i}^{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20888em;vertical-align:-0.394772em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.441336em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">i</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.394772em;"><span></span></span></span></span></span></span></span></span></span>è¿›è¡Œä¼°è®¡ã€‚</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>g</mi><mo stretchy="true">^</mo></mover><mi>i</mi></msub><mo>=</mo><mover accent="true"><mrow><mi>C</mi><mi>o</mi><mi>v</mi></mrow><mo stretchy="true">^</mo></mover><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mover accent="true"><mrow><mi>C</mi><mi>o</mi><mi>v</mi></mrow><mo stretchy="true">^</mo></mover><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">,</mo><mi>C</mi><msup><mo stretchy="false">)</mo><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">\widehat{g}_{i} = \widehat{Cov}(C,D)\widehat{Cov}(C,C)^{-1}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.865em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.67056em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span><span class="svg-align" style="width:calc(100% - 0.05556em);margin-left:0.05556em;top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.24em;"><svg width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.23333em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.98333em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.3em;"><svg width="100%" height="0.3em" viewbox="0 0 2364 300" preserveaspectratio="none"><path d="M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z"/></svg></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.98333em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.3em;"><svg width="100%" height="0.3em" viewbox="0 0 2364 300" preserveaspectratio="none"><path d="M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z"/></svg></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mover accent="true"><mi>Ïƒ</mi><mo stretchy="true">^</mo></mover><mrow><mi>v</mi><mo separator="true">,</mo><mi>i</mi></mrow><mn>2</mn></msubsup><mo>=</mo><mover accent="true"><mrow><mi>C</mi><mi>o</mi><mi>v</mi></mrow><mo stretchy="true">^</mo></mover><mo stretchy="false">(</mo><mi>D</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><msub><mover accent="true"><mi>g</mi><mo stretchy="true">^</mo></mover><mi>i</mi></msub><mover accent="true"><mrow><mi>C</mi><mi>o</mi><mi>v</mi></mrow><mo stretchy="true">^</mo></mover><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\widehat{\sigma}_{v,i}^{2} = \widehat{Cov}(D,D) - \widehat{g}_{i}\widehat{Cov}(C,D)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2472159999999999em;vertical-align:-0.383108em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.67056em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.24em;"><svg width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-2.4530000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">i</span></span></span></span><span style="top:-3.1130000000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.23333em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.98333em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.3em;"><svg width="100%" height="0.3em" viewbox="0 0 2364 300" preserveaspectratio="none"><path d="M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z"/></svg></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.23333em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.67056em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span><span class="svg-align" style="width:calc(100% - 0.05556em);margin-left:0.05556em;top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.24em;"><svg width="100%" height="0.24em" viewbox="0 0 1062 239" preserveaspectratio="none"><path d="M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.98333em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.3em;"><svg width="100%" height="0.3em" viewbox="0 0 2364 300" preserveaspectratio="none"><path d="M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z"/></svg></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span></span></p>
<p>åœ¨ä¼°è®¡å‰ï¼Œä¼šå¯¹æ¯ä¸€ä¸ªç³»æ•°è¿›è¡Œä¸åŒå°ºåº¦çš„é«˜æ–¯å·ç§¯è®¡ç®—ã€‚</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>o</mi><mi>v</mi><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">[</mo><mi>C</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mi>D</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>âˆ—</mo><mi>F</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><mspace linebreak="newline"></mspace><mo stretchy="false">[</mo><mi>C</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>âˆ—</mo><mi>F</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>D</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>âˆ—</mo><mi>F</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">Cov(C,D) = [C(n)D(n)] * F(n) - \\ 
           [C(n)*F(n)][D(n)*F(n)] 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p>
<h4 id="hvs-model">HVS Model</h4>
<p>å¯¹äº<code>HVS Model</code>è€Œè¨€ï¼ŒVIFå°†å…¶å¸¦æ¥çš„è¯¯å·®æ•´åˆä¸ºä¸€ä¸ªå™ªå£°ã€‚å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">E</mi><mo>=</mo><mi mathvariant="script">C</mi><mo>+</mo><mi mathvariant="script">N</mi><mo>=</mo><mi mathvariant="script">S</mi><mo separator="true">â‹…</mo><mi mathvariant="script">U</mi><mo>+</mo><mi mathvariant="script">N</mi><mspace linebreak="newline"></mspace><mi mathvariant="script">F</mi><mo>=</mo><mi mathvariant="script">D</mi><mo>+</mo><msup><mi mathvariant="script">N</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><mrow><mi mathvariant="script">G</mi><mi mathvariant="script">C</mi></mrow><mo>+</mo><mi mathvariant="script">V</mi><mo>+</mo><msup><mi mathvariant="script">N</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">\mathcal{E} = \mathcal{C} + \mathcal{N} = \mathcal{S} Â· \mathcal{U} + \mathcal{N} \\
\mathcal{F} = \mathcal{D} + \mathcal{N}&#x27; = \mathcal{GC} + \mathcal{V} + \mathcal{N}&#x27;
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.08944em;">E</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.05834em;">C</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.14736em;">N</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.075em;">S</span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.09931em;">U</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.14736em;">N</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.09931em;">F</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em;">D</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.801892em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathcal" style="margin-right:0.14736em;">N</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.78055em;vertical-align:-0.09722em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.0593em;">G</span><span class="mord mathcal" style="margin-right:0.05834em;">C</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.801892em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathcal" style="margin-right:0.14736em;">N</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>å› æ­¤ï¼Œåœ¨VIFç®—æ³•ä¸­ï¼Œ<code>HVS Model</code>å…¶åªæœ‰ä¸€ä¸ªå‚æ•°ï¼šè§†è§‰å™ªå£°çš„æ–¹å·®<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mi>n</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\sigma_n^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä»è®ºæ–‡ä¸­å¯ä»¥å‘ç°ï¼Œè¯¥å‚æ•°æ˜¯ä¸€ä¸ªå¯ä»¥è°ƒèŠ‚çš„å‚æ•°ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„è§†é¢‘æ•°æ®é›†æ¥è°ƒæ•´ä»¥è·å–æœ€ä½³çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mi>n</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\sigma_n^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span>ã€‚</p>
<p>åœ¨VIFæä¾›çš„å°æ³¢åŸŸä¸‹çš„ç®—æ³•å®ç°ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mi>n</mi><mn>2</mn></msubsup><mo>=</mo><mn>0.4</mn></mrow><annotation encoding="application/x-tex">\sigma_n^2=0.4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">4</span></span></span></span>ï¼Œåœ¨VIFæä¾›çš„<a href="vifp_mscale.m">åƒç´ åŸŸä¸‹çš„ç®—æ³•å®ç°ä¸­</a>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mi>n</mi><mn>2</mn></msubsup><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\sigma_n^2=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>ï¼Œåœ¨VMAFçš„integer_vifä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mi>n</mi><mn>2</mn></msubsup><mo>=</mo><mn>65536</mn><mo>&lt;</mo><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\sigma_n^2=65536&lt;&lt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">6</span><span class="mord">5</span><span class="mord">5</span><span class="mord">3</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ã€‚</p>
<p><a href="https://github.com/Netflix/vmaf/blob/master/libvmaf/src/feature/vif_tools.c">VMAFå®ç°VIFæ—¶</a>ï¼Œå¯¹ç›¸å…³å‚æ•°çš„è®¡ç®—å‡½æ•°<code>vif_statistic_s</code>å°±æ˜¯é‡‡ç”¨äº†å¦‚ä¸Šçš„æ–¹æ³•ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">g     = sigma12 / (sigma1_sq + eps);</span><br><span class="line">sv_sq = sigma2_sq - g * sigma12;</span><br></pre></td></tr></table></figure>
<h4 id="vifçš„å¤šå°ºåº¦è®¡ç®—">VIFçš„å¤šå°ºåº¦è®¡ç®—</h4>
<p>æœ€ç»ˆï¼Œç»“åˆ<code>Source Model</code>ï¼Œ<code>Distortion Model</code>ï¼Œ<code>HVS Model</code>ï¼Œå¾—åˆ°VIFç®—æ³•ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mi>I</mi><mi>F</mi><mo>=</mo><mfrac><mrow><mi>I</mi><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">;</mo><mi>F</mi><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo stretchy="false">)</mo></mrow><mrow><mi>I</mi><mo stretchy="false">(</mo><mi>C</mi><mo separator="true">;</mo><mi>E</mi><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">VIF = \frac{I(C;F|s)}{I(C;E|s)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">âˆ£</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord">âˆ£</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>åœ¨å¾—åˆ°ä¸€ä¸ªå°ºåº¦VIFå¾—åˆ†ä¹‹åï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„å°†è®¡ç®—è¿‡ç¨‹æ‰©å±•åˆ°å…¶ä»–çš„å°ºåº¦ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæœ‰4ä¸ªå°ºåº¦çš„VIFçš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br>
<img src="/2021/03/05/intoduction-to-VIF/5.jpg" alt><br>
å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mn>0</mn></mrow><annotation encoding="application/x-tex">f0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord">0</span></span></span></span>-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mn>3</mn></mrow><annotation encoding="application/x-tex">f3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord">3</span></span></span></span>æ»¤æ³¢åˆ†åˆ«å¯¹åº”ç€å®½åº¦ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span>ï¼‰ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>17</mn><mo>Ã—</mo><mn>17</mn></mrow><annotation encoding="application/x-tex">17 \times 17</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">7</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn><mo>Ã—</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">9 \times 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mo>Ã—</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">5 \times 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>Ã—</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">3 \times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi><mo>=</mo><mi>N</mi><mi mathvariant="normal">/</mi><mn>5</mn></mrow><annotation encoding="application/x-tex">\sigma=N/5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord">/</span><span class="mord">5</span></span></span></span>çš„é«˜æ–¯å·ç§¯æ ¸ï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br>
<img src="/2021/03/05/intoduction-to-VIF/6.jpg" alt></p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mi>I</mi><mi>F</mi><mo>=</mo><mfrac><mstyle scriptlevel="0" displaystyle="true"><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo>âˆˆ</mo><mi>a</mi><mi>l</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>s</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>e</mi><mi>s</mi></mrow></munder><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mi>i</mi></msub></mrow></mstyle><mstyle scriptlevel="0" displaystyle="true"><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo>âˆˆ</mo><mi>a</mi><mi>l</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>s</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>e</mi><mi>s</mi></mrow></munder><mrow><mi>d</mi><mi>e</mi><msub><mi>n</mi><mi>i</mi></msub></mrow></mstyle></mfrac></mrow><annotation encoding="application/x-tex">VIF = \frac{\displaystyle\sum_{i \in all\_scales}{num_i}}{\displaystyle\sum_{i \in all\_scales}{den_i}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:5.418236em;vertical-align:-2.459118em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9591180000000006em;"><span style="top:-2.1100000000000003em;"><span class="pstrut" style="height:3.0500050000000005em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0500050000000003em;"><span style="top:-1.847887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">âˆˆ</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">s</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.519113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.2800050000000005em;"><span class="pstrut" style="height:3.0500050000000005em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.959118em;"><span class="pstrut" style="height:3.0500050000000005em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0500050000000003em;"><span style="top:-1.847887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">âˆˆ</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">s</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.519113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="mord mathdefault">u</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.459118em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<h2 id="åˆ©ç”¨libvmafè®¡ç®—vif">åˆ©ç”¨libvmafè®¡ç®—VIF</h2>
<p>ä¾èµ–äº<a href="https://github.com/Netflix/vmaf">VMAF</a>è‰¯å¥½çš„è®¾è®¡å’Œå¼ºå¤§çš„å¯æ‰©å±•æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨VMAFæ¥å•ç‹¬çš„è®¡ç®—å…¶å•ä¸ªç‰¹å¾çš„è¯„ä¼°ç»“æœã€‚å¯¹äºVIFè€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¦‚ä¸‹çš„æ­¥éª¤ï¼Œæ¥è®¡ç®—ä¸¤ä¸ªç»™å®šçš„YUVæ ¼å¼çš„è§†é¢‘çš„VIFå¾—åˆ†ï¼š</p>
<ul>
<li>æŒ‰ç…§<a href="https://github.com/Netflix/vmaf/tree/master/libvmaf">libvmafçš„æ–‡æ¡£</a>ç¼–è¯‘libvmafï¼Œå¦‚æœå¸Œæœ›å¾—åˆ°æ›´å¤šçš„debugçš„ä¿¡æ¯ï¼Œå¯ä»¥å°†<a href="https://github.com/Netflix/vmaf/blob/master/libvmaf/src/feature/integer_vif.c">integer_vif</a>çš„debugå‚æ•°ä¿®æ”¹ä¸º<code>true</code>ã€‚</li>
<li>ç¼–å†™æµ‹è¯•ä»£ç ï¼Œè°ƒç”¨libvmafåº“ä¸­æä¾›çš„ç›¸å…³apiè®¡ç®—å„å°ºåº¦çš„VIFå¾—åˆ†ï¼Œå…·ä½“å‚è§<a href="test_vif.cpp">test_vif.cpp</a>ã€‚</li>
<li>åˆ©ç”¨å¦‚ä¸‹å‘½ä»¤ç¼–è¯‘test_vif.cpp:<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> g++ -o vif test_vif.cpp -Ilibvmaf/include -Llibvmaf/build/src -lvmaf</span></span><br></pre></td></tr></table></figure>
</li>
<li>è®¡ç®—ä¸¤ä¸ªè§†é¢‘çš„vifå¾—åˆ†ï¼š<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> DYLD_LIBRARY_PATH=<span class="variable">$DYLD_LIBRARY_PATH</span>:libvmaf/build/src <span class="comment"># å¦‚æœæ‰§è¡ŒvifæŠ¥é”™</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vif t1.yuv t3.yuv 2160x2840</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å¯¹äºå¦‚ä¸‹å›¾æ‰€ç¤ºçš„è§†é¢‘å¯¹ï¼Œ</p>
<p><img src="/2021/03/05/intoduction-to-VIF/9.jpg" alt></p>
<p>æˆ‘ä»¬åˆ†åˆ«è®¡ç®—vifï¼Œssimï¼Œpsnrçš„å¾—åˆ†å¯ä»¥å¾—å‡ºå¦‚ä¸‹ç»“æœï¼š</p>
<p><img src="/2021/03/05/intoduction-to-VIF/8.jpg" alt></p>
<p>ä»ç»“æœçœ‹ï¼Œå¯¹äºè¿™ç§æŠ˜æŸVIFç®—æ³•ç»™å‡ºçš„ç»“æœæ›´ç¬¦åˆäººçš„ä¸»è§‚æ„Ÿå—ã€‚</p>
<h2 id="vifçš„ä¼˜åŠ¿å’Œå±€é™æ€§">VIFçš„ä¼˜åŠ¿å’Œå±€é™æ€§</h2>
<h4 id="vifçš„ä¼˜åŠ¿">VIFçš„ä¼˜åŠ¿</h4>
<ul>
<li>
<p>ä¸€ä¸ªå¥½çš„<code>Distortion Model</code>å¯ä»¥ä½¿å¾—æŠ˜æŸå›¾åƒå’Œåˆæˆçš„å›¾åƒèƒ½å¤Ÿæœ‰ç›¸åŒçš„æ„Ÿå®˜è´¨é‡ã€‚<code>Distortion Model</code>çš„ç›®çš„å¹¶ä¸æ˜¯å¯¹å›¾åƒçš„æ‰€æœ‰æŠ˜æŸç±»å‹è¿›è¡Œå»ºæ¨¡ï¼Œè€Œæ˜¯å¯¹å›¾åƒçš„æŠ˜æŸå¸¦æ¥çš„ä¸»è§‚æ„Ÿå—è¿›è¡Œå»ºæ¨¡ã€‚å› æ­¤ï¼ŒVIFä¸ä¸€å®šèƒ½å¤Ÿæ•è·æ‰€æœ‰çš„å›¾åƒæŠ˜æŸï¼Œä½†æ˜¯å´å¯ä»¥æ•è·è¿™äº›å›¾åƒçš„æŠ˜æŸå¸¦æ¥çš„æ„ŸçŸ¥æŠ˜æŸã€‚</p>
</li>
<li>
<p>å¦å¤–ï¼Œä»<code>Distortion Model</code>ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">D</mi><mo>=</mo><mrow><mi mathvariant="script">G</mi><mi mathvariant="script">C</mi></mrow><mo>+</mo><mi mathvariant="script">V</mi></mrow><annotation encoding="application/x-tex">\mathcal{D} = \mathcal{GC} + \mathcal{V}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em;">D</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.78055em;vertical-align:-0.09722em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.0593em;">G</span><span class="mord mathcal" style="margin-right:0.05834em;">C</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span></span></span></span>ï¼‰å¯ä»¥å‘ç°ï¼ŒVIFå°†å›¾åƒçš„æŠ˜æŸæ‹†åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li>ä¿¡å·å¢ç›Š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span></li>
<li>å™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span></span></span></span></li>
<li>HVSå™ªå£°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>N</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">N&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></li>
</ul>
<p>è¿™ä½¿å¾—VIFæ›´ç¬¦åˆå½“å‰çš„å®é™…åº”ç”¨ã€‚ä¾‹å¦‚å›¾åƒçš„äº®åº¦å¢å¼ºï¼Œå¯¹æ¯”åº¦å¢å¼ºç­‰åœºæ™¯ã€‚åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œå›¾åƒä¿¡å·è™½ç„¶å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯å›¾åƒå¤„ç†è¿‡ç¨‹å¼•å…¥çš„å™ªå£°ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆPSNRï¼ŒSSIMç­‰ç®—æ³•æ— æ³•åº”ç”¨äºç±»ä¼¼åœºæ™¯çš„åŸå› ï¼Œè€ŒVIFçš„æŠ˜æŸå›¾åƒæ¨¡å‹å´å¯ä»¥å®Œç¾çš„åº”ç”¨äºè¿™äº›åœºæ™¯ã€‚å¯¹äºäº®åº¦å¢å¼ºæˆ–å¯¹æ¯”åº¦å¢å¼ºçš„åœºæ™¯ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">G&gt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œä»è€Œä½¿å¾—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mi>I</mi><mi>F</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">VIF&gt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œä»è€Œå¯ä»¥å¾—å‡ºå¢å¼ºåçš„å›¾åƒåœ¨æ„Ÿå®˜è´¨é‡ä¸Šè¦ä¼˜äºå‚è€ƒå›¾åƒçš„ç»“è®ºã€‚æˆ‘ä»¬ç”¨VIFè®¡ç®—å¯¹æ¯”åº¦æå‡50%çš„è§†é¢‘è§†é¢‘æ—¶ï¼Œå‘ç°å‚æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span>å®é™…ä¸Šæ˜¯&gt;1çš„ï¼Œ<br>
<img src="/2021/03/05/intoduction-to-VIF/12.jpg" alt><br>
å¹¶ä¸”å¾—åˆ°å¦‚ä¸‹çš„ç»“æœï¼š<br>
<img src="/2021/03/05/intoduction-to-VIF/11.jpg" alt></p>
</li>
<li>
<p>ä»VIFçš„è®¡ç®—å¯ä»¥ï¼ŒVIFçš„æœ€ç»ˆå¾—åˆ†æ˜¯å¤±çœŸå›¾åƒDåœ¨å‚è€ƒå›¾åƒCä¸‹çš„å¾—åˆ†ã€‚å®é™…ä¸Šè€Œè¨€ï¼ŒVIFæ˜¯ä¸€ç§å†…å®¹è‡ªé€‚åº”çš„ç®—æ³•ã€‚ç»™å®šçš„å›¾åƒæŠ˜æŸï¼Œå¯¹äºä¸åŒçš„å†…å®¹è€Œè¨€ï¼Œå…¶å¸¦æ¥çš„ä¸»è§‚æ„Ÿå—æ˜¯ä¸ä¸€æ ·çš„ã€‚åˆ©å¦‚ï¼ŒæŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨è¿åŠ¨æ¨¡ç³Šæ¥å±•ç°ç‰©ä½“çš„é«˜é€Ÿè¿åŠ¨ï¼Œä½†æ˜¯å¯¹äºè§‚çœ‹ç¾½æ¯›çƒæ¯”èµ›æ—¶ï¼Œå¦‚æœå‡ºç°ç¾½æ¯›çƒè¿åŠ¨æ¨¡ç³Šçš„æƒ…å†µï¼Œå°±ä¼šä»¤äººè®¨åŒäº†ã€‚å¯¹äºï¼ŒPSNRå’ŒSSIMç­‰ç®—æ³•è€Œè¨€ï¼Œåœ¨è®¡ç®—è¿‡ç¨‹ä¸­æ˜¯æ²¡æœ‰åšç±»ä¼¼çš„è€ƒè™‘çš„ã€‚<br>
<img src="/2021/03/05/intoduction-to-VIF/7.jpeg" alt></p>
</li>
</ul>
<h4 id="vifçš„å±€é™æ€§">VIFçš„å±€é™æ€§</h4>
<ul>
<li>VIFçš„ç†è®ºåŸºç¡€æ¥è‡ªäº<code>è‡ªç„¶åœºæ™¯</code>ï¼Œå› æ­¤VIFå¹¶ä¸é€‚ç”¨äºé<code>è‡ªç„¶åœºæ™¯</code>ä¸‹çš„å›¾åƒ/è§†é¢‘çš„è´¨é‡è¯„ä¼°ï¼Œè¿™ä¸€ç‚¹è¦å°¤å…¶æ³¨æ„ã€‚</li>
<li>å’ŒPSNRï¼ŒSSIMç­‰ç®—æ³•ç›¸æ¯”ï¼ŒVIFç®—æ³•çš„è®¡ç®—æ€§èƒ½ä¹Ÿæ˜¯éœ€è¦è€ƒè™‘çš„é—®é¢˜ä¹‹ä¸€ï¼Œåœ¨æŸäº›æ€§èƒ½è¾ƒå·®çš„æœºå™¨ä¸Šï¼Œå…¶è¿ç®—é€Ÿåº¦ç”šè‡³ä½äº1FPSã€‚</li>
</ul>
]]></content>
      <categories>
        <category>IVQA</category>
      </categories>
      <tags>
        <tag>VIF</tag>
        <tag>FR</tag>
      </tags>
  </entry>
  <entry>
    <title>æ€æ ·æ›´å¥½çš„æ±‡æŠ¥è‡ªå·±çš„å·¥ä½œ</title>
    <url>/2021/02/25/how-to-report-ourselves-work/</url>
    <content><![CDATA[<p>ä»Šå¹´çš„èŒç§°è¯„å®šå·¥ä½œæ¯”ä»¥å¾€æ¥çš„è¦æ—©ä¸€ç‚¹ï¼Œå¥½å¤šçš„åŒå­¦ä¸å¾—ä¸åœ¨æ˜¥èŠ‚å‡æœŸå°±å‡†å¤‡è‡ªå·±çš„ææ–™ã€‚æ¯ä¸€æ¬¡reviewåˆ«äººçš„ææ–™åï¼Œæ€»ä¼šæœ‰ä¸€äº›æ„Ÿæƒ³ï¼Œä¸€ç›´ä¹Ÿæ²¡æœ‰æ—¶é—´æ•´ç†å‡ºæ¥ï¼Œè¶ç€è¿™æ¬¡æœºä¼šï¼Œä¹Ÿç»“åˆè‡ªå·±è¿‡å»çš„å®è·µåšä¸€ä¸ªç®€å•çš„æ€»ç»“ã€‚</p>
<p><img src="/2021/02/25/how-to-report-ourselves-work/4.jpeg" alt></p>
<span id="more"></span>
<h2 id="æˆ‘å¦‚ä½•çœ‹å¾…ppt">æˆ‘å¦‚ä½•çœ‹å¾…PPT</h2>
<p>2019å¹´ï¼Œæ–°ä¸œæ–¹å¹´ä¼šçš„ä¸€ä¸ªèŠ‚ç›®â€œé‡Šæ”¾è‡ªæˆ‘â€åœ¨äº’è”ç½‘åœˆç«äº†ï¼š</p>
<blockquote>
<p>å¹²æ´»çš„ç´¯æ­»ç´¯æ´»ï¼Œæœ‰æˆæœé‚£åˆå¦‚ä½•ï¼Œåˆ°å¤´æ¥å¹²ä¸è¿‡å†™PPTçš„</p>
</blockquote>
<div class="bili_video"><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="https://player.bilibili.com/player.html?aid=47440004&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div></div>
<p>ä½œä¸ºä¸€ä¸ªæŠ€æœ¯äººï¼Œæˆ‘å³åå¯¹è¿‡åº¦çš„PPTæ€»ç»“ï¼ŒåŒæ—¶æ›´åå¯¹ç¼ºä¹ä»»ä½•çš„PPTçš„æ€»ç»“ï¼Œåªæ˜¯ä¸è¦è¿‡åº¦åŒ…è£…å°±å¥½ã€‚å¾ˆå¤šçš„æŠ€æœ¯äººå‘˜ä¼šè®¤ä¸ºåªæœ‰å†™å†™ä»£ç æ‰æ˜¯æ­£äº‹ï¼Œå†™PPTçº¯ç²¹æ˜¯æµªè´¹æ—¶é—´ï¼Œå¹¶ä¸”è¿˜ä¼šè¯´åœ¨äºšé©¬é€Šå†…éƒ¨ï¼Œå¼€ä¼šæ—¶æ˜¯ä¸ä¼šå‡ºç°ç”»é¢ä¸°å¯Œçš„PPTçš„ï¼Œè€Œæ˜¯ä»¥æ–‡å­—å‘ˆç°å‡ºæ¥çš„å¤‡å¿˜å½•ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¯¹äºèŒç§°ç”³è¯·è€Œè¨€ï¼Œè¿™å¯ä¸æ˜¯ä¸€æ¬¡æ™®é€šçš„ä¼šè®®ã€‚æˆ‘ä»¬è¦å±•ç°å‡ºè‡ªå·±çš„äº®ç‚¹ï¼Œè®©è¯„å§”è®¤å¯æˆ‘ä»¬çš„å·¥ä½œï¼ŒPPTæ— ç–‘æ˜¯æˆ‘ä»¬ç†æ¸…å·¥ä½œæ€è·¯ï¼Œå±•ç°å·¥ä½œæˆæœï¼Œåˆ†äº«è‡ªå·±è§‚ç‚¹çš„ç»ä½³æ‰‹æ®µå’Œå‘ˆç°å½¢å¼ã€‚å½“å¯¹å¤–å®£ä¼ è‡ªå·±çš„äº§å“çš„æ—¶å€™ï¼Œäºšé©¬é€Šä¹Ÿæ˜¯é‡‡ç”¨PPTçš„æ–¹å¼ã€‚</p>
<h2 id="å¦‚ä½•æ¡†å®špptçš„ç‰ˆå¼">å¦‚ä½•æ¡†å®šPPTçš„ç‰ˆå¼</h2>
<p>å½“ç„¶ï¼Œå¯¹äºæŠ€æœ¯äººå‘˜è€Œè¨€ï¼ŒPPTä¸åœ¨äºæœ‰å¤šç‚«é…·ã€åŠ¨æ•ˆæœ‰å¤šç‰›ï¼Œè€Œåœ¨äºå¯¹å†…å®¹çš„åˆç†çš„ç»„ç»‡ã€‚ç¼ºä¹å†…å®¹çš„PPTï¼Œå³ä¾¿å†ç‚«é…·ä¹Ÿæ— ç”¨ã€‚</p>
<p>ä½œä¸ºå¤šå¹´çš„æŠ€æœ¯äººï¼Œæˆ‘å†™è¿‡å„ç§åœºæ™¯çš„PPTï¼š</p>
<ul>
<li>éƒ¨é—¨æ€»ç»“å¤§ä¼šçš„</li>
<li>èŒç§°ç”³è¯·çš„</li>
<li>å‘ä¸Šæ±‡æŠ¥çš„</li>
<li>æŠ€æœ¯åˆ†äº«ä¼šçš„</li>
<li>æŠ€æœ¯å®£è®²ä¼šçš„</li>
<li>â€¦â€¦</li>
</ul>
<p>æˆ‘è®¤ä¸ºï¼Œåœ¨PPTçš„ç‰ˆå¼ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦åšåˆ°è®©PPTçœ‹èµ·æ¥å¾ˆå¹²å‡€å°±å¯ä»¥äº†ï¼Œæ²¡å¿…è¦åœ¨PPTçš„æ ·å¼ä¸ŠèŠ±è´¹å¤ªå¤šçš„å¿ƒæ€ã€‚å¹²å‡€è¦æ±‚æˆ‘ä»¬çš„PPTçš„å†…å®¹è¦ï¼šå­—ä½“ç»Ÿä¸€ã€æ ·å¼ç»Ÿä¸€ã€è‰²è°ƒç»Ÿä¸€ï¼Œé£æ ¼ç»Ÿä¸€â€¦â€¦</p>
<p>æœ‰çš„åŒå­¦ï¼ŒåŠ¨ä¸åŠ¨å°±é£˜çº¢ï¼ŒåŠ ç²—ï¼ŒåŠ èƒŒæ™¯ï¼Œå¯èƒ½æ˜¯æƒ³å¼ºè°ƒè¿™é‡Œæ˜¯é‡ç‚¹ï¼Œä½†æ˜¯å½“è¿™ä¸€é¡µä¸­æ‰€æœ‰å†…å®¹éƒ½æœ‰å„ç§æ ·å¼çš„æ—¶å€™ï¼Œä¹Ÿå°±åˆ†ä¸æ¸…å“ªé‡Œæ˜¯é‡ç‚¹ï¼Œå“ªé‡Œæ˜¯éé‡ç‚¹äº†ã€‚ä¸ƒç§é¢œè‰²ä¸€æ··åˆï¼Œé‚£ä¸å°±æˆäº†ç™½è‰²äº†å—ï¼Ÿ</p>
<h2 id="å¦‚ä½•è¿›è¡Œpptçš„æ•´ä½“ç»„ç»‡">å¦‚ä½•è¿›è¡ŒPPTçš„æ•´ä½“ç»„ç»‡</h2>
<p>åœ¨è¯„å®¡è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°å¤§éƒ¨åˆ†åŒå­¦æ— è®ºæ˜¯åœ¨ææ–™çš„ç»„ç»‡ä¸Šè¿˜æ˜¯åœ¨PPTçš„ç»„ç»‡ä¸Šï¼Œéƒ½æ˜¯ä¹±çš„ä¸€å¡Œç³Šæ¶‚ï¼Œæ²¡æœ‰ä»»ä½•é€»è¾‘å¯è¨€ï¼Œçº¯ç²¹å°±æ˜¯åœ¨ç½—åˆ—ä¸€ä»¶ä»¶è‡ªå·±åšçš„äº‹æƒ…ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬è¦æ¸…æ¥šä¸€ç‚¹ï¼šææ–™çš„æ„ä¹‰å’Œä½œç”¨åœ¨äºè¯æ˜æˆ‘ä»¬å·²ç»å…·å¤‡äº†æŸäº›æ–¹é¢çš„èƒ½åŠ›ï¼Œææ–™çš„åŠŸèƒ½å°±æ˜¯è®ºæ®ã€‚åªæœ‰ææ–™ï¼Œæ²¡æœ‰ææ–™æ‰€æ”¯æŒçš„è§‚ç‚¹é‚£åˆæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿè®©è¯„å§”é€šè¿‡ææ–™æ¥çŒœå—ï¼Ÿ</p>
<p>å› æ­¤ï¼Œåœ¨ææ–™çš„ç»„ç»‡ä¸Šï¼Œæˆ‘ä¸€èˆ¬æ¨èä½¿ç”¨è®®è®ºæ–‡çš„ä¸‰è¦ç´ æ¥ç»„ç»‡ï¼š</p>
<ul>
<li>è®ºç‚¹</li>
<li>è®ºæ®</li>
<li>è®ºè¯</li>
</ul>
<p>æˆ‘ä»¬éœ€è¦æ ¹æ®è¦è¯æ˜çš„ä¸åŒèƒ½åŠ›æ¥å¯¹ææ–™è¿›è¡Œåˆ†ç±»ï¼Œèšåˆï¼Œç„¶åé€šè¿‡ä¸€å®šçš„è®ºè¯æ–¹æ³•æ¥æ•´åˆè‡ªå·±æ‰€åšçš„æ¯ä¸€ä»¶äº‹æƒ…ã€‚åœ¨æ•´åˆçš„è¿‡ç¨‹ä¸­å¯ä»¥éµå¾ªä»¥ä¸‹çš„å‡ ç‚¹ï¼š</p>
<ul>
<li>
<p>ç»“æ„åŒ–æ€ç»´æ¥ç»„ç»‡ææ–™ï¼š</p>
<ul>
<li>ç»“è®ºå…ˆè¡Œ</li>
<li>ä»¥ä¸Šç»Ÿä¸‹</li>
<li>å½’çº³åˆ†ç»„ï¼šåŒç±»ææ–™å½’ç±»ï¼Œæœ‰æ—¶å€™åŒä¸€ä¸ªææ–™å¯èƒ½è¯´æ˜æˆ‘ä»¬å…·å¤‡å¤šç§èƒ½åŠ›ï¼Œé‚£è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨ææ–™çš„é€‰æ‹©ä¸Šéœ€è¦æœ‰æ‰€å–èˆï¼Œè¿™ä¸ªææ–™é‡ç‚¹èƒ½è¯´æ˜å“ªäº›èƒ½åŠ›ï¼Ÿæ­£æ‰€è°“â€œæ¨ªçœ‹æˆå²­ä¾§æˆå³°ï¼Œè¿œè¿‘é«˜ä½å„ä¸åŒâ€ã€‚</li>
<li>é€»è¾‘é€’è¿›ï¼šçºµå‘æœ‰é€»è¾‘å…³ç³»ï¼Œæ¨ªå‘æœ‰é€’è¿›å…³ç³»ã€‚<br>
<img src="/2021/02/25/how-to-report-ourselves-work/1.jpeg" alt></li>
</ul>
</li>
<li>
<p>æ¯ä¸€ä¸ªå¤§çš„è®ºç‚¹ä¸‹é¢å¯ä»¥æœ‰å¤šä¸ªä¸åŒçš„åˆ†è®ºç‚¹ï¼Œä½†æ˜¯åˆ‡å¿Œï¼Œåˆ†è®ºç‚¹ä¸å®œè¿‡å¤šï¼Œæœ€å¥½ä¸è¦è¶…è¿‡3ä¸ªã€‚</p>
</li>
<li>
<p>ä¸åŒè®ºç‚¹çš„ç»„ç»‡å¯ä»¥é‡‡ç”¨æ€»åˆ†çš„ç»“æ„ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨æ€»åˆ†æ€»çš„ç»“æ„ï¼Œå…·ä½“å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©ä¸€ç§ã€‚</p>
</li>
<li>
<p>æ•´ä¸ªPPTçš„æ‰€æœ‰é¡µé¢éƒ½æ˜¯æœ‰é€»è¾‘å…³ç³»çš„ï¼Œéœ€è¦è®¤çœŸè€ƒè™‘ä¸Šä¸‹é¡µä¹‹é—´çš„å…³è”å’Œè¡”æ¥ã€‚</p>
</li>
</ul>
<h2 id="å¦‚ä½•é€‰æ‹©pptçš„ææ–™">å¦‚ä½•é€‰æ‹©PPTçš„ææ–™</h2>
<p>åœ¨ç¡®å®šäº†PPTçš„å¤§çš„ç»„ç»‡æ–¹å¼ä¹‹åï¼Œåœ¨æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œä¹Ÿéœ€è¦å¯¹è‡ªå·±çš„æ‰€æœ‰çš„ææ–™è¿›è¡Œç”„é€‰ï¼Œéœ€è¦æ˜ç¡®å¥½è¦é€‰æ‹©é‚£äº›ææ–™ï¼Œè¦æ”¾å¼ƒé‚£äº›ææ–™ï¼Œä¸åŒçš„ææ–™ç”¨æ¥æ”¯æ’‘é‚£äº›è®ºç‚¹ç­‰ã€‚åœ¨é€‰æ‹©ææ–™çš„æ—¶å€™ï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹çš„å‡ ç‚¹ï¼š</p>
<ul>
<li>é‡è¦çš„å†…å®¹è¯´ä¸‰éï¼Œå¯¹äºç‰¹åˆ«é‡è¦çš„å†…å®¹ï¼Œå¯ä»¥é‡å¤æåŠï¼Œä½†æ˜¯è¦ä»ä¸åŒçš„å±‚é¢æ¥æåŠï¼Œè€Œä¸æ˜¯ç®€å•çš„é‡å¤åŒæ ·çš„å†…å®¹ã€‚å¦‚æœè¦å¼ºè°ƒè‡ªå·±çš„æŠ€æœ¯èƒ½åŠ›ï¼Œå¯ä»¥é€šè¿‡ï¼šæŠ€æœ¯è°ƒç ”ï¼Œæ”»å…‹æŠ€æœ¯éš¾ç‚¹ï¼Œè‡ªç ”æ ¸å¿ƒå¡è„–å­æŠ€æœ¯ç­‰å¤šä¸ªæ–¹é¢æ¥å†™ã€‚åŒæ ·æ˜¯å†™å®¹è²Œï¼Œå¯ä»¥ä»æ²‰é±¼ã€è½é›ã€é—­æœˆã€ç¾èŠ±ç­‰æ–¹é¢æ¥åå¤é™ˆè¿°ã€‚</li>
<li>é€šè¿‡åˆ«äººçš„è¯„ä»·æ¥è¯æ˜è‡ªå·±çš„èƒ½åŠ›ã€‚é›·å£«ç…§æ˜åˆ›å§‹äººå´é•¿æ±Ÿè¯´ï¼šäººç”Ÿäº”å¤§å‘å±•é˜¶æ®µï¼Œé¦–å…ˆè‡ªå·±è¦è¡Œï¼›å…¶æ¬¡è¦æœ‰äººè¯´ä½ è¡Œï¼›å†æ¬¡ï¼Œè¯´ä½ è¡Œçš„äººè¦è¡Œï¼›ç„¶åï¼Œä½ è¯´è°è¡Œè°å°±è¡Œï¼›æœ€åï¼Œè°æ•¢è¯´ä½ ä¸è¡Œã€‚å› æ­¤ï¼Œåœ¨é€‰æ‹©åˆ«äººè¯„ä»·çš„æ—¶å€™è¦é€‰æ‹©é‚£äº›é‡é‡çº§çš„äººç‰©ï¼Œé€‰æ‹©é‚£äº›å¤§å®¶å…¬è®¤çš„â€œèƒ½è¡Œâ€çš„äººç‰©ã€‚</li>
</ul>
<p>å½“æŒ‰ç…§ç»“æ„åŒ–æ€ç»´ç¡®å®šäº†PPTçš„æ•´ä½“ç»„ç»‡ï¼Œå¹¶ä¸”æŒ‰ç…§PPTçš„æ•´ä½“ç»„ç»‡é€‰å®šäº†ææ–™åï¼Œå¦‚æœæ­¤æ—¶ææ–™ä»ç„¶æ¯”è¾ƒå¤šï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿæ€ä»¬æ¥ç¡®å®šå“ªäº›ææ–™è¦æ”¾åœ¨å‰é¢ï¼Œå“ªäº›ææ–™éœ€è¦åˆ å‡ï¼Ÿæˆ‘ä¸€èˆ¬é‡‡ç”¨çš„æ–¹æ³•æ˜¯æŠŠææ–™åˆ’åˆ†ä¸º5ç±»ï¼š</p>
<ul>
<li>ç—›ç‚¹ææ–™ï¼šè§£å†³ç—›ç‚¹é—®é¢˜çš„ææ–™ï¼Œä¾‹å¦‚æ‰‹æœºä¸Šå¤©å¤©æœ‰éªšæ‰°ç”µè¯ã€åƒåœ¾çŸ­ä¿¡ï¼Œæœ‰äº†å·ç é€šï¼Œä¸€åˆ‡éƒ½è§£å†³äº†ã€‚</li>
<li>å…´å¥‹ç‚¹ææ–™ï¼šè¿™ç±»ææ–™å¯ä»¥è®©åˆ«äººæœ‰çœ¼å‰ä¸€äº®çš„â€œå“‡å¡â€æ„Ÿï¼Œå°±å¥½åƒæ˜¯ç‚çƒ­å¤å¤©æ—¶å–ä¸‹çš„é‚£å£å†°çº¢èŒ¶ã€‚</li>
<li>ç—’ç‚¹ææ–™ï¼šè¿™ç§ææ–™è§£å†³çš„é—®é¢˜ä¸ä¸€å®šæ˜¯ç—›ç‚¹é—®é¢˜ï¼Œä½†æ˜¯è®²å‡ºæ¥ä¹‹ååˆ«äººä¹Ÿæƒ³å°è¯•ã€‚</li>
<li>ä¸ç—›ä¸ç—’çš„ææ–™ï¼šå¯åšå¯ä¸åšï¼Œä½†æ˜¯æˆ‘ä»¬åšäº†ï¼Œæ•ˆæœå±‚é¢åˆä¸å¤ªå¥½è¯´çš„ææ–™ã€‚</li>
<li>å¸¸è§„ææ–™ï¼šæ—¥å¸¸çš„å¸¸è§„å·¥ä½œã€‚</li>
</ul>
<p>åœ¨å¯¹ææ–™æ’åºçš„æ—¶å€™ï¼Œä¼˜å…ˆé€‰æ‹©ç—›ç‚¹ææ–™å’Œå…´å¥‹ç‚¹ææ–™ï¼Œå¯ä»¥é…Œæƒ…é€‰æ‹©ç—’ç‚¹ææ–™ï¼Œå°½é‡åˆ å‡ä¸ç—›ä¸ç—’çš„ææ–™å’Œå¸¸è§„ææ–™ã€‚</p>
<h2 id="å¦‚ä½•ç»„ç»‡æ¯ä¸ªææ–™">å¦‚ä½•ç»„ç»‡æ¯ä¸ªææ–™</h2>
<p>å¥½å¤šçš„ææ–™éƒ½æ˜¯åœ¨è®°æµæ°´è´¦ï¼Œæ¯”å¦‚ï¼šéƒ½æ˜¯æˆ‘ä¼˜åŒ–äº†ç®—æ³•ï¼Œä¼˜åŒ–äº†æµç¨‹ï¼Œä¼˜åŒ–äº†â€¦â€¦æˆ‘å¹²äº†è¿™ä¸ªï¼Œåšäº†é‚£ä¸ªï¼Œâ€¦â€¦</p>
<p>æ¯æ¬¡çœ‹åˆ°è¿™ç§ææ–™ï¼Œæˆ‘å°±ä¼šå¾ˆæ°”æ„¤ï¼Œæˆ‘å°±å¿ä¸ä½çš„æƒ³æ‰“ä½åˆ†ï¼Œè¿™ç§ææ–™æ¯«æ— è¥å…»å¯è¨€ï¼Œæ¯«æ— ä¿¡æ¯é‡å¯è¨€ã€‚</p>
<p>æ¯ä¸ªææ–™éƒ½åº”è¯¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ•…äº‹å•å…ƒï¼Œæ¯ä¸ªææ–™éƒ½åº”è¯¥ç”¨æœ€ç®€çŸ­çš„å†…å®¹ä½“ç°å‡ºæœ€å¤§çš„ä¿¡æ¯é‡ï¼Œå¦‚ä½•æ‰èƒ½åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿ</p>
<p>æˆ‘ä¸€èˆ¬é‡‡ç”¨çš„åŸåˆ™å°±æ˜¯STARåŸåˆ™ï¼š</p>
<ul>
<li>Sï¼ˆSituationï¼‰æƒ…å¢ƒï¼šåšè¿™ä¸ªäº‹æƒ…çš„èƒŒæ™¯ä¸‹æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>Tï¼ˆTargetï¼‰ä»»åŠ¡/ç›®æ ‡ï¼šåšè¿™ä¸ªäº‹æƒ…è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œè¦è¾¾åˆ°çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>Aï¼ˆActionï¼‰è¡ŒåŠ¨ï¼šåœ¨æ•´ä¸ªé¡¹ç›®ä¸­æˆ‘ä»¬åšäº†ä»€ä¹ˆï¼Ÿ</li>
<li>Rï¼ˆResultï¼‰ç»“æœï¼šæœ€ç»ˆçš„ç»“æœå¦‚ä½•ï¼Ÿä»·å€¼æ˜¯æ€æ ·çš„ï¼Ÿæ”¶ç›Šæ˜¯æ€æ ·çš„ï¼Ÿ</li>
</ul>
<p><img src="/2021/02/25/how-to-report-ourselves-work/2.png" alt></p>
<p>æŒ‰ç…§å¦‚ä¸Šçš„åŸåˆ™ç»„ç»‡çš„ææ–™é¦–å…ˆèƒ½åœ¨èƒŒæ™¯æ–¹é¢è®²æ‰€æœ‰äººæ‹‰åˆ°ä¸€ä¸ªåœºæ™¯ä¸‹æ¥æ€è€ƒé—®é¢˜ï¼Œä¿è¯å¤§å®¶çš„åŸºå‡†æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>å¦å¤–ï¼ŒèƒŒæ™¯çš„æ„ä¹‰è¿˜åœ¨äºå¤§å®¶ä¼šé€šè¿‡èƒŒæ™¯æ¥äº†è§£åˆ°æˆ‘ä»¬æ‰€åšå·¥ä½œé¢ä¸´çš„éš¾åº¦ï¼Œæˆ‘ä»¬è¦è§£å†³çš„ç›®æ ‡çš„å¤æ‚åº¦ã€‚éš¾åº¦ï¼Œå¤æ‚åº¦å†³å®šäº†æˆ‘ä»¬çš„é«˜åº¦ã€‚æœ‰äº›æ—¶å€™ï¼Œéš¾åº¦ä¸æ˜¯æˆ‘ä»¬è¯´å‡ºæ¥çš„ï¼Œè€Œæ˜¯åœ¨æˆ‘ä»¬ä»‹ç»å®ŒèƒŒæ™¯ä¹‹åå¤§å®¶çš„å…±è¯†ã€‚</p>
<p>èƒŒæ™¯è¦åšåˆ°å°‘ä¸€å­—åˆ™è§£é‡Šä¸æ¸…æ¥šï¼Œå¤šä¸€å­—åˆ™æ˜¯ç´¯èµ˜çš„è¦æ±‚ï¼Œåˆ‡å¿Œé•¿ç¯‡å¤§è®ºã€‚å¼±æ°´ä¸‰åƒï¼Œåªå–ä¸€ç“¢é¥®ã€‚å“å“å“æ•´é¡µæ•´é¡µçš„ä¸Šæ¶æ„å›¾å¹²å˜›å‘€ã€‚</p>
<p>ç„¶ååœ¨å¯¹é—®é¢˜æœ‰äº†ä¸€è‡´è®¤è¯†çš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½è¯„ä¼°æˆ‘ä»¬æ‹†è§£çš„ç›®æ ‡æ˜¯ä¸æ˜¯åˆç†çš„ï¼Œå¦‚æœè¿ç›®æ ‡éƒ½ä¸åˆç†ï¼Œé‚£ä¹ˆåŸºæœ¬ä¸Šåé¢æ‰€æœ‰çš„å†…å®¹å°±æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ã€‚</p>
<p>æœ‰äº†èƒŒæ™¯ï¼Œæœ‰äº†ç›®æ ‡ï¼Œæˆ‘ä»¬çš„è¡ŒåŠ¨æ‰æ›´æœ‰æ„ä¹‰ï¼Œæ‰èƒ½ä½“ç°å‡ºæˆ‘ä»¬çš„æŠ€æœ¯èƒ½åŠ›ï¼Œè§£å†³é—®é¢˜çš„èƒ½åŠ›â€¦â€¦</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬åšçš„äº‹æƒ…æ˜¯æœ‰ç»“æœçš„ï¼Œæ‰€ä»¥æœ€ç»ˆçš„ç»“æœä¹Ÿæ˜¯ä¸å¯æˆ–ç¼ºçš„å†…å®¹ã€‚åªæœ‰ç»“æœæ²¡æœ‰è¿‡ç¨‹ï¼Œé‚£æˆåŠŸå°±ä¸å¯å¤åˆ¶ï¼›åªæœ‰è¿‡ç¨‹ï¼Œæ²¡æœ‰ç»“æœï¼Œé‚£è¿‡ç¨‹å°±æ˜¯åƒåœ¾ã€‚</p>
<h4 id="å¸é©¬å…‰ç ¸ç¼¸çš„ææ–™">å¸é©¬å…‰ç ¸ç¼¸çš„ææ–™</h4>
<p>ä»¥å¸é©¬å…‰ç ¸ç¼¸ä¸ºä¾‹ï¼Œä¸ºäº†ä½“ç°å¸é©¬å…‰çš„è‹±å‹‡æœæ•¢ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰STARåŸåˆ™æ¥ç»„ç»‡ææ–™ï¼š</p>
<ul>
<li>Sï¼šä¸€ç¾¤å°å­©åœ¨é™¢å­é‡Œç©é—¹ï¼Œå…¶ä¸­ä¸€ä¸ªå°å­©çˆ¬åˆ°äº†æ°´ç¼¸è¾¹æ²¿ï¼Œä¸€ä¸å°å¿ƒï¼Œè·Œå…¥äº†æ°´ç¼¸æ²¡å…¥æ°´ä¸­ï¼Œå…¶ä»–å°å­©éƒ½å“è·‘äº†ã€‚</li>
<li>Tï¼šè¦æŠŠå°å­©æ•‘å‡ºæ¥ã€‚</li>
<li>Aï¼šå¸é©¬å…‰æ‹¿èµ·çŸ³å¤´ï¼Œç ¸ç ´äº†æ°´ç¼¸ã€‚</li>
<li>Rï¼šæ°´ä»æ°´ç¼¸é‡Œæµäº†å‡ºæ¥ï¼Œå°å­©å¾—æ•‘äº†ã€‚</li>
</ul>
<p><img src="/2021/02/25/how-to-report-ourselves-work/3.jpeg" alt></p>
<p>å¦‚æœæŒ‰ç…§ä¹‹å‰çš„ææ–™å†™æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªææ–™å°±æˆäº†ï¼šå¸é©¬å…‰æ‹¿èµ·çŸ³å¤´ï¼Œç ¸ç ´äº†æ°´ç¼¸ã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ ¹æ®è¿™ä¸ªææ–™æ¥å¯¹å¸é©¬å…‰åšå‡ºè¯„ä»·å‘¢ï¼Ÿ</p>
<h2 id="å¦‚ä½•å¤„ç†ä¸åŒçº§åˆ«ä½¿ç”¨åŒä¸€ææ–™çš„åœºæ™¯">å¦‚ä½•å¤„ç†ä¸åŒçº§åˆ«ä½¿ç”¨åŒä¸€ææ–™çš„åœºæ™¯</h2>
<p>æˆ‘ç»å¸¸ä¼šå‘ç°å¾ˆå¤šä¸åŒçš„çº§åˆ«ä¼šå¼•ç”¨åŒæ ·çš„é¡¹ç›®ï¼Œä½†æ˜¯åœ¨ææ–™çš„è¡¨è¿°ä¸Šï¼ŒåˆåŸºæœ¬ä¸€è‡´ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆé«˜çº§åˆ«çš„åŒå­¦å¦‚ä½•èƒ½ä½“ç°å‡ºè‡ªå·±çš„ä»·å€¼å‘¢ï¼Ÿ</p>
<p>ä¸€ä¸ªé¡¹ç›®ç¡®å®æ˜¯ç”±ä¸€ä¸ªå›¢é˜Ÿæ¥å®Œæˆçš„ï¼Œä½†æ˜¯è¿™ä¸ªå›¢é˜Ÿçš„ç»„æˆæ˜¯ä¸åŒçš„ï¼Œå°±åƒç¯®çƒé˜Ÿä¸€æ ·ï¼Œæœ‰ï¼š</p>
<ul>
<li>æ•™ç»ƒ</li>
<li>å‰é”‹
<ul>
<li>å°å‰é”‹</li>
<li>å¤§å‰é”‹</li>
</ul>
</li>
<li>ä¸­é”‹</li>
<li>åå«
<ul>
<li>æ§çƒåå«</li>
<li>å¾—åˆ†åå«</li>
</ul>
</li>
</ul>
<p>å®Œæˆä¸€ä¸ªé¡¹ç›®çš„ä¼—å¤šå›¢é˜Ÿæˆå‘˜ä¸­ä¹Ÿä¼šæœ‰ä¸åŒçš„çº§åˆ«ï¼Œè€Œä¸åŒçš„çº§åˆ«æ‰€æ‹…è´Ÿçš„èŒèƒ½å’Œè´£ä»»ä¹Ÿä¸å°½ç›¸åŒã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨ææ–™çš„å‡†å¤‡ä¸Šï¼Œè¦ä½“ç°å‡ºç¬¦åˆè‡ªå·±æ‰€å¤„çº§åˆ«è¦æ±‚çš„ææ–™ã€‚</p>
<h2 id="å¦‚ä½•ç»„ç»‡å·¥ä½œæ”¶ç›Š">å¦‚ä½•ç»„ç»‡å·¥ä½œæ”¶ç›Š</h2>
<p>æˆ‘çœ‹åˆ°æœ€å¤šçš„ææ–™æ”¶ç›Šæ˜¯ä¸‹é¢çš„æ ·å­ï¼š</p>
<ul>
<li>æˆ‘çš„æŠ€æœ¯ç´¯è®¡ä»£ç è¡Œæ•°xxxè¡Œ</li>
<li>æˆ‘çš„æŠ€æœ¯è¢«å¤šå°‘äº§å“çº¿ä½¿ç”¨</li>
<li>æˆ‘å¼€å‘äº†å¤šå°‘æ¥å£</li>
<li>æˆ‘çš„æ¥å£è¢«è°ƒç”¨äº†å¤šå°‘æ¬¡</li>
<li>â€¦â€¦</li>
</ul>
<p>ä½†æ˜¯ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œè¿™äº›ä¸æ˜¯å…·ä½“çš„æ”¶ç›Šï¼Œè¿™äº›ä¸è¿‡æ˜¯ä¸€ä¸ªç»“æœè€Œå·²ã€‚ä»¥å¸é©¬å…‰ç ¸ç¼¸ä¸ºä¾‹ï¼Œè¿™å°±å¥½æ¯”æ˜¯ï¼šå°å­©è·Œå…¥æ°´ç¼¸ï¼Œæ²¡å…¥æ°´ä¸­ï¼Œå¸é©¬å…‰æ‹¿èµ·çŸ³å¤´ï¼Œç ¸ç ´æ°´ç¼¸ï¼Œæ°´æµäº†å‡ºæ¥ã€‚</p>
<p>å¦‚ä¸Šçš„è¿™ç§ç»“æœçš„å†™æ³•ï¼Œè¿™ç§æ”¶ç›Šçš„å†™æ³•ï¼Œåœ¨æˆ‘çœ‹æ¥æ˜¯ä¸å®Œæ•´çš„ã€‚</p>
<p>æˆ‘ä»¬åœ¨å†™æ”¶ç›Šçš„æ—¶å€™ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦å¤šé—®è‡ªå·±å‡ ä¸ªï¼šç„¶åå‘¢ï¼Ÿ</p>
<p>æ°´æµäº†å‡ºæ¥ï¼Œç„¶åå‘¢ï¼Ÿ</p>
<p>æ°´æµäº†å‡ºæ¥ä¸æ˜¯æ”¶ç›Šï¼Œä¸æ˜¯ä»·å€¼ï¼Œå°å­©å¾—æ•‘äº†æ‰æ˜¯æœ€å¤§çš„ä»·å€¼ã€‚å¼€å‘äº†å‡ ç™¾ä¸ªæ¥å£æ˜¯ç°å®ï¼Œç„¶åå‘¢ï¼Ÿè¿™äº›æ¥å£æå‡äº†50%çš„ç ”å‘æ•ˆç‡ï¼Œè¿™æ‰æ˜¯ä»·å€¼ã€‚</p>
<p>ç›®æ ‡æ˜¯ä¸šåŠ¡ä»·å€¼ï¼ŒæŠ€æœ¯æ”¹è¿›åªæ˜¯æ‰‹æ®µè€Œå·²ï¼ŒåšæŠ€æœ¯æ”¹è¿›çš„ç›®æ ‡ä¸æ˜¯ä¸ºäº†å¤šå°‘æ¬¡çš„æ¥å£è°ƒç”¨ï¼Œè€Œæ˜¯å®ç°ä¸šåŠ¡ä»·å€¼ã€‚å› æ­¤ï¼Œåœ¨æ”¶ç›Šéƒ¨åˆ†è¦æ˜ç¡®å¥½ç›®æ ‡å’Œæ‰‹æ®µçš„å…³ç³»ã€‚</p>
<h2 id="å¦‚ä½•ç»„ç»‡-ä¸ªäººä»‹ç»">å¦‚ä½•ç»„ç»‡â€œä¸ªäººä»‹ç»â€</h2>
<p>å¹³æ—¶å°±è®©æ‰€æœ‰çš„äººå°±å¯¹æˆ‘ä»¬å°±éå¸¸äº†è§£æ˜¯ä¸€ä»¶éå¸¸éš¾çš„äº‹ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œä¸€ä»½å®Œç¾çš„ä¸ªäººä»‹ç»ææ–™å°±ç›¸å½“äºæ˜¯ï¼šä¸‡äº‹å¼€å¤´éš¾ã€‚</p>
<p>æœ‰äº›åŒå­¦åœ¨è¿™ä¸€é¡µç»„ç»‡çš„çš„è¿‡äºéšæ„ï¼Œåªæ˜¯ç®€å•ç½—åˆ—ä¸€ä¸‹è‡ªå·±çš„å·¥ä½œç»å†å°±è‰è‰äº†äº‹ã€‚æ®Šä¸çŸ¥ï¼Œè¿™ç§å†…å®¹è¿˜ä¸å¦‚æ²¡æœ‰ã€‚è‰è‰äº†äº‹å¾€å¾€ä¼šç»™äººä¸å¥½çš„å°è±¡ï¼Œå¾€å¾€ä»ä¸€å¼€å§‹å°±æ‹‰ä½äº†è‡ªå·±åœ¨åˆ«äººä¸­çš„å±‚çº§ã€‚è¿™ç§æ—¶å€™å°±å±äºï¼šæ²¡æœ‰å°è±¡æ¯”æœ‰ä¸€ä¸ªæ¯”è¾ƒå·®çš„å°è±¡è¦å¥½å¾ˆå¤šã€‚</p>
<p>å…¶å®ï¼Œä¸ªäººä»‹ç»è¿™ä¸€é¡µçš„å†…å®¹ä¸åœ¨å¤šï¼Œè€Œåœ¨äºå¼•å¯¼åˆ«äººä»å“ªä¸ªè§’åº¦æ¥è¯„ä»·è‡ªå·±ï¼Œåœ¨äºå¼•å¯¼åˆ«äººç»™è‡ªå·±æ‰“ä¸Šä¸€ä¸ªä»€ä¹ˆæ ‡ç­¾ï¼Œåœ¨äºå¼•å¯¼åˆ«äººç¡®å®šè‡ªå·±çš„å±‚çº§â€¦â€¦</p>
<p>å› æ­¤ï¼Œè¿™ä¸€é¡µçš„ææ–™ç»„ç»‡è¦ç‰¹åˆ«ç”¨å¿ƒï¼Œè¦ä»è‡ªå·±å–å¾—çš„æˆå°±æ¥é“ºå¼€ï¼Œè¦é’ˆå¯¹è‡ªå·±æœŸæœ›çš„æ ‡ç­¾æ¥é“ºå¼€ã€‚æ¯”å¦‚è¦ä½“ç°è‡ªå·±çš„æŠ€æœ¯å“è¶Šï¼Œå¯ä»¥ä»ï¼šä¸“åˆ©ï¼Œè·å¾—çš„é«˜ä»·å€¼çš„æŠ€æœ¯åˆ›æ–°å¥–ç­‰æ–¹é¢æ¥å±•å¼€ã€‚å› ä¸ºï¼Œè¿™äº›å¥–é¡¹çš„è·å–ï¼Œæ˜¯ç»è¿‡äº†å®¡æ ¸å’Œè®¤è¯çš„ï¼Œæ˜¯å¤§å®¶å…¬è®¤çš„ï¼Œæ˜¯ä¸éœ€è¦åˆ«äººå†åšäºŒæ¬¡è¯„ä¼°çš„ã€‚</p>
<p>å› æ­¤ï¼Œä¸ªäººä»‹ç»ä¸­çš„ææ–™éœ€è¦æœ¬ç€å¦‚ä¸‹çš„åŸåˆ™ï¼š</p>
<ul>
<li>ææ–™è¶³å¤Ÿç²¾ç®€ä½†è¦è¶³å¤Ÿé—ªå…‰</li>
<li>ææ–™ä¸éœ€è¦åˆ«äººäºŒæ¬¡è¯„ä¼°</li>
<li>æ ¹æ®æœŸæœ›åˆ«äººå¦‚ä½•å®šä½è‡ªå·±æ¥ç»„ç»‡ææ–™</li>
</ul>
<h2 id="å¦‚ä½•åº”å¯¹åˆ«äººçš„è´¨ç–‘">å¦‚ä½•åº”å¯¹åˆ«äººçš„è´¨ç–‘</h2>
<p>æ‰€æœ‰äººéƒ½ä¼šå­˜åœ¨å¿ƒç†ä¸Šçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå½“åˆ«äººè´¨ç–‘æˆ‘ä»¬çš„æ—¶å€™ï¼Œè¿™ç§è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶å°±ä¼šä¸è‡ªç„¶å¼€å¯ã€‚æ­¤æ—¶ï¼Œä¸ºäº†å‡è½»åˆ«äººçš„è´¨ç–‘æ‰€äº§ç”Ÿçš„ç´§å¼ å’Œç„¦è™‘ï¼Œæˆ‘ä»¬ä¼šæ‰¾ä¸€äº›è¡¨é¢ä¸Šå† å†•å ‚çš‡çš„ç†ç”±æ¥ä¸ºè‡ªå·±è¾©æŠ¤ä»¥è‡ªåœ†å…¶è¯´ï¼Œå½“ç„¶è¿™äº›ç†ç”±æ˜¯ç»ä¸èµ·æ¨æ•²çš„ï¼Œå¹¶éçœŸç†ç”±ï¼Œä¹Ÿéå¥½ç†ç”±ã€‚</p>
<p><img src="/2021/02/25/how-to-report-ourselves-work/5.gif" alt></p>
<p>è¿˜ä¼šæœ‰åŒå­¦è‡ªå‘½ä¸å‡¡ï¼Œè§‰å¾—è¯„å§”ä»€ä¹ˆéƒ½ä¸æ‡‚ï¼Œå°±æ˜¯ååœ¨ä¸‹é¢ä¸åœçš„çé—®ï¼Œæ‰€ä»¥åœ¨å›ç­”è¯„å§”çš„é—®é¢˜ä¸Šï¼Œä¹Ÿä¼šæ˜¾å¾—æ¼«ä¸ç»å¿ƒã€‚</p>
<p>æˆ‘ä»¬éƒ½æ˜¯å‡¡äººï¼Œå‡­ä»€ä¹ˆæˆ‘ä»¬è®²çš„å†…å®¹åˆ«äººå°±ä¸èƒ½æœ‰ç–‘é—®å‘¢ï¼Ÿå‡­ä»€ä¹ˆè¦æ±‚åˆ«äººå°±å¿…é¡»è®¤åŒæˆ‘ä»¬çš„è§‚ç‚¹å‘¢ï¼Ÿ</p>
<p>æœ‰æ—¶å€™ï¼Œæœ‰è´¨ç–‘å°±æ˜¯æˆ‘ä»¬ä½“ç°è‡ªå·±çš„ç»ä½³æ—¶åˆ»ï¼Œå› ä¸ºè´¨ç–‘ï¼Œæˆ‘ä»¬æ‰èƒ½åˆ©ç”¨è¿™ç§æœºä¼šæ¥æ›´è¯¦ç»†çš„é˜è¿°è‡ªå·±æ‰€åšçš„äº‹æƒ…çš„æ€è·¯å’Œä»·å€¼ã€‚æˆ‘ä»¬ä¹‹å‰è®²è¿‡ï¼šé‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œå…¶å®ï¼Œåœ¨å›ç­”é—®é¢˜æ—¶ï¼Œå°±æ˜¯å…¶ä¸­çš„ä¸€éå‘€ã€‚å°†åˆ«äººä»è´¨ç–‘å¸¦å…¥åˆ°è®¤åŒçš„è¿‡ç¨‹ï¼Œæ˜¯ä¸€ä¸ªå‘ˆç°è‡ªå·±çš„è‰¯å¥½çš„æœºä¼šã€‚</p>
<p>åœ¨åº”å¯¹åˆ«äººçš„è´¨ç–‘çš„æ—¶å€™ï¼Œéœ€è¦éµå¾ªå¦‚ä¸‹çš„åŸåˆ™ï¼š</p>
<ul>
<li>æŠŠå›ç­”è´¨ç–‘çœ‹ä½œæ˜¯ä¸€ä¸ªåˆ†äº«æˆæœçš„è¿‡ç¨‹ï¼Œé¿å…å¯åŠ¨è‡ªæˆ‘å¿ƒç†ä¿æŠ¤</li>
<li>å…ˆæƒ³æ¸…æ¥šåˆ«äººè´¨ç–‘çš„ç‚¹åœ¨å“ªé‡Œï¼Œä¸è¦ç­”éæ‰€é—®ï¼Œä¹±è¯´ä¸€é€š</li>
<li>æŒæ¡æ•´ä¸ªç­”ç–‘çš„ä¸»åŠ¨æƒï¼Œåˆ«è¢«åˆ«äººç‰µç€é¼»å­èµ°</li>
</ul>
]]></content>
      <categories>
        <category>æ–‡åŒ–</category>
      </categories>
      <tags>
        <tag>æ±‡æŠ¥</tag>
        <tag>è¿°èŒ</tag>
      </tags>
  </entry>
  <entry>
    <title>HDRæŠ€æœ¯å¯¼è®º</title>
    <url>/2021/01/26/HDR-introduction/</url>
    <content><![CDATA[<p>çœŸå®ä¸–ç•Œçš„äº®åº¦èŒƒå›´æ˜¯ååˆ†å¹¿é˜”çš„ï¼Œè€Œäººçœ¼èƒ½æ„ŸçŸ¥åˆ°çš„äº®åº¦èŒƒå›´åœ¨åä¸‡å°¼ç‰¹å·¦å³ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œç”¨åˆ†å…‰è‰²åº¦è®¡æµ‹é‡å‘ç€é˜³å…‰ç››å¼€çš„èŠ±æœµï¼Œå…¶é»„è‰²åŒºåŸŸäº®åº¦æœ€é«˜å¯è¾¾14700å°¼ç‰¹ï¼Œè¾¹ç¼˜çš„çº¢è‰²æ˜¯2300å°¼ç‰¹ï¼Œä¸­å¤®çš„èŠ±è•Šå’Œç»¿å¶åªæœ‰200å°¼ç‰¹ä»¥ä¸‹ã€‚ä½†æ˜¯ï¼Œåœ¨çª„è‰²åŸŸã€äº®åº¦æ™®éä¸è¶…è¿‡100å°¼ç‰¹ã€å¯¹æ¯”åº¦ä¹Ÿåªæœ‰1000ï¼š1çš„SDRæ˜¾ç¤ºå™¨ä¸‹ï¼Œè¿™å¼ ç…§ç‰‡çš„è‰²å½©ä¼šæš—æ·¡å¾ˆå¤šã€‚ä½†æ˜¯éšç€æŠ€æœ¯çš„å‘å±•ï¼ŒHDRæŠ€æœ¯å¯ä»¥è¾¾åˆ°å¹¿è‰²åŸŸã€1000å°¼ç‰¹äº®åº¦ä»¥åŠä¸Šä¸‡çš„å¯¹æ¯”åº¦ã€‚è™½ç„¶å’Œç°å®æ ‡å‡†ç›¸å·®è¿˜æ˜¯æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯ç›¸è¾ƒäºä¸‰åå¹´å‰çš„SDRï¼ŒHDRè¿˜æ˜¯å‰è¿›äº†ä¸€å¤§æ­¥ã€‚</p>
<p><img src="/2021/01/26/HDR-introduction/nit.jpg" alt></p>
<span id="more"></span>
<h2 id="hdrä»‹ç»">HDRä»‹ç»</h2>
<p>HDRæ˜¯<em>High Dynamic Range</em>çš„ç¼©å†™ã€‚HDRæ˜¯ä¸€ç§æ•°å­—å›¾åƒæŠ€æœ¯ï¼Œå¯ä»¥åˆ©ç”¨è¿™ç§æŠ€æœ¯æ¥æå‡æ•°å­—å›¾åƒçš„è‰²å½©ä»¥åŠå¯¹æ¯”åº¦çš„èŒƒå›´ã€‚</p>
<p>å’ŒSDRï¼ˆ<em>Standard Dynamic Range</em>ï¼šæ ‡å‡†åŠ¨æ€èŒƒå›´ï¼‰ç›¸æ¯”ï¼ŒHDRå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ›´å®½çš„è‰²å½©èŒƒå›´</li>
<li>æ›´äº®çš„äº®åº¦ä¸Šé™</li>
<li>æ›´é»‘çš„äº®åº¦ä¸‹é™</li>
<li>åœ¨å¯¹æ¯”åº¦ã€ç°åº¦åˆ†è¾¨ç‡ç­‰ç»´åº¦ä¸Šå¯¹å½±åƒè´¨é‡ä¸Šè¿›è¡Œäº†æ•´ä½“æå‡</li>
</ul>
<p>ä»è€Œï¼ŒHDRå¯ä»¥ç»™ç”¨æˆ·å¸¦æ¥æ›´å…·æ²‰æµ¸å¼çš„æ„Ÿå—ã€‚</p>
<p>HDRæŠ€æœ¯å¯ä»¥åº”ç”¨äºæ‹ç…§ï¼ˆ<em>photography</em>ï¼‰å’Œè§†é¢‘ï¼ˆ<em>video</em>ï¼‰ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè™½ç„¶<code>photo HDR</code>å’Œ<code>video HDR</code>çš„ç›®æ ‡éƒ½æ˜¯è®©æˆ‘ä»¬æ‰€çœ‹åˆ°çš„æ•°å­—å†…å®¹æ›´é€¼è¿‘äººçœ¼çš„çœŸå®ä½“éªŒï¼Œä½†æ˜¯è¿™ä¸¤è€…ç¡®å®æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ä¸ªæ¦‚å¿µã€‚æœ¬è´¨ä¸Šè®²ï¼Œ<code>photo HDR</code>æ˜¯ä¸€ä¸ªç›¸æœºæ•è·ç…§ç‰‡ï¼ˆ<em>capture</em>ï¼‰çš„è¿‡ç¨‹ï¼Œè€Œ<code>video HDR</code>åˆ™æ˜¯ä¸€ä¸ªæ˜¾ç¤º(<em>display</em>)çš„è¿‡ç¨‹ã€‚[^1]</p>
<h2 id="å…‰åº¦å­¦æ¦‚å¿µåŠå•ä½">å…‰åº¦å­¦æ¦‚å¿µåŠå•ä½</h2>
<p>åœ¨è¿›ä¸€æ­¥ä»‹ç»HDRä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€äº›<a href="http://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=AB4FAB66987D97573EA90F4DD56ABA36">å…‰åº¦å­¦</a>çš„ç›¸å…³æ¦‚å¿µï¼Œä»¥ä¾¿èƒ½å¤Ÿèƒ½å¤Ÿå¯¹HDRæœ‰æ›´å¥½çš„ç†è§£å’Œè®¤è¯†ã€‚</p>
<ul>
<li>
<p><strong>è¾å°„é€šé‡</strong>ï¼šåœ¨å…‰è¾å°„æµ‹é‡å­¦ä¸­ï¼Œä½¿ç”¨çš„åŸºæœ¬ç‰©ç†é‡æ˜¯<code>è¾å°„é€šé‡</code>æˆ–<code>è¾å°„åŠŸç‡</code>ï¼Œç¬¦å·è¡¨ç¤ºä¸ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î¦</mi><mi>e</mi></msub></mrow><annotation encoding="application/x-tex">\Phi_{e}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord">Î¦</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">e</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå•ä½æ˜¯ç“¦ç‰¹ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span></span></span></span>ï¼‰ã€‚è¾å°„é€šé‡ç”±ä¸€ä¸ªè¾å°„æºå‘å‡ºï¼Œå¹¶é€šè¿‡æŸç§ä¼ æ’­ä»‹è´¨è¿›è¡Œä¼ è¾“å¹¶åœ¨æŸç§è¡¨é¢ä¸Šæ¥æ”¶è¯¥è¾å°„é€šé‡ã€‚</p>
</li>
<li>
<p><strong>å…‰é€šé‡</strong>ï¼š<code>å…‰é€šé‡</code>æ˜¯æŒ‡æŒ‰ç…§å›½é™…è§„å®šçš„æ ‡å‡†äººçœ¼è§†è§‰ç‰¹æ€§è¯„ä»·çš„è¾å°„é€šé‡çš„å¯¼å‡ºé‡ï¼Œä¹Ÿå°±æ˜¯å¯¹<code>è¾å°„é€šé‡</code>çš„å…‰åº¦é‡ï¼Œå…¶ç¬¦å·ä¸ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î¦</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">\Phi_{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord">Î¦</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€‚å¯ä»¥ä»<code>è¾å°„é€šé‡</code>æ¥å¯¼å‡º<code>å…‰é€šé‡</code>ã€‚</p>
</li>
<li>
<p><strong>å…‰é‡</strong>ï¼š <code>å…‰é‡</code>ä¹Ÿç§°ä¸º<code>å…‰èƒ½</code>ï¼ŒæŒ‡çš„æ˜¯åœ¨ç»™å®šçš„æ—¶é—´é—´éš”ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î”</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\Delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î”</span><span class="mord mathdefault">t</span></span></span></span>ï¼‰å†…ï¼Œ<code>å…‰é€šé‡</code>çš„æ—¶é—´ç§¯åˆ†ï¼Œç¬¦å·è¡¨ç¤ºä¸ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">Q_{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä¸”<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mi>v</mi></msub><mo>=</mo><msub><mo>âˆ«</mo><mrow><mi mathvariant="normal">Î”</mi><mi>t</mi></mrow></msub><mrow><msub><mi mathvariant="normal">Î¦</mi><mi>v</mi></msub><mo>â‹…</mo><mi>d</mi><mi>t</mi></mrow></mrow><annotation encoding="application/x-tex">Q_{v}=\int_{\Delta t}{\Phi_{v} \cdot dt}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1608200000000002em;vertical-align:-0.35582em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.12251099999999993em;"><span style="top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Î”</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35582em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord">Î¦</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">t</span></span></span></span></span>ã€‚</p>
</li>
<li>
<p><strong>å‘å…‰å¼ºåº¦</strong>ï¼š<code>å‘å…‰å¼ºåº¦</code>ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">I_{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼‰ä¸ºå…‰æºå‘å‡ºçš„å¹¶ä¸”åœ¨æŒ‡å®šæ–¹å‘çš„ç«‹ä½“è§’å…ƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi mathvariant="normal">Î©</mi></mrow><annotation encoding="application/x-tex">d \Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span><span class="mord">Î©</span></span></span></span>å†…ä¼ æ’­çš„å…‰é€šé‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><msub><mi mathvariant="normal">Î¦</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">d \Phi_{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord">Î¦</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸è¯¥ç«‹ä½“è§’å…ƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi mathvariant="normal">Î©</mi></mrow><annotation encoding="application/x-tex">d \Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span><span class="mord">Î©</span></span></span></span>çš„å•†ï¼Œå³ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>v</mi></msub><mo>=</mo><mfrac><mrow><mi>d</mi><msub><mi mathvariant="normal">Î¦</mi><mi>v</mi></msub></mrow><mrow><mi>d</mi><mi mathvariant="normal">Î©</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">I_{v}=\frac{d \Phi_{v}}{d \Omega}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2412079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mtight">Î©</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mtight"><span class="mord mtight">Î¦</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ã€‚<code>å‘å…‰å¼ºåº¦</code>çš„å•ä½ä¸º<code>åå¾·æ‹‰</code>ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">cd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">d</span></span></span></span>ï¼‰ã€‚åå¾·æ‹‰æ˜¯å‘å°„å‡ºé¢‘ç‡ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>540</mn><mo>Ã—</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup><mi>H</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">540 \times 10^{12} Hz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mord">4</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>çš„å•è‰²è¾å°„çš„å…‰æºåœ¨æŒ‡å®šæ–¹å‘ä¸Šçš„å‘å…‰å¼ºåº¦ï¼Œå¹¶ä¸”è¯¥å…‰æºåœ¨è¯¥æ–¹å‘ä¸Šçš„è¾å°„å¼ºåº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>683</mn></mfrac><mi>W</mi><mo>â‹…</mo><mi>s</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">\frac{1}{683} W \cdot sr</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">8</span><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>ã€‚</p>
</li>
<li>
<p><strong>å…‰äº®åº¦</strong>ï¼š <code>å…‰äº®åº¦</code>ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">I_{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼‰æŒ‡åœ¨æŸæ–¹å‘ä¸Šå•ä½æŠ•å½±é¢ç§¯çš„é¢å…‰æºæ²¿è¯¥æ–¹å‘çš„<code>å‘å…‰å¼ºåº¦</code>ã€‚é¢å…‰æºä¸Šå°é¢å…ƒçš„é¢ç§¯ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>A</mi></mrow><annotation encoding="application/x-tex">dA</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">A</span></span></span></span>ï¼ŒæŸä¸€æ–¹å‘ä¸é¢å…ƒæ³•çº¿çš„å¤¹è§’ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span></span></span></span>ï¼Œé¢å…ƒæ²¿è¿™ä¸ªæ–¹å‘çš„æŠ•å½±é¢ç§¯ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>A</mi><mo>â‹…</mo><mi>c</mi><mi>o</mi><mi>s</mi><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">dA \cdot cos \theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">Î¸</span></span></span></span>ï¼Œåˆ™é¢å…ƒæ²¿è¿™ä¸ªæ–¹å‘çš„å…‰äº®åº¦ä¸ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><msub><mi>I</mi><mi>v</mi></msub><mrow><mi>d</mi><mi>A</mi><mo>â‹…</mo><mi>c</mi><mi>o</mi><mi>s</mi><mi>Î¸</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{I_{v}}{dA \cdot cos \theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.233431em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8884309999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">A</span><span class="mbin mtight">â‹…</span><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.07847em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ï¼Œå³<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>v</mi></msub><mo>=</mo><mfrac><mrow><mi>d</mi><msub><mi mathvariant="normal">Î¦</mi><mi>v</mi></msub></mrow><mrow><mi>d</mi><mi>A</mi><mo>â‹…</mo><mi>c</mi><mi>o</mi><mi>s</mi><mi>Î¸</mi><mo>â‹…</mo><mi>d</mi><mi mathvariant="normal">Î©</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">I_{v}=\frac{d \Phi_{v}}{dA \cdot cos \theta \cdot d \Omega}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2412079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">A</span><span class="mbin mtight">â‹…</span><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">Î¸</span><span class="mbin mtight">â‹…</span><span class="mord mathdefault mtight">d</span><span class="mord mtight">Î©</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mtight"><span class="mord mtight">Î¦</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ã€‚ç”±æ­¤å¯çŸ¥ï¼Œ<code>å…‰äº®åº¦</code>çš„å•ä½ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>d</mi><mi mathvariant="normal">/</mi><msup><mi>m</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">cd/m^{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">d</span><span class="mord">/</span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>ï¼ˆåå¾·æ‹‰/å¹³æ–¹ç±³ï¼‰ï¼Œåˆç§°ä¸º<code>å°¼ç‰¹</code>ã€‚ä¾‹å¦‚ï¼ŒiPhone12çš„å±å¹•çš„å…‰äº®åº¦ä¸ºï¼š625 å°¼ç‰¹æœ€å¤§äº®åº¦ (å…¸å‹)ï¼Œ1200 å°¼ç‰¹æœ€å¤§äº®åº¦ (HDR)ã€‚</p>
</li>
</ul>
<h2 id="photography-hdr">photography HDR</h2>
<p>å¯ä»¥é€šè¿‡åŒæ—¶æ•è·ä¸åŒæ›å…‰åº¦çš„å¤šå¼ å›¾åƒçš„æ–¹æ³•æ¥ç”ŸæˆHDRç…§ç‰‡ã€‚ç›¸æœºä¼šä½¿ç”¨ä¸åŒçš„æ›å…‰å€¼å¿«é€Ÿæ‹æ‘„ä¸‰å¼ æˆ–æ›´å¤šçš„ç…§ç‰‡ï¼Œç„¶åå¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œä»¥ç”Ÿæˆä¸€å¼ HDRç…§ç‰‡ã€‚</p>
<p>åœ¨æ‹æ‘„é«˜å¯¹æ¯”åº¦åœºæ™¯çš„ç…§ç‰‡æ—¶ï¼ŒHDRå›¾åƒå¤„ç†éå¸¸æœ‰ç”¨ã€‚</p>
<p>å¦‚ä¸‹å›¾çš„å¤œæ™¯æ‰€ç¤ºï¼Œä¾‹å¦‚ï¼Œæ›å…‰åº¦å¤ªä½æ—¶ï¼Œä¼šè®©åé¢çš„æ™¯è‰²æ˜¾å¾—æš—æ·¡ã€‚å¦‚æœè°ƒæ•´æ›å…‰ä»¥æ˜¾ç¤ºåé¢çš„æ™¯è‰²ï¼Œåˆ™å‰é¢çš„æ™¯è‰²åˆä¼šå¤ªäº®ï¼Œç”šè‡³å¯èƒ½ä¼šå®Œå…¨å˜ç™½ã€‚é€šè¿‡ç»„åˆå¤šæ¬¡æ›å…‰ï¼Œåˆ™å¯ä»¥å¹³å‡è¿™äº›ä¸åŒçš„æ›å…‰ï¼Œä½¿çš„åé¢çš„æ™¯è‰²å¯ä»¥å‡ºç°åœ¨ç…§ç‰‡ä¸Šï¼Œè€Œåˆä¸ä¼šè¿‡åº¦æ›å…‰å‰é¢çš„æ™¯è‰²ã€‚[^2]</p>
<p><img src="/2021/01/26/HDR-introduction/EVDifferent.png" alt></p>
<p><img src="/2021/01/26/HDR-introduction/EVToneMapping.png" alt></p>
<p>ç›®å‰ï¼Œå¾ˆå¤šæ™ºèƒ½æ‰‹æœºï¼ˆä¾‹å¦‚iPhoneï¼‰çš„ç›¸æœºéƒ½å…·æœ‰HDRé€‰é¡¹ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©è®©ç›¸æœºï¼š</p>
<ul>
<li>å¼€å¯HDRï¼ˆONï¼‰</li>
<li>å…³é—­HDRï¼ˆOFFï¼‰</li>
<li>è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦å¼€å¯HDRï¼ˆAutoï¼‰</li>
</ul>
<p>å¯¹äºAutoæ¨¡å¼ï¼Œç›¸æœºä»…åœ¨é«˜å¯¹æ¯”åº¦çš„æƒ…å†µä¸‹æ‰æ‹æ‘„HDRç…§ç‰‡ã€‚å¤§å¤šæ•°ç›¸æœºè¿˜ä¼šåœ¨åˆæˆHDRç…§ç‰‡æ—¶ï¼ŒåŒæ—¶æ•è·æ™®é€šç…§ç‰‡ï¼Œä»è€Œå…è®¸æˆ‘ä»¬å¯ä»¥åœ¨HDRç…§ç‰‡å’Œæ™®é€šç…§ç‰‡ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚</p>
<h3 id="dodging-and-burningå’Œtone-mapping">dodging and burningå’Œtone mapping</h3>
<p>å®é™…ä¸Šï¼Œåœ¨èƒ¶ç‰‡æ—¶ä»£ï¼Œæ‘„å½±å¸ˆå°±ä¼šæ‹æ‘„å¤šå¼ ä¸åŒæ›å…‰ç¨‹åº¦çš„åº•ç‰‡ï¼Œå¹¶åœ¨<a href="https://baike.baidu.com/item/%E6%9A%97%E6%88%BF/62291">æš—æˆ¿</a>ä¸­ä½¿ç”¨ä¸€ç§**<a href="https://en.wikipedia.org/wiki/Dodging_and_burning">dodging and burning</a>**çš„æ‰‹æ³•ï¼ŒæŠŠæ•°å¼ åº•ç‰‡åˆæˆä¸ºä¸€å¼ å…·æœ‰é«˜åŠ¨æ€èŒƒå›´çš„ç…§ç‰‡ã€‚éšç€æ•°ç ç›¸æœºçš„å‡ºç°ï¼ŒHDRå°†æš—æˆ¿é‡Œçš„æŠ€æœ¯å¼•å…¥ç›¸æœºæˆåƒä¼ æ„Ÿå™¨ï¼Œé€šè¿‡å¯¹åŒä¸€ä¸ªåœºæ™¯è¿›è¡Œå¤šç§ä¸åŒçš„æ›å…‰ï¼Œç„¶åå¯¹å…¶è¿›è¡Œåˆæˆï¼Œæœ€ç»ˆå®ç°å¢å¼ºç…§ç‰‡åŠ¨æ€èŒƒå›´ï¼Œè¾¾åˆ°å¢åŠ ç…§ç‰‡å±‚æ¬¡æ„Ÿçš„ç›®çš„ã€‚åœ¨ç…§ç‰‡HDRä¸­ï¼Œè¿™ç§åˆæˆæŠ€æœ¯ç§°ä¹‹ä¸º<a href="https://en.wikipedia.org/wiki/Tone_mapping">è‰²è°ƒæ˜ å°„ï¼ˆ<em>tone mapping</em>ï¼‰</a>ã€‚å½“ç„¶ï¼Œåœ¨æ¥ä¸‹æ¥çš„<code>video HDR</code>ä¸­ä¹Ÿä¼šç”¨åˆ°è‰²è°ƒæ˜ å°„æŠ€æœ¯ï¼Œä¸åŒçš„æ˜¯ï¼Œ<code>video HDR</code>ä¸­çš„è‰²è°ƒæ˜ å°„æ˜¯ç”¨æ¥å°†HDRå†…å®¹æ˜ å°„åˆ°SDRæ˜¾ç¤ºè®¾å¤‡ï¼Œä½¿å¾—SDRè®¾å¤‡ä¹Ÿèƒ½æ˜¾ç¤ºHDRå†…å®¹ã€‚</p>
<h2 id="video-hdr">video HDR</h2>
<p>HDRè§†é¢‘çš„æ•è·æ–¹å¼ä¸HDRç…§ç‰‡ç±»ä¼¼ã€‚åŒæ—¶ä»¥ä¸åŒçš„æ›å…‰ï¼ˆæˆ–ä¸åŒçš„ISOé…ç½®ï¼‰æ¥å½•åˆ¶æ¯ä¸ªé•œå¤´ã€‚ç„¶åæŠŠè¿™äº›é•œå¤´èåˆåœ¨ä¸€èµ·ä»¥ç”Ÿæˆå•ä¸ªé•œå¤´ã€‚å°½ç®¡ä¼šäº§ç”Ÿçœ‹èµ·æ¥ä¸çœŸå®çš„ç°è‰²æ•ˆæœï¼Œä½†è¿™ç§æ–¹æ³•é€šå¸¸å¯ä»¥ä½¿è§†é¢‘æ›´äº®ã€‚å› æ­¤ï¼ŒHDRè§†é¢‘é€šå¸¸ä¼šåœ¨å‘å¸ƒä¹‹å‰è¿›è¡ŒåæœŸå¤„ç†ã€‚</p>
<p>ä¸ºäº†æ­£ç¡®çš„æ˜¾ç¤ºHDRè§†é¢‘ï¼Œæ˜¾ç¤ºè®¾å¤‡ä¹Ÿå¿…é¡»æ”¯æŒHDRã€‚ä¾‹å¦‚ï¼Œå…·å¤‡HDRåŠŸèƒ½çš„ç”µè§†å¿…é¡»æ”¯æŒç‰¹å®šçš„è§†é¢‘è¾“å‡ºæ ‡å‡†ã€‚è¿™äº›æ ‡å‡†ä¸­ä¼šæ¶‰åŠï¼š10-bitè‰²å½©å’Œè‡³å°‘è¦†ç›–90ï¼…çš„DCI-P3è‰²å½©ç©ºé—´ã€‚HDRæ˜¾ç¤ºå™¨è¿˜å¿…é¡»æ”¯æŒç‰¹å®šçš„HDRæ ¼å¼ï¼Œä¾‹å¦‚HDR10ï¼ŒDolby Visionæˆ–Hybrid Log Gammaï¼ˆHLGï¼‰ã€‚</p>
<p><img src="/2021/01/26/HDR-introduction/color_space.jpg" alt></p>
<p>CIE 1931 xy ä¸­å„ä¸ªè‰²å½©ç©ºé—´çš„å¯¹æ¯”</p>
<p>ä»¥HDR10ä¸ºä¾‹ï¼Œå› ä¸ºHDR10æ ‡å‡†ä½¿ç”¨å¹¿è‰²åŸŸ<code>Rec.2020</code>ï¼Œ10-bitè‰²æ·±ä»¥åŠ<code>SMTPE ST 2084</code>PQè½¬æ¢å‡½æ•°ï¼Œå› æ­¤åœ¨ä¸€å°éHDRæ˜¾ç¤ºè®¾å¤‡ä¸Šå»æ˜¾ç¤ºHDR10çš„å†…å®¹ï¼Œåˆ™ä¼šå‡ºç°ä¸¤ç§æƒ…å†µ[<sup>3],[</sup>4]ï¼š</p>
<ul>
<li>æ— æ³•è§£ç å¯¼è‡´èŠ±å±</li>
<li>å¯ä»¥è§£ç ï¼Œä½†æ˜¯å› ä¸ºå½±ç‰‡ä¸­çš„é«˜äº®éƒ¨åˆ†ä¼šæŒ‰ç…§æ˜¾ç¤ºè®¾å¤‡çš„æœ€é«˜äº®åº¦æ¥æ˜¾ç¤ºè€Œå¯¼è‡´å½±ç‰‡æ•´ä½“å˜ç°</li>
</ul>
<p>è¿™ä¹Ÿå°±æ˜¯HDRç…§ç‰‡å’ŒHDRè§†é¢‘çš„ä¸åŒä¹‹å¤„ï¼šHDRè§†é¢‘é™¤äº†è§†é¢‘æ•è·ä¹‹å¤–ï¼Œå¯¹æ˜¾ç¤ºè®¾å¤‡çš„èƒ½åŠ›æœ‰è¾ƒå¼ºçš„ä¾èµ–ã€‚</p>
<h4 id="pq-hlg">PQ &amp; HLG</h4>
<p>ä¸ºäº†æ­£ç¡®æ˜¾ç¤ºHDRå›¾åƒï¼Œä»…ä»…æé«˜äº®åº¦æ˜¯ä¸å¤Ÿçš„ï¼Œä»¥ä¸€ç§ä¸äººç±»è§†åŠ›ç›¸åŒ¹é…çš„æ–¹å¼æ˜¾ç¤ºè‰²å½©å’Œè‰²è°ƒè‡³å…³é‡è¦ã€‚è‰²å½©å’Œè‰²è°ƒå—ä¼½ç›<code>è¾“å…¥-è¾“å‡º</code>ç‰¹æ€§çš„å½±å“ã€‚åœ¨HDRä¸­ï¼Œä¼½ç›æ›²çº¿æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯PQå’ŒHLGã€‚</p>
<ul>
<li>PQä¼½ç›æ›²çº¿åŸºäºäººç±»è§†è§‰æ„ŸçŸ¥çš„ç‰¹å¾ï¼Œå¹¶ä¸”æœ€é€‚åˆäºåœ¨äº’è”ç½‘ä¸Šåˆ¶ä½œç”µå½±æˆ–ä¸²æµè§†é¢‘çš„å†…å®¹ï¼Œå…¶ä¸­å†ç°å‡†ç¡®æ€§æ˜¯å…³é”®ã€‚</li>
<li>HLGä¼½ç›æ›²çº¿æ—¨åœ¨å…è®¸åœ¨ç°æœ‰çš„SDRç”µè§†ä¸Šæ˜¾ç¤ºè€Œä¸ä¼šçœ‹ä¸åˆ°ä½ç½®ï¼Œå¹¶ä¸”æœ€é€‚åˆäºå¹¿æ’­ç”µè§†å’Œç›´æ’­è§†é¢‘é¦ˆé€ã€‚</li>
</ul>
<p>PQå’ŒHLGçš„å…·ä½“åŒºåˆ«å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>PQ (æ„ŸçŸ¥é‡åŒ–)</th>
<th>HLG (æ··åˆå¯¹æ•°ä¼½ç›)</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç›®æ ‡</td>
<td>äº’è”ç½‘è§†é¢‘æµï¼Œç”µå½±</td>
<td>å¹¿æ’­ç”µè§†ï¼Œç›´æ’­è§†é¢‘</td>
</tr>
<tr>
<td>ä¼˜ç‚¹</td>
<td>å¤„ç†äº®åº¦çš„ç»å¯¹å€¼é«˜è¾¾ 10,000 cd/mÂ²ï¼ŒåŸºäºäººç±»è§†è§‰æ„ŸçŸ¥çš„æ–°ä¼½ç›æ›²çº¿</td>
<td>å°†äº®åº¦å¤„ç†ä¸ºç›¸å¯¹å€¼ï¼ˆä¸ç°æœ‰æ ‡å‡†ç›¸åŒï¼‰å…¼å®¹SDRç”µè§†</td>
</tr>
<tr>
<td>æœ€å¤§äº®åº¦</td>
<td>1,000 cd/mÂ² ç»å¯¹å€¼ ä¸€è‡´ï¼Œä¸ç®¡æ˜¾ç¤ºè£…ç½®</td>
<td>ç›¸å¯¹å€¼ï¼Œå› æ˜¾ç¤ºè®¾å¤‡è€Œå¼‚</td>
</tr>
<tr>
<td>é»‘è‰²ç­‰çº§</td>
<td>0.005 cd/m2æˆ–æ›´ä½</td>
<td>0.005 cd/m2 æˆ–æ›´ä½</td>
</tr>
<tr>
<td>æè®®è€…</td>
<td>Dolby</td>
<td>BBC å’Œ NHK</td>
</tr>
<tr>
<td>å‚è€ƒæ ‡å‡†</td>
<td>SMPTE ST 2084ã€ITU-R BT.2100</td>
<td>ITU-R BT.2100</td>
</tr>
<tr>
<td>åœ¨SDRæ˜¾ç¤ºè®¾å¤‡ä¸Šçš„æ•ˆæœ</td>
<td>Poor</td>
<td>è‰¯</td>
</tr>
<tr>
<td>ç›´æ’­æ•ˆæœ</td>
<td>è‰¯</td>
<td>ä¼˜</td>
</tr>
</tbody>
</table>
<h2 id="hdræ ‡å‡†">HDRæ ‡å‡†</h2>
<h4 id="hdr10">HDR10</h4>
<h4 id="dolby-vision">DOLBY VISION</h4>
<h4 id="hdr10">HDR10+</h4>
<h4 id="uhd-premium">UHD Premium</h4>
<h4 id="displayhdr">DisPlayHDR</h4>
<h4 id="mobile-hdr">Mobile HDR</h4>
<h4 id="cuva-hdr">CUVA HDR</h4>
<h4 id="vesa-hdr">VESA HDR</h4>
<h2 id="æ‰‹æœºå¯¹hdrçš„æ”¯æŒ">æ‰‹æœºå¯¹HDRçš„æ”¯æŒ</h2>
<h4 id="iphone">iPhone</h4>
<p>iPhone 12 Proå¯¹äºæœæ¯”è§†ç•Œçš„å…¨æ–¹ä½æ”¯æŒï¼Œå¯ä»¥è¯´æ˜¯å‡­å€Ÿç€ä¸€å·±ä¹‹åŠ›ï¼Œå°†ä¸€é¡¹æœ€å…ˆè¿›ï¼Œæœ€å‰å«çš„HDRæŠ€æœ¯ï¼Œå¸¦åˆ°äº†æ™®ç½—å¤§ä¼—çš„çœ¼å‰ã€‚ä½œä¸ºç¬¬ä¸€éƒ¨æ”¯æŒHDRæ‹æ‘„çš„æ‰‹æœºï¼ŒiPhone 12çš„Dolby Vision HDRæ‹æ‘„æ˜¯å¦‚ä½•å®ç°çš„ï¼ŸçœŸçš„å¦‚å®£ä¼ æ‰€è¯´çš„é‚£ä¹ˆç‰›å—ï¼Ÿ</p>
<p>æˆ–è®¸æˆ‘ä»¬èƒ½å¤Ÿä»è¿™ä½æ‹¥æœ‰5å¹´HDRè°ƒè‰²å’Œæ•™å­¦ç»éªŒçš„ä¸“å®¶Samuel Bilodeauæ’°å†™çš„è¿™ç¯‡è¯„æµ‹ä¸­æ‰¾åˆ°ç­”æ¡ˆã€‚ä½œè€…åœ¨è¯„æµ‹çš„æœ€åè¯´ï¼šæˆ‘ç‰¹åˆ«å…´å¥‹å’Œå¼€å¿ƒçš„çœ‹åˆ°iPhoneå’Œå…¶ä»–å…·æœ‰HDRæ‹æ‘„åŠŸèƒ½çš„æ¶ˆè´¹çº§ç›¸æœºçš„å‡ºç°ï¼Œå¹¶æ¨åŠ¨ç€HDRå‘å‰è¿ˆäº†ä¸€æ­¥ã€‚</p>
<div class="bili_video"><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="https://player.bilibili.com/player.html?aid=289414701&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div></div>
<h2 id="ffmpegåˆ†æhdrå†…å®¹">FFmpegåˆ†æHDRå†…å®¹</h2>
<h4 id="ffprobeåˆ†æhdrå†…å®¹çš„å…ƒæ•°æ®">ffprobeåˆ†æHDRå†…å®¹çš„å…ƒæ•°æ®</h4>
<p>å¯ä»¥ä½¿ç”¨ffprobeå‘½ä»¤æ¥æå–<code>Mastering Display</code>å’Œ<code>Content Light Level</code>çš„å…ƒæ•°æ®ã€‚æˆ‘ä»¬åªéœ€è¦æå–ç¬¬ä¸€å¸§çš„ç›¸å…³æ•°æ®å³å¯ï¼Œå› æ­¤ï¼Œåœ¨åˆ†ææ—¶ï¼Œå¯ä»¥ä½¿ç”¨<a href="http://ffmpeg.org/ffprobe.html#Main-options"><code>-read_intervals &quot;%+#1&quot;</code></a>é€‰é¡¹ï¼Œè®©ffprobeåªæå–ç¬¬ä¸€å¸§çš„å…ƒæ•°æ®ã€‚å…·ä½“åˆ†æååˆ©å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ffprobe \</span><br><span class="line">-hide_banner \</span><br><span class="line">-loglevel warning \</span><br><span class="line">-select_streams v \</span><br><span class="line">-print_format json \</span><br><span class="line">-show_frames \</span><br><span class="line">-read_intervals &quot;%+#1&quot; \</span><br><span class="line">-show_entries &quot;frame=color_space,color_primaries,color_transfer,side_data_list,pix_fmt&quot; \</span><br><span class="line">HDR.mp4</span><br></pre></td></tr></table></figure>
<p>å„é€‰é¡¹çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>-hide_banner -loglevel warningï¼šä¸æ˜¾ç¤ºæˆ‘ä»¬ä¸éœ€è¦çš„ä¿¡æ¯</li>
<li>-select_streams vï¼šåªé€‰æ‹©è§†é¢‘æµæ¥åˆ†æ</li>
<li>-print_format jsonï¼šä»¥jsonæ ¼å¼è¾“å‡ºåˆ†æç»“æœ</li>
<li>-read_intervals â€œ%+#1â€ï¼šåªåˆ†æç¬¬ä¸€å¸§ä¸­çš„æ•°æ®</li>
<li>-show_entries â€¦ ï¼šåªè¾“å‡ºæˆ‘ä»¬æŒ‡å®šçš„æ•°æ®</li>
</ul>
<p>å‘½ä»¤æ‰§è¡Œåï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹çš„åˆ†æç»“æœï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;frames&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;pix_fmt&quot;</span>: <span class="string">&quot;yuv420p10le&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;color_space&quot;</span>: <span class="string">&quot;bt2020nc&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;color_primaries&quot;</span>: <span class="string">&quot;bt2020&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;color_transfer&quot;</span>: <span class="string">&quot;smpte2084&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;side_data_list&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;side_data_type&quot;</span>: <span class="string">&quot;Mastering display metadata&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;red_x&quot;</span>: <span class="string">&quot;34000/50000&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;red_y&quot;</span>: <span class="string">&quot;16000/50000&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;green_x&quot;</span>: <span class="string">&quot;13250/50000&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;green_y&quot;</span>: <span class="string">&quot;34500/50000&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;blue_x&quot;</span>: <span class="string">&quot;7500/50000&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;blue_y&quot;</span>: <span class="string">&quot;3000/50000&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;white_point_x&quot;</span>: <span class="string">&quot;15635/50000&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;white_point_y&quot;</span>: <span class="string">&quot;16450/50000&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;min_luminance&quot;</span>: <span class="string">&quot;40/10000&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;max_luminance&quot;</span>: <span class="string">&quot;11000000/10000&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œffprobeåˆ†æç»“æœä¸­çš„é¢œè‰²å€¼ä»¥åŠæœ€å¤§/å°äº®åº¦å€¼å‡ä¸ºä¸€ä¸ªæ¯”å€¼ï¼Œé¢œè‰²å€¼çš„æœ€ç»ˆç»“æœä¼šç¡®å®šæ¯ç‰ˆå†…å®¹æ‰€ç”¨çš„é¢œè‰²ç©ºé—´ï¼Œè€Œæœ€å¤§/å°äº®åº¦å€¼åˆ™ç¡®å®šäº†æ¯ç‰ˆå†…å®¹çš„åŠ¨æ€èŒƒå›´ã€‚</p>
<p>æ ¹æ®å¦‚ä¸Šçš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œåœ¨CIEåæ ‡ä¸Šï¼Œçº¢è‰²ï¼Œç»¿è‰²ï¼Œè“è‰²ä»¥åŠç™½ç‚¹çš„åæ ‡åˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>red: (0.68, 0.32)</li>
<li>green: (0.265, 0.69)</li>
<li>blue: (0.15, 0.06)</li>
<li>white point: (0.3127, 0.329)</li>
</ul>
<p>ä»<a href="https://en.wikipedia.org/wiki/DCI-P3">DCI-P3</a>çš„ç›¸å…³ä¿¡æ¯å¯çŸ¥ï¼Œè¯¥è§†é¢‘çš„æ¯ç‰ˆå†…å®¹åœ¨åˆ¶ä½œçš„æ—¶å€™é‡‡ç”¨çš„æ˜¯<code>P3-D65 (Display)</code>é¢œè‰²ç©ºé—´ï¼Œå…¶æœ€å°äº®åº¦ä¸º0.004å°¼ç‰¹ï¼Œæœ€å¤§äº®åº¦ä¸º1100å°¼ç‰¹ï¼Œå¯¹æ¯”åº¦ä¸º275000ã€‚</p>
<h4 id="ffmpegè½¬ç hdrå†…å®¹">FFmpegè½¬ç HDRå†…å®¹</h4>
<p>å¯¹äºHDRè§†é¢‘çš„è½¬ç æ—¶ï¼Œéœ€è¦å°†<code>Mastering Display</code>å’Œ<code>Content Light Level</code>å…ƒæ•°æ®çš„å†…å®¹ä¼ é€’ç»™ç¼–ç å™¨ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯ä¼ é€’ç»™FFmpegï¼‰ï¼Œå¦åˆ™ï¼Œåœ¨è½¬ç çš„è¿‡ç¨‹ä¸­ä¼šä¸¢å¤±è¿™äº›ä¿¡æ¯ï¼Œè¿›è€Œå¯¼è‡´è½¬ç å¯¹ç”»é¢å†…å®¹çš„å½±å“ã€‚å…·ä½“çš„æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ffmpeg  -i hdr.mp4 \</span><br><span class="line">-map 0 -c:v libx265 \</span><br><span class="line">-x265-params hdr-opt=1:repeat-headers=1:colorprim=bt2020:transfer=smpte2084:colormatrix=bt2020nc:master-display=G(13250,34500)B(7500,3000)R(34000,16000)WP(15635,16450)L(11000000,40) \</span><br><span class="line">-crf 20 \</span><br><span class="line">-preset veryfast \</span><br><span class="line">-pix_fmt yuv420p10le \</span><br><span class="line">test.mp4</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ</p>
<ul>
<li>hdr-opt=1: è¡¨ç¤ºæˆ‘ä»¬è¦å¯ç”¨HDR</li>
<li>repeat-headers=1: è¡¨ç¤ºæ¯ä¸€å¸§éƒ½éœ€è¦è¿™äº›æ•°æ®</li>
<li>colorprim, transfer and colormatrix: å’Œffprobeä¿æŒä¸€è‡´</li>
<li>master-display: æ ¹æ®ffprobeçš„ç»“æœæ¥æ„é€ çš„é¢œè‰²å­—ç¬¦ä¸²</li>
</ul>
<h2 id="ç›¸å…³æœ¯è¯­">ç›¸å…³æœ¯è¯­</h2>
<h4 id="color-calibration-of-screens-å±å¹•çš„è‰²å½©æ ¡æ­£">Color Calibration of Screensï¼ˆå±å¹•çš„è‰²å½©æ ¡æ­£ï¼‰</h4>
<p>ç”¨äºç¡®ä¿å±å¹•ä¸Šè‰²å½©è¢«å‡†ç¡®æ˜¾ç¤ºçš„ä¸€ä¸ªè¿‡ç¨‹ã€‚ä¸€èˆ¬ä½¿ç”¨è‰²åº¦è®¡æ¥æµ‹é‡ä¸€å—æ˜¾ç¤ºå±çš„åŸç”Ÿè‰²å½©å“åº”ï¼Œä¹‹åè®¡ç®—ä¸€ä¸ªç”¨äºä¿®æ­£çš„æŒ‡æ ‡ä»¥ç¡®ä¿é¢œè‰²èƒ½æ­£ç¡®åœ°æ˜¾ç¤ºåœ¨è¯¥æ˜¾ç¤ºå™¨ä¸Šï¼Œæœ€åå¯¹ç»è¿‡ä¿®æ­£åçš„å“åº”è¿›è¡Œæ£€æµ‹ã€‚</p>
<h4 id="color-spaces-è‰²å½©ç©ºé—´">Color Spacesï¼ˆè‰²å½©ç©ºé—´ï¼‰</h4>
<p>ä¸€ä¸ªè‰²å½©ç©ºé—´å¯ä»¥æŒ‡ä¸€ç§é¢œè‰²çš„ç»„ç»‡æ–¹å¼ï¼Œä¹Ÿå¯ä»¥æŒ‡æŸä¸ªç‰¹å®šèŒƒå›´çš„è‰²å½©ã€‚åœ¨å½±é™¢å’Œç”µè§†çš„é¢†åŸŸï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ RGBï¼ˆç”¨çº¢ã€ç»¿ã€è“åŸè‰²åˆ†é‡æ¥è¡¨ç¤ºä¸€ä¸ªé¢œè‰²ï¼‰æˆ–è€… YUVï¼ˆç”¨ä¸€ä¸ªé¢œè‰²çš„æ˜åº¦ï¼ˆé»‘ç™½å€¼ï¼‰ï¼Œä»¥åŠå®ƒçš„åŸºäºè‰²å½©æˆåˆ†å·®å€¼æ‰€è®¡ç®—çš„è‰²åº¦å€¼ï¼‰è‰²å½©ç©ºé—´ï¼ˆè¯‘è€…æ³¨ï¼šRGB å’Œ YUV ä¸ºè‰²å½©æ¨¡å‹ï¼Œéè‰²å½©ç©ºé—´ï¼Œæ­¤å¤„åŸæ–‡æœ‰é”™è¯¯ï¼‰ã€‚è¿™äº›è‰²å½©ç©ºé—´ä¸€èˆ¬åŸºäºç‰¹å®šçš„æ˜¾ç¤ºè®¾å¤‡ç‰¹æ€§ï¼Œå‚è§ D65-P3 è¯æ¡ã€‚å…¶å®ƒçš„è‰²å½©ç©ºé—´ï¼Œæ¯”å¦‚ XYZ æˆ–è€… Lab æ›´é€‚ç”¨äºè¡¨ç¤ºäººçœ¼è‰²å½©è§†è§‰æ¨¡å‹ã€‚</p>
<h4 id="contrast-ratio-å¯¹æ¯”åº¦">Contrast Ratioï¼ˆå¯¹æ¯”åº¦ï¼‰</h4>
<p>å¯¹æ¯”åº¦æ˜¯ä¸€ä¸ªç³»ç»Ÿæ‰€èƒ½äº§ç”Ÿçš„æœ€äº®ï¼ˆç™½ï¼‰éƒ¨åˆ†å’Œæœ€æš—ï¼ˆé»‘ï¼‰éƒ¨åˆ†ä¹‹é—´çš„æ˜åº¦æ¯”å€¼ï¼Œé€šå¸¸ç”¨ä¸€ä¸ª n:1 çš„æ¯”å€¼æè¿°ã€‚</p>
<h4 id="cri-color-remapping-information-è‰²å½©é‡æ˜ å°„ä¿¡æ¯">CRI Color Remapping Informationï¼ˆè‰²å½©é‡æ˜ å°„ä¿¡æ¯ï¼‰</h4>
<p>ä¸€å¥—é€šè¿‡åˆ†æç›¸åŒå†…å®¹çš„ä¸¤ä»½ä¸åŒæ¯ç‰ˆï¼ˆå¦‚ HDR å’Œ SDR æ¯ç‰ˆï¼‰æ‰€äº§ç”Ÿçš„æ ‡å‡†å…ƒæ•°æ®ã€‚å½“ä¸€ä»½æ¯ç‰ˆï¼ˆå¦‚ HDRï¼‰å’Œ CRI å…ƒæ•°æ®è¢«ä¸€åŒä¼ è¾“æ—¶ï¼Œè§£ç å™¨åœ¨é¢å¯¹ HDR å±å¹•æ—¶å¯ä»¥ä»…è§£ç  HDR å†…å®¹ï¼Œè€Œåœ¨é¢å¯¹ SDR å±å¹•æ—¶ä¹Ÿå¯ä»¥é€šè¿‡åˆ©ç”¨ CRI å…ƒæ•°æ®çš„æ–¹å¼å°† HDR å†…å®¹å˜æ¢æˆ SDR å†…å®¹ã€‚é‡‡ç”¨è¿™ä¸€æ–¹æ¡ˆçš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå¯¹äºä¸¤ä¸ªè§£ç åçš„ç‰ˆæœ¬ï¼Œä½œè€…çš„åˆ›ä½œæ„å›¾å¾—ä»¥ä¿ç•™ã€‚CRI æ˜¯ MPEGï¼ˆHEVC v2ï¼‰çš„æ ‡å‡†æˆåˆ†ä¹‹ä¸€ï¼Œå¹¶ä¸”å¯¹äº Ultra HD Blu-ray åˆ¶ä½œæ˜¯å¯é€‰åŠŸèƒ½ã€‚</p>
<h4 id="dci-p3-d65-p3-st-428-1">DCI-P3ï¼ŒD65-P3ï¼ŒST 428-1</h4>
<p>ä¸€ä¸ªæ•°å­—ç”µå½±è‰²å½©ç©ºé—´ã€‚DCI-P3 è‰²å½©ç©ºé—´æ˜¯ä¸€ä¸ª 2005 å¹´ç”±æ•°å­—å½±é™¢è”ç›Ÿï¼ˆDigital Cinema Initiativesï¼‰å¼•å…¥çš„ RGB è‰²å½©ç©ºé—´ï¼Œå¹¶ç”± SMPTE ST428-1 äº 2006 å¹´æ ‡å‡†åŒ–ã€‚</p>
<p>è¿™ä¸€è‰²å½©ç©ºé—´æ‹¥æœ‰è¿œæ¯” sRGBï¼ˆå‚è§ Rec.709ï¼‰å®½å¹¿å¾—å¤šçš„è‰²åŸŸã€‚</p>
<p>æ‰€æœ‰çš„æ•°å­—ç”µå½±æ”¾æ˜ æœºéƒ½èƒ½å®Œæ•´æ˜¾ç¤º DCI-P3 è‰²å½©ç©ºé—´ï¼ŒD65 P3 æŒ‡çš„æ˜¯å…¶ç™½ç‚¹çš„è‰²æ¸©ç”± DCI ç™½ç‚¹æ”¹ä¸º D65 ç™½ç‚¹ã€‚</p>
<p>å›¾ä¸­çš„ä¸‰ä¸ªä¸‰è§’å½¢å±•ç°äº†ï¼šæœ€å¤§çš„æ˜¯ Rec.2020 æ ‡å‡†ï¼ŒUltra HD TV çš„æ–°æ ‡å‡†ï¼ˆç›®å‰åªæœ‰æ¿€å…‰æ˜¾ç¤ºèƒ½å®Œæ•´å®ç°ï¼‰ï¼Œç•¥å°çš„ã€ç”¨äºæ•°å­—ç”µå½±çš„ DCI-P3ï¼Œä»¥åŠä¼ ç»Ÿè§†é¢‘ç›‘è§†å™¨ã€é«˜æ¸…å¹¿æ’­ç”µè§†ã€è“å…‰ã€OTT æ‰€é‡‡ç”¨çš„æœ€å°çš„ Rec.709 è‰²å½©ç©ºé—´ã€‚</p>
<h4 id="edid-æ‰©å±•æ˜¾ç¤ºæ ‡è¯†æ•°æ®">EDID æ‰©å±•æ˜¾ç¤ºæ ‡è¯†æ•°æ®</h4>
<p>EDID æ˜¯æ‰©å±•æ˜¾ç¤ºæ ‡è¯†æ•°æ®ï¼ˆExtended Display Information Dataï¼‰çš„ç¼©å†™ï¼Œè¿™ä¸ªæ ‡å‡†ç”± Consumer Technology Associationï¼ˆCTAï¼‰åˆ¶å®šã€‚è¿™æ˜¯ç”±æ¯ä¸ª DVI æ˜¾ç¤ºå™¨ã€HDMI æ˜¾ç¤ºå™¨ï¼Œæˆ–å…¶å®ƒæ”¯æŒ DVI HDMI è¾“å…¥çš„è®¾å¤‡ï¼ˆaka DVI/HDMI Sinksï¼‰æ‰€æä¾›çš„ã€‚å¯èƒ½æ¯ä¸ª DVI/HDMI è¾“å…¥éƒ½æœ‰è‡ªå·±çš„ EDIDã€‚EDID ä¼šå‘Šè¯‰è®¾å¤‡å®ƒæ‰€è¿æ¥çš„æ˜¾ç¤ºå™¨çš„æ€§èƒ½ç‰¹å¾ã€‚</p>
<p>æºè®¾å¤‡ç¡®è®¤æ˜¾ç¤ºå™¨çš„ DVI æˆ–è€… HDMI æ¥å£æ˜¯å¦å­˜åœ¨ EDID å­˜å‚¨å™¨ï¼ˆEDID memoryï¼‰å¹¶ä½¿ç”¨å…¶ä¸­çš„ä¿¡æ¯ä¼˜åŒ–è¾“å‡ºçš„è§†é¢‘ï¼ˆåˆ†è¾¨ç‡ã€å¸§ç‡ã€è‰²å½©â€¦â€¦ï¼‰å’Œ/æˆ–éŸ³é¢‘æ ¼å¼ã€‚æ‰€æœ‰æ”¯æŒ DVI/HDMI æ ‡å‡†è¾“å…¥çš„è®¾å¤‡ï¼Œå³ TMDS æ¥æ”¶ç«¯ï¼ˆDVI/HDMI Sinksï¼‰å¿…é¡»å®ç° EDIDã€‚</p>
<h4 id="eotf-ç”µå…‰è½¬æ¢å‡½æ•°">EOTF ç”µå…‰è½¬æ¢å‡½æ•°</h4>
<p>EOTF æ˜¯ Electro-Optical Transfer Function çš„ç¼©å†™ã€‚ä»–æ˜¯ä¸€ä¸ªæ˜ å°„ç å€¼åˆ°æ˜¾ç¤ºäº®åº¦çš„æ•°å­¦å‡½æ•°ã€‚æ¢è¨€ä¹‹ï¼Œä¸€ä¸ª ETOF å®šä¹‰äº†å›¾åƒä¸­çš„ç å€¼å¦‚ä½•è¢«æ˜¾ç¤ºå™¨æˆ–è€…æŠ•å½±ä»ªæ˜¾ç¤ºä¸ºå¯è§å…‰ã€‚</p>
<p>å‚è§ OETF å…‰ç”µè½¬æ¢å‡½æ•°ï¼ŒST2084ã€‚</p>
<h4 id="oetf-å…‰ç”µè½¬æ¢å‡½æ•°">OETF å…‰ç”µè½¬æ¢å‡½æ•°</h4>
<p>OETF æ˜¯ Opto-Electronic Transfer Function çš„ç¼©å†™ã€‚å®ƒæ˜¯ä¸€ä¸ªæ˜ å°„åœºæ™¯æ˜åº¦ï¼ˆæŸä¸ªåœºæ™¯çš„å…‰ï¼‰ä¸å¯ä¼ è¾“å‹ç¼©çš„æ•°å­—ç¼–ç å€¼ä¹‹é—´çš„æ•°å­¦å‡½æ•°æ˜ å°„å…³ç³»ã€‚è¿™ä¸ªæœ¯è¯­ä¸€èˆ¬ç”¨äºè·å–å›¾åƒçš„è®¾å¤‡ï¼Œæ¯”å¦‚æ•°å­—ç›¸æœºã€‚</p>
<p>åœ¨åæœŸåˆ¶ä½œä¸­ï¼Œå†…å®¹ä¸€èˆ¬åœ¨æŸä¸ªæ‹¥æœ‰ç‰¹å®š EOTF çš„å±å¹•ä¸Šè¿›è¡Œè°ƒè‰²ï¼Œå†å²ä¸Šï¼Œå¸¸ç”¨ä¸€ä¸ªOETF çš„é€†å‡½æ•°ä½œä¸ºå±å¹•çš„ EOTFã€‚</p>
<h4 id="ootf-å…‰å…‰è½¬æ¢å‡½æ•°">OOTF å…‰å…‰è½¬æ¢å‡½æ•°</h4>
<p>OOTF æ˜¯ Optical-to-Optical Transfer Function çš„ç¼©å†™ã€‚å®ƒæ˜¯ä¸€ä¸ªæŠŠç›¸æœºæ‰€æ‹æ‘„çš„åœºæ™¯äº®åº¦æ˜ å°„åˆ°æ˜¾ç¤ºå™¨äº®åº¦çš„æ•°å­¦å‡½æ•°ã€‚</p>
<h4 id="flicker-é—ªçƒ">Flicker é—ªçƒ</h4>
<p>éƒ¨åˆ†ç‰¹å®šç§ç±»çš„æ˜¾ç¤ºå™¨çš„ç‰¹å¾ï¼Œæ¯”å¦‚è€çš„é˜´æå°„çº¿ç®¡æ˜¾ç¤ºå™¨ï¼ˆCRTï¼‰ï¼Œæˆ–è€…è°ƒæ•™å¾—å¾ˆç³Ÿç³•çš„å¹³æ¿æ˜¾ç¤ºå™¨ï¼Œç”šè‡³ç”µå½±ï¼ˆmotion picture filmï¼‰æ”¾æ˜ æœºè¿™ä¸€ä¸å—æ¬¢è¿çš„äº®åº¦æ”¹å˜ä¸»è¦åœ¨é¢‘ç‡ä½äº 50 å¸§æ¯ç§’æ—¶å¯è§ã€‚å¯¹äºäº®åº¦æ›´é«˜çš„æ˜¾ç¤ºå™¨æ¥è¯´ï¼Œäººçœ¼èƒ½æ„Ÿå—åˆ°æ›´é«˜é¢‘ç‡çš„é—ªçƒã€‚</p>
<h4 id="f-stop-of-dynamic-range-åŠ¨æ€èŒƒå›´çš„-f-åˆ¶å…‰åœˆæ¡£æ•°">f-stop of Dynamic Range åŠ¨æ€èŒƒå›´çš„ f åˆ¶å…‰åœˆæ¡£æ•°</h4>
<p>åœ¨æ‘„å½±ä¸­ï¼Œä¸€æ¡£ f åˆ¶å…‰åœˆçš„æ”¹å˜å¯¹åº”åŒå€ï¼ˆæˆ–å‡åŠï¼‰æ•è·å›¾åƒæ—¶æ‰€æ•æ‰çš„å…‰ã€‚</p>
<p>ä¸€å¼ å›¾ç‰‡ä¸­æ‰€åŒ…å«çš„ f åˆ¶å…‰åœˆæ•°é‡æè¿°äº†è¿™å¼ å›¾ç‰‡çš„å¯¹æ¯”åº¦ï¼ˆ2^N æ ‡è®°ï¼‰æ¯”å¦‚ä¸€å°ç›¸æœºå¯ä»¥è¾“å‡º 10 æ¡£çš„å›¾åƒï¼Œè¿™æ„å‘³ç€å¯¹æ¯”åº¦å¯ä»¥é«˜è¾¾ 2^10ï¼ˆ1024ï¼š1ï¼‰ï¼Œå³ç™½è‰²éƒ¨åˆ†ä¼šæ¯”é»‘è‰²éƒ¨åˆ†äº® 1024 å€ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œäººçœ¼å¯ä»¥è¾¾åˆ° 18-20 æ¡£ï¼ˆè¿™æ˜¯ä¸€ä¸ªå¾ˆé«˜çš„åŠ¨æ€èŒƒå›´ HDRï¼Œä¸€èˆ¬çš„ SDR è§†é¢‘å›¾åƒæ˜¯ 6-7 æ¡£ï¼‰</p>
<h4 id="gamut-or-color-gamut-è‰²åŸŸ">Gamut or Color Gamut è‰²åŸŸ</h4>
<p>åœ¨åŒ…æ‹¬ä½†ä¸é™äºè®¡ç®—æœºå›¾å½¢å’Œæ‘„å½±é¢†åŸŸçš„è‰²å½©è¿˜åŸè¿‡ç¨‹ä¸­ï¼Œè‰²åŸŸæ˜¯æŸä¸ªç‰¹å®šçš„è‰²å½©çš„å­é›†ã€‚</p>
<p>è‰²åŸŸä¸€è¯æœ€å¸¸è§çš„ç”¨é€”æ˜¯æŒ‡æŸä¸ªèŒƒå›´å†…å¯ä»¥è¢«å‡†ç¡®ååº”çš„è‰²å½©å­é›†ï¼Œè¿™ä¸ªå‰æå¯èƒ½æ˜¯æŸä¸ªç‰¹å®šçš„æ˜¾ç¤ºè®¾å¤‡æˆ–æŸä¸ªç»™å®šçš„è‰²å½©ç©ºé—´ã€‚è‰²åŸŸä¸€èˆ¬ä½¿ç”¨ CIE 1931 è‰²åº¦å›¾ä¸Šçš„é¢ç§¯æ¥è¡¨ç¤ºï¼ŒCIE 1931 æ›²çº¿çš„è¾¹ç¼˜ä»£è¡¨å¯è§å…‰å…‰è°±é¢œè‰²çš„èŒƒå›´ã€‚</p>
<h4 id="gamut-mapping-è‰²åŸŸæ˜ å°„">Gamut Mapping è‰²åŸŸæ˜ å°„</h4>
<p>åœ¨å‡ ä¹æ‰€æœ‰çš„è½¬è¯‘è¿‡ç¨‹ï¼ˆæŒ‡çš„æ˜¯å¯¹äºæŸä¸ªç‰¹å®šé¢œè‰²çš„è¡¨ç¤ºï¼Œåœ¨ä¸åŒè‰²å½©ç©ºé—´ä¸­çš„è½¬æ¢è¿‡ç¨‹ï¼‰ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»é¢å¯¹ä¸åŒè®¾å¤‡çš„è‰²åŸŸæ‰€è¦†ç›–çš„èŒƒå›´æ˜¯æœ‰æ‰€ä¸åŒçš„ç°å®ï¼Œè¿™ä½¿å¾—å‡†ç¡®è¿˜åŸè‰²å½©æ˜¯ä¸å¯èƒ½çš„ã€‚</p>
<p>å› æ­¤ï¼Œå¯¹äºé è¿‘è‰²åŸŸè¾¹ç¼˜çš„éƒ¨åˆ†æ˜¯æœ‰å¿…è¦è¿›è¡Œä¸€äº›å¤„ç†çš„ã€‚æœ‰äº›é¢œè‰²å¿…é¡»è¢«ç§»å…¥è‰²åŸŸä¸­ï¼Œä¸ç„¶å®ƒä»¬åœ¨è¾“å‡ºè®¾å¤‡ä¸Šæ— æ³•è¢«æ˜¾ç¤ºï¼Œå®ƒä»¬ä¼šè¢«ç²—æš´åœ°èˆå¼ƒï¼ˆclippedï¼‰æ‰ã€‚è¿™å°±æ˜¯æ‰€è°“çš„è‰²åŸŸä¸åŒ¹é…ï¼Œæ¯”å¦‚è¯´å½“æˆ‘ä»¬å°†æ›´å¹¿çš„ RGB è‰²å½©ç©ºé—´è½¬æ¢åˆ° CMYK è‰²å½©ç©ºé—´çš„æ—¶å€™å°±ä¼šå‡ºç°ã€‚</p>
<p>è‰²å½©ç®¡ç†ç³»ç»Ÿå¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•æ¥å®ç°æ‰€éœ€çš„ç»“æœå¹¶ä¸”ç»™äºˆæœ‰ç»éªŒçš„ç”¨æˆ·æ§åˆ¶è‰²åŸŸæ˜ å°„çš„çš„æ–¹å¼ã€‚</p>
<h4 id="imf-å¯äº¤äº’æ¯ç‰ˆæ–‡ä»¶">IMF å¯äº¤äº’æ¯ç‰ˆæ–‡ä»¶</h4>
<p>Interoperable Master Formatï¼ˆIMFï¼‰æ˜¯ä¸€ä¸ªç”± SMPTE æä¾›çš„æ ‡å‡†ï¼Œç”¨äºå®ç°ä¸€ä¸ªå•æ–‡ä»¶çš„ã€å¯äº¤æ¢ä½¿ç”¨çš„æ¯ç‰ˆæ–‡ä»¶æ ¼å¼å’Œç»“æ„ï¼Œç”¨äºå…¨çƒèŒƒå›´å†…çš„å•†ä¸šå†…å®¹åˆ†å‘ã€‚å®ƒæ˜¯ç”± Digital Cinema Packageï¼ˆDCPï¼‰æ¶æ„è¿›åŒ–è€Œæ¥çš„ï¼ŒDCP ä¸ºåˆ†å‘æ¸ é“æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶å¯äº¤æ¢å•å…ƒã€‚IMF å¯ä»¥è¯´æ˜¯ä¸€ä¸ªé©å‘½æ€§çš„è¿›æ­¥ï¼ŒIMF æä¾›äº†ä¸€ä¸ªçœŸæ­£çš„åŸºäºæ–‡ä»¶çš„æœ€ç»ˆæ¯ç‰ˆã€‚DCP é’ˆå¯¹çš„æ˜¯å½±é™¢å†…å®¹åˆ†å‘ï¼Œè€Œ IMF ä¸ºå•†ç”¨ç¯å¢ƒæä¾›äº†ä¸€ä¸ªå¯ä»¥åŸºäºåŒä¸€å†…å®¹ä¸ºä¸åŒçš„è§‚ä¼—åˆ›å»ºå¤šç§å‰ªè¾‘ç‰ˆæœ¬çš„æ¯ç‰ˆæ ¼å¼ã€‚</p>
<h4 id="inverse-tone-mapping-itm-é€†å½±è°ƒæ˜ å°„-åå‘å½±è°ƒæ˜ å°„">Inverse Tone Mapping (ITM) é€†å½±è°ƒæ˜ å°„/åå‘å½±è°ƒæ˜ å°„</h4>
<p>å¯¹äº SDR å†…å®¹çš„æ¯ç‰ˆé‡åˆ¶ä»è€Œå®ç° HDR å†…å®¹ã€‚</p>
<p>ITM ä½¿ç”¨ SDR å†…å®¹å¹¶ä¸”æ‰©å±•å…¶æ˜åº¦å’Œè‰²å½©ç©ºé—´ï¼Œä½¿å…¶åŒ¹é… HDR æ˜¾ç¤ºå™¨çš„èƒ½åŠ›ï¼Œå¹¶ä¸”ä¿ç•™åŸæœ¬å†…å®¹åˆ›ä½œè€…çš„æ„å›¾ã€‚</p>
<h4 id="lut-æŸ¥æ‰¾è¡¨">LUT æŸ¥æ‰¾è¡¨</h4>
<p>æ˜¯ Look Up Table çš„ç¼©å†™ã€‚LUT æä¾›äº†ä¸€ç§å¯¹è¾“å…¥çš„æ•°æ®æ–½åŠ å¤æ‚æ•°å­¦è¿ç®—çš„é«˜æ•ˆæ–¹å¼â€”â€”â€”å¦‚æœä¸ä½¿ç”¨ LUT åˆ™ä¼šè€—è´¹è®¸å¤šçš„è®¡ç®—èµ„æºã€‚å› æ­¤ï¼Œå®ƒä»¬æ˜¯ä¸€ç§å°†å›¾åƒä»ä¸€ä¸ªè‰²å½©ç©ºé—´æ˜ å°„åˆ°é›¶ä¸€ä¸ªè‰²å½©ç©ºé—´çš„ç†æƒ³å®ç°æ–¹æ³•ã€‚</p>
<p>å­˜åœ¨ä»¥ä¸‹çš„ LUTsï¼š</p>
<p>3D LUTsï¼Œæ¯ä¸ªåƒç´ çš„è¾“å‡º Râ€™ã€Gâ€™ã€Bâ€™ å€¼æ˜¯ç”±è¾“å…¥åƒç´ çš„ Rã€Gã€B å€¼å…±åŒè®¡ç®—çš„ã€‚</p>
<p>1D LUTsï¼Œè¾“å‡ºçš„ Râ€™ åªç”±è¾“å…¥çš„ R å€¼è®¡ç®—ï¼ŒGâ€™ã€Bâ€™ åŒç†ã€‚å®ƒä»¬ä¸€èˆ¬è¢«ç”¨äº gamma å‡½æ•°å’Œå…¶å®ƒ EOTF çš„æ–½åŠ çŸ«æ­£ï¼Œä¸€èˆ¬åœ¨æ¶ˆè´¹çº§ç”µå­è®¾å¤‡çš„èŠ¯ç‰‡ç»„ä¸­å‡ºç°ã€‚</p>
<p>3D LUT ç›¸è¾ƒäº 1D LUT è€Œè¨€ï¼Œå®ƒæ”¯æŒæ›´åŠ å¼ºå¤§çš„æ•°å­¦è½¬æ¢ï¼Œä½†åœ¨èŠ¯ç‰‡ç»„é‡Œéƒ¨ç½²èµ·æ¥æ›´å¤æ‚ä¸”æ›´æ˜‚è´µã€‚ä¸€èˆ¬ 3D LUT è¢«ç”¨äºåœ¨åæœŸåˆ¶ä½œè¿‡ç¨‹ä¸­æ–½åŠ åˆ›é€ æ€§çš„â€œé£æ ¼â€ä»¥åŠè‰²å½©ç©ºé—´çš„è½¬æ¢ã€‚</p>
<h4 id="maxcll-metadata-maxcll-å…ƒæ•°æ®">MaxCLL Metadata MaxCLL å…ƒæ•°æ®</h4>
<p>Maximum Content Light Levelï¼ˆMaxCLLï¼‰æ˜¯ä¸€ä¸ªæ•´æ•°ç±»å‹çš„å…ƒæ•°æ®å€¼ï¼Œç”¨äºå®šä¹‰æŸä¸ªç¼–ç çš„ HDR è§†é¢‘æµæˆ–è€…æ–‡ä»¶ä¸­ï¼Œä»»æ„ä¸€ä¸ªåƒç´ çš„æœ€é«˜äº®åº¦ï¼Œå•ä½æ˜¯ nitsã€‚MaxCLL å¯ä»¥åœ¨æ¯ç‰ˆåˆ¶ä½œè¿‡ç¨‹ä¸­æˆ–è€…åˆ¶ä½œè¿‡ç¨‹åæ¥æµ‹é‡ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ HDR æ˜¾ç¤ºå™¨åœ¨ MaxCLL HDR èŒƒå›´é‡Œçš„è‰²å½©è¿‡æ¸¡ï¼Œå¹¶ä¸”åœ¨æ˜¾ç¤ºå™¨çš„æœ€å¤§äº®åº¦å¤–æ–½åŠ ä¸€ä¸ªç¡¬ clipï¼Œæ˜¾ç¤ºå™¨çš„ MaxCLL ä¹Ÿå¯ä»¥è¢«ç”¨ä½œ MaxCLL å…ƒæ•°æ®ã€‚</p>
<h4 id="maxfall-metadata-maxfall-å…ƒæ•°æ®">MaxFALL Metadata MaxFALL å…ƒæ•°æ®</h4>
<p>Maximum Frame Average Light Levelï¼ˆMaxFALLï¼‰æ˜¯ä¸€ä¸ªæ•´æ•°ç±»å‹çš„å…ƒæ•°æ®å€¼ï¼Œç”¨äºå®šä¹‰æŸä¸ªç¼–ç çš„ HDR è§†é¢‘æµæˆ–è€…æ–‡ä»¶ä¸­ï¼Œä»»æ„ä¸€å¸§ç”»é¢çš„æœ€é«˜çš„å¹³å‡äº®åº¦ï¼Œå•ä½æ˜¯ nitsã€‚MaxFALL æ˜¯é€šè¿‡è®¡ç®—æ¯ä¸€å¸§ç”»é¢è§£ç åçš„æ‰€æœ‰åƒç´ çš„äº®åº¦çš„å¹³å‡å€¼æ¥è·å–çš„ã€‚</p>
<h4 id="peak-code-value-å³°å€¼ç¼–ç å€¼">Peak Code Value å³°å€¼ç¼–ç å€¼</h4>
<p>Peak Code Value æŒ‡çš„æ˜¯é€šè¿‡æŸä¸€ä¸ªç³»ç»Ÿç»„ä»¶è€Œä¸äº§ç”Ÿç¡¬å‰ªï¼ˆclipï¼‰çš„æœ€å¤§æ•°å­—ç¼–ç å€¼ã€‚</p>
<h4 id="peak-display-luminance-å³°å€¼æ˜¾ç¤ºäº®åº¦">Peak Display Luminance å³°å€¼æ˜¾ç¤ºäº®åº¦</h4>
<p>ä¸€ä¸ªæ˜¾ç¤ºå™¨æ‰€èƒ½äº§ç”Ÿçš„æœ€é«˜äº®åº¦ã€‚</p>
<h4 id="perceptual-quantizer-æ„Ÿå®˜é‡åŒ–æ›²çº¿">Perceptual Quantizer æ„Ÿå®˜é‡åŒ–æ›²çº¿</h4>
<p>Perceptual Quantizer çš„ç¼©å†™ï¼Œå®ƒæ˜¯ä¸€ä¸ª EOTFã€‚</p>
<p>MovieLabs æå‡ºäº†ä¸€æ¡åŸºäº Barton Curveï¼Œå¹¶å¯è¢«ç”¨äºé«˜åŠ¨æ€èŒƒå›´ï¼ˆHDRï¼‰çš„æ•°å­¦æ›²çº¿ï¼Œäº 2014 å¹´ç”± SMPTE åˆ¶å®šäº† ST2084 æ ‡å‡†ã€‚</p>
<p>Perceptual Quantization æ˜¯ä¸€ä¸ªé«˜æ•ˆç‡çš„ç¼–ç  HDR æ˜åº¦ä¿¡æ¯çš„æ–¹å¼ã€‚åœ¨æ•´ä¸ªåŠ¨æ€èŒƒå›´ä¸­ï¼Œæ¯ä¸€å¯¹ç›¸é‚»çš„ç¼–ç å€¼åŒºåˆ«éƒ½æ¯”å¯æ„ŸçŸ¥çš„åŒºåˆ«ç•¥å°ï¼Œä½¿å¾—ç å€¼åˆ©ç”¨ç‡æé«˜ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™ä¸€ EOTF å¹¶ä¸å…¼å®¹ä¼ ç»Ÿæ˜¾ç¤ºå™¨ï¼ˆlegacy displayï¼‰ï¼ŒPQ ç¼–ç çš„ä¿¡å·åªèƒ½åœ¨æ–°çš„ã€æ”¯æŒ HDR çš„è®¾å¤‡ä¸Šè¢«è§£ç ã€‚</p>
<p>PQ ä¸º 10bit æˆ–è€… 12bit å†…å®¹æ‰€è®¾è®¡ï¼Œä¸”æ ¹æ® SMPTE ST2084 æ ‡å‡†ï¼Œä¸æ¨èåœ¨å®æ—¶å¹¿æ’­æ—¶ä½¿ç”¨å®ƒã€‚</p>
<h4 id="quantum-dot-qd-displays-é‡å­ç‚¹æ˜¾ç¤ºå™¨">Quantum Dotï¼ˆQDï¼‰Displays é‡å­ç‚¹æ˜¾ç¤ºå™¨</h4>
<p>é‡å­ç‚¹æ˜¾ç¤ºå™¨ä½¿ç”¨äº†çº³ç±³å°ºåº¦ï¼ˆ2nm-10nmï¼‰çš„æ™¶ä½“â€œç‚¹â€ã€‚æ¯ä¸€ä¸ªç‚¹ä¼šå‘å‡ºä¸€ä¸ªä¸åŒçš„çº¯è‰²ï¼Œè€Œå®ƒä»¬æ‰€å‘å‡ºçš„é¢œè‰²å–å†³äºå®ƒçš„å°ºå¯¸ã€‚</p>
<p>åœ¨ LCD èƒŒå…‰å‰åŠ å…¥ä¸€å¼ å¸¦æœ‰é‡å­ç‚¹çš„è–„è†œï¼ˆfilmï¼‰ï¼Œå›¾åƒçš„è‰²å½©è¿˜åŸå’Œæ€»ä½“çš„äº®åº¦å¯ä»¥è¢«æ˜¾è‘—æé«˜ã€‚</p>
<p>è¿™äº›å¾®å°çš„çº³ç±³æ™¶ä½“å¯ä»¥åœ¨èƒŒå…‰åˆ°è¾¾çº¢ã€ç»¿ã€è“å­åƒç´ å‰æ”¹å˜èƒŒå…‰çš„å…‰è°±ï¼Œå®ç°é«˜è¾¾ 20-30% çš„è‰²åŸŸæå‡ï¼Œä½¿å¾—æ˜¾ç¤ºè®¾å¤‡çš„è‰²å½©å¯ä»¥æ›´æ¥è¿‘ Rec.2020 ç›®æ ‡è‰²åŸŸã€‚</p>
<h4 id="st2084">ST2084</h4>
<p>SMPTE æ ‡å‡†ä¸­å®šä¹‰çš„ç”¨äºåˆ¶ä½œ HDR å†…å®¹æ¯ç‰ˆæ‰€ç”¨çš„ EOTFã€‚è¯¥ EOTF åˆè¢«ç§°ä¸º PQï¼Œä¸»è¦ç”¨äºåˆ¶ä½œéå¹¿æ’­å†…å®¹çš„æ¯ç‰ˆã€‚</p>
<h4 id="st2086">ST2086</h4>
<p>SMPTE æ ‡å‡†ä¸­å®šä¹‰çš„ç”¨äºæè¿°åˆ¶ä½œè§†é¢‘æ¯ç‰ˆæ‰€ä½¿ç”¨çš„æ˜¾ç¤ºå™¨çš„ç»å¯¹è‰²å½©ç©ºé—´çš„å…ƒæ•°æ®ï¼ˆåŸºè‰²åæ ‡ã€ç™½ç‚¹ã€äº®åº¦èŒƒå›´ï¼‰ã€‚</p>
<h4 id="tone-mapping-tone-mapping-operator-tmo-è‰²è°ƒæ˜ å°„-è‰²è°ƒæ˜ å°„è¿ç®—ç¬¦">Tone Mapping/Tone Mapping Operatorï¼ˆTMOï¼‰ è‰²è°ƒæ˜ å°„/è‰²è°ƒæ˜ å°„è¿ç®—ç¬¦</h4>
<p>è‰²è°ƒæ˜ å°„æ˜¯ä¸€ç§ç”¨äºå›¾åƒå¤„ç†å’Œè®¡ç®—æœºå›¾å½¢çš„æŠ€æœ¯ï¼Œå®ƒè¢«ç”¨äºå°†ä¸€ç»„é¢œè‰²æ˜ å°„åˆ°å¦ä¸€ç»„é¢œè‰²ï¼Œä»è€Œåœ¨å…·æœ‰æ›´æœ‰é™åŠ¨æ€èŒƒå›´çš„ä»‹è´¨ä¸­å®ç°é€¼è¿‘é«˜åŠ¨æ€èŒƒå›´ï¼ˆHDRï¼‰å›¾åƒçš„è§‚æ„Ÿã€‚ æ‰“å°è¾“å‡ºï¼ŒCRTæˆ–æ ‡å‡†åŠ¨æ€èŒƒå›´ï¼ˆSDRï¼‰ç›‘è§†å™¨å’ŒæŠ•å½±ä»ªéƒ½å…·æœ‰è¾ƒä½çš„åŠ¨æ€èŒƒå›´ï¼Œä¸è¶³ä»¥å†ç°HDRå›¾åƒä¸­å­˜åœ¨çš„å…¨éƒ¨å…‰å¼ºã€‚è‰²è°ƒæ˜ å°„è§£å†³äº†ä»è®°å½•èŒƒå›´åˆ°å¯æ˜¾ç¤ºèŒƒå›´çš„å¯¹æ¯”åº¦å‰§çƒˆé™ä½çš„é—®é¢˜ï¼ŒåŒæ—¶ä¿ç•™äº†å›¾åƒç»†èŠ‚å’Œè‰²å½©è¡¨ç°ï¼Œè¿™å¯¹äºæ¬£èµåŸå§‹åœºæ™¯å†…å®¹å’Œä¿ç•™åˆ›ä½œæ„å›¾æ˜¯é‡è¦çš„ã€‚ä¸€èˆ¬ä½¿ç”¨è‰²è°ƒæ˜ å°„è¿ç®—ç¬¦ï¼ˆTone Mapping Operatorï¼‰æ‰§è¡Œè¯¥è‰²è°ƒæ˜ å°„è¿‡ç¨‹ï¼Œé€šå¸¸ä¸ºâ€œSâ€å½¢æ›²çº¿ä»¥å®ç°é«˜å…‰å’Œé˜´å½±ç»†èŠ‚çš„æŸ”å’Œè¿‡æ¸¡ã€‚å‚è§ Inverse Tone Mappingï¼ˆITMï¼‰ã€‚</p>
<h4 id="wide-color-gamut-wcg-å¹¿è‰²åŸŸ">Wide Color Gamutï¼ˆWCGï¼‰ å¹¿è‰²åŸŸ</h4>
<p>Wide Color Gamut çš„ç¼©å†™ï¼Œæ„ä¸ºå¹¿è‰²åŸŸã€‚å¹¿è‰²åŸŸåŒ…æ‹¬äº†æ¯” Recommendation ITU-R BT.709 æ›´é¥±å’Œçš„è‰²å½©ï¼Œæ¯”å¦‚è¯´è¢« Rec.2020 æ‰€å®šä¹‰çš„è‰²å½©ç©ºé—´å°±å±äºå¹¿è‰²åŸŸã€‚</p>
<h4 id="white-point-ç™½ç‚¹">White Point ç™½ç‚¹</h4>
<p>ç™½ç‚¹ï¼ˆé€šå¸¸åœ¨æŠ€æœ¯æ–‡æ¡£ä¸­è¢«ç§°ä¸ºå‚è€ƒç™½ reference white æˆ–ç›®æ ‡ç™½ target whiteï¼‰æ˜¯ä¸€ç»„ç”¨äºå®šä¹‰å›¾åƒé‡‡é›†ï¼Œç¼–ç æˆ–å†ç°ä¸­çš„â€œç™½è‰²â€é¢œè‰²çš„è‰²åº¦åæ ‡ã€‚æ ¹æ®åº”ç”¨ï¼Œéœ€è¦ä¸åŒçš„â€œç™½è‰²â€å®šä¹‰ä»¥æä¾›å¯æ¥å—çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œåœ¨å®¤å†…æ‹æ‘„çš„ç…§ç‰‡å¯èƒ½ç”¨ç™½ç‚½ç¯ç…§æ˜ï¼Œç™½ç‚½ç¯æ¯”æ—¥å…‰ç›¸å¯¹åæ©™ã€‚ å› æ­¤ï¼Œå¤§å¤šæ•°ä¸“ä¸šç›¸æœºæ‹¥æœ‰åœ¨ç™½ç‚½ç¯ç…§æ˜ä¸æ—¥å…‰ä¸‹æ‹æ‘„æ‰€ç”¨çš„ä¸åŒè®¾ç½®ã€‚åŒæ ·ï¼Œä¸º D65 ç™½ç‚¹æ˜¾ç¤ºå™¨æ‰€ç”Ÿäº§çš„å›¾åƒåœ¨å…·æœ‰ä¸åŒç™½ç‚¹çš„æ˜¾ç¤ºå™¨ä¸Šå°†æ— æ³•è¢«æ­£ç¡®æ˜¾ç¤ºã€‚</p>
<p>CIE å®šä¹‰ D65 å¸¸è¢«ç”¨æ¥å®šä¹‰è§†é¢‘æ˜¾ç¤ºå™¨çš„ç™½ç‚¹ã€‚</p>
<p>D55 æ›¾æ˜¯èƒ¶ç‰‡æŠ•å½±çš„æ ‡å‡†ç™½ç‚¹ï¼ŒDCI ç™½ç‚¹ï¼ˆè¯‘è€…æ³¨ï¼šæ¥è¿‘ D63ï¼Œä½†æ›´ç»¿ï¼‰å’Œ D60 ç™½ç‚¹è¿™ä¸¤ä¸ªç™½ç‚¹å‡è¢«æ•°å­—ç”µå½±å¹¿æ³›ä½¿ç”¨ã€‚</p>
<blockquote>
<p>æ›´å¤šæœ¯è¯­å¯ä»¥å‚è€ƒï¼š<a href="/shares/hdr-field-guide-final-web.pdf"><strong>Quick Reference HDR Glossary</strong></a></p>
</blockquote>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<p>1: <a href="https://www.cnet.com/news/hdr-for-cameras-vs-hdr-for-tvs-whats-the-difference/">https://www.cnet.com/news/hdr-for-cameras-vs-hdr-for-tvs-whats-the-difference/</a><br>
2: <a href="https://en.wikipedia.org/wiki/High-dynamic-range_imaging">https://en.wikipedia.org/wiki/High-dynamic-range_imaging</a><br>
3: <a href="https://en.wikipedia.org/wiki/High-dynamic-range_video">https://en.wikipedia.org/wiki/High-dynamic-range_video</a><br>
4: <a href="https://www.zhihu.com/question/19774840/answer/998271233">https://www.zhihu.com/question/19774840/answer/998271233</a><br>
5: <a href="https://alliance.experienceuhd.com/uhd-premium-features">https://alliance.experienceuhd.com/uhd-premium-features</a><br>
6: <a href="https://www.experienceuhd.com/uhd-mobile-hdr-premium-features">https://www.experienceuhd.com/uhd-mobile-hdr-premium-features</a><br>
7: <a href="http://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=AB4FAB66987D97573EA90F4DD56ABA36">http://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=AB4FAB66987D97573EA90F4DD56ABA36</a><br>
8: <a href="http://www.cuva.org.cn/ueditor/php/upload/file/20200904/1599186578364054.pdf">http://www.cuva.org.cn/ueditor/php/upload/file/20200904/1599186578364054.pdf</a><br>
9: <a href="https://zhuanlan.zhihu.com/p/345169019">https://zhuanlan.zhihu.com/p/345169019</a></p>
]]></content>
      <categories>
        <category>è§†é¢‘æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>HDR</tag>
      </tags>
  </entry>
  <entry>
    <title>FFmpegè§£ç APIä»¥åŠåœ¨è§£ç è¿‡ç¨‹ä¸­å­˜åœ¨çš„ä¸¢å¸§é—®é¢˜</title>
    <url>/2021/01/19/FFMpeg-decode-process-and-lose-frame-in-that-process/</url>
    <content><![CDATA[<p><img src="/2021/01/19/FFMpeg-decode-process-and-lose-frame-in-that-process/1.png" alt></p>
<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>åœ¨ä¼˜åŒ–è§†é¢‘å®¢è§‚å…¨å‚è€ƒç®—æ³•ï¼ˆä¸»è¦æ˜¯<em>PSNR</em>, <em>SSIM</em>, <em>MS-SSIM</em>ï¼‰æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ©ç”¨FFmpegæä¾›çš„APIï¼ˆ<em><code>avcodec_send_packet()</code></em>ï¼Œ<em><code>avcodec_receive_frame()</code></em>ï¼‰å¯¹è¾“å…¥çš„ä¸¤ä¸ªMP4æ–‡ä»¶è½¬æˆå¯¹åº”çš„YUVæ ¼å¼çš„æ•°æ®æ–‡ä»¶ï¼Œç„¶åå†åŸºäºè¿™ä¸¤ä»½YUVæ•°æ®æ–‡ä»¶è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°å¯¹åº”çš„ç»“æœã€‚</p>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å‘ç°ï¼ŒMP4æ–‡ä»¶è½¬æˆYUVæ•°æ®åï¼Œæ€»æ˜¯ä¼šå‘ç”Ÿ<strong>ä¸¢å¤±è§†é¢‘æœ€åå‡ å¸§</strong>çš„ç°è±¡ã€‚</p>
<p>ä¸ºäº†å¼„æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼ŒæŸ¥é˜…äº†FFmpegçš„æºç ï¼Œå¹¶å‚è€ƒäº†ç½‘ç»œä¸Šçš„èµ„æ–™ï¼Œç„¶åæ€»ç»“å‡ºäº†è¿™ç¯‡æ–‡ç« ã€‚</p>
<span id="more"></span>
<h2 id="ffmpegçš„ç¼–è§£ç api">FFmpegçš„ç¼–è§£ç API</h2>
<p>ä»<a href="https://github.com/FFmpeg/FFmpeg/commit/7fc329e2dd6226dfecaa4a1d7adf353bf2773726">3.1ç‰ˆæœ¬</a>å¼€å§‹ï¼ŒFFmpegæä¾›äº†<a href="https://github.com/FFmpeg/FFmpeg/blob/release/3.1/libavcodec/avcodec.h">æ–°çš„ç¼–è§£ç API</a>æ¥å¯¹éŸ³è§†é¢‘æ•°æ®è¿›è¡Œç¼–è§£ç æ“ä½œï¼Œä»è€Œå®ç°å¯¹è¾“å…¥å’Œè¾“å‡ºçš„è§£è€¦ï¼š</p>
<ul>
<li>è§£ç API
<ul>
<li>avcodec_send_packet()</li>
<li>avcodec_receive_frame()</li>
</ul>
</li>
<li>ç¼–ç API
<ul>
<li>avcodec_send_frame()</li>
<li>avcodec_receive_packet()</li>
</ul>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @ingroup libavc</span></span><br><span class="line"><span class="comment"> * @defgroup lavc_encdec send/receive encoding and decoding API overview</span></span><br><span class="line"><span class="comment"> * @&#123;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The avcodec_send_packet()/avcodec_receive_frame()/avcodec_send_frame()/</span></span><br><span class="line"><span class="comment"> * avcodec_receive_packet() functions provide an encode/decode API, which</span></span><br><span class="line"><span class="comment"> * decouples input and output.</span></span><br><span class="line"><span class="comment"> * ...</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ï¼Œä¹Ÿæ­£æ˜¯ä»3.1ç‰ˆæœ¬å¼€å§‹ï¼Œä¹‹å‰çš„ç¼–è§£ç APIä¹Ÿè¢«æ ‡æ³¨ä¸º<code>deprecated</code>ï¼š</p>
<ul>
<li>è§£ç API
<ul>
<li>avcodec_decode_video2()</li>
<li>avcodec_decode_audio4():</li>
</ul>
</li>
<li>ç¼–ç API
<ul>
<li>avcodec_encode_video2()</li>
<li>avcodec_encode_audio2()</li>
</ul>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">attribute_deprecated</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">avcodec_decode_audio4</span><span class="params">(AVCodecContext *avctx, AVFrame *frame,</span></span></span><br><span class="line"><span class="function"><span class="params">                          <span class="keyword">int</span> *got_frame_ptr, <span class="keyword">const</span> AVPacket *avpkt)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨æˆ‘ä»¬çš„å·¥å…·ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æ–°çš„è§£ç APIï¼š<code>avcodec_send_packet()</code>å’Œ<code>avcodec_receive_frame()</code>ï¼Œå®ç°è§†é¢‘å¸§çš„è§£ç ï¼Œå¹¶å°†è§£ç åçš„æ•°æ®è½¬æˆYUVæ•°æ®ã€‚å…·ä½“çš„ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼Œ<a href="https://wangwei1237.gitee.io/2021/01/19/FFmpeg-decode-process-and-lose-frame-in-that-process/test_video_parser_1.cpp">ç‚¹å‡»å¯æŸ¥çœ‹å®Œæ•´æµ‹è¯•ä»£ç </a>ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">process_frame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//decode operation.</span></span><br><span class="line"><span class="keyword">while</span> (!<span class="built_in">av_read_frame</span>(fmt_ctx, pkt)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (pkt-&gt;stream_index != video_stream_idx) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> packet_new = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">process_frame</span>(fmt_ctx, dec_ctx, video_stream-&gt;codecpar, </span><br><span class="line">                         frame, pkt, &amp;packet_new) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">av_packet_unref</span>(pkt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä»£ç å¯ä»¥çœ‹å‡ºï¼Œ<code>i</code>æ˜¯è§£ç å¸§çš„æ€»æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬è¿è¡Œä¹‹åå‘ç°ï¼Œä¸€ä¸ª252å¸§çš„è§†é¢‘ï¼Œæœ€ç»ˆåªå¾—åˆ°äº†248å¸§ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> g++ --std=c++11 test_video_parser_1.cpp $(pkg-config --cflags --libs libavcodec libavdevice libavformat libavutil)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> frame count: 248</span></span><br></pre></td></tr></table></figure>
<h2 id="send-packet-receive-frame">send_packet &amp; receive_frame</h2>
<p>ä¸ºäº†åŠ æ·±å¯¹è§£ç APIçš„äº†è§£ï¼Œä»¥ä¾¿èƒ½æŸ¥å‡ºé—®é¢˜åŸå› ï¼Œæˆ‘ä»¬æŸ¥é˜…äº†<a href="https://github.com/FFmpeg/FFmpeg/blob/master/libavcodec/avcodec.h">FFmpegçš„ä»£ç </a>ï¼Œä»ä»£ç çš„æ³¨é‡Šä¸­ï¼Œæˆ‘ä»¬å‘ç°äº†é—®é¢˜ï¼š<strong>æˆ‘ä»¬æ²¡æœ‰éµå¾ªAPIçš„ä½¿ç”¨è§„èŒƒï¼ŒåŒæ—¶FFmpegåœ¨æ³¨é‡Šä¸­ä¹Ÿè¯´æ˜äº†ä¸ºä»€ä¹ˆä¼šå‡ºç°æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜</strong>ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ... </span></span><br><span class="line"><span class="comment">  * At the beginning of decoding or encoding, the codec might accept multiple</span></span><br><span class="line"><span class="comment">  * input frames/packets without returning a frame, until its internal buffers</span></span><br><span class="line"><span class="comment">  * are filled. This situation is handled transparently if you follow the steps</span></span><br><span class="line"><span class="comment">  * outlined above.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * End of stream situations. These require &quot;flushing&quot; (aka draining) the codec,</span></span><br><span class="line"><span class="comment">  * as the codec might buffer multiple frames or packets internally for</span></span><br><span class="line"><span class="comment">  * performance or out of necessity (consider B-frames).</span></span><br><span class="line"><span class="comment">  * ...</span></span><br><span class="line"><span class="comment">  */</span></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºäº†æå‡æ€§èƒ½æˆ–å‡ºäºå…¶ä»–çš„è€ƒè™‘ï¼Œè§£ç å™¨ä¼šåœ¨å†…éƒ¨ç¼“å­˜å¤šä¸ª<code>frames</code>/<code>packets</code>ã€‚å› æ­¤ï¼Œå½“æµç»“æŸçš„æ—¶å€™ï¼Œéœ€è¦å¯¹è§£ç å™¨æ‰§è¡Œ<code>flushing</code>æ“ä½œï¼Œä»¥ä¾¿è·å–è§£ç å™¨ç¼“å­˜çš„<code>frames</code>/<code>packets</code>ã€‚</p>
<p>æˆ‘ä»¬çš„å·¥å…·ä¸­ï¼Œåœ¨æµç»“æŸä¹‹åï¼Œå¹¶æ²¡æœ‰æ‰§è¡Œ<code>flushing</code>æ“ä½œï¼Œå› æ­¤å°±å‡ºç°äº†è§£ç è¿‡ç¨‹ä¸¢å¸§çš„ç°è±¡ã€‚æŒ‰ç…§FFmpegçš„æŒ‡å¯¼ï¼Œæˆ‘ä»¬è¡¥å……äº†å¦‚ä¸‹çš„é€»è¾‘ï¼Œä»¥ä¾¿è·å–è§£ç å™¨ä¸­ç¼“å­˜çš„å¸§ï¼Œ<a href="https://wangwei1237.gitee.io/2021/01/19/FFmpeg-decode-process-and-lose-frame-in-that-process/test_video_parser_2.cpp">ç‚¹å‡»å¯æŸ¥çœ‹å®Œæ•´æµ‹è¯•ä»£ç </a>ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Flush remaining frames that are cached in the decoder</span></span><br><span class="line"><span class="keyword">int</span> packet_new = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">av_init_packet</span>(pkt);</span><br><span class="line">pkt-&gt;data = <span class="literal">NULL</span>;</span><br><span class="line">pkt-&gt;size = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">process_frame</span>(fmt_ctx, dec_ctx, video_stream-&gt;codecpar, </span><br><span class="line">                     frame, pkt, &amp;packet_new) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    i++;</span><br><span class="line">    packet_new = <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡è¿è¡Œï¼Œæˆ‘ä»¬å‘ç°ï¼Œä¸¢å¸§é—®é¢˜æ¶ˆå¤±äº†ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> g++ --std=c++11 test_video_parser_1.cpp $(pkg-config --cflags --libs libavcodec libavdevice libavformat libavutil)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> frame count: 252</span></span><br></pre></td></tr></table></figure>
<h2 id="ffmpegè§£ç apiçŠ¶æ€æœº">FFMPegè§£ç APIçŠ¶æ€æœº</h2>
<h3 id="avcodec-send-packetè¿”å›å€¼">avcodec_send_packetè¿”å›å€¼</h3>
<p>ä»FFmpegçš„æºç ä¸­ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>avcodec_send_packet()</code>å‡½æ•°çš„è¿”å›å€¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ul>
<li><code>0</code>: on success.</li>
<li><code>EAGAIN</code>: input is not accepted in the current state - user must read output with avcodec_receive_frame() (once all output is read, the packet should be resent, and the call will not fail with EAGAIN).</li>
<li><code>EOF</code>: the decoder has been flushed, and no new packets can be sent to it (also returned if more than 1 flush packet is sent).</li>
</ul>
<h3 id="avcodec-receive-frameè¿”å›å€¼">avcodec_receive_frameè¿”å›å€¼</h3>
<p>åŒæ ·çš„ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>avcodec_receive_frame()</code>å‡½æ•°çš„è¿”å›å€¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ul>
<li><code>0</code>: success, a frame was returned.</li>
<li><code>EAGAIN</code>: output is not available in this state - user must try to send new input.</li>
<li><code>EOF</code>: the decoder has been fully flushed, and there will be no more output frames.</li>
</ul>
<h3 id="è§£ç apiçŠ¶æ€æœº">è§£ç APIçŠ¶æ€æœº</h3>
<p><code>avcodec_send_packet()</code>å’Œ<code>avcodec_receive_frame()</code>ä¸åŒçš„è¿”å›å€¼ä»£è¡¨äº†è§£ç å™¨çš„ä¸åŒçš„çŠ¶æ€ã€‚</p>
<p>å¯¹APIçš„è°ƒç”¨å®é™…ä¸Šæ˜¯ä¸€ç§åŠ¨ä½œï¼Œè€ŒAPIçš„è¿”å›å€¼åˆ™ç”¨æ¥æ ‡å¿—å½“å‰è§£ç å™¨çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œè§£ç APIçš„æ•´ä¸ªè¿‡ç¨‹å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚</p>
<p>æ ¹æ®<a href="#avcodec_send_packet%E8%BF%94%E5%9B%9E%E5%80%BC">avcodec_send_packetè¿”å›å€¼</a>å’Œ<a href="#avcodec_receive_frame%E8%BF%94%E5%9B%9E%E5%80%BC">avcodec_receive_frameè¿”å›å€¼</a>ä¸­çš„ä»‹ç»ï¼Œå¯ä»¥å¾—åˆ°æ­£å¸¸æƒ…å†µä¸‹ï¼Œè§£ç è¿‡ç¨‹çš„çŠ¶æ€æœºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="/2021/01/19/FFMpeg-decode-process-and-lose-frame-in-that-process/2.png" alt></p>
<p>åœ¨å›¾ä¸­ï¼Œ<code>èŠ‚ç‚¹</code>ä»£è¡¨çŠ¶æ€ï¼ˆAPIçš„è¿”å›å€¼ï¼‰ï¼Œ<code>ç®­å¤´</code>ä»£è¡¨APIçš„è°ƒç”¨ã€‚è“è‰²è¡¨ç¤ºå’Œ<code>avcodec_send_packet()</code>ç›¸å…³ï¼Œçº¢è‰²è¡¨ç¤ºå’Œ<code>avcodec_receive_frame()</code>ç›¸å…³ã€‚</p>
<p><a href="https://wangwei1237.gitee.io/2021/01/19/FFmpeg-decode-process-and-lose-frame-in-that-process/test_video_parser_2.cpp">æˆ‘ä»¬ä¿®å¤ç‰ˆæœ¬çš„è§£ç å®ç°</a>å®é™…ä¸Šå°±æ˜¯å¯¹å¦‚ä¸Šå›¾æ‰€ç¤ºçš„çŠ¶æ€æœºçš„å®ç°ã€‚</p>
<p>è€Œå¦‚æœåœ¨å®ç°çš„æ—¶å€™ï¼Œæ²¡æœ‰å¤„ç†å¦‚ä¸‹å›¾æ‰€ç¤ºçš„çŠ¶æ€ï¼Œåˆ™ä¼šå¯¼è‡´æ— æ³•è·å–è§†é¢‘æœ€åå‡ å¸§çš„é—®é¢˜ã€‚</p>
<p><img src="/2021/01/19/FFMpeg-decode-process-and-lose-frame-in-that-process/3.png" alt></p>
<h2 id="æ€è€ƒ">æ€è€ƒ</h2>
<ul>
<li>æºç é¢å‰ï¼Œäº†æ— ç§˜å¯†ã€‚ä¾¯æ·è€å¸ˆè¯´è¿‡â€œæºç é¢å‰ï¼Œäº†æ— ç§˜å¯†â€ã€‚å·¥ä½œä¸­å‘ç°ï¼Œæºç ç¡®å®æ˜¯æˆ‘ä»¬è·å–çŸ¥è¯†å’Œç»éªŒçš„ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„é€”å¾„ï¼Œå°¤å…¶æ˜¯é‚£äº›å¥½çš„å¼€æºé¡¹ç›®çš„æºç ï¼Œæ›´æ˜¯å¦‚æ­¤ã€‚</li>
<li>æºç è¿˜æ˜¯æˆ‘ä»¬è§£å†³é—®é¢˜çš„å¼ºæœ‰åŠ›çš„æ‰‹æ®µä¹‹ä¸€ã€‚å¯¹äºè¿™äº›ä¼˜ç§€çš„å¼€æºé¡¹ç›®çš„æºç è€Œè¨€ï¼Œä»£ç åªæ˜¯ä¸€ä¸ªéƒ¨åˆ†ï¼Œæºç ä¸­çš„æ³¨é‡Šã€æ–‡æ¡£ç­‰ä¼šä¸ºæˆ‘ä»¬æä¾›è¶³å¤Ÿçš„èµ„æºã€‚è¿™æ¬¡é—®é¢˜çš„è§£å†³å°±æ˜¯ä¾èµ–æºç ï¼Œä¹‹å‰åœ¨Androidæ‘„åƒå¤´MockæŠ€æœ¯çš„ç ”ç©¶ä¸­ï¼Œä¹Ÿæ˜¯åœ¨æŸ¥é˜…Androidç›¸å…³æºç åæ‰æœ‰äº†æ€è·¯ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬åœ¨å·¥ä½œä¸­é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œç¬¬ä¸€æ‰‹çš„èµ„æ–™è¿˜æ˜¯æºç ï¼ˆå½“ç„¶ï¼Œè¦æœ‰æºç æ‰è¡Œï¼‰ï¼Œå…¶æ¬¡æ‰æ˜¯å®˜æ–¹æ–‡æ¡£ï¼Œæœ€åæ‰æ˜¯ç½‘ç»œä¸Šçš„å…¶ä»–èµ„æºã€‚</li>
<li>çœ‹äº†é‚£ä¹ˆå¤šçš„æºç æ‰å‘ç°ï¼šä¼˜ç§€çš„é¡¹ç›®æ˜¯é‚£ä¹ˆçš„ä¸€è‡´ï¼Œè€Œç³Ÿç³•çš„é¡¹ç›®ï¼Œå„æœ‰å„çš„ç³Ÿç³•ä¹‹å¤„ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>è§†é¢‘æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>FFMpeg</tag>
        <tag>è§†é¢‘è§£ç </tag>
        <tag>è§£ç ä¸¢å¸§</tag>
        <tag>avcodec_send_packet</tag>
        <tag>avcodec_receive_frame</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¿¡ä»»ï¼Œä½†ä¹Ÿè¦æ ¸æŸ¥</title>
    <url>/2021/01/11/Trust-but-Verify/</url>
    <content><![CDATA[<p><img src="/2021/01/11/Trust-but-Verify/1.jpg" alt></p>
<blockquote>
<p>1987å¹´ï¼Œåœ¨ç¾è‹ä¸­ç¨‹æ ¸æ­¦å™¨åè®®è°ˆåˆ¤æ—¶ï¼Œç¾å›½æ€»ç»Ÿé‡Œæ ¹æ—æ•²ä¾§å‡»ï¼Œå¯¹æˆˆå°”å·´ä¹”å¤«è¯´ï¼šâ€œæˆ‘éå¸¸å–œæ¬¢ä¸€å¥ä¿„å›½è°šè¯­â€”â€”<strong><code>Trust, but verify</code></strong>â€ã€‚</p>
<p>æ„æ€å°±æ˜¯ï¼Œé‡Œæ ¹ç›¸ä¿¡è‹è”é¢†å¯¼äººçš„æ‰¿è¯ºï¼Œä½†è¿˜å¿…é¡»æœ‰ä¸ªæœ‰æ•ˆçš„éªŒè¯æœºåˆ¶ã€‚</p>
<p><a href="https://en.wikipedia.org/wiki/Trust,_but_verify"><div align="right">å…³äºè¯¥è°šè¯­çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒç»´åŸºç™¾ç§‘</div></a></p>
</blockquote>
<span id="more"></span>
<p>éšç€è‡ªå·±çš„æˆé•¿ï¼Œéšç€å·¥ä½œå†…å®¹ä»å®Œæˆä¸Šçº§å®‰æ’çš„å·¥ä½œåˆ°è‡ªå·±å¼€å§‹è§„åˆ’å¹¶å®‰æ’æŸäº›å·¥ä½œï¼Œéšç€å·¥ä½œèŒƒå›´ä»å›¢é˜Ÿå†…éƒ¨åˆ°è·¨å›¢é˜Ÿçš„åä½œï¼Œè‡ªå·±å¯¹<code>Trust, but verify</code>è¿™ç§æ€æƒ³çš„æ„Ÿè§¦è¶Šæ¥è¶Šæ·±ã€‚</p>
<p>å°¤å…¶æ˜¯åœ¨åšå¤§å›¢é˜Ÿæ¨ªå‘å·¥ä½œçš„è§„åˆ’å’Œæ¨åŠ¨ï¼Œä»¥åŠç»„å»ºè§†é¢‘å°ç»„æ¥æ¢ç´¢è§†é¢‘ç›¸å…³çš„æŠ€æœ¯ï¼Œæ›´åŠ æ·±äº†å¯¹<code>Trust, but verify</code>çš„ç†è§£ã€‚</p>
<p><code>ä¿¡ä»»</code>ç»™äºˆæˆ‘ä»¬å·¥ä½œçš„è‡ªç”±ï¼Œè€Œ<code>æ ¸æŸ¥</code>ä¼šç»™è¿™ä»½è‡ªç”±å¢åŠ ä¸€å®šçš„é™åˆ¶ã€‚ç»å¯¹çš„ä¿¡ä»»ä¼šå¯¼è‡´ä¿¡ä»»çš„ç»ˆç»“ï¼Œä¸åŠ é™åˆ¶çš„ä¿¡ä»»æœ€ç»ˆå¯èƒ½ä¼šå½±å“å›¢é˜Ÿçš„å¯æŒç»­å‘å±•ã€‚ä¿¡é©¬ç”±ç¼°è€…ï¼Œç»ˆä¸èƒ½è¾¾åˆ°ç›®æ ‡ã€‚</p>
<p><code>æ ¸æŸ¥</code>æœºåˆ¶ä¸‹çš„<code>ä¿¡ä»»</code>ï¼Œæ‰èƒ½åœ¨ç»™äºˆå·¥ä½œè‡ªç”±çš„åŒæ—¶ï¼Œè·å¾—ä¸ªäººå’Œå…¬å¸çš„åˆ©ç›Šæœ€å¤§åŒ–ã€‚</p>
<h2 id="ç½‘é£æ–‡åŒ–ä¸­çš„è‡ªç”±ä¸è´£ä»»">ç½‘é£æ–‡åŒ–ä¸­çš„è‡ªç”±ä¸è´£ä»»</h2>
<p>ä½œä¸ºä¸€å®¶ä¼ å¥‡çš„å…¬å¸ï¼Œæˆç«‹äº1997å¹´çš„ç½‘é£ï¼Œåœ¨æˆåŠŸåº”å¯¹äº†å¨±ä¹é¢†åŸŸå’Œå•†ä¸šé¢†åŸŸçš„å››æ¬¡å¤§è§„æ¨¡è½¬å‹ä¹‹åï¼Œå…¶è‚¡ä»·å·²ç»ä»1$ä¸€è·¯æ”€å‡è‡³500$ï¼Œå¦‚ä»Šï¼Œå…¶å¸‚å€¼å·²ç»è¶…è¿‡äº†2000äº¿ç¾å…ƒã€‚</p>
<p><img src="/2021/01/11/Trust-but-Verify/3.jpg" alt></p>
<p>æ ¹æ®æ‹›è˜ç½‘ç«™<a href="https://hired.com/">Hired</a>çš„<a href="https://hired.com/blog/highlights/2020-brand-health-report/">ç¬¬4æ¬¡ã€Šå…¨çƒå“ç‰Œå¥åº·æŠ¥å‘Šã€‹</a>ï¼ŒNetflixå·²ç»å–ä»£Googleï¼Œæˆä¸ºäººä»¬æœ€æƒ³å»å·¥ä½œçš„é¡¶çº§ç§‘æŠ€å…¬å¸ã€‚</p>
<p><img src="/2021/01/11/Trust-but-Verify/2.png" alt></p>
<p>ç½‘é£çš„æˆåŠŸï¼Œç¦»ä¸å¼€å…¶ä¼ä¸šæ–‡åŒ–ã€‚åœ¨ã€Šè‡ªç”±ä¸è´£ä»»â€”â€”ç½‘é£æ–‡åŒ–æ‰‹å†Œã€‹çš„<em>ç½‘é£æ–‡åŒ–çš„ä¸ƒä¸ªæ–¹é¢</em>ä¸­ï¼Œå°±æåˆ°äº†<strong>è‡ªç”±ä¸è´£ä»»</strong>è¿™ä¸€æ–‡åŒ–ã€‚åœ¨æ‰‹å†Œä¸­ï¼Œä¹Ÿæåˆ°ï¼šè‡ªç”±ä¸æ˜¯ç»å¯¹çš„ï¼Œå’Œè¨€è®ºè‡ªç”±ä¸€æ ·ï¼Œå·¥ä½œè‡ªç”±ä¹Ÿæ˜¯æœ‰é™åº¦çš„ã€‚</p>
<p>åœ¨ç½‘é£åˆ›å§‹äººé‡Œå¾·Â·å“ˆæ–¯å»·æ–¯çš„ã€Šä¸æ‹˜ä¸€æ ¼â€”â€”ç½‘é£çš„è‡ªç”±ä¸è´£ä»»å·¥ä½œæ³•ã€‹ä¸€ä¹¦çš„ç¬¬ä¸‰ç« ä¸­ï¼Œä¹Ÿåˆ—ä¸¾äº†2ä¸ªä¾‹å­æ¥ä»‹ç»å…¶è‡ªç”±ä¸è´£ä»»çš„æ–‡åŒ–ï¼š</p>
<ul>
<li>å–æ¶ˆé™æœŸä¼‘å‡åˆ¶åº¦</li>
<li>å–æ¶ˆå·®æ—…å’Œç»è´¹å®¡æ‰¹</li>
</ul>
<p>ç½‘é£æ²¡æœ‰å¯¹å…³äºèŠ±é”€ã€å¨±ä¹ã€é¦ˆèµ ã€å‡ºå·®ã€ä»¥åŠä¼‘å‡ç»™å‡ºå…·ä½“çš„è§„åˆ™å’Œåˆ¶åº¦ï¼Œè€Œæ˜¯ç»™äºˆå‘˜å·¥æå¤§çš„è‡ªç”±æ¥è‡ªä¸»å®‰æ’ï¼Œä½†æ˜¯è¿™ç§è‡ªç”±çš„å‰ææ˜¯ï¼šå…¬å¸åˆ©ç›Šè‡³ä¸Šã€‚</p>
<p>è€Œå…¬å¸åˆ©ç›Šè‡³ä¸Šï¼Œåˆ™æ„å‘³ç€ï¼š</p>
<ul>
<li>èŠ±è¯¥èŠ±çš„é’±ï¼Œå¦åˆ™å°±åˆ«èŠ±ï¼Œè€Œä¸”è¿™äº›é’±åº”è¯¥æ˜¯ä¸ºäº†å·¥ä½œè€ŒèŠ±</li>
<li>é€æ¼é‡è¦ä¾›åº”å•†é¦ˆèµ çš„ç¤¼ç‰©</li>
<li>åˆ©ç”¨å…¬å¸çš„èµ„æºï¼Œå¿…é¡»æ˜¯ä¸ºäº†æé«˜å·¥ä½œæ•ˆç‡ï¼Œä¸”å¿…é¡»åˆç†</li>
<li>â€¦â€¦</li>
</ul>
<p>åŒæ—¶ï¼Œå¯¹äºå…¬å¸ç»™äºˆå‘˜å·¥çš„è¿™ä»½è‡ªç”±ï¼Œç½‘é£è¿˜æœ‰ä¸€å¥—æ—¶å€™æ ¸å®çš„åˆ¶åº¦æ¥ç¡®ä¿ï¼Œå‘˜å·¥çš„è‡ªç”±æ»¡è¶³äº†å…¬å¸åˆ©ç›Šè‡³ä¸Šçš„åŸåˆ™ã€‚è¿™ç§åˆ¶åº¦åœ¨ç½‘é£å†…éƒ¨ç§°ä¸ºï¼š<strong>äº‹æƒ…æƒ…æ™¯è®¾å®šï¼Œæ—¶å€™æ ¸å®æŠ¥é”€</strong>ã€‚</p>
<h2 id="è‡ªç”±ä¸è´£ä»»-ä¿¡ä»»ä¸æ ¸æŸ¥">è‡ªç”±ä¸è´£ä»»&amp;ä¿¡ä»»ä¸æ ¸æŸ¥</h2>
<p>å½“æœ€å¼€å§‹æ²¡æœ‰æµç¨‹å’Œåˆ¶åº¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®é‡åˆ°çš„å…·ä½“çš„é—®é¢˜åˆ¶å®šç›¸å…³çš„æµç¨‹å’Œåˆ¶åº¦ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæµç¨‹å’Œåˆ¶åº¦ä¼šæ˜¯æœ‰æ•ˆçš„ã€‚ä½†é—®é¢˜æ˜¯ï¼Œéšç€æ—¶é—´çš„ä¸æ–­å‘å±•ï¼Œéšç€é—®é¢˜çš„ä¸æ–­å¢åŠ ï¼Œèµ·åˆçš„é‚£ä¸ªæµç¨‹åˆ¶åº¦å°±è¢«è¡¥å……çš„ä¼šè¶Šæ¥è¶Šå¤šã€‚è¿™ä¸ªæ—¶å€™ï¼Œæ¯ä¸ªäººéƒ½éœ€è¦å¯¹æµç¨‹å’Œåˆ¶åº¦è¿›è¡Œå­¦ä¹ ï¼Œç„¶åæŒ‰ç…§è¿™ä¸ªå¤æ‚çš„åˆ¶åº¦æ¥è¡Œäº‹ï¼Œåœ¨äº’è”ç½‘å…¬å¸ä¸­ï¼Œè¿™ç®€ç›´æ˜¯ä¸€ä»¶ä¸å¯æƒ³è±¡çš„äº‹æƒ…ã€‚å¦‚æœå‘˜å·¥åœ¨é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œè¿˜éœ€è¦é€šè¿‡æŸ¥é˜…æµç¨‹åˆ¶åº¦æ–‡æ¡£æ¥æŒ‡å¼•è‡ªå·±çš„è¡ŒåŠ¨ï¼Œé‚£æ–‡åŒ–çš„æ„ä¹‰ä¹Ÿå°±è¡ç„¶æ— å­˜äº†ã€‚</p>
<p>æˆ‘æ€»æ˜¯é‡åˆ°å¾ˆå¤šçš„æµç¨‹åˆ¶åº¦ï¼Œæ¯”å¦‚ç”³è¯·æŸä¸ªä¸€èˆ¬çš„æƒé™éœ€è¦æ€»ç›‘æ¥å®¡æ‰¹ï¼Œåœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šçº¿éœ€è¦æ€»ç›‘å®¡æ‰¹ç¡®è®¤ï¼Œâ€¦â€¦è¿™äº›åˆ¶åº¦çœŸçš„èƒ½è§£å†³é—®é¢˜å—ï¼Ÿæ— éæ˜¯ç”¨è¿™äº›é—¨æ§›æ¥é™åˆ¶æŸäº›äº‹æƒ…çš„å‘ç”Ÿè€Œå·²ã€‚ä½†æ˜¯ï¼Œå½“ç´§æ€¥äº‹æƒ…çœŸçš„å‡ºç°çš„æ—¶å€™ï¼Œè¿™äº›åˆ¶åº¦åè€Œæˆä¸ºäº†é˜»ç¢æ•ˆç‡æœ€å¤§çš„é—®é¢˜ã€‚è¿™äº›å¾€å¾€è¢«ç§°ä½œä¸ºâ€œå¤§å…¬å¸â€é€šç—…ã€‚æ ¹æœ¬åŸå› å°±æ˜¯éšç€å…¬å¸çš„å‘å±•ï¼Œå·¥ä½œçš„æ ¸å¿ƒåŠ¨åŠ›ä¸å†æ˜¯åˆå¿ƒï¼Œä¸å†æ˜¯æ€è€ƒâ€œè¿™æ˜¯å¦å¯¹å…¬å¸æ˜¯æœ‰åˆ©çš„â€ï¼Œè€Œæ˜¯å¤æ‚çš„åˆ¶åº¦å’Œæµç¨‹ã€‚</p>
<p>åœ¨ã€Šä¸æ‹˜ä¸€æ ¼ã€‹ä¸­ä¹Ÿæåˆ°ï¼š</p>
<blockquote>
<p>éšç€ä¸€ä¸ªå¿«é€Ÿçµæ´»çš„åˆåˆ›ä¼ä¸šå‘å±•ä¸ºæˆç†Ÿçš„ä¼ä¸šï¼Œå…¬å¸å¾€å¾€ä¼šå»ºç«‹ä¸€å¥—å®Œæ•´çš„ä½“ç³»å¯¹å‘˜å·¥çš„æ”¯å‡ºè¿›è¡Œç›‘ç®¡ã€‚</p>
<p>è¿™è®©ç®¡ç†æœ‰äº†ä¸€ç§æ§åˆ¶æ„Ÿï¼Œä½†å¾€å¾€ä¹Ÿä¼šæ‹–æ…¢å…¬å¸ä¸šåŠ¡çš„è¿›ç¨‹ã€‚</p>
<p>è€Œç½‘é£çš„<strong>äº‹æƒ…æƒ…æ™¯è®¾å®šï¼Œæ—¶å€™æ ¸å®æŠ¥é”€</strong>åˆ¶åº¦åœ¨ä¿è¯å‘˜å·¥ä¸ä¼šè™šå‡æŠ¥é”€çš„æƒ…å†µä¸‹ï¼Œç»™äºˆå‘˜å·¥æå¤§çš„è‡ªç”±ï¼Œæ¥ä½¿çš„ä»–ä»¬å¯ä»¥å†å…³é”®æ—¶åˆ»ä½œå‡ºæœ‰åˆ©äºå…¬å¸çš„å†³æ–­ã€‚</p>
</blockquote>
<p>å®é™…ä¸Šï¼Œ<strong>äº‹å‰æƒ…æ™¯è®¾å®šï¼Œäº‹åæ ¸å®æŠ¥é”€</strong>æ­£æ˜¯ä¸€ç§Trust, but verifyåˆ¶åº¦ã€‚</p>
<p>æˆ‘ä»¬è¦ç›¸ä¿¡å‘˜å·¥èƒ½ç§‰æ‰¿å…¬å¸åˆ©ç›Šè‡³ä¸Šçš„åŸåˆ™ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿéœ€è¦å¯¹å…¶è¡Œä¸ºè¿›è¡Œæ ¸æŸ¥ã€‚å•çº¯çš„ç›¸ä¿¡æ˜¯ä¸è¡Œçš„ã€‚</p>
<p>åœ¨ã€Šä¸æ‹˜ä¸€æ ¼ã€‹ä¸­æåˆ°ï¼š</p>
<blockquote>
<p>æ®ä¸€é¡¹ç ”ç©¶æ˜¾ç¤ºï¼šè¢«è°ƒæŸ¥è€…ä¸€æ—¦ç¡®è®¤è‡ªå·±çš„è¡Œä¸ºä¸ä¼šä¸ºäººæ‰€çŸ¥ï¼Œè¿œè¶…åŠæ•°çš„äººä¼šåˆ©ç”¨æ¼æ´ï¼Œä¸ºè‡ªå·±è°‹å–æ›´å¤šåˆ©ç›Šã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œä½œä¸ºé¡¹ç›®çš„è´Ÿè´£äººæˆ–è€…ç®¡ç†è€…ï¼Œéœ€è¦åšå¥½æ ¸æŸ¥çš„å·¥ä½œï¼š</p>
<ul>
<li>ç¡®ä¿å‘˜å·¥å½¢æˆå…¬å¸åˆ©ç›Šè‡³ä¸Šçš„ç†å¿µ</li>
<li>ç¡®ä¿å‘˜å·¥æ˜¯åœ¨æŒ‰ç…§é¢„æœŸå®Œæˆå·¥ä½œ</li>
<li>ç¡®ä¿åŠæ—¶å‘ç°é—®é¢˜ï¼Œå¹¶ç»™äºˆåŠæ—¶çš„é¼“åŠ±ã€æŒ‡å¯¼ã€èµ„æºæ”¯æŒ</li>
<li>ç¡®ä¿å½¢æˆå³é‡è§†ç»“æœï¼Œä¹Ÿé‡è§†è¿‡ç¨‹çš„æ–‡åŒ–ï¼Œåªæœ‰è¿‡ç¨‹ï¼Œæ²¡æœ‰ç»“æœï¼Œæ˜¯ä¸è¡Œçš„ï¼Œåªæœ‰ç»“æœï¼Œæ²¡æœ‰è¿‡ç¨‹ï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸è¡Œçš„</li>
</ul>
<p><img src="/2021/01/11/Trust-but-Verify/4.jpg" alt></p>
]]></content>
      <categories>
        <category>æ–‡åŒ–</category>
      </categories>
      <tags>
        <tag>ä¸æ‹˜ä¸€æ ¼</tag>
        <tag>è‡ªç”±ä¸è´£ä»»</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€åœºå…³äºFLVæ˜¯å¦è¦æ”¯æŒHEVCçš„äº‰è®º</title>
    <url>/2020/10/29/a-debate-about-supporting-HEVC-over-FLV/</url>
    <content><![CDATA[<blockquote>
<p>å‰å‡ å¤©ï¼Œåœ¨æµè§ˆFFmpegçš„Tracæ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªå¸Œæœ›<a href="https://trac.ffmpeg.org/ticket/6389"><strong>FFmpegå¢åŠ <em>è®©FLVæ”¯æŒHEVCç¼–ç </em></strong></a>çš„éœ€æ±‚ã€‚</p>
<p>è¿™ä¸ªéœ€æ±‚æ˜¯2017å¹´æäº¤åˆ°FFmpegç¤¾åŒºçš„ï¼Œä»æ•´ä¸ªäº¤æµè¿‡ç¨‹å¯ä»¥çœ‹å‡ºï¼Œéœ€æ±‚æå‡ºè€…å’ŒFFmpegçš„ç¤¾åŒºç»´æŠ¤è€…å¯¹è¿™ä¸ªéœ€æ±‚çš„åˆ†æ­§è¾ƒå¤§ï¼Œä»ä¸­ä¹Ÿèƒ½çœ‹å‡ºä¸€äº›å·¥ä½œæ€è·¯å’Œå·¥ä½œæ–‡åŒ–ä¸Šçš„å·®å¼‚ã€‚çœ‹å®Œæ•´ä¸ªè®¨è®ºè¿‡ç¨‹ï¼Œæ„Ÿè§¦è¿˜æ˜¯æ¯”è¾ƒæ·±çš„ï¼Œæ‰€ä»¥æƒ³å†™ä¸€ç¯‡æ–‡ç« æ¥è®°å½•ä¸€ä¸‹è‡ªå·±çš„æ„Ÿè§¦ã€‚</p>
</blockquote>
<p><img src="/2020/10/29/a-debate-about-supporting-HEVC-over-FLV/1.png" alt></p>
<span id="more"></span>
<h2 id="æ•´ä¸ªéœ€æ±‚è®¨è®ºçš„å¤§æ¦‚è¿‡ç¨‹">æ•´ä¸ªéœ€æ±‚è®¨è®ºçš„å¤§æ¦‚è¿‡ç¨‹</h2>
<ul>
<li><strong>æè®®å‘èµ·</strong>ï¼šç›®å‰HLSå’ŒTSéƒ½å·²ç»æ”¯æŒH265äº†ï¼Œä½†æ˜¯å›½å†…å¤§éƒ¨åˆ†CDNæ›´å¤šé‡‡ç”¨çš„æ˜¯RTMP/HTTP-FLVæ ¼å¼ã€‚å¹¶ä¸”ï¼Œå› ä¸ºHLSçš„å»¶è¿Ÿæ¯”è¾ƒé«˜ï¼Œå› æ­¤å›½å†…å¤§éƒ¨åˆ†ç›´æ’­ä¸šåŠ¡é‡‡ç”¨çš„éƒ½æ˜¯RTMP/HTTP-FLVæ ¼å¼ã€‚æ‰€ä»¥ï¼Œè¯¥ISSUEçš„å‘èµ·è€…å°±æƒ³é—®ä¸€ä¸‹FFmpegç¤¾åŒºæ˜¯å¦æœ‰è®¡åˆ’è®©FLVæ”¯æŒHEVCã€‚</li>
<li><strong>FFmpegç¤¾åŒºå›å¤</strong>ï¼šä¸å¾—ä¸è¯´ï¼Œç¤¾åŒºçš„å›å¤è¿˜æ˜¯å¾ˆå¿«çš„ã€‚åœ¨éœ€æ±‚æå‡º20åˆ†é’Ÿåï¼Œæœ‰äººå›å¤äº†ã€‚å¤§æ¦‚æ„æ€å°±æ˜¯ï¼šå¹¶ä¸æ˜¯ä¸èƒ½è®©FLVæ”¯æŒHEVCï¼Œåªæ˜¯å› ä¸ºAdobeæ²¡æœ‰å¯¹FLVæ”¯æŒHEVCåšå‡ºå…·ä½“è¯´æ˜ã€‚å› æ­¤ï¼Œå¦‚æœAdobeä¸æ‰©å±•æ ‡å‡†ï¼ŒFFmpegæ˜¯ä¸ä¼šè®©FLVæ”¯æŒHEVCçš„ã€‚åŒæ—¶ï¼Œç¤¾åŒºè¿˜æå‡ºäº†ä¸€äº›å¤‡é€‰çš„è§£å†³æ–¹æ³•ã€‚</li>
<li><strong>é’ˆå¯¹å»¶è¿Ÿçš„äº‰è®º</strong>ï¼šæ¥ä¸‹æ¥å°±æ˜¯åŒæ–¹é’ˆå¯¹ç›´æ’­æµå»¶è¿Ÿçš„äº‰è®ºäº†ã€‚ä¸€æ–¹è®¤ä¸ºå¯ä»¥å¯¹HLSæˆ–MPEG-DASHåšä¸€äº›ä¼˜åŒ–æ¥é™ä½å»¶è¿Ÿï¼Œä¸€æ–¹è®¤ä¸ºHLSä¸å¯èƒ½è¾¾åˆ°1-3ç§’çš„å»¶è¿Ÿï¼ŒåŸºæœ¬ä¸Šæ¥ä¸‹æ¥çš„è®¨è®ºå°±æ˜¯åœ¨è®¨è®ºå»¶è¿Ÿäº†ã€‚å› ä¸ºRTMP/HTTP-FLVçš„ä½å»¶è¿Ÿå·²ç»å›½å†…CDNå‚å•†çš„å®Œç¾æ”¯æŒï¼Œå› æ­¤ï¼Œè¿˜æ˜¯å¸Œæœ›FFmpegèƒ½è®©FLVæ”¯æŒHEVCã€‚å¹¶ä¸”ï¼Œæœ‰å¥½å¤šè¯„è®ºä¹Ÿåœ¨æ”¯æŒè¿™ä¸ªéœ€æ±‚ã€‚ç¡®å®ï¼Œåœ¨2017å¹´ï¼Œå°¤å…¶æ˜¯åœ¨å›½å†…ï¼Œå¯¹äºç›´æ’­ä¸šåŠ¡è€Œè¨€ï¼Œèƒ½è®©FLVæ”¯æŒH265çœŸçš„æ˜¯ä¸€ä»¶éå¸¸å€¼å¾—æ¿€åŠ¨çš„äº‹ã€‚</li>
<li><strong>ç¤¾åŒºå¼ºçƒˆåå¯¹</strong>ï¼šåœ¨ä¼—å¤šæ”¯æŒè¯¥éœ€æ±‚çš„è¯„è®ºä¹‹åï¼ŒFFmpegç›´æ¥å…³é—­äº†è¿™ä¸ªæè®®ï¼Œå¹¶ä¸”å°†è¯¥æè®®ç½®ä¸ºäº†<code>invalid</code>çŠ¶æ€ã€‚
<ul>
<li>è¿™äº›æ˜¯é©¬ç”²è´¦å·çš„çŒæ°´è¯„è®ºï¼Œè¿™äº›è¯„è®ºå¯¹äºFFmpegæ˜¯å¦å®ç°è¯¥æè®®æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚</li>
<li>åªè¦Adobeä¸å‡çº§FLVçš„æ ‡å‡†ï¼ŒFFmpegå°±ä¸ä¼šè®©FLVæ”¯æŒHEVCã€‚</li>
<li>ä¸ç®¡æ€ä¹ˆæ ·ï¼ŒFFmpegéƒ½ä¸ä¼šæ”¯æŒè¿™ç§å®šåˆ¶çš„éœ€æ±‚ã€‚</li>
</ul>
</li>
</ul>
<p>å› æ­¤ï¼Œä¸€ç›´åˆ°ç°åœ¨ï¼Œ3å¹´è¿‡å»äº†ï¼ŒFFmpegä¹Ÿæ²¡æœ‰å®ç°åœ¨FLVä¸­æ”¯æŒHEVCçš„ç‰¹æ€§ã€‚å› æ­¤ï¼Œç›´åˆ°å¦‚ä»Šï¼Œåœ¨ç›´æ’­ä¸šåŠ¡ä¸­ï¼Œä¹Ÿéƒ½æ— æ³•ä½¿ç”¨ç¤¾åŒºç‰ˆæœ¬çš„FFmpegå®ç°ï¼šåœ¨FLVæ ¼å¼ä¸­ä¼ è¾“H265çš„ç›´æ’­æµã€‚</p>
<p>æ‰€å¹¸çš„<a href="https://github.com/ksvc/FFmpeg/tree/release/3.4"><strong>é‡‘å±±äº‘å®ç°äº†FFmpegçš„<em>hack</em>ç‰ˆæœ¬</strong></a>ï¼Œä»è€Œè®©RTMP/HTTP-FLVåè®®æ”¯æŒäº†HEVCç¼–ç ã€‚å› æ­¤ï¼Œå³ä½¿æ ‡å‡†çš„è§£ç å™¨ï¼ˆæ’­æ”¾å™¨ï¼‰æ— æ³•æ’­æ”¾é‡‘å±±äº‘çš„<em>hack</em>ç‰ˆæœ¬ç”Ÿæˆçš„RTMP/HTTP-FLVçš„H265ç›´æ’­æµï¼Œä½†æ˜¯ï¼Œé‡‘å±±äº‘å®ç°çš„è¿™ä¸ªç§æœ‰çš„åè®®ä¹ŸåŸºæœ¬ä¸Šæˆä¸ºäº†å›½å†…ç›´æ’­ç›¸å…³ä¸šåŠ¡çš„æ ‡å‡†åè®®äº†ã€‚</p>
<h2 id="åè®®-æ ‡å‡†å…ˆè¡Œ-è¿˜æ˜¯å®ç°å…ˆè¡Œï¼Ÿ">åè®®/æ ‡å‡†å…ˆè¡Œï¼Œè¿˜æ˜¯å®ç°å…ˆè¡Œï¼Ÿ</h2>
<blockquote>
<p>11:6 è€¶å’Œåè¯´ï¼Œçœ‹å“ªï¼Œä»–ä»¬æˆä¸ºä¸€æ ·çš„äººæ°‘ï¼Œéƒ½æ˜¯ä¸€æ ·çš„è¨€è¯­ï¼Œå¦‚ä»Šæ—¢ä½œèµ·è¿™äº‹æ¥ï¼Œä»¥åä»–ä»¬æ‰€è¦ä½œçš„äº‹å°±æ²¡æœ‰ä¸æˆå°±çš„äº†ã€‚</p>
<p>11:7 æˆ‘ä»¬ä¸‹å»ï¼Œåœ¨é‚£é‡Œå˜ä¹±ä»–ä»¬çš„å£éŸ³ï¼Œä½¿ä»–ä»¬çš„è¨€è¯­å½¼æ­¤ä¸é€šã€‚</p>
<p>11:8 äºæ˜¯ï¼Œè€¶å’Œåä½¿ä»–ä»¬ä»é‚£é‡Œåˆ†æ•£åœ¨å…¨åœ°ä¸Šã€‚ä»–ä»¬å°±åœå·¥ï¼Œä¸é€ é‚£åŸäº†ã€‚</p>
<p>11:9 å› ä¸ºè€¶å’Œååœ¨é‚£é‡Œå˜ä¹±å¤©ä¸‹äººçš„è¨€è¯­ï¼Œä½¿ä¼—äººåˆ†æ•£åœ¨å…¨åœ°ä¸Šï¼Œæ‰€ä»¥é‚£åŸåå«å·´åˆ«ï¼ˆå°±æ˜¯å˜ä¹±çš„æ„æ€ï¼‰ã€‚</p>
<div align="right">â€”â€”ã€Šåœ£ç»Â·åˆ›ä¸–çºªã€‹</div>
</blockquote>
<p>å¦‚ä»Šï¼Œç”Ÿäº§ç¤¾ä¼šåŒ–ç¨‹åº¦è¶Šæ¥è¶Šé«˜ï¼ŒæŠ€æœ¯è¦æ±‚è¶Šæ¥è¶Šå¤æ‚ï¼Œç”Ÿäº§åä½œè¶Šæ¥è¶Šå¹¿æ³›ã€‚è®¸å¤šæŠ€æœ¯å’Œäº§å“ï¼Œå¾€å¾€æ¶‰åŠå‡ åä¸ªã€å‡ ç™¾ä¸ªç”šè‡³ä¸Šä¸‡ä¸ªä¼ä¸šï¼Œè¿™å®¢è§‚ä¸Šè¦æ±‚ï¼šå¿…é¡»åœ¨æŠ€æœ¯ä¸Šä½¿ç”Ÿäº§æ´»åŠ¨ä¿æŒé«˜åº¦çš„ç»Ÿä¸€å’Œåè°ƒã€‚æ­¤æ—¶ï¼Œå¿…é¡»é€šè¿‡åˆ¶å®šå’Œæ‰§è¡ŒæŠ€æœ¯æ ‡å‡†ä½¿å„ç”Ÿäº§éƒ¨é—¨å’Œä¼ä¸šå†…éƒ¨å„ç”Ÿäº§ç¯èŠ‚æœ‰æœºåœ°è”ç³»èµ·æ¥ï¼Œä¿è¯ç”Ÿäº§æœ‰æ¡ä¸ç´Šåœ°è¿›è¡Œã€‚æ²¡æœ‰æ ‡å‡†ã€åè®®ï¼Œå°±æ— æ³•æœ‰æ•ˆçš„å®ç°ç¤¾ä¼šåŒ–å¤§ç”Ÿäº§ã€‚</p>
<p>çºµè§‚æ•´ä¸ªè®¡ç®—æœºè¡Œä¸šï¼Œæ— è®ºå“ªä¸ªé¢†åŸŸï¼Œæ— è®ºæ˜¯ç½‘ç»œé€šä¿¡è¿˜æ˜¯ç¼–è§£ç åè®®ï¼Œéƒ½æ˜¯åè®®å…ˆè¡Œã€‚ç§æœ‰åè®®çš„æ¨å¹¿ï¼Œä¹Ÿæ˜¯å…ˆä»æ ‡å‡†åŒ–å¼€å§‹ï¼Œç„¶åæ‰æ¨åŠ¨å…·ä½“å®ç°ã€‚å¦åˆ™ï¼Œè¡Œä¸šå†…å°±æ— æ³•è¾¾æˆå…±è¯†ï¼Œå¦åˆ™ï¼Œæ•´ä¸ªç½‘ç»œçš„äº’è”ã€äº’é€šä¹Ÿå°±æ— ä»è°ˆèµ·ã€‚å› æ­¤ï¼Œå¿…é¡»æ˜¯æ ‡å‡†ã€åè®®å…ˆè¡Œã€‚</p>
<p>å¦ä¸€ä¸ªæ–¹é¢ï¼Œæ ‡å‡†ã€åè®®æ˜¯å…·ä½“å®ç°çš„æŠ½è±¡ï¼Œæ²¡æœ‰æ¥å£çš„å®šä¹‰ï¼Œå“ªé‡Œæ¥çš„æ¥å£çš„å®ç°å‘¢ï¼Ÿå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä»å…·ä½“çš„å®ç°ä¸­æŠ½å–æ¥å£ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»æ„è¯†åˆ°ï¼Œåœ¨æ¥å£æŠ½å–ä¹‹å‰ï¼Œè¿™ä¸ªå®ç°ç›¸å½“äºæ˜¯ç§æœ‰çš„ã€‚</p>
<p>å› æ­¤ï¼ŒFFmpegç¤¾åŒºæ‹’ç»è®©FLVè‡ªæŒHEVCæ˜¯åˆç†çš„ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬çš„å·¥ä½œå°±ä¼šå……æ–¥ç€å„ç§FFmpegçš„<em>hack</em>ç‰ˆæœ¬ï¼Œå¹¶ä¸”æ¯ä¸ª<em>hack</em>ç‰ˆæœ¬éƒ½æ˜¯ç”¨æ¥è§£å†³ä¸åŒçš„é—®é¢˜ã€‚è¿™çœŸæ˜¯ä¸€ä»¶éå¸¸ææ€–çš„äº‹æƒ…ã€‚</p>
<p>å…µé©¬æœªåŠ¨ï¼Œç²®è‰å…ˆè¡Œã€‚å¦‚æœçœŸçš„æƒ³è®©äº‹æƒ…å˜çš„æ›´ä¾¿æ·ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯ä¼˜å…ˆæ¨åŠ¨æ ‡å‡†æˆ–åè®®çš„å‡çº§ã€‚</p>
<p>æˆ‘è§åˆ°è¿‡å¾ˆå¤šæ¬¡è¾ƒä¸ºä¸¥é‡çš„çº¿ä¸Šé—®é¢˜ï¼Œå…¶æ ¹æœ¬åŸå› å°±æ˜¯ä¸Šä¸‹æ¸¸ä¹‹é—´æ²¡æœ‰ä¸€ä¸ªå®šä¹‰è‰¯å¥½çš„åè®®ï¼Œå¯¼è‡´å‡çº§è¿‡ç¨‹å‡ºç°äº†<a href="/monolith-to-microservices/docs/Breaking_Changes.html">ç ´åæ€§ä¿®æ”¹</a>ï¼Œè¿›è€Œå¯¼è‡´é—®é¢˜çš„å‘ç”Ÿã€‚</p>
<h2 id="ç»„ç»‡æ–‡åŒ–ä¼˜å…ˆè¿˜æ˜¯ç”¨æˆ·éœ€æ±‚ä¼˜å…ˆï¼Ÿ">ç»„ç»‡æ–‡åŒ–ä¼˜å…ˆè¿˜æ˜¯ç”¨æˆ·éœ€æ±‚ä¼˜å…ˆï¼Ÿ</h2>
<p>ä¸åŒçš„ç¤¾åŒºæœ‰ä¸åŒçš„æ–‡åŒ–ã€‚ç»„ç»‡çš„æ–‡åŒ–ä¼šä½¿å¾—å½“å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œç»„ç»‡å†…æ‰€æœ‰æˆå‘˜å¯¹è¯¥é—®é¢˜çš„åº”æ¿€ååº”éƒ½æ˜¯ä¸€è‡´çš„ï¼Œè¿™ç§åº”æ¿€ååº”æ˜¯æ— éœ€è¯·æ±‚ä¸Šçº§å°±å¯ä»¥ä½œå‡ºçš„ã€‚ä»<a href="https://trac.ffmpeg.org/ticket/6389">æè®®</a>ä¸­å¯ä»¥çœ‹å‡ºï¼ŒFFmpegç¤¾åŒºçš„æ–‡åŒ–ä¹‹ä¸€æ˜¯ï¼šç¼–è§£ç å™¨è¦é’ˆå¯¹æ ‡å‡†å’Œè§„èŒƒæ¥å®æ–½ã€‚</p>
<p>å¦‚æœé˜…è¯»FFmpegçš„æºç ï¼Œå…¶å®ä¹Ÿèƒ½å‘ç°å¾ˆå¤šå¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> &#123;</span></span><br><span class="line">    <span class="comment">// 7.4.3.1: vps_max_layers_minus1 is in [0, 62].</span></span><br><span class="line">    HEVC_MAX_LAYERS     = <span class="number">63</span>,</span><br><span class="line">    <span class="comment">// 7.4.3.1: vps_max_sub_layers_minus1 is in [0, 6].</span></span><br><span class="line">    HEVC_MAX_SUB_LAYERS = <span class="number">7</span>,</span><br><span class="line">    <span class="comment">// 7.4.3.1: vps_num_layer_sets_minus1 is in [0, 1023].</span></span><br><span class="line">    HEVC_MAX_LAYER_SETS = <span class="number">1024</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7.4.2.1: vps_video_parameter_set_id is u(4).</span></span><br><span class="line">    HEVC_MAX_VPS_COUNT = <span class="number">16</span>,</span><br><span class="line">    <span class="comment">// 7.4.3.2.1: sps_seq_parameter_set_id is in [0, 15].</span></span><br><span class="line">    HEVC_MAX_SPS_COUNT = <span class="number">16</span>,</span><br><span class="line">    <span class="comment">// 7.4.3.3.1: pps_pic_parameter_set_id is in [0, 63].</span></span><br><span class="line">    HEVC_MAX_PPS_COUNT = <span class="number">64</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// A.4.2: MaxDpbSize is bounded above by 16.</span></span><br><span class="line">    HEVC_MAX_DPB_SIZE = <span class="number">16</span>,</span><br><span class="line">    <span class="comment">// 7.4.3.1: vps_max_dec_pic_buffering_minus1[i] is in [0, MaxDpbSize - 1].</span></span><br><span class="line">    HEVC_MAX_REFS     = HEVC_MAX_DPB_SIZE,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œç¤¾åŒºä¸åŒçš„äººå¯¹è¯¥æè®®çš„æ„è§éƒ½æ˜¯ä¸€è‡´çš„ã€‚å³ä¾¿è¿™ä¸ªç”¨æˆ·éœ€æ±‚å†åˆç†ï¼Œå³ä¾¿è¿™ä¸ªéœ€æ±‚æœ‰å¤šå°‘ç”¨æˆ·æ”¯æŒï¼Œåªè¦æ˜¯æ ‡å‡†ä¸æ›´æ–°ï¼ŒFFmpegæ°¸è¿œéƒ½ä¸ä¼šæ”¯æŒã€‚</p>
<p>å¦å¤–ï¼Œç”¨æˆ·åªæ˜¯éœ€è¦ä¸€ç§èƒ½å¤Ÿæ”¯æŒH265ç¼–ç çš„ã€CDNåˆæ”¯æŒè‰¯å¥½çš„ã€å»¶è¿Ÿåˆéå¸¸ä½çš„è§†é¢‘æµåª’ä½“æ ¼å¼è€Œå·²ï¼Œä¸æ˜¯å—ï¼Ÿå¦‚æœçœŸçš„æœ‰è¿™ç§æ ¼å¼ï¼Œè®©FLVæ”¯æŒHEVCæ˜¯å¦å°±ä¸æ˜¯ä¸€ä¸ªé—®é¢˜äº†å‘¢ï¼Ÿæ—¢ç„¶ï¼ŒAdobeå·²ç»åœæ­¢äº†å¯¹RTMPçš„ç»´æŠ¤äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦èŠ±æ—¶é—´åœ¨è¿™ä¸ªåè®®ä¸Šå‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸é€‰æ‹©æ›´æ–°çš„æŠ€æœ¯å‘¢ï¼Ÿè™½ç„¶é€‰æ‹©æ–°çš„æŠ€æœ¯æ„å‘³ç€éœ€è¦å†’æ›´å¤§çš„é£é™©å’ŒèŠ±è´¹æ›´å¤šçš„æˆæœ¬ã€‚</p>
<p>å°¤å…¶æ˜¯å½“ä¸åŒçš„ç”¨æˆ·éœ€æ±‚ä¹‹é—´å­˜åœ¨å†²çªï¼Œå¦‚ä½•å¤„ç†ï¼ŸTo be or not to be,thatâ€™s a question!</p>
<h2 id="å¯¹äºæŠ€æœ¯-æ˜¯å‘å‰çœ‹è¿˜æ˜¯å›å¤´çœ‹ï¼Ÿ">å¯¹äºæŠ€æœ¯ï¼Œæ˜¯å‘å‰çœ‹è¿˜æ˜¯å›å¤´çœ‹ï¼Ÿ</h2>
<p>â€œå§‹ç”Ÿä¹‹ç‰©ï¼Œå…¶å½¢å¿…ä¸‘â€ã€‚ä½†æ˜¯ï¼Œæ–°æŠ€æœ¯å¿…ç„¶ä¼šå–ä»£æ—§æŠ€æœ¯ï¼Œä»æ ¹æœ¬ä¸Šè¯´æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>æ–°æŠ€æœ¯å…·æœ‰æ–°çš„ç»“æ„å’ŒåŠŸèƒ½ï¼Œèƒ½é€‚åº”å·²ç»å˜åŒ–äº†çš„ç¯å¢ƒå’Œæ¡ä»¶</li>
<li>æ–°æŠ€æœ¯æ˜¯å¯¹æ—§æŠ€æœ¯çš„æ‰¬å¼ƒï¼Œå¹¶æ·»åŠ äº†æ—§æŠ€æœ¯æ‰€ä¸èƒ½å®¹çº³çš„æ–°å†…å®¹</li>
</ul>
<p>å› æ­¤ï¼Œå¯¹äºæŠ€æœ¯è€Œè¨€ï¼Œæˆ‘ä»¬éœ€è¦å‘å‰çœ‹ï¼Œéœ€è¦å»äº†è§£è¿™äº›æ–°æŠ€æœ¯ã€‚å½“ç„¶ï¼Œé‡‡ç”¨æ–°æŠ€æœ¯è‚¯å®šæ˜¯è¦ä»˜å‡ºä¸€å®šä»£ä»·çš„ï¼Œæ²¡æœ‰ä¸ä»˜å‡ºå°±ä¼šæœ‰çš„æ”¶è·ã€‚éœ€è¦æ·±å…¥ç ”ç©¶æ–°æŠ€æœ¯å’Œæˆ‘ä»¬ä¸šåŠ¡ä¹‹é—´çš„å·®è·ï¼Œç„¶ååœ¨ä¸šåŠ¡çš„å®è·µä¸­ä¸æ–­å®Œå–„æ–°çš„æŠ€æœ¯ã€‚</p>
<p>å¦å¤–ï¼Œåœ¨äº†è§£æ–°æŠ€æœ¯æ—¶ï¼Œè¿˜è¦äº†è§£æ–°æŠ€æœ¯çš„å†å²ï¼Œäº†è§£åœ¨æ–°æŠ€æœ¯æ˜¯åŸºäºä»€ä¹ˆå†å²èƒŒæ™¯è€Œäº§å‡ºçš„ï¼Œæ˜¯ç”¨äºè§£å†³ä»€ä¹ˆé—®é¢˜çš„ï¼Ÿè¿™äº›ä¸œè¥¿ï¼Œæ˜¯æ–°æŠ€æœ¯çš„åº”ç”¨æ ¹æœ¬ï¼Œåªæœ‰æ·±å…¥äº†è§£äº†è¿™äº›ï¼Œæ‰èƒ½åœ¨åç»­çš„åº”ç”¨ä¸­ï¼Œå¾—å¿ƒåº”æ‰‹ã€‚é”™è¯¯çš„åº”ç”¨æ–°æŠ€æœ¯äº§ç”Ÿçš„é—®é¢˜æ¯”æ­£ç¡®çš„ä½¿ç”¨æ—§æŠ€æœ¯è¦å¤§çš„å¤šã€‚</p>
<p>ä¾‹å¦‚åœ¨HTTP2çš„åè®®ä¸­ï¼Œæœ‰è¿™æ ·çš„æè¿°ï¼š</p>
<blockquote>
<p>HTTP/2 addresses these issues by defining an optimized mapping of HTTPâ€™s semantics to an underlying connection. Specifically, it allows interleaving of request and response messages on the same connection and uses an efficient coding for HTTP header fields. It also allows prioritization of requests, letting more important requests complete more quickly, further improving performance.</p>
</blockquote>
<p>åœ¨HTTP3ä¸­ï¼Œæœ‰å¦‚ä¸‹çš„æè¿°ï¼š</p>
<blockquote>
<p>HTTP/2 introduced a binary framing and multiplexing layer to improve latency without modifying the transport layer. However, because the parallel nature of HTTP/2â€™s multiplexing is not visible to TCPâ€™s loss recovery mechanisms, a lost or reordered packet causes all active transactions to experience a stall regardless of whether that transaction was impacted by the lost packet.</p>
<p>The QUIC transport protocol incorporates stream multiplexing and per-stream flow control, similar to that provided by the HTTP/2 framing layer. By providing reliability at the stream level and congestion control across the entire connection, it has the capability to improve the performance of HTTP compared to a TCP mapping.</p>
</blockquote>
<p><img src="/2020/10/29/a-debate-about-supporting-HEVC-over-FLV/2.jpg" alt></p>
<p>å°±åƒä¸Šå›¾çš„â€œä¹Œé¸¦å–æ°´â€ä¸€æ ·ï¼Œæ˜¯é‡‡ç”¨å¸ç®¡å‘¢ï¼Ÿè¿˜æ˜¯å¯¹åŸæœ‰çš„çŸ³å¤´è¿›è¡Œå„ç§æ”¹è¿›å‘¢ï¼Ÿ</p>
<p>åæ¥ï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°äº†åˆæ‹äº‘çš„ä¸€ç¯‡<a href="https://www.cnblogs.com/upyun/p/7053150.html">ã€Šå¦‚ä½•å°†HLSå»¶æ—¶ç¼©çŸ­è‡³4ç§’ï¼ŒHLS+æŠ€æœ¯è¯¦è§£ã€‹</a>çš„ä¸€ç¯‡æ–‡ç« ã€‚</p>
]]></content>
      <categories>
        <category>è§†é¢‘æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>ç›´æ’­</tag>
        <tag>hevc</tag>
        <tag>flv</tag>
      </tags>
  </entry>
  <entry>
    <title>é«˜å¹¶å‘ä¸‹çš„â€œè¯»åå†™â€æ¨¡å¼å­˜åœ¨çš„é—®é¢˜</title>
    <url>/2020/09/07/keep-the-architecture-from-write-after-read/</url>
    <content><![CDATA[<p>æˆ‘ä»¬çš„æœåŠ¡æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½ä¼šé™åˆ¶åŒæ—¶ä½¿ç”¨çš„ç”¨æˆ·æ•°ï¼Œä¾‹å¦‚ä½¿ç”¨è¯¥åŠŸèƒ½çš„ç”¨æˆ·ä¸èƒ½è¶…è¿‡100ä¸ªã€‚å°±å¥½åƒè´­ä¹°è½¦ç¥¨ä¸€æ ·ï¼Œå¯ä»¥è´­ä¹°åˆ°è½¦ç¥¨çš„äººæ•°ä¸èƒ½è¶…è¿‡è¯¥è½¦æ¬¡çš„å¯¹åº”åŒºé—´çš„è½¦ç¥¨æ€»æ•°ã€‚ç„¶åï¼Œåœ¨å¹¶å‘æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå®é™…å¯ä»¥ä½¿ç”¨è¯¥åŠŸèƒ½çš„ç”¨æˆ·æ•°è¾¾åˆ°äº†200ã€‚è¿½æŸ¥ä¹‹åï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œè¯»åå†™â€œçš„æ¨¡å¼å¸¦æ¥å¹¶å‘é—®é¢˜ã€‚</p>
<p><img src="/2020/09/07/keep-the-architecture-from-write-after-read/1.png" alt></p>
<span id="more"></span>
<h2 id="ä»€ä¹ˆæ˜¯-è¯»åå†™-æ¨¡å¼">ä»€ä¹ˆæ˜¯â€œè¯»åå†™â€æ¨¡å¼</h2>
<p><code>è¯»åå†™</code>æ˜¯åœ¨å¹¶å‘åœºæ™¯ä¸‹ï¼Œé’ˆå¯¹åŒä¸€æ•°æ®è®°å½•çš„<strong>å…ˆè¯»åå†™</strong>æ“ä½œï¼Œå¹¶ä¸”æ•°æ®å†™å…¥çš„å€¼ä¾èµ–äºæ•°æ®è¯»å–çš„å€¼ã€‚å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/09/07/keep-the-architecture-from-write-after-read/2.png" alt></p>
<p>ä»å®šä¹‰ä¸­å¯ä»¥çœ‹å‡ºï¼Œåªæœ‰åœ¨3ä¸ªæ¡ä»¶éƒ½å…·å¤‡çš„å‰æä¸‹ï¼Œæ‰ä¼šè€ƒè™‘<code>è¯»åå†™</code>æ¨¡å¼å¸¦æ¥çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¹¶å‘åœºæ™¯</li>
<li>åŒä¸€æ•°æ®</li>
<li>å¯¹æ•°æ®çš„ä¿®æ”¹ä¾èµ–äºå¯¹æ•°æ®çš„è¯»å–</li>
</ul>
<h2 id="æ˜¾ç¤ºçš„-è¯»åå†™-æ¨¡å¼çš„é—®é¢˜">æ˜¾ç¤ºçš„â€œè¯»åå†™â€æ¨¡å¼çš„é—®é¢˜</h2>
<p>å¯¹äº<code>redis</code>è€Œè¨€ï¼Œå…¸å‹çš„<code>è¯»åå†™</code>é€»è¾‘å¦‚<strong><a href="http://test.sh">test.sh</a></strong>æ‰€ç¤ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">x=$(redis-cli -h 127.0.0.1 -p 8079 GET x)</span><br><span class="line">x=$(expr $&#123;x&#125; + 1)</span><br><span class="line">redis-cli -h 127.0.0.1 -p 8079 SET x $&#123;x&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®<code>x=0</code>åœ¨éå¹¶å‘åœºæ™¯ä¸‹ï¼Œå¤šæ¬¡è¿è¡Œ<strong><a href="http://test.sh">test.sh</a></strong>åä¸ä¼šå­˜åœ¨é—®é¢˜ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"><span class="keyword">for</span> ((i=0; i&lt;100; i++)); <span class="keyword">do</span> sh test.sh; <span class="keyword">done</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> redis-cli -h 127.0.0.1 -p 8079 GET x</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="string">&quot;100&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œå¯¹äºå¦‚ä¸‹çš„ä»£ç ï¼Œæˆ‘ä»¬åˆ™ä¼šå‘ç°ï¼Œå¯¹<code>KEY x</code>çš„æ›´æ–°å¹¶æ²¡æœ‰æŒ‰ç…§é¢„æœŸçš„é€»è¾‘æ¥æ›´æ–°ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">for</span> ((i=0; i&lt;100; i++)); <span class="keyword">do</span> sh test.sh &gt;/dev/null 2&gt;&amp;1 &amp;; <span class="keyword">done</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> redis-cli -h 127.0.0.1 -p 8079 GET x</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="string">&quot;3&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ç§°è¿™ç§åœºæ™¯ä¸‹å¯¼è‡´çš„é—®é¢˜ä¸ºï¼šæ˜¾ç¤ºçš„â€œè¯»åå†™â€æ¨¡å¼å¸¦æ¥çš„é—®é¢˜ã€‚å› ä¸ºæ­¤æ—¶ï¼Œå¹¶å‘æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå¹¶ä¸”æ“ä½œçš„æ˜¯å•ä¸€çš„rediså®ä¾‹ã€‚</p>
<h2 id="éšå¼çš„-è¯»åå†™-æ¨¡å¼çš„é—®é¢˜">éšå¼çš„â€œè¯»åå†™â€æ¨¡å¼çš„é—®é¢˜</h2>
<p>åœ¨å®é™…çš„æœåŠ¡ä¸­ï¼Œä¸ºäº†æå‡æœåŠ¡çš„æ€§èƒ½ï¼Œå¾€å¾€ä¼šé‡‡ç”¨<code>è¯»å†™åˆ†ç¦»</code>çš„æ¶æ„æ¥è®¾è®¡æ•°æ®å­˜å‚¨ï¼Œä¾‹å¦‚MySQLçš„ä¸»ä»æ¶æ„ï¼ŒRedisçš„ä¸»ä»æ¶æ„ã€‚åœ¨<code>è¯»å†™åˆ†ç¦»</code>æ¶æ„ä¸‹ï¼Œ<code>å†™æ“ä½œ</code>ä¸€èˆ¬å‡åœ¨<strong>ä¸»</strong>æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œè€Œ<code>è¯»æ“ä½œ</code>åˆ™åœ¨<strong>ä»</strong>æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œè€Œä¸»ä»ä¹‹é—´åˆ™é€šè¿‡æŸç§æ–¹å¼æ¥é€šä¿¡ã€‚å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/09/07/keep-the-architecture-from-write-after-read/3.png" alt></p>
<p>è¿™ç§åœºæ™¯ä¸‹ï¼Œæ¯”è¾ƒé‡è¦çš„é—®é¢˜å°±æ˜¯â€œä¸»ä»å»¶è¿Ÿâ€çš„é—®é¢˜ã€‚å½“â€œä¸»ä»å»¶è¿Ÿâ€çš„æ—¶é—´ï¼Œè¶…è¿‡äº†è¯·æ±‚é—´éš”çš„æ—¶é—´æ—¶ï¼Œè™½ç„¶çœ‹èµ·æ¥å¹¶æ²¡æœ‰ä»€ä¹ˆå¹¶å‘çš„åœºæ™¯ï¼Œä½†æ˜¯å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§â€œéšå¼çš„å¹¶å‘â€ã€‚</p>
<p>ä¸¾ä¸ªæç«¯çš„ä¾‹å­â€”â€”ç°å®åœºæ™¯ä¸­å¯èƒ½ä¸ä¼šæœ‰è¿™ä¹ˆå¤§çš„ä¸»ä»å»¶è¿Ÿâ€”â€”ä¸»ä»å»¶è¿Ÿçš„æ—¶é—´ä¸º5sï¼Œè€Œå½“å‰æœåŠ¡çš„è´Ÿè½½ä¸º2sä¸€ä¸ªè¯·æ±‚ã€‚æ­¤æ—¶ï¼Œè™½ç„¶çœ‹èµ·æ¥æ²¡æœ‰ä»€ä¹ˆâ€œå¹¶å‘â€çš„åœºæ™¯ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå½“ç¬¬2ä¸ªè¯·æ±‚åˆ°æ¥æ—¶ï¼Œç”±äºä¸»ä»å»¶è¿Ÿçš„å­˜åœ¨ï¼Œåˆ°æ—¶æ­¤æ—¶è¯¥è¯·æ±‚è·å–çš„æ•°æ®ä»ç„¶ä¸ºæ—§çš„æ•°æ®ï¼Œè¿›è€Œå¯¼è‡´æ›´æ–°é€»è¾‘çš„å¼‚å¸¸ã€‚</p>
<p>å› ä¸ºï¼Œè¿™ç§åœºæ™¯ä¸‹çš„å¹¶å‘å®é™…ä¸Šè¢«â€œä¸»ä»â€æ¶æ„éšè—äº†èµ·æ¥ï¼Œå› æ­¤ï¼Œæˆ‘ç§°è¿™ç§åœºæ™¯ä¸‹å¯¼è‡´çš„é—®é¢˜ä¸ºï¼šéšå¼çš„â€œè¯»åå†™â€æ¨¡å¼çš„é—®é¢˜ã€‚</p>
<p>å¾ˆå¤šæ—¶å€™ï¼Œè¿™ä¸¤ç§æ¨¡å¼ä¼šåŒæ—¶å‘ç”Ÿã€‚åœ¨æ–‡ç« å¼€å§‹ä»‹ç»çš„é—®é¢˜ï¼Œå°±æ˜¯è¿™ä¸¤ç§åœºæ™¯å…±åŒä½œç”¨è€Œäº§ç”Ÿçš„â€œè¯»åå†™â€çš„é—®é¢˜ã€‚</p>
<h2 id="å¦‚ä½•é¿å…-è¯»åå†™-å¸¦æ¥çš„é—®é¢˜">å¦‚ä½•é¿å…â€œè¯»åå†™â€å¸¦æ¥çš„é—®é¢˜</h2>
<p>è§£å†³è¯¥é—®é¢˜çš„å…·ä½“æ–¹æ³•éœ€è¦è§†å…·ä½“çš„åº”ç”¨åœºæ™¯ã€‚ä¸è¦æœŸå¾…é‚£ç§â€œæ”¾ä¹‹å››æµ·è€Œçš†å‡†â€çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œè¦æ ¹æ®è‡ªå·±æ‰€é¢ä¸´çš„å…·ä½“åœºæ™¯æ¥é€‰æ‹©æœ€åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬åœ¨è§£å†³è¯¥é—®é¢˜æ—¶ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæ€»çš„æŒ‡å¯¼åŸåˆ™ï¼šå°†â€œè¯»åå†™â€æ¨¡å¼æ”¹ä¸ºâ€œäº‹åŠ¡å†™åå†™â€æ¨¡å¼ã€‚</p>
<p>â€œå†™æ“ä½œâ€éƒ½åœ¨â€œä¸»â€æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œå› æ­¤ï¼Œæ”¹ä¸ºâ€œå†™åå†™â€æ¨¡å¼é¦–å…ˆé¿å…äº†â€œä¸»ä»â€æ¶æ„çš„é—®é¢˜ã€‚ç„¶åï¼Œåœ¨â€œå†™åå†™â€çš„åŸºç¡€ä¸Šï¼Œå†ä½¿ç”¨â€œäº‹åŠ¡æ€§çš„å†™æ“ä½œâ€ï¼Œå°±å¯ä»¥åŸºæœ¬è§£å†³â€œè¯»åå†™â€çš„é—®é¢˜ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå°†<code>test.sh</code>ç¨ä½œä¿®æ”¹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">redis-cli -h 127.0.0.1 -p 8079 incr x</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">for</span> ((i=0; i&lt;100; i++)); <span class="keyword">do</span> sh test.sh &gt;/dev/null 2&gt;&amp;1 &amp;; <span class="keyword">done</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> redis-cli -h 127.0.0.1 -p 8079 GET x</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="string">&quot;100&quot;</span></span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¶æ„</category>
      </categories>
      <tags>
        <tag>æ•°æ®ä¸€è‡´æ€§</tag>
        <tag>redisåŸå­æ“ä½œ</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»å•ä½“æ¶æ„è¿ç§»åˆ°å¾®æœåŠ¡æ¶æ„</title>
    <url>/2020/08/19/monolith-to-microservices/</url>
    <content><![CDATA[<p><img src="/2020/08/19/monolith-to-microservices/cover.png" alt></p>
<span id="more"></span>
<p>æ°å¥½ä»Šå¹´åœ¨äº†è§£å¾®æœåŠ¡ç›¸å…³çš„æŠ€æœ¯ï¼Œåˆæ°å¥½åœ¨æµè§ˆnginxå®˜ç½‘çš„æ—¶å€™å‘ç°äº†è¿™æœ¬ä¹¦ï¼Œå½“æ—¶è¯»å®Œç¬¬ä¸€ç« çš„ç¬¬ä¸€èŠ‚å°±æ„Ÿè§‰è¿™æ˜¯ä¸€æœ¬æˆ‘ä¼šè®¤çœŸé˜…è¯»çš„æŠ€æœ¯ä¹¦ç±ã€‚</p>
<p>åæ¥ï¼Œéšç€é˜…è¯»çš„æ·±å…¥ï¼Œå‘ç°æˆ‘è‡ªå·±å·¥ä½œä¸­é‡åˆ°çš„å¾ˆå¤šçš„é—®é¢˜æ°å·§å°±æ˜¯ä¹¦é‡Œå†™çš„é‚£æ ·ï¼Œä¸å…¶å¯¹æ¯ä¸€ä¸ªç‚¹å•ç‹¬å†™æˆä¸€ç¯‡æ–‡ç« æˆ–åšå®¢ï¼Œè¿˜ä¸å¦‚å°±ä»¥æ‰¹æ³¨çš„å½¢å¼å‘ˆç°å‡ºæ¥ï¼Œè¿™æ ·ä¹Ÿèƒ½æ›´ç³»ç»Ÿã€‚</p>
<p>åŸºäºå¦‚ä¸Šçš„æƒ³æ³•ï¼Œåœ¨é˜…è¯»æœ¬ä¹¦çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ•´ä¸ªä¹¦ç±å†…å®¹è¿›è¡Œäº†ä¸­æ–‡ç‰ˆçš„ç¿»è¯‘ï¼Œå¹¶åœ¨æ­£æ–‡ä¸­ä»¥æ‰¹æ³¨çš„å½¢å¼å†™å…¥çš„è‡ªå·±çš„æ€è€ƒï¼Œç»å†ã€‚</p>
<p>è¿™æœ¬ä¹¦æ˜¯æˆ‘è¯»è¿‡çš„ç›¸å¯¹ä¸Šä¹˜çš„ä¸€æœ¬ä¹¦ï¼Œåœ¨äºšé©¬é€Šä¸Šçš„è¯„ä»·éå¸¸å¥½ï¼Œä¸ä½†è®²äº†å¾®æœåŠ¡çš„è¿ç§»æŠ€æœ¯ï¼Œæ›´å¤šè®²äº†å¾ˆå¤šä½œè€…çš„æ€è€ƒå’Œå¾ˆå¤šä¸ºä»€ä¹ˆçš„é—®é¢˜ã€‚æ­£å¦‚ä¸€ä½è¯»è€…çš„è¯„è®ºï¼šè¿™æœ¬ä¹¦æ²¡æœ‰å®£ä¼ ä»€ä¹ˆæŠ€æœ¯ï¼Œæ²¡æœ‰å…œå”®ä»€ä¹ˆæŠ€æœ¯ï¼Œè€Œæ›´å¤šçš„æ˜¯è®©æˆ‘ä»¬å­¦ä¼šå¦‚ä½•æ€è€ƒï¼Ÿæˆ‘ä»¬æ˜¯å¦çœŸçš„éœ€è¦ä½¿ç”¨å¾®æœåŠ¡ï¼Ÿä½¿ç”¨è¿‡ç¨‹è¦æ³¨æ„ä»€ä¹ˆï¼Ÿâ€¦â€¦</p>
<p>ç¿»è¯‘çš„ç‰ˆæœ¬å¯ä»¥ç‚¹å‡»ï¼š<a href="/monolith-to-microservices"><strong>monolith to microservicesä¸­æ–‡ç‰ˆ</strong></a>ï¼Œæ­¤ç‰ˆæœ¬ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ã€‚å¦‚æœ‰ç–‘é—®ï¼Œè¯„è®ºåŒºç•™è¨€äº¤æµã€‚</p>
<p>å› ä¸ºå®˜æ–¹ç‰ˆçš„ç¿»è¯‘ç‰ˆæœ¬è‡³ä»Šè¿˜æ²¡æœ‰ï¼Œå› æ­¤ï¼Œæ¨èå¤§å®¶è´­ä¹°è‹±æ–‡åŸç‰ˆï¼Œ<a href="https://www.amazon.com/Monolith-Microservices-Evolutionary-Patterns-Transform/dp/1492047848"><strong>è´­ä¹°é“¾æ¥</strong></a>ã€‚</p>
]]></content>
      <categories>
        <category>æ¶æ„</category>
      </categories>
      <tags>
        <tag>èä¹¦</tag>
        <tag>å¾®æœåŠ¡</tag>
        <tag>å•ä½“</tag>
      </tags>
  </entry>
  <entry>
    <title>kill -9å¯¼è‡´subprocess.runå¯åŠ¨çš„å­è¿›ç¨‹æ— æ³•é€€å‡º</title>
    <url>/2020/08/07/cannot-terminate-the-subprocess-run-child-process-caused-by-kill-9/</url>
    <content><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªä»»åŠ¡æ‰˜ç®¡å¹³å°ï¼Œè¯¥å¹³å°å¯ä»¥æ‰˜ç®¡<code>python</code>è¯­è¨€ç¼–å†™ä»»åŠ¡ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ä»»åŠ¡çŠ¶æ€è¿›è¡Œç®¡ç†ã€‚ç”±äºä¸šåŠ¡çš„éœ€è¦ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>python</code>çš„ä»»åŠ¡ä¸­è°ƒèµ·ä¸€ä¸ª<code>shell</code>è„šæœ¬æ¥å®Œæˆä¸€äº›é¢å¤–çš„äº‹æƒ…ã€‚å½“æˆ‘ä»¬æŠŠç¼–å†™å¥½çš„ä»»åŠ¡éƒ¨ç½²åˆ°ä»»åŠ¡æ‰˜ç®¡å¹³å°ä¹‹åï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼šå½“åœ¨ä»»åŠ¡çš„è¶…æ—¶æ—¶é—´å†…æ‰‹åŠ¨ç»“æŸä»»åŠ¡çš„æ—¶å€™ï¼Œåªæœ‰<code>python</code>çš„çˆ¶è¿›ç¨‹é€€å‡ºäº†ï¼Œè€Œ<code>python</code>å¯åŠ¨çš„<code>shell</code>å­è¿›ç¨‹å´æ²¡æœ‰é€€å‡ºã€‚</p>
<span id="more"></span>
<h2 id="subprocessæ¨¡å—">subprocessæ¨¡å—</h2>
<p>æˆ‘ä»¬ä½¿ç”¨subprocess.run()æ¥åˆ›å»ºæ–°çš„shellè¿›ç¨‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">subprocess.run(</span><br><span class="line">    cmd,</span><br><span class="line">    cwd=cwd,</span><br><span class="line">    shell=<span class="literal">True</span>,</span><br><span class="line">    stdout=subprocess.PIPE,</span><br><span class="line">    stderr=subprocess.PIPE,</span><br><span class="line">    encoding=<span class="string">&quot;utf-8&quot;</span>,</span><br><span class="line">    timeout=<span class="number">600</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œåˆ†åˆ«å†™äº†ä¸€æ®µ<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/08/07/cannot-terminate-the-subprocess-run-child-process-caused-by-kill-9/timeout.py"><code>python</code>ä»£ç </a>å’Œ<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/08/07/cannot-terminate-the-subprocess-run-child-process-caused-by-kill-9/timeout.sh"><code>shell</code>ä»£ç </a>ï¼Œå¯ä»¥ç‚¹å‡»é“¾æ¥æŸ¥çœ‹å…·ä½“ä»£ç ã€‚å…¶ä¸­ï¼Œ<code>shell</code>è„šæœ¬ä¸ºä¸€ä¸ªæ­»å¾ªç¯ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">for((i=0;;i++))</span><br><span class="line">do</span><br><span class="line">    echo &quot;$i&quot; &gt;log 2&gt;&amp;1</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ä½¿ç”¨<code>kill -2ï¼ˆctrl+cï¼‰</code>ç»“æŸçˆ¶è¿›ç¨‹çš„æ—¶å€™ï¼Œå­è¿›ç¨‹ä¹Ÿç¡®å®ç»“æŸäº†ã€‚å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/08/07/cannot-terminate-the-subprocess-run-child-process-caused-by-kill-9/sigint.png" alt></p>
<p>æˆ‘ä»¬ç»§ç»­æŸ¥å‡ºé—®é¢˜çš„åŸå› ï¼Œæˆ‘ä»¬å’¨è¯¢äº†ä»»åŠ¡æ‰˜ç®¡å¹³å°çš„è´Ÿè´£äººï¼šä»»åŠ¡æ‰˜ç®¡å¹³å°é¡µé¢ä¸Šçš„<code>ç»“æŸä»»åŠ¡</code>æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</p>
<p>å¹³å°çš„è´Ÿè´£äººå›åº”è¯´ï¼š<code>kill -9</code>å‘½ä»¤ç»“æŸçš„ã€‚</p>
<p>åœ¨è¿™æ—¶å€™ï¼Œæˆ‘çŸ¥é“ï¼Œæˆ‘å¯èƒ½å¤§æ¦‚çŸ¥é“é—®é¢˜çš„åŸå› äº†ã€‚</p>
<h2 id="killå’Œsignal">killå’Œsignal</h2>
<p>å…³äº<code>kill</code>å‘½ä»¤ï¼Œæ­¤å¤„ä¸åšè¯¦ç»†ä»‹ç»ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://man7.org/linux/man-pages/man1/kill.1.html">kill(1)æ‰‹å†Œ</a>ã€‚<code>kill</code>çš„ä½œç”¨æ˜¯å‘æŸä¸ªç‰¹æ®Šçš„è¿›ç¨‹æˆ–è¿›ç¨‹ç»„å‘é€ä¸€ä¸ªç‰¹æ®Šçš„ä¿¡å·ï¼Œä»è€Œè¾¾åˆ°ç»“æŸè¿›ç¨‹çš„ç›®çš„ã€‚å…³äº<code>ä¿¡å·(signal)</code>ï¼Œæ­¤å¤„ä¹Ÿä¸åšè¯¦ç»†ä»‹ç»ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://man7.org/linux/man-pages/man7/signal.7.html">signal(7)æ‰‹å†Œ</a>ã€‚</p>
<p>è€Œ<code>kill -9</code>å‘½ä»¤å®é™…ä¸Šæ˜¯å‘è¿›ç¨‹å‘é€äº†<code>SIGKILL</code>ä¿¡å·ï¼Œè€Œåœ¨<a href="https://man7.org/linux/man-pages/man7/signal.7.html">signal(7)æ‰‹å†Œ</a>ä¸­å¯ä»¥çœ‹åˆ°ï¼š<strong>The signals SIGKILL and SIGSTOP cannot be caught, blocked, or ignored.</strong> å› æ­¤ï¼Œ<code>kill -9</code>æ˜¯ä¸€ç§ä¸å¯æ•è·çš„ã€ä¸å¯å¿½ç•¥çš„ä¿¡å·ï¼Œç”¨æ¥åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ç´§æ€¥ç»“æŸè¿›ç¨‹ï¼ˆå¦‚æœè¯¥ä¿¡å·å¯ä»¥æ•è·å’Œå¿½ç•¥çš„è¯ï¼Œå°±è¾¾ä¸åˆ°è¿™ä¸ªç›®çš„äº†ï¼‰ã€‚</p>
<p>è€Œå¯¹äºä¸€ä¸ªå•è¿›ç¨‹çš„ç¨‹åºè€Œè¨€ï¼Œç›´æ¥<code>kill -9</code>ç»“æŸå¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¯¹äºä¸€ä¸ªå¤šè¿›ç¨‹çš„ç¨‹åºï¼Œä¾‹å¦‚æœ¬æ–‡ä¸­çš„ä¾‹å­ï¼Œåœ¨<code>python</code>è¿›ç¨‹ä¸­åˆåˆ›å»ºäº†<code>shell</code>å­è¿›ç¨‹ï¼Œé‚£ä¹ˆç›´æ¥ç”¨<code>kill -9</code>ç²—æš´çš„ç»“æŸçˆ¶è¿›ç¨‹æ˜¯éå¸¸ä¸å®‰å…¨çš„ï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/08/07/cannot-terminate-the-subprocess-run-child-process-caused-by-kill-9/sig9.jpg" alt></p>
<p>å¯è§ï¼Œåœ¨<code>kill -9</code>ç»“æŸçˆ¶è¿›ç¨‹ä¹‹åï¼Œ<code>shell</code>ç¼–å†™çš„å­è¿›ç¨‹æˆä¸ºäº†<a href="https://www.geeksforgeeks.org/zombie-and-orphan-processes-in-c/">å­¤å„¿è¿›ç¨‹</a>ï¼Œå¹¶ç»§ç»­æ‰§è¡Œã€‚</p>
<p>è¿™ä¹Ÿå°±æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä»»åŠ¡æ‰˜ç®¡å¹³å°ä¸Šç»“æŸä»»åŠ¡åï¼Œå­è¿›ç¨‹å¹¶æ²¡æœ‰é€€å‡ºçš„æ ¹æœ¬åŸå› ã€‚çˆ¶è¿›ç¨‹ç»“æŸçš„ä¿¡å·æ ¹æœ¬å°±æ²¡æœ‰æœºä¼šé€šçŸ¥åˆ°å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¹Ÿå°±ä¸å¯èƒ½ç»“æŸäº†ã€‚</p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬æ¢å¦å¤–ä¸€ä¸ªå¯ä»¥è¢«æ•è·å’Œå¿½ç•¥çš„ä¿¡å·ï¼Œä¾‹å¦‚<code>SIGTERM</code>æ˜¯å¦èƒ½ç»“æŸå­è¿›ç¨‹å‘¢ï¼Ÿ</p>
<p><img src="/2020/08/07/cannot-terminate-the-subprocess-run-child-process-caused-by-kill-9/sigterm.jpg" alt></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œ<code>SIGTERM</code>ä¿¡å·ä¹Ÿæ²¡æœ‰ç»“æŸå­è¿›ç¨‹ã€‚</p>
<h2 id="subprocess-run-æ‰€æ•è·çš„å¼‚å¸¸">subprocess.run()æ‰€æ•è·çš„å¼‚å¸¸</h2>
<p>æˆ‘ä»¬ä»<a href="https://github.com/python/cpython/blob/3.8/Lib/subprocess.py">subprocessæ¨¡å—çš„æºç </a>ä¸­å¯ä»¥å‘ç°ï¼Œ<code>subprocess.run()</code>å®é™…ä¸Šåªæ•è·è‡ªå®šä¹‰çš„<code>TimeoutExpired</code>å¼‚å¸¸å’Œ<code>KeyboardInterrupt</code>å¼‚å¸¸ï¼Œè€Œåœ¨<code>python</code>ä¸­ï¼Œ<code>KeyboardInterrupt</code>å¼‚å¸¸å¯¹åº”çš„å°±æ˜¯<strong>ç”¨æˆ·ä¸­æ–­æ‰§è¡Œ</strong>ï¼Œä¸€èˆ¬å°±æ˜¯è¾“å…¥<code>ctl+c</code>æˆ–å‘é€<code>SIGINT</code>ä¿¡å·ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> Popen(*popenargs, **kwargs) <span class="keyword">as</span> process:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        stdout, stderr = process.communicate(<span class="built_in">input</span>, timeout=timeout)</span><br><span class="line">    <span class="keyword">except</span> TimeoutExpired <span class="keyword">as</span> exc:</span><br><span class="line">        <span class="comment"># ...</span></span><br><span class="line">        <span class="keyword">raise</span></span><br><span class="line">    <span class="keyword">except</span>:  <span class="comment"># Including KeyboardInterrupt, communicate handled that.</span></span><br><span class="line">        process.kill()</span><br><span class="line">        <span class="comment"># We don&#x27;t call process.wait() as .__exit__ does that for us.</span></span><br><span class="line">        <span class="keyword">raise</span></span><br></pre></td></tr></table></figure>
<p>å¯è§ï¼Œå¯¹äº<code>SIGINT</code>ä¿¡å·è€Œè¨€ï¼Œ<code>subprocess.run()</code>å‡½æ•°ä¼šè°ƒç”¨<code>Popen.kill()</code>æ¥ç»“æŸå­è¿›ç¨‹ã€‚</p>
<p>å› æ­¤ï¼Œå¯¹äºå¤šè¿›ç¨‹è€Œè¨€ï¼Œå½“çˆ¶è¿›ç»“æŸä¹‹å‰ï¼Œéœ€è¦é€šè¿‡æŸç§æœºåˆ¶æ¥é€šçŸ¥å…¶å­è¿›ç¨‹ï¼Œè¿›è€Œè®©å­è¿›ç¨‹çŸ¥æ™“çˆ¶è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯ï¼Œå¹¶ä½œå‡ºåˆç†çš„åç»­è¡Œä¸ºã€‚å¦åˆ™ï¼Œå°±ä¼šå‡ºç°æœ¬æ–‡ä¸­å‡ºç°çš„å­¤å„¿è¿›ç¨‹çš„ç°è±¡ã€‚</p>
<p>å› æ­¤ï¼Œå¯¹äºå…¶ä»–çš„ä¿¡å·ï¼Œ<code>subprocess</code>æ¨¡å—æœ¬èº«å°±æ— æ³•å¤„ç†äº†ã€‚</p>
<h2 id="æ•è·sigtermä¿¡å·">æ•è·SIGTERMä¿¡å·</h2>
<p>å¦‚æœè¦æ•è·<code>SIGTERM</code>ä¿¡å·ï¼Œä½¿å¾—<code>kill -15</code>ç»“æŸpythonä»»åŠ¡çš„æ—¶å€™ï¼ŒåŒæ—¶ä¹Ÿèƒ½ç»“æŸå­è¿›ç¨‹ï¼Œé‚£ä¹ˆå°±è¦è€ç‚¹å°èªæ˜äº†ï¼Œä¾‹å¦‚ï¼šåœ¨<code>python</code>ä¸­æ•è·å…¶ä»–ä¿¡å·ï¼Œå¹¶å°†å…¶è½¬æˆ<code>SIGINT</code>ä¿¡å·ï¼Œå…·ä½“å¯ä»¥å‚è§<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/08/07/cannot-terminate-the-subprocess-run-child-process-caused-by-kill-9/timeout_1.py">timeout_1.py</a>ã€‚å…·ä½“æ‰§è¡Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/08/07/cannot-terminate-the-subprocess-run-child-process-caused-by-kill-9/popen.jpg" alt></p>
<p>æ­¤å¤„ï¼Œæˆ‘ç”¨äº†ä¸€ä¸ªå·æ‡’çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æŠŠ<code>SIGTERM</code>ä¿¡å·æ•è·ä¹‹åè½¬æˆ<code>SIGINT</code>ä¿¡å·ï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">def sigintHandler(signum, frame):</span><br><span class="line">    raise KeyboardInterrupt</span><br><span class="line"></span><br><span class="line">    exit()</span><br><span class="line"></span><br><span class="line">def run_cmd(cmd, cwd):</span><br><span class="line">    signal.signal(signal.SIGTERM, sigintHandler)</span><br><span class="line">    # ...</span><br></pre></td></tr></table></figure>
<h2 id="ç»“è¯­">ç»“è¯­</h2>
<p>æŸ¥å®Œè¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿç®—æ˜¯å¯¹è¿›ç¨‹ç›¸å…³çš„å†…å®¹æœ‰äº†æ›´æ·±å…¥çš„äº†è§£ã€‚å­¤å„¿è¿›ç¨‹ï¼Œåƒµå°¸è¿›ç¨‹ï¼Œä¸å¯å±è”½è¿›ç¨‹â€¦â€¦ï¼Œå¥½åƒç»è¿‡å¾ˆå¤šæ—¶é—´ä¹‹åï¼Œå¿½ç„¶éƒ½ä¸è®°å¾—è‡ªå·±æ›¾ç»ä¹Ÿé’»ç ”è¿‡è¿™äº›æ¦‚å¿µä¸€æ ·ã€‚æ„Ÿè°¢æˆ‘çš„åŒäº‹<em>ä¸€å“</em>(<a href="https://github.com/GerenLiu">@GerenLiu</a>)ï¼Œåœ¨å·¥ä½œä¹‹ä½™æŠ½æ—¶é—´æ¥ä¸€èµ·è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚</p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>subprocess</tag>
        <tag>killå‘½ä»¤</tag>
        <tag>å¤šçº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡ªåŠ¨åŒ–æµ‹è¯•é¦–å…ˆæ˜¯ä¸€ç§å·¥ä½œæ–‡åŒ–</title>
    <url>/2020/07/08/autotest-is-a-working-culture-first/</url>
    <content><![CDATA[<blockquote>
<p>è‡ªå¤ä»¥æ¥ï¼Œäººç±»å°±æœ‰åˆ›é€ è‡ªåŠ¨è£…ç½®ä»¥å‡è½»æˆ–ä»£æ›¿äººåŠ³åŠ¨çš„æƒ³æ³•ã€‚è‡ªåŠ¨åŒ–æŠ€æœ¯çš„äº§ç”Ÿå’Œå‘å±•ç»å†äº†æ¼«é•¿çš„å†å²è¿‡ç¨‹ã€‚å¤ä»£ä¸­å›½çš„é“œå£¶æ»´æ¼ï¼ˆç®€ç§°æ¼å£¶ï¼‰ã€æŒ‡å—è½¦ä»¥åŠ17ä¸–çºªæ¬§æ´²å‡ºç°çš„é’Ÿè¡¨å’Œé£ç£¨æ§åˆ¶è£…ç½®ï¼Œè™½ç„¶éƒ½æ˜¯æ¯«æ— è”ç³»çš„å‘æ˜ï¼Œä½†å¯¹è‡ªåŠ¨åŒ–æŠ€æœ¯çš„å½¢æˆå´èµ·åˆ°äº†å…ˆå¯¼ä½œç”¨ã€‚</p>
</blockquote>
<h2 id="è‡ªåŠ¨åŒ–æµ‹è¯•ä¹‹ç—›">è‡ªåŠ¨åŒ–æµ‹è¯•ä¹‹ç—›</h2>
<p>æœ€è¿‘åœ¨å¸®åŠ©ä¸€ä¸ªå›¢é˜Ÿæ¢³ç†å›¢é˜Ÿæµ‹è¯•æ•ˆç‡çš„é—®é¢˜ï¼Œå…¶ç›®æ ‡æ˜¯æå‡è¯¥å›¢é˜Ÿçš„æµ‹è¯•æ•ˆç‡ã€‚åœ¨æ•´ä¸ªæ¢³ç†çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ä¸€ä»¶éå¸¸æœ‰æ„æ€çš„äº‹æƒ…ï¼šè¿™ä¸ªå›¢é˜ŸåŸºæœ¬ä¸Šæ²¡æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¤§éƒ¨åˆ†çš„æµ‹è¯•æ‰‹æ®µè¿˜æ˜¯æ‰‹å·¥æµ‹è¯•åŠ CRã€‚æ›´ä¸ºæœ‰æ„æ€çš„äº‹æƒ…æ˜¯ï¼šå›¢é˜Ÿæˆå‘˜å¤§éƒ½å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•æ¯”è¾ƒæŠµè§¦ï¼Œè®¤ä¸ºè‡ªåŠ¨åŒ–æµ‹è¯•çš„æˆæœ¬è¾ƒå¤§ï¼Œä¸”çœ‹ä¸åˆ°æ”¶ç›Šã€‚</p>
<p>å›æƒ³è¿‡å»å‡ å¹´çš„æµ‹è¯•å·¥ä½œï¼Œæˆ‘å‘ç°ï¼Œå‡ ä¹æ‰€æœ‰çš„æµ‹è¯•å›¢é˜Ÿåœ¨é¢å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•æ—¶éƒ½ä¼šå­˜åœ¨ç±»ä¼¼çš„é—®é¢˜ï¼š<strong>å¸Œæœ›è‡ªåŠ¨åŒ–æµ‹è¯•æå‡æ•ˆç‡ï¼Œä½†æ˜¯æ‰§è¡Œæ—¶å´å‘ç°è‡ªåŠ¨åŒ–æµ‹è¯•åè€Œæ²¡æœ‰æå‡æ•ˆç‡ï¼Œå› æ­¤æ…¢æ…¢åºŸå¼ƒè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œç›´è‡³æŠµè§¦è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œåˆ°æœ€åè‡ªåŠ¨åŒ–æµ‹è¯•å˜æˆä¸€ç§â€œå½¢è€Œä¸Šâ€èˆ¬çš„å­˜åœ¨</strong>ã€‚æˆ‘å§‘ä¸”ç§°è¿™ç§ç°è±¡ä¸ºâ€”â€”<strong>è‡ªåŠ¨åŒ–æµ‹è¯•ä¹‹ç—›</strong>ã€‚</p>
<span id="more"></span>
<p>è‡ªåŠ¨åŒ–æµ‹è¯•ä¹‹ç—›çš„é—®é¢˜æ ¹æºç©¶ç«Ÿæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿäº‹æƒ…çœŸçš„å¦‚æœ‰äº›å›¢é˜Ÿæ‰€è¯´ï¼šè‡ªåŠ¨åŒ–caseçš„æˆæœ¬å¤ªå¤§ï¼Œåˆæ²¡æœ‰æ”¶ç›Šå—ï¼Ÿ</p>
<h2 id="ä¾ å®¢å²›çš„æ•…äº‹">ä¾ å®¢å²›çš„æ•…äº‹</h2>
<blockquote>
<p>è‡ªä»ä¸‰åå¹´å‰å¼€å§‹ï¼Œæ¯è¿‡åå¹´ï¼Œå°±ä¼šæœ‰å¤§æ‰¹çš„æ­¦æ—é«˜æ‰‹è¢«è¯·å»ä¾ å®¢å²›å–è…Šå…«ç²¥ï¼Œä¸ä½†è¿™äº›æ­¦æ—é«˜æ‰‹ä»æ­¤éƒ½ä¸€å»ä¸å¤è¿”ï¼Œè€Œä¸”ä¾ å®¢å²›è¿˜æ¼”å˜æˆä¸ºäº†èµå–„ç½šæ¶çš„è¡ŒåŠ¨ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæ±Ÿæ¹–ä¸­äººäººè‡ªå±ï¼Œæ¯åˆ°åå¹´ä¹‹æœŸï¼Œå„å¤§é—¨æ´¾çš„æŒé—¨å°±çº·çº·å¯»æ‰¾æ›¿èº«ï¼Œæ¥èº²é¿ä¾ å®¢å²›çš„èµå–„ç½šæ¶ã€‚ä½†æ˜¯ï¼Œå½“è¿™äº›æ­¦æ—é«˜æ‰‹åˆ°äº†ä¾ å®¢å²›ä¹‹åæ‰ç»ˆäºæ­å¼€äº†ä¾ å®¢å²›çš„ç§˜å¯†ã€‚</p>
<p>åŸæ¥å²›ä¸Šåˆ»æœ‰æ­¦æ—ç§˜ç±ï¼Œç”±äºå²›ä¸»äººå‚ä¸é€ç§˜ç±ï¼Œæ‰€ä»¥æ‰ä¼šè¯·æ­¦æ—é«˜æ‰‹åˆ°å²›ä¸Šå…±åŒå‚æ‚Ÿã€‚å¹¶ä¸”ç”±äºå²›ä¸Šçš„â€˜æ–­è‚ èš€éª¨è…å¿ƒè‰â€™åå¹´ä¸€å¼€èŠ±ï¼Œæ­¤è‰è‹¥å†é…ä»¥å…¶ä»–ä½ä½¿ä¹‹è¯ï¼Œç†¬æˆçƒ­ç²¥ï¼Œæœåäºç»ƒæ­¦ä¹‹å£«å¤§æœ‰è¡¥ç›Šï¼Œå› æ­¤æ‰æœ‰äº†æ¯åå¹´é‚€è¯·ä¸€æ¬¡çš„æƒ¯ä¾‹ã€‚è¢«é‚€ä¸Šå²›çš„äººä¹Ÿå¹¶ä¸æ˜¯é‡å®³ï¼Œè€Œæ˜¯ç—´è¿·äºæ­¦å­¦ï¼Œéƒ½ä¸æƒ³å›å»ç½¢äº†ã€‚</p>
<p><strong><div align="right">â€”â€”ã€Šä¾ å®¢è¡Œã€‹</div></strong></p>
</blockquote>
<p>æœ‰å¤šå°‘æ—¶å€™ï¼Œæˆ‘ä»¬å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„è®¤è¯†å’Œæ±Ÿæ¹–äººå£«å¯¹ä¾ å®¢å²›çš„è®¤è¯†æ˜¯ç±»ä¼¼çš„å‘¢ï¼Ÿ<br>
æœ‰å¤šå°‘æ—¶å€™ï¼Œæ˜æ˜æ˜¯ä¾ å®¢å²›ç››æƒ…æ‰€é‚€ï¼Œæ±Ÿæ¹–ä¹‹ä¸Šå´äººäººèº²è€Œé¿ä¹‹å‘¢ï¼Ÿ<br>
æœ‰å¤šå°‘æ—¶å€™ï¼Œæ˜æ˜æ˜¯å¯¹è‡ªå·±å¤§æœ‰è¡¥ç›Šçš„è…Šå…«ç²¥ï¼Œæ‰€æœ‰è¢«é‚€çš„æ­¦æ—äººå£«å´ä¸æ•¢å–ä¸‹å‘¢ï¼Ÿ</p>
<p>æˆ–è®¸ä½ ä¼šåé©³ï¼Œä½†å‡¡æœ‰ä¸Šå²›çš„æ­¦æ—äººå£«æ‰©æ•£ä¸€ä¸‹äº‹å®çœŸç›¸ï¼Œé‚£æ•´ä¸ªæ±Ÿæ¹–ä¹Ÿä¸è‡³äºå¦‚æ­¤ï¼Ÿ<br>
ä½†æ˜¯ï¼Œæ­£å¦‚æœ¬æ–‡å¼€ç¯‡æ‰€è¿°ï¼Œæ•´ä¸ªäººç±»ç¤¾ä¼šéƒ½æ˜¯è¯æ˜è‡ªåŠ¨åŒ–çš„å†å²ï¼Œä¸ºä»€ä¹ˆè¿˜æœ‰é‚£ä¹ˆå¤šçš„å›¢é˜Ÿåœ¨è´¨ç–‘è‡ªåŠ¨åŒ–æµ‹è¯•å‘¢ï¼Ÿ<br>
ä¸ºä»€ä¹ˆæœ‰é‚£ä¹ˆå¤šçš„æµ‹è¯•å®è·µå·²ç»è¯æ˜äº†è‡ªåŠ¨åŒ–æµ‹è¯•çš„æˆæ•ˆâ€”â€”ä¾‹å¦‚è°·æ­Œçš„<a href="https://mike-bland.com/2012/07/10/test-mercenaries.html"><strong>Test Mercenaries</strong></a>è®¡åˆ’ï¼Œè¿˜æ˜¯æœ‰é‚£ä¹ˆå¤šçš„å›¢é˜Ÿå¯¹è‡ªåŠ¨åŒ–æµ‹è¯•å¿ƒå­˜è´¨ç–‘å‘¢ï¼Ÿ</p>
<p>æ­£å¦‚Sam NewManåœ¨<a href="https://samnewman.io/books/monolith-to-microservices/"><strong>Monolith To Microservices</strong></a>ä¸€ä¹¦ä¸­è¯´çš„é‚£æ ·ï¼š<a href="https://wangwei1237.gitee.io/monolith-to-microservices/docs/The_Monolith.html#ref_denigrating_monolith">ä¸€æ—¦æˆ‘ä»¬é™·å…¥ç³»ç»Ÿæ€§æŠ¹é»‘å•ä½“çš„é™·é˜±ï¼Œæˆ‘ä»¬å°±ä¼šé¢ä¸´å¾ˆå¤§çš„éº»çƒ¦</a>ã€‚</p>
<h2 id="è‡ªåŠ¨åŒ–æµ‹è¯•çš„å®šä½">è‡ªåŠ¨åŒ–æµ‹è¯•çš„å®šä½</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»3ä¸ªæ–¹é¢æ¥é˜è¿°è‡ªåŠ¨åŒ–æµ‹è¯•çš„å®šä½ã€‚</p>
<h3 id="æµ‹è¯•çš„4å¤§æ´»åŠ¨">æµ‹è¯•çš„4å¤§æ´»åŠ¨</h3>
<p>æ ¹æ®ä¹”æ¢è€å¸ˆçš„<a href="https://item.jd.com/12512514.html">ã€ŠæŒç»­é›†æˆ2.0ã€‹</a>ä¸€ä¹¦ä¸­æ‰€è¿°ï¼Œæµ‹è¯•é¢†åŸŸæœ‰4å¤§åŸºæœ¬æ´»åŠ¨ï¼Œå¦‚<a href="#f1">å›¾1</a>æ‰€ç¤ºã€‚</p>
<p><span id="f1"><img src="/2020/07/08/autotest-is-a-working-culture-first/f1.png" alt></span></p>
<p>å›¾1. æµ‹è¯•çš„4å¤§åŸºæœ¬æ´»åŠ¨</p>
<p>å…¶ä¸­ï¼Œå„æ´»åŠ¨çš„åŸºæœ¬å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>é—®é¢˜è®¤çŸ¥</strong>ï¼šå¯¹ä¸šåŠ¡é—®é¢˜æœ¬èº«çš„ç†è§£å’Œè®¤çŸ¥ï¼ŒåŒ…æ‹¬éœ€æ±‚ç†è§£ï¼ŒæŠ€æœ¯è®¾è®¡ç†è§£â€¦â€¦</li>
<li><strong>åˆ†æ</strong>ï¼šæµ‹è¯•åˆ†æå’Œæµ‹è¯•è®¾è®¡ï¼Œæ ¹æ®å¯¹é—®é¢˜çš„è®¤çŸ¥ï¼Œè®¾è®¡æµ‹è¯•æ–¹æ¡ˆå’Œç”¨ä¾‹ï¼Œä¿è¯ä¸šåŠ¡è´¨é‡</li>
<li><strong>æ‰§è¡Œ</strong>ï¼šæ‰§è¡Œåˆ†æé˜¶æ®µçš„æµ‹è¯•ç”¨ä¾‹ï¼Œäº§å‡ºæµ‹è¯•ç»“è®º</li>
<li><strong>å†³ç­–</strong>ï¼šæ ¹æ®æµ‹è¯•ç»“è®ºè¿›è¡Œç›¸å…³å†³ç­–ï¼ŒåŒ…æ‹¬æ˜¯å¦å­˜åœ¨é£é™©ï¼Œæ˜¯å¦è¾¾åˆ°ä¸Šçº¿æ ‡å‡†â€¦â€¦</li>
</ul>
<h3 id="æ•æ·æµ‹è¯•4è±¡é™">æ•æ·æµ‹è¯•4è±¡é™</h3>
<p>æ ¹æ®æµ‹è¯•æ‰€æ”¯æŒçš„å¯¹è±¡ï¼Œæµ‹è¯•å¯ä»¥åˆ†ä¸ºï¼š<a href="https://www.tutorialspoint.com/agile_testing/agile_testing_quadrants.htm">é¢å‘ä¸šåŠ¡çš„æµ‹è¯•å’Œé¢å‘ç ”å‘çš„æµ‹è¯•</a>ã€‚<a href="http://www.exampler.com/old-blog/2003/08/22/#agile-testing-project-2">Brian Marick</a>æ ¹æ®è¿™ä¸¤ç§æµ‹è¯•ç±»å‹æå‡ºäº†<strong>æ•æ·æµ‹è¯•4è±¡é™</strong>çš„æ¦‚å¿µï¼Œå¦‚<a href="#f2">å›¾2</a>æ‰€ç¤ºã€‚</p>
<p><span id="f2"><img src="/2020/07/08/autotest-is-a-working-culture-first/f2.png" alt></span></p>
<p>å›¾2. æ•æ·æµ‹è¯•4è±¡é™</p>
<p>åœ¨<a href="#f2">å›¾2</a>ä¸­ï¼š</p>
<ul>
<li><strong>åŠŸèƒ½éªŒæ”¶æµ‹è¯•</strong>ï¼šä»ç”¨æˆ·çš„è§’åº¦æ¥éªŒæ”¶åŠŸèƒ½</li>
<li><strong>ç¬¬ä¸‰è±¡é™çš„è‡ªåŠ¨åŒ–æµ‹è¯•</strong>ï¼šç ”å‘å›¢é˜Ÿå¯¹è‡ªæˆ‘è½¯ä»¶æŠ€æœ¯å®ç°çš„éªŒè¯</li>
</ul>
<h3 id="è‡ªåŠ¨åŒ–æµ‹è¯•çš„4è¦ç´ ">è‡ªåŠ¨åŒ–æµ‹è¯•çš„4è¦ç´ </h3>
<p>åœ¨æµ‹è¯•çš„4å¤§æ´»åŠ¨ä¸­ï¼Œâ€œæ‰§è¡Œâ€ç¯èŠ‚ä¼šå­˜åœ¨å¤§é‡çš„é‡å¤å·¥ä½œï¼Œè€Œå…¶ä¸­çš„å¤§éƒ¨åˆ†å·¥ä½œéƒ½å¯ä»¥ç”±æœºå™¨æ¥æ‰¿æ‹…ã€‚æ­¤æ—¶å°±å¯ä»¥å‘æŒ¥è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿ï¼Œé‡Šæ”¾äººçš„é‡å¤åŠ³åŠ¨ã€‚</p>
<p>è€Œåœ¨Brian Marickçš„æ•æ·æµ‹è¯•4è±¡é™ä¸­ï¼Œç¬¬2ã€ç¬¬3è±¡é™çš„æµ‹è¯•ç±»å‹ä¹Ÿå¯ä»¥å‘æŒ¥è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿ï¼Œæå‡æ•´ä¸ªæµ‹è¯•æ‰§è¡Œçš„æ•ˆç‡ã€‚</p>
<p>å¯¹äºè‡ªåŠ¨åŒ–æµ‹è¯•è€Œè¨€ï¼Œæˆ‘æ€»ç»“äº†è‡ªåŠ¨åŒ–æµ‹è¯•çš„4è¦ç´ ï¼šè‡ªåŠ¨éƒ¨ç½²ã€è‡ªåŠ¨æ‰§è¡Œã€è‡ªåŠ¨æ ¡éªŒã€è‡ªåŠ¨æŠ¥å‘Šï¼Œå¦‚<a href="#f3">å›¾3</a>æ‰€ç¤ºã€‚</p>
<p><span id="f3"><img src="/2020/07/08/autotest-is-a-working-culture-first/f3.gif" alt></span></p>
<p>å›¾3. è‡ªåŠ¨åŒ–æµ‹è¯•çš„4è¦ç´ </p>
<h2 id="è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¯¯åŒº">è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¯¯åŒº</h2>
<p>æ¥ä¸‹æ¥ï¼Œç€é‡æ¥è¯´ä¸€ä¸‹æˆ‘æ‰€è§åˆ°ã€å¬åˆ°çš„ä¸€äº›å…³äºè‡ªåŠ¨åŒ–æµ‹è¯•çš„è¯¯åŒºã€‚</p>
<h3 id="è¯¯åŒº1ï¼šåªçœ‹çŸ­æœŸæ•ˆç‡æ”¶ç›Š">è¯¯åŒº1ï¼šåªçœ‹çŸ­æœŸæ•ˆç‡æ”¶ç›Š</h3>
<p>æœ‰çš„å›¢é˜Ÿå¸Œæœ›è‡ªåŠ¨åŒ–caseæ¥æå‡æµ‹è¯•æ•ˆç‡ï¼Œå½“ç„¶ï¼Œè¿™æ˜¯è‡ªåŠ¨åŒ–caseå¯ä»¥è·å–çš„æ”¶ç›Šä¹‹ä¸€ã€‚è¿™äº›å›¢é˜Ÿè¿˜ä¼šé’ˆå¯¹è‡ªåŠ¨åŒ–å¯¹æ•ˆç‡çš„æå‡åˆ¶å®šå®šé‡çš„æŒ‡æ ‡ï¼Œç„¶åæ¯å‘¨ï¼Œæ¯æœˆï¼Œæ¯å­£åº¦ï¼ˆå½“ç„¶ï¼Œæœ‰äº›äººè¿˜æ²¡æœ‰åšæŒåˆ°å­£åº¦æœ«å°±ä¸åšäº†ï¼‰æ¥è·Ÿè¿›ã€‚</p>
<p>ä½†æ˜¯ï¼Œæ­£å¦‚Sam Newmanåœ¨<a href="https://wangwei1237.gitee.io/monolith-to-microservices/docs/How_Will_You_Know_if_the_Transition_Is_Working.html#%E5%AE%9A%E9%87%8F%E6%8C%87%E6%A0%87"><em>Monolith To Microservices</em></a>ä¸€ä¹¦ä¸­æ‰€è¯´ï¼š</p>
<blockquote>
<p>æœ‰çš„æŒ‡æ ‡å¯èƒ½å¾ˆéš¾åœ¨çŸ­æ—¶é—´å†…æœ‰é‡çš„å˜åŒ–ã€‚</p>
<p>å¦‚æœåœ¨å¾®æœåŠ¡è¿ç§»çš„å‰å‡ ä¸ªæœˆå°±çœ‹åˆ°cycle timeçš„å¤§å¹…æ”¹å–„ï¼Œæˆ‘ä¼šæ„Ÿåˆ°æƒŠè®¶ã€‚</p>
<p>å®é™…ä¸Šï¼Œæˆ‘æ›´å¸Œæœ›çœ‹åˆ°cycle timeä¼šåœ¨è¿ç§»çš„åˆæœŸå˜å¾—æ›´ç³Ÿã€‚</p>
<p>å› ä¸ºå›¢é˜Ÿéœ€è¦ä¸æ–­é€‚åº”æ–°çš„å·¥ä½œæ–¹å¼ï¼Œå› æ­¤çŸ­æœŸå†…å¯¹å·¥ä½œæ–¹å¼çš„å˜é©é€šå¸¸ä¼šå¯¹ç”Ÿäº§æ•ˆç‡äº§ç”Ÿè´Ÿé¢å½±å“ã€‚</p>
</blockquote>
<p>è‡ªåŠ¨åŒ–æµ‹è¯•ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆéš¾åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å°±èƒ½çœ‹åˆ°æ”¶ç›Šçš„å·¥å…·ï¼Œå¹¶ä¸”è¿˜éœ€è¦ä»˜å‡ºä¸€äº›æˆæœ¬ï¼šéœ€è¦å­¦ä¹ è‡ªåŠ¨åŒ–æµ‹è¯•çš„é…å¥—å·¥å…·ï¼Œç¼–å†™è‡ªåŠ¨åŒ–caseçš„æ¡†æ¶ï¼Œè°ƒåº¦è‡ªåŠ¨åŒ–æ‰§è¡Œçš„ç›¸å…³å·¥å…·â€¦â€¦</p>
<p>å› æ­¤ï¼Œæœ€å¼€å§‹çš„ä¸€æ®µæ—¶é—´å†…ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•æœ‰å¯èƒ½ä¼šé™ä½æµ‹è¯•æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦æŒæ¡è¿™äº›æŠ€å·§ï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°æ±½è½¦ç¡®å®æ¯”é©¬è½¦è·‘çš„å¿«ï¼Œéš¾é“ä¸æ˜¯å—ï¼Ÿ</p>
<p>çŸ­æœŸæ”¶ç›Šä¸æ˜æ˜¾è¿˜æœ‰å¦å¤–ä¸€ä¸ªå› ç´ ï¼šçŸ­æœŸå†…é€‚åˆè‡ªåŠ¨åŒ–æµ‹è¯•çš„é¡¹ç›®åˆ†å¸ƒå¹¶ä¸å‡åŒ€ã€‚å¦‚<a href="#f3">å›¾3</a>æ‰€ç¤ºï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•åœ¨<a href="#%E6%B5%8B%E8%AF%95%E7%9A%844%E5%A4%A7%E6%B4%BB%E5%8A%A8">æµ‹è¯•4å¤§æ´»åŠ¨</a>ä¸­çš„æ‰§è¡Œé˜¶æ®µä»¥åŠ<a href="#%E6%95%8F%E6%8D%B7%E6%B5%8B%E8%AF%954%E8%B1%A1%E9%99%90">æ•æ·æµ‹è¯•4è±¡é™</a>ä¸­çš„ç¬¬2ã€ç¬¬3è±¡é™æ‰èƒ½å‘æŒ¥å…¶ä½œç”¨ã€‚ä½†æ˜¯å¯¹äºå‘¨ã€æœˆç»´åº¦çš„é¡¹ç›®è€Œè¨€ï¼Œèƒ½æœ‰å¤šå°‘é¡¹ç›®ä¼šè®©è‡ªåŠ¨åŒ–æµ‹è¯•æœ‰ç”¨æ­¦ä¹‹åœ°å‘¢ï¼Ÿæ¥ä¸‹æ¥å‘ç”Ÿçš„äº‹æƒ…å°±æ˜¯å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„å®šé‡æŒ‡æ ‡è€Œè¨€ï¼Œæ²¡æœ‰æ•°æ®ä¸Šçš„å˜åŒ–ï¼Œç„¶ååçš„äº‹æƒ…å°±ä¼šå‘ç”Ÿäº†ï¼Œå›¢é˜Ÿæ…¢æ…¢å°±å¤±å»äº†è€å¿ƒâ€¦â€¦</p>
<h3 id="è¯¯åŒº2ï¼šåªçœ‹ä¸ªäººæ•ˆç‡æ”¶ç›Š">è¯¯åŒº2ï¼šåªçœ‹ä¸ªäººæ•ˆç‡æ”¶ç›Š</h3>
<p>åœ¨è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ä¹‹å‰ï¼Œå¤§å¤šæ•°å›¢é˜Ÿéƒ½ä¼šé€‰æ‹©ä¸€äº›ä¸šåŠ¡æ¥è¯•ç‚¹ï¼Œç„¶åæ ¹æ®è¯•ç‚¹ä¸šåŠ¡çš„åé¦ˆæ¥ç¡®å®šæ˜¯å¦è¦å¤§èŒƒå›´æ¨å¹¿ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨å®é™…è¯•ç‚¹çš„æ—¶å€™ï¼Œä¼šå‡ºç°å¾ˆå¤šå½±å“å› ç´ ï¼šä¾‹å¦‚æµ‹è¯•äººå‘˜å‰æœŸæ²¡æœ‰æ¥å…¥æµ‹è¯•äº†è§£ï¼Œæµ‹è¯•äººå‘˜æ²¡æœ‰æå‰å’Œç ”å‘äººå‘˜ç¡®å®šæ¥å£å®šä¹‰ï¼Œæµ‹è¯•äººå‘˜å‰æœŸåœ¨è·Ÿè¿›å…¶ä»–é¡¹ç›®â€¦â€¦</p>
<p>å¦‚ä¸Šçš„å› ç´ ä¼šå¯¼è‡´å½“ä¸€ä¸ªæµ‹è¯•é¡¹ç›®åˆ°æ¥æ—¶ï¼Œæµ‹è¯•äººå‘˜æ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´æ¥æ¶ˆåŒ–é‚£äº›éœ€è¦åœ¨å‰æœŸæ‰€ä»˜å‡ºçš„å­¦ä¹ æˆæœ¬ã€‚åœ¨é¢å¯¹ä¸€ä¸ªä¸ªç´§æ€¥çš„é¡¹ç›®å’Œéœ€è¦ä»˜å‡ºä¸€å®šçš„æˆæœ¬æ—¶ï¼Œè¿™äº›è¯•ç‚¹çš„æµ‹è¯•äººå‘˜ä¼šè‡ªç„¶è€Œç„¶çš„ç»§ç»­ä½¿ç”¨æ—§æœ‰çš„æ‰‹å·¥æµ‹è¯•çš„æ–¹å¼æ¥ä¿è¯é¡¹ç›®çš„å¿«é€Ÿè·Ÿè¿›ã€‚</p>
<p>è¯•ç‚¹é¡¹ç›®çš„æµ‹è¯•äººå‘˜ä¼šä»è‡ªèº«çš„åˆ©ç›Šå‡ºå‘æ¥é€‰æ‹©æµ‹è¯•æ–¹æ¡ˆã€‚ç„¶åè¿™äº›è¯•ç‚¹çš„æµ‹è¯•äººå‘˜å°±ä¼šæ±‡æŠ¥è¯´ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•å¤ªæµªè´¹æ—¶é—´äº†ï¼Œæ²¡æ³•æé«˜æ•ˆç‡ã€‚å¦‚æœç®¡ç†è€…ä¸ä»”ç»†ç»§ç»­å’Œè¿™äº›ä¸€çº¿çš„åŒå­¦æ·±å…¥æ¢è®¨ï¼Œé‚£ä¹ˆæœ€ç»ˆå°±ä¼šæ ¹æ®è¯•ç‚¹åŒå­¦çš„ç»“è®ºå¾—å‡ºä¸€ä¸ªåç¦»äº‹å®çš„ç»“è®ºï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ç¡®å®æ— æ³•æå‡æ•ˆç‡ã€‚</p>
<p>ç„¶è€Œï¼Œä¸Šè¿°çš„ä¸€äº›è¯•ç‚¹äººå‘˜é‡åˆ°çš„é—®é¢˜ä»æœ¬è´¨ä¸Šè®²ï¼Œå¹¶ä¸æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•æœ¬èº«çš„é—®é¢˜ï¼Œè¿™é‡Œæ¶‰åŠåˆ°æ›´å¤šçš„æµç¨‹ã€æ²Ÿé€šã€åä½œçš„é—®é¢˜ã€‚ä¸æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•ä¸èƒ½æå‡æ•ˆç‡ï¼Œè€Œæ˜¯å½“å‰çš„ç¯å¢ƒä¸å…è®¸è‡ªåŠ¨åŒ–æµ‹è¯•å‘æŒ¥ä½œç”¨ã€‚</p>
<p>æ³¥æ³çš„é“è·¯ä¸Šï¼Œæ˜¯é©¬è½¦å¿«å‘¢è¿˜æ˜¯è·‘è½¦å¿«å‘¢ï¼Ÿ</p>
<p>åœ¨æ‰€æœ‰äººåªä»è‡ªèº«åˆ©ç›Šæ¥è€ƒè™‘é—®é¢˜ï¼Œè€Œå¿½ç•¥å…¶æ‰€å¤„çš„ç¯å¢ƒæ—¶ï¼Œå°±ä¼šå‡ºç°è¿™ç§ï¼šé©¬è½¦æ¯”è·‘è½¦å¿«çš„æ»‘ç¨½ç»“è®ºã€‚</p>
<h3 id="è¯¯åŒº3ï¼šæˆæœ¬æ ¸ç®—æ ‡å‡†ä¸ä¸€è‡´">è¯¯åŒº3ï¼šæˆæœ¬æ ¸ç®—æ ‡å‡†ä¸ä¸€è‡´</h3>
<p>å¦‚å‰æ‰€è¿°ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯éœ€è¦å­¦ä¹ æˆæœ¬çš„ï¼Œä¸ç»å†é£é›¨æ€ä¹ˆè§å½©è™¹ï¼Ÿè‡ªåŠ¨åŒ–æµ‹è¯•å’Œæ‰‹å·¥æµ‹è¯•çš„ROIæƒè¡¡å¦‚<a href="#f4">å›¾4</a>æ‰€ç¤ºã€‚</p>
<p><span id="f4"><img src="/2020/07/08/autotest-is-a-working-culture-first/f4.png" alt></span></p>
<p>ä½†æ˜¯åœ¨æˆ‘çš„è§‚å¯Ÿä¸­ï¼Œæˆ‘å‘ç°å¤§å¤šæ•°å›¢é˜Ÿåœ¨æ ¸ç®—æ‰‹å·¥æµ‹è¯•å’Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„æˆæœ¬æ—¶é‡‡ç”¨çš„æ ‡å‡†å¹¶ä¸ä¸€è‡´ã€‚ä»–ä»¬ä¼šå¿½ç•¥ï¼šæ‰‹å·¥æµ‹è¯•é‡å¤æµ‹è¯•çš„æˆæœ¬ï¼Œä¼šå¿½ç•¥æ‰‹å·¥æµ‹è¯•é‡å¤ä¹¦å†™æµ‹è¯•æŠ¥å‘Šçš„æˆæœ¬â€¦â€¦ä½†æ˜¯ä»–ä»¬ä¼šç»™è‡ªåŠ¨åŒ–æµ‹è¯•è¿½åŠ ä¸Šï¼šä¸Šä¸‹æ¸¸ç¯å¢ƒä¾èµ–æˆæœ¬ï¼Œç¯å¢ƒéƒ¨ç½²æˆæœ¬ï¼Œæ¥å£å®šä¹‰ä¸å®Œå¤‡çš„æˆæœ¬ï¼Œè‡ªåŠ¨åŒ–ç”¨ä¾‹çš„ç»´æŠ¤æˆæœ¬å¤ªå¤§äº†â€¦â€¦</p>
<p>ç‚¹ä¸€ä¸‹æœ€ç®€å•ï¼Œæˆæœ¬æœ€ä½ï¼Œç‚¹ç‚¹å§ã€‚</p>
<p>å½“å¤œæ·±äººé™çš„æ—¶å€™ï¼Œä½ å†ç»†æƒ³è¿™äº›è¯æœ¯ã€ä½ ç»†æƒ³â€¦â€¦å°±ä¼šå‘ç°è¿™äº›æˆæœ¬å’Œè‡ªåŠ¨åŒ–æµ‹è¯•ä»€ä¹ˆå…³ç³»ï¼Œæ‰‹å·¥æµ‹è¯•ä¸ä¹Ÿéœ€è¦è¿™äº›æˆæœ¬å—ï¼Ÿè¦æ˜¯ä¸€ä¸ªé¡¹ç›®è¦æµ‹å¤šè½®ï¼Œéš¾ä¸æˆæ¯æ¬¡éƒ½ç‚¹ç‚¹ï¼ŸOHï¼Œå½“ç„¶ä¸æ˜¯äº†ï¼Œä¸‹ä¸€æ¬¡åªç‚¹é‚£äº›ä¸Šä¸€æ¬¡å¤±è´¥çš„ç”¨ä¾‹å°±å¥½äº†â€¦â€¦OMGâ€¦â€¦</p>
<p>æ‰‹å·¥ç”¨ä¾‹å°±ä¸éœ€è¦ç»´æŠ¤æˆæœ¬ï¼Ÿä¸è¿‡ä»æˆ‘çš„è§‚å¯Ÿå‘ç°ï¼Œç¡®å®ä¸éœ€è¦ã€‚å› ä¸ºæœ‰äº›å›¢é˜Ÿå‹æ ¹å°±ä¸å†™æ‰‹å·¥ç”¨ä¾‹ï¼Œå½“ç„¶å°±è°ˆä¸ä¸Šæˆæœ¬äº†ã€‚è¿˜æœ‰çš„å›¢é˜Ÿå³ä¾¿æœ‰æ‰‹å·¥ç”¨ä¾‹ä¹Ÿä»æ¥ä¸ä¼šç»´æŠ¤ï¼Œä¸‹ä¸€ä¸ªåŒå­¦æµ‹è¯•ç±»ä¼¼çš„é¡¹ç›®çš„æ—¶å€™ï¼Œå‚è€ƒä¸€ä¸‹ä¹‹å‰çš„ç”¨ä¾‹ï¼Œç„¶åè‡ªå·±é‡æ–°å†™ç”¨ä¾‹ã€‚</p>
<h3 id="è¯¯åŒº4ï¼šä¸å…³æ³¨å›¢é˜Ÿæ”¶ç›Š">è¯¯åŒº4ï¼šä¸å…³æ³¨å›¢é˜Ÿæ”¶ç›Š</h3>
<p>åœ¨è¯¯åŒº2ä¸­ï¼Œè¯•ç‚¹é¡¹ç›®çš„æµ‹è¯•äººå‘˜åªæ ¹æ®è‡ªå·±çš„ä¸ªäººæ”¶ç›Šæ¥åšæµ‹è¯•æ–¹æ¡ˆçš„é€‰æ‹©ã€‚ä½†æ˜¯å›¢é˜Ÿä¸­çš„ä¸ªäººæ˜¯ç›¸äº’è”ç³»çš„ï¼Œå›¢é˜Ÿå†…éƒ¨çš„é¡¹ç›®ä¹Ÿä¼šæ˜¯è¿ç»­çš„ï¼Œè€Œä¸æ˜¯ç¦»æ•£çš„ã€‚</p>
<p>æŸä¸ªäººæµ‹è¯•çš„æŸä¸ªé¡¹ç›®ï¼Œä¸‹ä¸€æ¬¡å¯èƒ½å°±æ¢å…¶ä»–äººæ¥æµ‹è¯•äº†ã€‚æŸä¸ªçŸ­æœŸæ¥çœ‹ä¸ä¼šå˜åŒ–çš„é¡¹ç›®ï¼Œå¯èƒ½æ•°æœˆä¹‹åå°±ä¼šä¿®æ”¹äº†ã€‚é¡¹ç›®æ¯æ¬¡éƒ½ä¿®æ”¹ä¸€ç‚¹ç‚¹ï¼Œå¯èƒ½åŠå¹´ä¹‹åå°±ä¼šæœ‰ä¸Šç™¾ä¸ªä¿®æ”¹ç‚¹äº†â€¦â€¦</p>
<p>å¦‚æœç«™åœ¨å›¢é˜Ÿçš„è§’åº¦è€ƒè™‘ï¼Œæˆ‘ä»¬å›¢é˜Ÿå†…æ¯ä¸ªäººç¼–å†™çš„è‡ªåŠ¨åŒ–ç”¨ä¾‹æœ‰æ—¶å€™è™½ç„¶å¯¹ä¸ªäººè€Œè¨€ROIå¾ˆä½ï¼Œä½†æ˜¯å¯¹å›¢é˜Ÿçš„ROIå´å¯èƒ½éå¸¸å¤§ã€‚</p>
<p>å¦‚æœæ¯ä¸€ä¸ªå˜æ›´å¾ˆå°çš„é¡¹ç›®éƒ½ä¸ç¼–å†™è‡ªåŠ¨åŒ–ç”¨ä¾‹ï¼Œé‚£ä¹ˆå½“é¡¹ç›®åšå¤§çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿ<br>
å¦‚æœæ¯ä¸ªé¡¹ç›®éƒ½æ˜¯ä¸Šçº¿åå°±ä¸ä¿®æ”¹äº†ï¼Œé‚£å½“è¿™ä¸ªé¡¹ç›®çš„ä»£ç è¦ä¸‹çº¿çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿ</p>
<p>å½“ç„¶ï¼Œè¿™äº›å¯¹äºä¸ªäººè€Œè¨€æ˜¯æ— éœ€å…³æ³¨çš„äº‹æƒ…ï¼Œå› ä¸ºè°çŸ¥é“æ¥ä¸‹æ¥çš„æµ‹è¯•è¿˜æ˜¯ä¸æ˜¯ä½ è´Ÿè´£ï¼Ÿä½†æ˜¯ï¼Œæœ€ç»ˆå´è¿˜æ˜¯è¿™ä¸ªå›¢é˜Ÿæ¥è´Ÿè´£çš„ï¼Œä¸æ˜¯å—ï¼Ÿå½“æ‰€æœ‰è¿™äº›éƒ½æ²¡æœ‰ä»”ç»†æ‰§è¡Œçš„æ—¶å€™ï¼Œåœ¨é‡åˆ°å¤§çš„é¡¹ç›®ï¼Œåœ¨é‡åˆ°å›¢é˜ŸæŠ€æœ¯é‡æ„çš„é¡¹ç›®æ—¶ï¼Œå¯¹äºå›¢é˜Ÿè€Œè¨€ï¼Œä¸€ä¸ªæ€ªå¼‚çš„ç°è±¡å°±å‘ç”Ÿäº†ï¼šå¤§å¤šæ•°å›¢é˜Ÿéƒ½åœ¨è¯•å›¾å¯»æ‰¾å¦å¤–çš„æµ‹è¯•æ–¹æ³•æ¥å¼¥è¡¥è‡ªåŠ¨åŒ–ç”¨ä¾‹ç¼ºå¤±çš„é—æ†¾ï¼Œæ¯”å¦‚å¼•æµæµ‹è¯•diffæµ‹è¯•ç­‰ç­‰ã€‚</p>
<h3 id="è¯¯åŒº5ï¼šè‡ªåŠ¨åŒ–ç”¨ä¾‹æ˜¯ä¸‡å¹´ä¸å˜çš„">è¯¯åŒº5ï¼šè‡ªåŠ¨åŒ–ç”¨ä¾‹æ˜¯ä¸‡å¹´ä¸å˜çš„</h3>
<p>å› ä¸ºè‡ªåŠ¨åŒ–ç”¨ä¾‹éœ€è¦éšç€ä¸šåŠ¡ä»£ç çš„è¿­ä»£è€Œè¿­ä»£ï¼Œè€Œå¾ˆå¤šå›¢é˜Ÿåˆè®¤ä¸ºè¿™æ ·çš„æˆæœ¬å¤ªå¤§äº†ã€‚å› æ­¤è‡ªåŠ¨åŒ–ç”¨ä¾‹å°±æˆäº†ä¸€å †ä¸‡å¹´ä¸å˜çš„åŠŸèƒ½çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæœ€ç»ˆè‡ªåŠ¨åŒ–å°±æˆäº†â€œå½¢è€Œä¸Šâ€èˆ¬çš„å­˜åœ¨ã€‚</p>
<p>ä¸šåŠ¡ä»£ç éƒ½åœ¨ä¸æ–­å˜åŒ–ï¼Œä¸æ–­å‡çº§ï¼Œä¸æ–­è¿­ä»£ï¼Œå‡­ä»€ä¹ˆè‡ªåŠ¨åŒ–çš„ç”¨ä¾‹å°±å¾—ä¸‡å¹´ä¸å˜ï¼Œè‡ªåŠ¨åŒ–çš„ç”¨ä¾‹å°±ä¸ç”¨ç»´æŠ¤ï¼Ÿå®åœ¨æ˜¯æƒ³ä¸é€šè¿™é‡Œé¢çš„é“ç†ã€‚</p>
<p>è‡ªåŠ¨åŒ–ç”¨ä¾‹çš„è½åï¼Œä¼šå¯¼è‡´è‡ªåŠ¨åŒ–ç”¨ä¾‹æ— æ³•æˆä¸ºä¸šåŠ¡ä»£ç çš„è¯•åˆ€çŸ³ï¼Œå½“ä»–å˜æˆä¸€ä»¶é™„å±å“æ—¶ï¼Œä»–æ‰€å¸¦æ¥çš„ä¸€åˆ‡å°±åªæœ‰æˆæœ¬äº†ã€‚</p>
<h3 id="è¯¯åŒº6ï¼šé¡¹ç›®è¿­ä»£å¤ªå¿«äº†-ç­‰ç¨³å®šäº†å†ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•">è¯¯åŒº6ï¼šé¡¹ç›®è¿­ä»£å¤ªå¿«äº†ï¼Œç­‰ç¨³å®šäº†å†ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•</h3>
<p>è¿™ä¸€ç‚¹æ˜¯æˆ‘å¬åˆ°è¿‡çš„æ‰€æœ‰çš„è°¬è¯¯ä¸­æœ€æ²¡æœ‰é“ç†çš„ä¸€ä¸ªäº†ã€‚</p>
<p>ä»<a href="#f4">å›¾4</a>ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¶Šæ˜¯å¤§çš„é¡¹ç›®ï¼Œè¶Šæ˜¯è¿­ä»£æ¬¡æ•°å¤šçš„é¡¹ç›®ï¼Œè¶Šæ˜¯å˜åŒ–å¿«çš„é¡¹ç›®ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„æ”¶ç›Šè¶Šå¤§ã€‚å¤§å¤šæ•°å›¢é˜Ÿï¼Œæ­¤æ—¶æƒ³åˆ°çš„æ›´å¤šçš„æ˜¯å¿«é€Ÿçš„å˜åŒ–å¸¦æ¥çš„æ˜¯æ›´å¤šçš„è‡ªåŠ¨åŒ–ç”¨ä¾‹çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>ä½†æ˜¯ï¼Œå³ä¾¿æ˜¯åˆ›ä¸šå…¬å¸ï¼Œè°ä¹Ÿä¸ä¼šåœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™å°±æœç€æŠŠé¡¹ç›®åšçƒ‚çš„ç›®æ ‡è¡Œè¿›å§ï¼Ÿ</p>
<p>ç­‰é¡¹ç›®ç¨³å®šçš„æ—¶å€™ï¼Œä¼°è®¡å°±æ˜¯è¿™ä¸ªäº§å“è¦ä¸‹çº¿çš„æ—¶å€™äº†ã€‚</p>
<h2 id="è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯ä¸€ç§æ–‡åŒ–">è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯ä¸€ç§æ–‡åŒ–</h2>
<p>åœ¨è€ƒè™‘è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦è®¤çœŸçš„æ€è€ƒè‡ªåŠ¨åŒ–æµ‹è¯•çš„å®šä½å’Œç›®æ ‡ï¼Œéœ€è¦è®¤è¯†åˆ°è‡ªåŠ¨åŒ–æµ‹è¯•éœ€è¦ä»˜å‡ºä¸€å®šçš„æˆæœ¬ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•è¿˜éœ€è¦ä¿®æ”¹æ—¢æœ‰çš„ç ”å‘æµç¨‹ï¼Œéœ€è¦è®¤è¯†åˆ°å›¢é˜Ÿçš„ç´¯è®¡æ”¶ç›Šâ€¦â€¦</p>
<p>åœ¨è€ƒè™‘è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ—¶å€™ï¼Œè¿˜éœ€è¦æ„è¯†åˆ°ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ä¸€ç§é¡¹ç›®æ–‡æ¡£åŒ–çš„æ‰‹æ®µï¼Œæ­£æ‰€è°“â€œæµ‹è¯•å³æ–‡æ¡£â€ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•è¿˜æ˜¯å›¢é˜Ÿå†…éƒ¨ä¸åŒæµ‹è¯•äººå‘˜æœ‰æ•ˆæ²Ÿé€šçš„ä¸€ç§æ‰‹æ®µï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•æ›´æ˜¯å›¢é˜Ÿç§¯ç´¯çš„ä¸€ç§æœ‰æ•ˆè½½ä½“â€¦â€¦</p>
<p>è‡ªæˆ‘çœ‹æ¥ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•é¦–å…ˆåº”è¯¥æ˜¯ä¸€ç§å·¥ä½œæ–‡åŒ–ï¼Œè€Œä¸å•çº¯æ˜¯ä¸€ç§æµ‹è¯•æ‰‹æ®µã€‚å·¥ä½œæ–‡åŒ–æ„å‘³ç€å½“å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ååº”æ˜¯æˆ‘ä»¬æ²¡ä¼šä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œæˆ–è€…æˆ‘ä»¬çš„ä½¿ç”¨æ–¹æ³•ä¸å¯¹ï¼Œè€Œä¸æ˜¯è¯´è¿™ä¸ªå·¥å…·æ˜¯æœ‰é—®é¢˜çš„ã€‚</p>
]]></content>
      <categories>
        <category>æ€»ç»“</category>
      </categories>
      <tags>
        <tag>æµ‹è¯•</tag>
        <tag>è‡ªåŠ¨åŒ–æµ‹è¯•</tag>
        <tag>auto test</tag>
        <tag>æ•æ·</tag>
        <tag>æ–¹æ³•è®º</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Boost::Pythonç”¨C++å¼€å‘Pythonåº“</title>
    <url>/2020/06/13/write-python-library-using-c-with-boost-python/</url>
    <content><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>å¾ˆå¤šç³»ç»Ÿéƒ½ä¼šç”¨<code>json</code>æ ¼å¼è¿›è¡Œæ•°æ®äº¤äº’ã€‚ä¸ºäº†ä¿è¯æ•°æ®åœ¨ç³»ç»Ÿä¸Šä¸‹æ¸¸çš„è‡ªåŠ¨æ ¡éªŒï¼Œé¿å…æ•°æ®ç»“æ„å¼‚å¸¸å¸¦æ¥çš„ç³»ç»Ÿç¨³å®šæ€§é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨<a href="http://json-schema.org"><code>json-schema</code></a>æ¥å®šä¹‰<code>jsonæ¥å£</code>ï¼Œå¹¶åˆ©ç”¨<a href="https://datatracker.ietf.org/doc/draft-handrews-json-schema-validation"><code>json-schema-validator</code></a>æ¥æ ¡éªŒæ¥å£å“åº”çš„ç»“æ„çš„åˆæ³•æ€§ã€‚</p>
<p>ç„¶è€Œç³»ç»Ÿä¸­ä¸åŒå­ç³»ç»Ÿçš„å®ç°ï¼ˆç¼–ç¨‹è¯­è¨€ï¼‰å¹¶éæ€»æ˜¯ä¸€è‡´ï¼Œè™½ç„¶å„ç§è¯­è¨€éƒ½æä¾›äº†<a href="https://datatracker.ietf.org/doc/draft-handrews-json-schema-validation"><code>json-schema-validator</code></a>çš„å…·ä½“å®ç°ï¼Œä½†æ˜¯ä¸åŒè¯­è¨€æ”¯æŒçš„<code>json-schema-validator</code>æ ‡å‡†çš„ç‰ˆæœ¬å¹¶éå®Œå…¨ä¸€è‡´ï¼Œè¿™ä¼šå¯¹åç»­çš„ä½¿ç”¨å¸¦æ¥ä¸€äº›æ··ä¹±ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>Java: <a href="https://github.com/java-json-tools/json-schema-validator">json-schema-validator</a>æ”¯æŒ<a href="https://tools.ietf.org/html/draft-fge-json-schema-validation-00">Draft 4</a></li>
<li>C++: <a href="https://github.com/pboettch/json-schema-validator">json-schema-validator</a>æ”¯æŒ<a href="https://tools.ietf.org/html/draft-handrews-json-schema-validation-01">Draft 7</a></li>
<li>Python <a href="https://github.com/Julian/jsonschema">jsonschema</a>æ”¯æŒ<a href="https://tools.ietf.org/html/draft-handrews-json-schema-validation-01">Draft 7</a></li>
</ul>
<span id="more"></span>
<p>ç›®å‰å¤§å¤šæ•°è¯­è¨€ï¼Œä¾‹å¦‚ï¼šJava, Golang, Php, Python, Luaç­‰éƒ½æ”¯æŒC/C<ins>çš„æ‰©å±•ã€‚å› æ­¤ï¼Œå¯ä»¥ç”¨C/C</ins>æ¥ä¸ºå…¶ä»–è¯­è¨€æä¾›ç»Ÿä¸€çš„æ‰©å±•åº“æ”¯æŒï¼Œæœ¬æ–‡å°±æ˜¯ä»‹ç»æ€ä¹ˆåˆ©ç”¨<code>Boost::Python</code>åº“æä¾›<a href="https://github.com/pboettch/json-schema-validator"><code>json-schema-validator</code></a>çš„Pythonæ”¯æŒï¼Œå¹¶ä»‹ç»å¦‚ä½•åˆ©ç”¨<code>distutils</code>æ¥ç¼–è¯‘&amp;åˆ†å‘Pythonåº“ã€‚</p>
<p><img src="/2020/06/13/write-python-library-using-c-with-boost-python/1.png" alt></p>
<h2 id="pythonè°ƒç”¨c-c-çš„æ–¹å¼">Pythonè°ƒç”¨C/C++çš„æ–¹å¼</h2>
<p>æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°Pythonè°ƒç”¨C/C++ç¼–å†™çš„åº“ï¼š</p>
<ul>
<li>ä½¿ç”¨Pythonæ‰©å±•</li>
<li>ä½¿ç”¨<code>ctypes</code>æ¨¡å—ç›´æ¥åŠ è½½C/C++ç¼–å†™çš„so</li>
</ul>
<h4 id="ctypesåŠ è½½soæ–‡ä»¶">ctypesåŠ è½½soæ–‡ä»¶</h4>
<p><code>ctype</code>æ˜¯Pythonçš„å¤–éƒ¨å‡½æ•°åº“ã€‚å®ƒæä¾›äº†Cå…¼å®¹çš„æ•°æ®ç±»å‹ï¼Œå¹¶å…è®¸åœ¨DLLæˆ–å…±äº«åº“ä¸­è°ƒç”¨å‡½æ•°ã€‚</p>
<p><code>ctype</code>æ˜¯Pythonå°è£…çš„APIå‡½æ•°åº“ã€‚å…¶ä¸­<code>cdll = &lt;ctypes.LibraryLoader object&gt;</code>æ˜¯ä¸€ä¸ªåº“åŠ è½½å™¨å¯¹è±¡ï¼Œè°ƒç”¨<code>cdll.LoadLibrary</code>ä¾¿å¯è°ƒç”¨C/C++çš„soåº“ã€‚</p>
<p>æ­¤å¤„ä¸å†å¯¹å¦‚ä½•ä½¿ç”¨<code>ctype</code>æ¨¡å—åŠ è½½soæ–‡ä»¶åšè¿‡å¤šçš„ä»‹ç»ï¼Œå…·ä½“å¯ä»¥å‚è€ƒå…¶<a href="https://docs.python.org/3/library/ctypes.html#module-ctypes">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h4 id="ä½¿ç”¨pythonæ‰©å±•">ä½¿ç”¨Pythonæ‰©å±•</h4>
<p>è¯¥æ–¹å¼æ˜¯Pythonä¸ºæ•´åˆå…¶å®ƒè¯­è¨€è€Œæä¾›çš„ä¸€ç§æ‰©å±•æœºåˆ¶ï¼Œå¹¶ä¸”è¯¥æœºåˆ¶ä¸å±€é™äºC/C++ï¼Œä¹Ÿå¯ä»¥ç”¨äºå…¶å®ƒè¯­è¨€ã€‚Pythonçš„å¯æ‰©å±•æ€§å…·æœ‰å¦‚ä¸‹çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ–¹ä¾¿ä¸ºè¯­è¨€å¢åŠ æ–°åŠŸèƒ½</li>
<li>å…·æœ‰å¯å®šåˆ¶æ€§</li>
<li>å¯ä»¥å®ç°ä»£ç å¤ç”¨</li>
<li>â€¦â€¦</li>
</ul>
<p>è¯¥æ–¹å¼çš„å…·ä½“ä½¿ç”¨æ­¤å¤„ä¹Ÿä¸å†åšè¿‡å¤šä»‹ç»ï¼Œå…·ä½“ä¿¡æ¯å¯ä»¥ç›´æ¥å‚è€ƒPythonçš„å®˜æ–¹æ–‡æ¡£<a href="https://docs.python.org/3/extending/building.html"><strong>Building C and C++ Extensions</strong></a>æ¥äº†è§£ã€‚æ¥ä¸‹æ¥è¦è®²çš„ä¾‹å­å°±æ˜¯åˆ©ç”¨äº†<code>å¯ä»¥å®ç°ä»£ç å¤ç”¨</code>çš„ä¼˜ç‚¹ã€‚</p>
<p>å¦‚<a href="https://docs.python.org/3/extending/building.html"><strong>Building C and C++ Extensions</strong></a>æ‰€ç¤ºï¼ŒPythonæä¾›äº†<code>Python/C++ API</code>ç”¨æ¥å®ç°Pythonå’ŒC<ins>çš„äº¤äº’ã€‚ç„¶è€Œï¼Œç›´æ¥ä½¿ç”¨è¿™äº›APIæ¥å®ŒæˆPythonå’ŒC/C</ins>çš„äº¤äº’è¿˜æ˜¯ä¼šå­˜åœ¨å¾ˆå¤šé‡å¤å·¥ä½œçš„ã€‚<code>Boost::Python</code>åˆ™å¯¹<code>Python/C++ API</code>è¿›è¡Œäº†æŠ½è±¡å’ŒåŒ…è£…ï¼Œä»è€Œä½¿å¾—Pythonå’ŒC++çš„äº¤äº’æ›´åŠ æ–¹ä¾¿ã€‚</p>
<h2 id="boost-pythonå°è£…c-c-æ‰©å±•">Boost::Pythonå°è£…C/C++æ‰©å±•</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»æˆ‘ä»¬æ˜¯å¦‚ä½•åˆ©ç”¨Boost::Pythonæ¥ä¸º<a href="https://github.com/pboettch/json-schema-validator">nlohmann_json_schema_validator</a>å¢åŠ Pythonæ‰©å±•ã€‚</p>
<p><code>nlohmann_json_schema_validator</code> is a C++ library for validating JSON documents based on a <strong>JSON Schema</strong> which itself should validate with <strong>draft-7 of JSON Schema Validation</strong>.</p>
<h4 id="ç¼–è¯‘nlohmann-json-schema-validatoråº“">ç¼–è¯‘nlohmann json schema validatoråº“</h4>
<p><code>nlohmann json schema validator</code>æ”¯æŒäº§å‡ºå¯æ‰§è¡Œçš„binæ–‡ä»¶ä»¥åŠå¯ä¾›å…¶ä»–é¡¹ç›®ä½¿ç”¨çš„åŠ¨æ€åº“ã€‚ä¸ºäº†å¯ä»¥å°†è¯¥æ‰©å±•åŒ…è£…æˆPythonæ‰©å±•ï¼Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆè¯¥åº“çš„åŠ¨æ€åº“ã€‚</p>
<p>é¦–å…ˆæ ¹æ®<code>nlohmann json schema validator</code>çš„<a href="https://github.com/pboettch/json-schema-validator/blob/master/README.md#building-as-shared-library">ç¼–è¯‘æ–‡æ¡£</a>ç¼–è¯‘å‡º<code>nlohmann json schema validator</code>çš„åŠ¨æ€åº“ã€‚</p>
<p><img src="/2020/06/13/write-python-library-using-c-with-boost-python/2.jpg" alt></p>
<h4 id="boost-pythonå°è£…c-c-ä»£ç ">Boost::Pythonå°è£…C/C++ä»£ç </h4>
<p>åœ¨å®‰è£…Boostçš„æ—¶å€™ï¼Œè™½ç„¶Boostçš„å¤´æ–‡ä»¶ä¸­å­˜åœ¨Boost::Pythonç›¸å…³çš„hppæ–‡ä»¶ï¼Œä½†æ˜¯é»˜è®¤å´æ²¡æœ‰è¯¥åŠ¨æ€åº“ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨Boost::Pythonä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å®‰è£…è¯¥åº“ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ brew install boost-python3</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œæˆ‘ä»¬ç”¨C++ç¼–å†™<code>class json_validator_python;</code>æ¥å°è£…<code>nlohmann json schema validator</code>åº“ï¼Œå¹¶åˆ©ç”¨Boost::Pythonæ¥å¯¼å‡ºï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// jsv_python.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;nlohmann/json-schema.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/python.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> boost::python;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JSON_SCHEMA_VALIDATOR_API</span> <span class="title">json_validator_python</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    nlohmann::json_schema::json_validator validator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">json_validator_python</span>() &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set_root_schema</span><span class="params">(<span class="keyword">const</span> std::string &amp;json_string)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        validator.<span class="built_in">set_root_schema</span>(nlohmann::json::<span class="built_in">parse</span>(json_string.<span class="built_in">begin</span>(), json_string.<span class="built_in">end</span>()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">validate</span><span class="params">(<span class="keyword">const</span> std::string &amp;json_string)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        validator.<span class="built_in">validate</span>(nlohmann::json::<span class="built_in">parse</span>(json_string.<span class="built_in">begin</span>(), json_string.<span class="built_in">end</span>()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// json_schema_validatorä¸ºmoduleåï¼Œå¿…éœ€å’Œç”Ÿæˆçš„soåº“åä¸€æ ·</span></span><br><span class="line"><span class="built_in">BOOST_PYTHON_MODULE</span>(json_schema_validator)</span><br><span class="line">&#123;</span><br><span class="line">    class_&lt;json_validator_python, boost::noncopyable&gt; (<span class="string">&quot;json_validator_python&quot;</span>)</span><br><span class="line">            .<span class="built_in">def</span>(<span class="string">&quot;set_root_schema&quot;</span>, &amp;json_validator_python::set_root_schema)</span><br><span class="line">            .<span class="built_in">def</span>(<span class="string">&quot;validate&quot;</span>, &amp;json_validator_python::validate)</span><br><span class="line">            ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºçš„<code>BOOST_PYTHON_MODULE</code>ä»£ç ï¼Œç›®çš„æ˜¯å¯¼å‡ºç±»åŠæˆå‘˜æ–¹æ³•ï¼Œè¿™äº›å¯¼å‡ºçš„ç±»å’Œæ–¹æ³•å¯ä»¥åœ¨Pythonä¸­è°ƒç”¨ã€‚</p>
<p>å…³äºBoost::Pythonæ›´è¯¦ç»†çš„ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒå…¶<a href="https://www.boost.org/doc/libs/1_66_0/libs/python/doc/html/index.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h4 id="ç¼–è¯‘å¹¶äº§å‡ºpythonæ‰©å±•">ç¼–è¯‘å¹¶äº§å‡ºPythonæ‰©å±•</h4>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">g++ --std&#x3D;c++11 -fPIC -c jsv_python.cpp \</span><br><span class="line">-I$&#123;json-schema-validator_PATH&#125;&#x2F;src \</span><br><span class="line">-I$&#123;nlohmann-json_PATH&#125; \</span><br><span class="line">-I$&#123;Boost_PATH&#125;&#x2F;include \</span><br><span class="line">-I$&#123;Python_INCLUDE_PATH&#125;</span><br><span class="line"></span><br><span class="line">g++ --std&#x3D;c++11 -shared \</span><br><span class="line">-L$&#123;json-schema-validator_LIB_PATH&#125; \</span><br><span class="line">-L$&#123;Python_LIB_PATH&#125; \</span><br><span class="line">-L$&#123;Boost_Python_LIB_PATH&#125; \</span><br><span class="line">-lnlohmann_json_schema_validator \</span><br><span class="line">-lboost_python38 -lpython3.8 \</span><br><span class="line">-o json_schema_validator.so jsv_python.o</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šçš„æŒ‡ä»¤ï¼Œä¼šç”Ÿæˆå°è£…ä¹‹åçš„Pythonæ‰©å±•ï¼š<code>json_schema_validator.so</code>ã€‚</p>
<h4 id="æµ‹è¯•pythonæ‰©å±•">æµ‹è¯•pythonæ‰©å±•</h4>
<p>åœ¨å½“å‰ç›®å½•æ‰§è¡Œå¦‚ä¸‹çš„Pythonä»£ç ï¼Œå¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬å°è£…çš„æ‰©å±•å·²ç»å¯ä»¥å½“åšPythonæ‰©å±•æ¥å¯¼å…¥å¹¶ä½¿ç”¨äº†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json_schema_validator <span class="keyword">as</span> jsv</span><br><span class="line"></span><br><span class="line">validator = jsv.json_validator_python()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">isValidator = <span class="literal">True</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    validator.set_root_schema(<span class="string">&#x27;&#123;&quot;type&quot;:&quot;object&quot;, &quot;properties&quot;: &#123;&quot;a&quot;:&#123;&quot;type&quot;: &quot;string&quot;&#125;&#125;&#125;&#x27;</span>)</span><br><span class="line">    validator.validate(<span class="string">&#x27;&#123;&quot;a&quot;:&quot;1&quot;&#125;&#x27;</span>);</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    isValidator = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(isValidator)</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨distutilsç¼–è¯‘å¹¶åˆ†å‘æ‰©å±•">ä½¿ç”¨distutilsç¼–è¯‘å¹¶åˆ†å‘æ‰©å±•</h2>
<p>ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œä½¿ç”¨<a href="https://docs.python.org/3/extending/building.html"><strong>Building C and C++ Extensions</strong></a>ä»‹ç»çš„<code>distutilsæ¨¡å—</code>ç¼–è¯‘Pythonæ‰©å±•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup, Extension</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">os.environ[<span class="string">&quot;CC&quot;</span>] = <span class="string">&quot;g++&quot;</span></span><br><span class="line">os.environ[<span class="string">&quot;CXX&quot;</span>] = <span class="string">&quot;g++&quot;</span></span><br><span class="line"></span><br><span class="line">module1 = Extension(<span class="string">&#x27;json_schema_validator&#x27;</span>,</span><br><span class="line">                    include_dirs = [<span class="string">&#x27;../../src&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;../../&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;/usr/local/Cellar/boost/1.72.0_3/include&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;/usr/local/opt/python@3.8/Frameworks/Python.framework/Versions/3.8/include/python3.8&#x27;</span>],</span><br><span class="line">                    libraries = [<span class="string">&#x27;boost_python38&#x27;</span>, <span class="string">&#x27;python3.8&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;nlohmann_json_schema_validator&#x27;</span>],</span><br><span class="line">                    library_dirs = [<span class="string">&#x27;/usr/local/opt/python@3.8/Frameworks/Python.framework/Versions/3.8/lib&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;/usr/local/Cellar/boost-python3/1.72.0_1/lib&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;.&#x27;</span>],</span><br><span class="line">                    sources = [<span class="string">&#x27;jsv_python.cpp&#x27;</span>],</span><br><span class="line">                    extra_compile_args=[<span class="string">&#x27;--std=c++11&#x27;</span>],</span><br><span class="line">                    extra_link_args=[<span class="string">&#x27;--std=c++11&#x27;</span>])</span><br><span class="line"></span><br><span class="line">setup (name = <span class="string">&#x27;json-schema-validator&#x27;</span>,</span><br><span class="line">       version = <span class="string">&#x27;1.0&#x27;</span>,</span><br><span class="line">       description = <span class="string">&#x27;json schema validator&#x27;</span>,</span><br><span class="line">       ext_modules = [module1])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ python3 setup.py build</span><br><span class="line">$ python3 setup.py install</span><br><span class="line">$ export LD_LIBRARY_PATH&#x3D;$LD_LIBRARY_PATH:&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#x2F;json_schema_validator</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±å¯ä»¥åœ¨ä»»æ„ä½ç½®ï¼Œæ‰§è¡Œ<a href="#%E6%B5%8B%E8%AF%95python%E6%89%A9%E5%B1%95">æµ‹è¯•pythonæ‰©å±•</a>ä¸€èŠ‚çš„æµ‹è¯•ä»£ç å•¦ã€‚</p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>Boost::Python</tag>
        <tag>setup.py</tag>
        <tag>distutils</tag>
      </tags>
  </entry>
  <entry>
    <title>é›†ç¾¤æ—¶é—´æˆ³ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜åŠå…¶åˆ†æå’Œæ€è€ƒ</title>
    <url>/2020/05/29/problem-caused-by-timestamp-s-difference-in-cluster-and-analysis/</url>
    <content><![CDATA[<blockquote>
<p>1883å¹´11æœˆ18æ—¥ï¼Œç¾å›½ç¬¬ä¸€ä¸ªå…¨å›½ç»Ÿä¸€é“è·¯æ—¶åˆ»è¡¨è¯ç”Ÿï¼Œè¿™ä¸€å¤©çš„æ­£åˆæ—¶åˆ†ï¼Œç¾å›½ä¸œéƒ¨çš„æ—¶é’Ÿå…¨éƒ¨å›æ‹¨ã€‚ä»æ­¤ï¼Œä¸Šå¸çš„æ—¶é—´è¢«æ”¹ç”¨äººé—´çš„æŒ‡é’ˆæ¥åº¦é‡ã€‚ â€”â€”<strong>å…¬å¸çš„åŠ›é‡</strong></p>
</blockquote>
<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>æœ€è¿‘é‡åˆ°çš„ä¸šåŠ¡ä¸Šçš„é—®é¢˜æ¶‰åŠï¼š<em>åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­ï¼Œå­˜åœ¨éƒ¨åˆ†æœºå™¨çš„<code>æ—¶é—´æˆ³</code>å’Œå…¶å®ƒæœºå™¨ä¸ä¸€è‡´è€Œå¯¼è‡´çš„é‡å¤§é—®é¢˜</em>ã€‚ä¸ºäº†ä¸æ³„éœ²ä¸šåŠ¡çš„ç›¸å…³ä¿¡æ¯ï¼Œæ–‡ä¸­ä¼šç”¨ä¸€ä¸ªç±»ä¼¼çš„åœºæ™¯æ¥å¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œåˆ†æã€‚</p>
<span id="more"></span>
<h2 id="æ—¶é—´æˆ³-unix-time-stamp">æ—¶é—´æˆ³ï¼ˆunix time stampï¼‰</h2>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæ¶‰åŠåˆ°çš„é—®é¢˜æ˜¯é›†ç¾¤<code>æ—¶é—´æˆ³</code>ä¸ä¸€è‡´è€Œä¸æ˜¯<code>æ—¶é—´</code>ä¸ä¸€è‡´ã€‚</p>
<p><a href="https://www.unixtimestamp.com">The unix time stamp</a> is a way to track time as a running total of seconds. This count starts at the Unix Epoch on January 1st, 1970 at UTC. Therefore, the unix time stamp is merely the number of seconds between a particular date and the Unix Epoch. It should also be pointed out (thanks to the comments from visitors to this site) that <strong><code>this point in time technically does not change no matter where you are located on the globe</code></strong>. This is very useful to computer systems for tracking and sorting dated information in dynamic and distributed applications both online and client side.</p>
<p>ç”±æ­¤å¯çŸ¥ï¼Œ<code>æ—¶é—´æˆ³</code>å’Œ<code>æ—¶é—´</code>ä¸åŒï¼Œæ˜¯ä¸€ä¸ªå’Œæ—¶åŒºæ— å…³çš„å…¨çƒä¸€è‡´çš„æ—¶é—´è®¡é‡æ–¹å¼ã€‚ä¸åŒé›†ç¾¤ä¼šå› ä¸ºå…¶æ‰€åœ¨çš„æ—¶åŒºä¸åŒè€Œå­˜åœ¨æ—¶é—´ä¸åŒçš„é—®é¢˜ï¼Œä½†æ˜¯å…¶æ—¶é—´æˆ³æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>Linuxç³»ç»Ÿè€Œè¨€ï¼Œæ—¶é—´æˆ³å¯ä»¥åˆ©ç”¨<a href="https://www.gnu.org/software/shellutils/shellutils.html"><code>GNU shell utilities</code></a>æä¾›çš„<a href="https://github.com/coreutils/coreutils/blob/master/src/date.c"><code>date</code>å‘½ä»¤</a>æ¥è·å–ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ date +%s</span><br><span class="line">$ 1590719825</span><br></pre></td></tr></table></figure>
<h2 id="æ—¶é—´æˆ³ä¸ä¸€è‡´å¸¦æ¥çš„é—®é¢˜">æ—¶é—´æˆ³ä¸ä¸€è‡´å¸¦æ¥çš„é—®é¢˜</h2>
<p>è€ƒè™‘å¦‚ä¸‹çš„ä¸€ä¸ªè´­ç‰©ç«™ç‚¹çš„æ´»åŠ¨åœºæ™¯ï¼Œå¦‚ä¸‹çš„åœºæ™¯å¯èƒ½ä¸ä¼šåœ¨ç°å®çš„ç”µå•†æ´»åŠ¨ä¸­å­˜åœ¨ï¼Œè¯¥åœºæ™¯ä»…ä»…æ˜¯ä¸ºäº†è¯´æ˜æœ¬æ–‡çš„é—®é¢˜è€ŒæŠ½è±¡çš„ä¸€ä¸ªåœºæ™¯ã€‚</p>
<blockquote>
<p>åŸä»·100ï¿¥çš„å•†å“ï¼Œç°ä»·10ï¿¥å…ƒé”€å”®ï¼Œä½†å‰ææ˜¯ä¸‹å•çš„ç”¨æˆ·éœ€è¦åœ¨1åˆ†é’Ÿå†…å®Œæˆæ”¯ä»˜ã€‚å¦‚æœä¸‹å•ç”¨æˆ·æœªèƒ½åœ¨1åˆ†é’Ÿå†…å®Œæˆæ”¯ä»˜ï¼Œåˆ™è¯¥è®¢å•æ— æ•ˆï¼ŒåŒæ—¶è¯¥ç”¨æˆ·æ— æ³•ç»§ç»­ä»¥æŠ˜æ‰£ä»·ä¸‹å•ã€‚</p>
</blockquote>
<p>ä¸ºäº†æ–¹ä¾¿é—®é¢˜è¯´æ˜ï¼Œä¸‹å•å’Œæ”¯ä»˜ç­‰åŠŸèƒ½åˆå¹¶åœ¨<code>trade</code>ï¼Œäº§ç”Ÿçš„ç›¸å…³æ•°æ®åˆ™å­˜å‚¨äº<code>DB</code>ã€‚ç®€åŒ–ä¹‹åçš„æ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/05/29/problem-caused-by-timestamp-s-difference-in-cluster-and-analysis/1.png" alt></p>
<p>å½“<code>trade</code>ä¸ºå•æœºéƒ¨ç½²æ—¶ï¼Œä¸ä¼šå­˜åœ¨é—®é¢˜ã€‚ä½†æ˜¯å½“<code>trade</code>ä½œä¸ºé›†ç¾¤éƒ¨ç½²æ—¶ï¼Œåˆ™ä¼šå­˜åœ¨é›†ç¾¤æ—¶é—´æˆ³ä¸ä¸€è‡´å¯¼è‡´ç”¨æˆ·æ”¯ä»˜å¤±è´¥çš„é—®é¢˜ã€‚å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/05/29/problem-caused-by-timestamp-s-difference-in-cluster-and-analysis/2.png" alt></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œ<code>m1</code>å’Œ<code>m2</code>çš„æ—¶é—´æˆ³æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯<code>m3</code>çš„æ—¶é—´æˆ³æ¯”å…¶å®ƒæœºå™¨æ­£å¥½å¿«äº†<strong>60s</strong>ã€‚å› æ­¤ï¼Œå¦‚æœ<code>æ”¯ä»˜</code>çš„æµé‡ç”±<code>m3</code>æœºå™¨çš„<code>trade</code>å¤„ç†ï¼Œåˆ™å³ä¾¿æ˜¯åœ¨1åˆ†é’Ÿå†…æ”¯ä»˜ï¼Œå› ä¸º<code>m3</code>æœºå™¨çš„æ—¶é—´æˆ³å¿«60sè€Œå¯¼è‡´æ”¯ä»˜è¶…æ—¶ï¼Œè¿›è€Œå¯¼è‡´ç”¨æˆ·æ”¯ä»˜å¤±è´¥ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>è¿™å°±æ˜¯æˆ‘ä»¬è¦è®²çš„ï¼šåœ¨ä¸€ä¸ªé›†ç¾¤ä¸­ï¼Œéƒ¨åˆ†æœºå™¨çš„<code>æ—¶é—´æˆ³</code>å’Œå…¶å®ƒæœºå™¨ä¸ä¸€è‡´è€Œå¯¼è‡´çš„é‡å¤§é—®é¢˜ã€‚</p>
<h2 id="é—®é¢˜å¦‚ä½•è§£å†³">é—®é¢˜å¦‚ä½•è§£å†³</h2>
<p>åœ¨ä¸ä¿®æ”¹ç³»ç»Ÿæ¶æ„çš„å‰æä¸‹ï¼Œåˆ™å¯ä»¥åˆ©ç”¨åŒä¸€æ—¶é’ŸåŒæ­¥é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨çš„æ—¶é’Ÿï¼Œä»è€Œè®©é›†ç¾¤çš„æ—¶é’Ÿä¿æŒåŒæ­¥ï¼Œè¿›è€Œè§£å†³è¯¥é—®é¢˜ã€‚å…·ä½“çš„æ–¹æ¡ˆå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="/2020/05/29/problem-caused-by-timestamp-s-difference-in-cluster-and-analysis/3.png" alt></p>
<h3 id="ntp">ntp</h3>
<p>å¯¹Linuxè€Œè¨€ï¼Œå¯ä»¥ä½¿ç”¨<a href="https://en.wikipedia.org/wiki/Network_Time_Protocol"><code>ntp</code></a>æ¥å®ç°é›†ç¾¤çš„æ—¶é—´åŒæ­¥ã€‚</p>
<p>åŒæ­¥æ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨<code>ntpdate</code>å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>ntpd</code>æœåŠ¡ã€‚</p>
<h3 id="ntpdate">ntpdate</h3>
<p>ä½¿ç”¨<code>ntpdate</code>æ¯”è¾ƒç®€å•ã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ ntpdate [-nv] [NTP IP&#x2F;hostname]</span><br><span class="line">$ ntpdate 192.168.0.1</span><br><span class="line">$ ntpdate time.ntp.org</span><br></pre></td></tr></table></figure>
<p><code>ntpdate</code>åªæ˜¯å¼ºåˆ¶å°†ç³»ç»Ÿæ—¶é—´è®¾ç½®ä¸ºntpæœåŠ¡å™¨æ—¶é—´ã€‚å¦‚æœæœºå™¨cpu tickæœ‰é—®é¢˜ï¼Œè¿™ç§åŒæ­¥æ²»æ ‡ä¸æ²»æœ¬ã€‚æ­¤æ—¶ï¼Œä¸€èˆ¬é…åˆ<code>cron</code>ä»»åŠ¡æ¥å®šæœŸåŒæ­¥ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0 12 * * * * &#x2F;usr&#x2F;sbin&#x2F;ntpdate 192.168.0.1</span><br></pre></td></tr></table></figure>
<h3 id="ntpd">ntpd</h3>
<p>ä½¿ç”¨<code>ntpd</code>æœåŠ¡ï¼Œè¦å¥½äºä½¿ç”¨<code>ntpdate+cron</code>ã€‚</p>
<p><code>ntpdate</code>åŒæ­¥æ—¶é—´ï¼Œä¼šé€ æˆæ—¶é—´çš„è·³è·ƒï¼Œå¯¹ä¸€äº›ä¾èµ–æ—¶é—´çš„ç¨‹åºå’ŒæœåŠ¡ä¼šé€ æˆå½±å“ï¼Œæ¯”å¦‚sleepï¼Œtimerç­‰ã€‚</p>
<p><code>ntpd</code>æœåŠ¡å¯ä»¥åœ¨ä¿®æ­£æ—¶é—´çš„åŒæ—¶ï¼Œä¿®æ­£cpu tickã€‚</p>
<p>ç†æƒ³çš„åšæ³•ä¸ºï¼Œåœ¨å¼€æœºçš„æ—¶å€™ï¼Œä½¿ç”¨<code>ntpdate</code>å¼ºåˆ¶åŒæ­¥æ—¶é—´ï¼Œåœ¨å…¶ä»–æ—¶å€™ä½¿ç”¨<code>ntpd</code>æœåŠ¡æ¥åŒæ­¥æ—¶é—´ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>ntpd</code>æœ‰ä¸€ä¸ªè‡ªæˆ‘ä¿æŠ¤è®¾ç½®: å¦‚æœæœ¬æœºæ—¶é—´ä¸æºæ—¶é—´ç›¸å·®å¤ªå¤§, åˆ™<code>ntpd</code>ä¸è¿è¡Œã€‚æ‰€ä»¥æ–°è®¾ç½®çš„æ—¶é—´æœåŠ¡å™¨ä¸€å®šè¦å…ˆåˆ©ç”¨<code>ntpdate</code>å‘½ä»¤è·å–åˆå§‹æ—¶é—´, ç„¶åå¯åŠ¨<code>ntpd</code>æœåŠ¡ã€‚</p>
<p>å…³äºntpdçš„ä½¿ç”¨ï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šèµ„æ–™äº†ï¼Œè¿™é‡Œå°±ä¸åšè¿‡å¤šçš„ä»‹ç»äº†ã€‚</p>
<h3 id="ntpstat">ntpstat</h3>
<p><code>ntpstat</code>ç”¨äºæ˜¾ç¤ºç½‘ç»œæ—¶é—´çš„åŒæ­¥çŠ¶æ€ã€‚<code>ntpstat</code>ä¼šç»™å‡ºæœ¬åœ°è®¡ç®—æœºä¸Šè¿è¡Œçš„<code>ntpd</code>çš„åŒæ­¥çŠ¶æ€ã€‚å¦‚æœæœ¬åœ°ç³»ç»Ÿä¸å‚è€ƒæ—¶é—´æºåŒæ­¥ï¼Œåˆ™<code>ntpstat</code>ä¼šç»™å‡ºè¿‘ä¼¼çš„æ—¶é—´ç²¾åº¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ ntpstat</span><br><span class="line">synchronised to NTP server (192.168.0.1) at stratum 3</span><br><span class="line">   time correct to within 43 ms</span><br><span class="line">   polling server every 1024 s</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜å¼•ç”³">é—®é¢˜å¼•ç”³</h2>
<p>è™½ç„¶å¯ä»¥åˆ©ç”¨<code>ntp</code>æ¥åŒæ­¥é›†ç¾¤æ—¶é—´ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯å€¼çš„æ€è€ƒçš„ï¼š<strong>å¦‚ä½•åœ¨é›†ç¾¤æ—¶é’Ÿä¸åŒçš„æƒ…å†µä¸‹ï¼Œè§£å†³<a href="#%E6%97%B6%E9%97%B4%E6%88%B3%E4%B8%8D%E4%B8%80%E8%87%B4%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%97%AE%E9%A2%98">æ—¶é—´æˆ³ä¸ä¸€è‡´å¸¦æ¥çš„é—®é¢˜</a>ä¸€èŠ‚ä¸­æè¿°çš„é—®é¢˜</strong>ã€‚</p>
<p>ç³»ç»Ÿåœ¨æ¶æ„ä¸Šè¦åšä½•ç§ä¼˜åŒ–ï¼Œæ‰èƒ½é¿å…ä¸šåŠ¡å¯¹é›†ç¾¤æ—¶é’ŸåŒæ­¥çš„ä¾èµ–ï¼Ÿè€Œè¿™ç§ä¼˜åŒ–æ‰€å¸¦æ¥çš„ç³»ç»Ÿæ¶æ„çš„å¤æ‚åº¦å’Œæˆæœ¬åˆå°†å¦‚ä½•ï¼Ÿ</p>
]]></content>
      <categories>
        <category>æ€»ç»“</category>
      </categories>
      <tags>
        <tag>ntp</tag>
        <tag>æ—¶é—´æˆ³ä¸åŒæ­¥</tag>
      </tags>
  </entry>
  <entry>
    <title>è½¯ä»¶çš„ç†µå’Œç ´çª—åŸç†</title>
    <url>/2020/05/20/Software-Entropy-and-A-Broken-Window/</url>
    <content><![CDATA[<blockquote>
<p><strong>å¦‚ä¸‹çš„å†…å®¹ï¼Œæ‘˜é€‰è‡ªã€Šç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“â€”â€”é€šå‘åŠ¡å®çš„æœ€é«˜å¢ƒç•Œï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹ã€‚</strong></p>
</blockquote>
<p>è™½ç„¶è½¯ä»¶å¼€å‘ä¸å—ç»å¤§å¤šæ•°ç‰©ç†æ³•åˆ™çš„çº¦æŸï¼Œä½†æˆ‘ä»¬æ— æ³•èº²é¿æ¥è‡ªâ€œç†µâ€çš„å¢åŠ çš„é‡å‡»ã€‚â€œç†µâ€æ˜¯ä¸€ä¸ªç‰©ç†å­¦æœ¯è¯­ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªç³»ç»Ÿçš„â€œæ— åºâ€æ€»é‡ã€‚ä¸å¹¸çš„æ˜¯ï¼Œçƒ­åŠ›å­¦æ³•åˆ™å†³å®šäº†å®‡å®™ä¸­çš„ç†µä¼šè¶‹å‘æœ€å¤§åŒ–ã€‚å½“è½¯ä»¶ä¸­çš„æ— åºåŒ–å¢åŠ æ—¶ï¼Œç¨‹åºå‘˜ä¼šè¯´â€œè½¯ä»¶åœ¨è…çƒ‚â€ã€‚æœ‰äº›äººå¯èƒ½ä¼šç”¨æ›´ä¹è§‚çš„æœ¯è¯­æ¥ç§°å‘¼å®ƒï¼Œå³â€œæŠ€æœ¯å€ºâ€ï¼Œæ½œå°è¯æ˜¯è¯´ä»–ä»¬æ€»æœ‰ä¸€å¤©ä¼šå¿è¿˜çš„â€”â€”ææ€•ä¸ä¼šè¿˜äº†ã€‚</p>
<p><img src="/2020/05/20/Software-Entropy-and-A-Broken-Window/1.png" alt></p>
<span id="more"></span>
<p>ä¸è¿‡ä¸ç®¡å«ä»€ä¹ˆåå­—ï¼Œå€ºåŠ¡å’Œè…çƒ‚éƒ½å¯èƒ½å¤±æ§åœ°è”“å»¶å¼€ã€‚</p>
<p>æœ‰å¾ˆå¤šå› ç´ ä¼šå¯¼è‡´è½¯ä»¶è…çƒ‚ã€‚æœ€é‡è¦çš„ä¸€ä¸ªä¼¼ä¹æ˜¯é¡¹ç›®å·¥ä½œä¸­çš„å¿ƒç†æ€§çŠ¶æ€ï¼Œæˆ–è€…è¯´æ–‡åŒ–ã€‚å³ä½¿æ˜¯ä¸€ä¸ªå•äººå›¢é˜Ÿï¼Œä½ çš„é¡¹ç›®çš„å¿ƒç†æ€§çŠ¶æ€ä¹Ÿæ˜¯ä¸ªéå¸¸è„†å¼±çš„ä¸œè¥¿ã€‚å³ä½¿æœ‰æœ€åˆç†çš„è®¡åˆ’å’Œæœ€ä½³çš„äººå‘˜ï¼Œé¡¹ç›®è¿˜æ˜¯å¯èƒ½åœ¨ç”Ÿå‘½å‘¨æœŸä¸­é€æ­¥è’åºŸã€è…çƒ‚ã€‚ä½†ä¹Ÿæœ‰ä¸€äº›é¡¹ç›®åœ¨ç»å†äº†å·¨å¤§çš„å›°éš¾ã€æŒç»­ä¸æ–­çš„æŒ«æŠ˜ä¹‹åï¼ŒæˆåŠŸåœ°å¯¹æŠ—äº†å¤©ç„¶çš„æ— åºåŒ–å€¾å‘ï¼Œèµ°å‡ºäº†å›°å¢ƒã€‚</p>
<p>æ˜¯ä»€ä¹ˆé€ æˆäº†å·®å¼‚ï¼Ÿ</p>
<p>åœ¨åŸå¸‚ä¸­å¿ƒï¼Œæœ‰äº›å»ºç­‘å¹²å‡€æ¼‚äº®ï¼Œè€Œå¦ä¸€äº›åˆ™ç ´è½ä¸å ªã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿä¸€äº›çŠ¯ç½ªå’ŒåŸå¸‚è¡°è´¥é¢†åŸŸçš„ç ”ç©¶äººå‘˜å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„è§¦å‘æœºåˆ¶ï¼Œåªéœ€ä¸€æ ·ä¸œè¥¿å°±èƒ½éå¸¸è¿…é€Ÿåœ°æŠŠä¸€å¹¢å¹²å‡€å®Œå¥½çš„å®œå±…å»ºç­‘å˜æˆä¸€ä¸ªç ´è´¥çš„åºŸå¼ƒç‰©ã€‚</p>
<h2 id="ç ´çª—åŸç†">ç ´çª—åŸç†</h2>
<p>ä¸€æ‰‡ç ´æŸçš„çª—æˆ·ï¼Œåªè¦ä¸€æ®µæ—¶é—´ä¸å»ä¿®ç†ï¼Œå»ºç­‘ä¸­çš„å±…æ°‘å°±ä¼šæ½œç§»é»˜åŒ–åœ°äº§ç”Ÿä¸€ç§è¢«é—å¼ƒçš„æ„Ÿè§‰â€”â€”å½“æƒè€…ä¸å…³å¿ƒè¿™å¹¢å»ºç­‘çš„æ„Ÿè§‰ã€‚ç„¶åï¼Œå…¶ä»–çš„çª—æˆ·ä¹Ÿå¼€å§‹æŸåï¼Œå±…æ°‘å¼€å§‹ä¹±ä¸¢åºŸç‰©ï¼Œå¢™ä¸Šå¼€å§‹å‡ºç°æ¶‚é¸¦ï¼Œå»ºç­‘å¼€å§‹å‡ºç°ä¸¥é‡çš„ç»“æ„æ€§æŸåã€‚åœ¨çœ‹ä¸Šå»å¾ˆçŸ­çš„æ—¶é—´å†…ï¼Œå»ºç­‘çš„æŸåç¨‹åº¦å°±è¶³ä»¥æ‰“æ¶ˆä¸šä¸»ä»¬æƒ³ä¿®å¥½å®ƒçš„æœŸæœ›ï¼Œè¢«é—å¼ƒçš„æ„Ÿè§‰ç»ˆå˜æˆäº†ç°å®ã€‚</p>
<p><img src="/2020/05/20/Software-Entropy-and-A-Broken-Window/2.jpeg" alt></p>
<p>ä¸ºä½•é€ æˆè¿™æ ·çš„å½±å“ï¼Ÿ</p>
<p><strong>å¿ƒç†å­¦å®¶çš„ç ”ç©¶è¡¨æ˜ï¼Œç»æœ›æ˜¯ä¼šä¼ æŸ“çš„ï¼Œå°±åƒç‹­çª„ç©ºé—´ä¸­çš„æµæ„Ÿç—…æ¯’ã€‚æ— è§†ä¸€ä¸ªæ˜æ˜¾æŸåçš„ä¸œè¥¿ï¼Œä¼šå¼ºåŒ–è¿™æ ·ä¸€ç§è§‚å¿µï¼šçœ‹æ¥æ²¡æœ‰ä»€ä¹ˆæ˜¯èƒ½ä¿®å¥½çš„ï¼Œä¹Ÿæ²¡äººåœ¨ä¹ï¼Œä¸€åˆ‡éƒ½å‘½ä¸­æ³¨å®šäº†ã€‚æ‰€æœ‰çš„è´Ÿé¢æƒ…ç»ªä¼šåœ¨å›¢é˜Ÿæˆå‘˜é—´è”“å»¶ï¼Œå˜æˆæ¶æ€§å¾ªç¯ã€‚</strong></p>
<h2 id="ä¸è¦æ”¾ä»»ç ´çª—">ä¸è¦æ”¾ä»»ç ´çª—</h2>
<p><strong>ä¸è¦æç½®â€œç ´çª—â€(ç³Ÿç³•çš„è®¾è®¡ã€é”™è¯¯çš„å†³å®šã€ä½åŠ£çš„ä»£ç ï¼‰ä¸å»ä¿®ç†ã€‚</strong></p>
<p>æ¯å‘ç°ä¸€ä¸ªå°±èµ¶ç´§ä¿®ä¸€ä¸ªã€‚å¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´å®Œå…¨ä¿®å¥½ï¼Œé‚£ä¹ˆå°±æŠŠå®ƒé’‰èµ·æ¥ã€‚ä¹Ÿè®¸ä½ å¯ä»¥æ³¨é‡Šæ‰é‚£äº›ç³Ÿç³•çš„ä»£ç ï¼Œæ˜¾ç¤ºä¸€è¡Œâ€œå°šæœªå®ç°â€çš„ä¿¡æ¯ï¼Œæˆ–ç”¨å‡æ•°æ®å…ˆæ›¿ä»£ä¸€ä¸‹ã€‚é‡‡å–è¡ŒåŠ¨ï¼Œé¢„é˜²è¿›ä¸€æ­¥çš„æŸå®³å‘ç”Ÿï¼Œè¡¨æ˜ä¸€åˆ‡å°½åœ¨ä½ çš„æŒæ¡ä¸­ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬äº†è§£äº†ä¸€æ—¦çª—æˆ·å¼€å§‹ç ´è£‚ï¼Œè¿è½¬è‰¯å¥½çš„å¹²å‡€ç³»ç»Ÿä¼šè¿…é€Ÿæ¶åŒ–ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–å› ç´ ä¼šå¯¼è‡´è½¯ä»¶è…çƒ‚ï¼Œæˆ‘ä»¬å°†åœ¨åˆ«å¤„æ¢è®¨ï¼Œä½†ä¸å…¶ä»–ä»»ä½•å› ç´ ç›¸æ¯”ï¼Œæ¼ è§†ä¼šåŠ é€Ÿè…çƒ‚çš„è¿‡ç¨‹ã€‚</p>
<p>ä½ æˆ–è®¸ä¼šè§‰å¾—ï¼Œæ²¡äººæœ‰æ—¶é—´æ¥æ¥å›å›æ¸…ç†é¡¹ç›®ä¸­æ‰€æœ‰çš„ç¢ç»ç’ƒã€‚å¦‚æœä½ çœŸè¿™ä¹ˆæƒ³ï¼ŒåŠä½ è¿˜æ˜¯è¶æ—©å¤šæƒ³æƒ³æ€ä¹ˆæ–™ç†è¿™ä¸ªé¡¹ç›®çš„åäº‹ï¼Œæˆ–æ˜¯ç›´æ¥ç¦»å¼€æ˜¯éä¹‹åœ°ã€‚</p>
<p>ä¸è¦è®©ç†µèµ¢å¾—èƒœåˆ©ã€‚</p>
<h2 id="å…ˆå‹¿ä¼¤å®³">å…ˆå‹¿ä¼¤å®³</h2>
<p>å¤šå¹´ä»¥å‰ï¼ŒAndyè®¤è¯†ä¸€ä¸ªåœŸè±ªã€‚ä»–çš„æˆ¿å­å¯Œä¸½å ‚çš‡ï¼Œå±‹å­é‡Œæ‘†æ»¡äº†æ— ä»·çš„å¤è‘£ï¼Œåˆ°å¤„é™ˆåˆ—ç€ç²¾ç¾çš„è‰ºæœ¯å“ã€‚æœ‰ä¸€å¤©ï¼Œä¸€å¼ æŒ‚æ¯¯å› ä¸ºç¦»å®¢å…å£ç‚‰å¤ªè¿‘è€Œç€ç«äº†ã€‚æ¶ˆé˜²å‘˜å¥‹å‹‡å†²è¿›å»æ•‘æ°‘äºæ°´ç«ï¼Œå½“ç„¶ä¸»è¦æ˜¯ç«ã€‚ä½†æ˜¯åœ¨æŠŠå·¨å¤§çš„æ°´ç®¡æ‹–è¿›å±‹å­å‰ï¼Œä»–ä»¬åœäº†ä¸‹æ¥â€”â€”å°½ç®¡é‡Œé¢ç«åŠ¿ç´§æ€¥â€”â€”æ¶ˆé˜²å‘˜æ¯…ç„¶é€‰æ‹©å…ˆåœ¨å‰é—¨å’Œç«æºä¹‹é—´é“ºä¸Šå«å­ï¼Œå› ä¸ºä»–ä»¬è§‰å¾—æ°´ç®¡å¤ªè„ã€‚</p>
<p>ä»–ä»¬ä¸æƒ³å¼„ååœ°æ¯¯ã€‚</p>
<p>ç°åœ¨å¬èµ·æ¥è¿™å¾ˆåæ¿€ã€‚æ¶ˆé˜²éƒ¨é—¨çš„é¦–è¦ä»»åŠ¡å½“ç„¶æ˜¯ç­ç«ï¼Œä½•å¿…ç®¡è¿‡ç¨‹ä¸­çš„é‚£äº›é™„å¸¦æŸå®³å‘¢ï¼Ÿä½†æ˜¯ï¼Œä»–ä»¬åœ¨æ¸…é†’åœ°è¯„ä¼°äº†å½¢åŠ¿åï¼Œå‡ºäºå¯¹è‡ªå·±æ§åˆ¶è¿™åœºç«åŠ¿èƒ½åŠ›çš„ç»å¯¹è‡ªä¿¡ï¼Œè¿˜æ˜¯å°½åŠ›å…¼é¡¾äº†ä¸å¯¹è´¢ç‰©é€ æˆä¸å¿…è¦çš„æ¯å®³ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯è½¯ä»¶å¼€å‘ä¸­åº”è¯¥éµå¾ªçš„æ–¹æ³•ï¼š<strong>ä¸è¦åªæ˜¯å› ä¸ºä¸€äº›ä¸œè¥¿éå¸¸å±æ€¥ï¼Œå°±å»é€ æˆé™„å¸¦æŸå®³ã€‚ç ´çª—ä¸€æ‰‡éƒ½å«Œå¤ªå¤š</strong>ã€‚</p>
<p><img src="/2020/05/20/Software-Entropy-and-A-Broken-Window/3.jpg" alt></p>
<p><strong>ä¸€æ‰‡ç ´çª—â€”â€”ä¸€æ®µè®¾è®¡æƒ…ç³•çš„ä»£ç ï¼Œä¸€ä¸ªè®©å›¢é˜Ÿåœ¨æ•´ä¸ªé¡¹ç›®å‘¨æœŸå†…éƒ½å¿…é¡»è¦éµå®ˆçš„ç³Ÿç³•çš„ç®¡ç†å†³ç­–â€”â€”æ˜¯ä¸€åˆ‡è¡°é€€çš„å¼€å§‹ã€‚</strong></p>
<p>å¦‚æœä½ å‘ç°è‡ªå·±æ­£å¤„åœ¨æœ‰å‡ æ‰‡ç ´çª—çš„é¡¹ç›®ä¸­ï¼Œå°±éå¸¸å®¹æ˜“é™·å…¥è¿™æ ·çš„æƒ³æ³•â€”â€”â€œåæ­£ä»£ç æ‰€æœ‰å…¶ä»–éƒ¨åˆ†éƒ½æ˜¯ä¸€å¨å±ï¼Œæˆ‘åªæ˜¯éšå¤§æµè€Œå·²ã€‚â€</p>
<p>é¡¹ç›®åœ¨è¿™ä¸ªæ—¶é—´ç‚¹ä¹‹å‰æ˜¯å¦ä¸€ç›´è‰¯å¥½è¿è¡Œå¹¶ä¸é‡è¦ã€‚åœ¨æœ€åˆå¯å‘â€œç ´çª—ç†è®ºâ€çš„å®éªŒä¸­ï¼Œä¸€è¾†åºŸå¼ƒçš„æ±½è½¦å®Œå¥½æ— æŸåœ°åœæ”¾äº†ä¸€ä¸ªæ˜ŸæœŸã€‚ä½†æ˜¯ä¸€æ—¦æœ‰ä¸€å—ç»ç’ƒè¢«æ‰“ç ´ï¼Œè¿™è¾†è½¦åœ¨å‡ ä¸ªå°æ—¶å†…å°±ä¼šè¢«æ‰’å…‰å¹¶ç¿»äº†ä¸ªåº•æœå¤©ã€‚</p>
<p><strong>å‡ºäºåŒæ ·åŸå› ï¼Œå¦‚æœèº«å¤„ä¸€ä¸ªå¥åº·å›¢é˜Ÿï¼Œä½ ä»¬é¡¹ç›®çš„ä»£ç å¦‚æ­¤å®Œç¾â€”â€”ç¼–å†™æ¸…æ™°ã€è®¾è®¡ä¼˜è‰¯ã€ç®€æ´ä¼˜é›…â€”â€”ä½ å°±ä¼šå€¾å‘äºæ ¼å¤–åœ°å°å¿ƒï¼Œä¸æŠŠå®ƒå¼„ç³Ÿã€‚</strong> å°±åƒé‚£äº›æ¶ˆé˜²å‘˜ä¸€æ ·ï¼Œå³ä½¿å±‹å†…ç«åŠ¿ç†Šç†Šï¼ˆæˆªæ­¢æ—¶é™ã€å‘è¡Œæ—¥æœŸã€é”€å”®æ¼”ç¤ºï¼Œç­‰ç­‰ï¼‰ï¼Œä½ ä¹Ÿä¸æƒ³æˆä¸ºç¬¬ä¸€ä¸ªå¼„ä¹±å®ƒã€é€ æˆé™„å¸¦æŸå®³çš„äººã€‚åä¹‹ï¼Œè¿™ä¸ªé¡¹ç›®å°±ä¼šä»æŸä¸€æ‰‡ç ´çª—ï¼ˆç³Ÿç³•çš„è®¾è®¡ï¼Œæ··ä¹±çš„ä»£ç â€¦â€¦ï¼‰å¼€å§‹è¡°é€€ï¼Œè…çƒ‚â€¦â€¦</p>
<p>ä¸€å®šè¦å‘Šè¯‰è‡ªå·±ï¼Œâ€œä¸è¦æ‰“ç ´çª—æˆ·â€ã€‚</p>
]]></content>
      <categories>
        <category>è½¯ä»¶ç†è®º</category>
      </categories>
      <tags>
        <tag>æŠ€æœ¯å€º</tag>
        <tag>èä¹¦</tag>
      </tags>
  </entry>
  <entry>
    <title>matplotlibçš„backendsä»¥åŠéäº¤äº’å¼ç»˜å›¾</title>
    <url>/2020/04/28/Matplotlib-s-backends-and-non-interactive-backends-for-rendering/</url>
    <content><![CDATA[<p>åœ¨åˆ†æè§†é¢‘çš„psnræ—¶ï¼Œéœ€è¦ç”¨åˆ°<code>matplotlib</code>æ¥ç»˜åˆ¶è§†é¢‘æ¯ä¸€å¸§çš„psnrã€‚åœ¨Macè°ƒè¯•çš„æ—¶å€™å¯ä»¥æ­£å¸¸ç”Ÿæˆå¦‚ä¸‹æ‰€ç¤ºçš„psnrè¶‹åŠ¿å›¾ï¼š</p>
<p><img src="/2020/04/28/Matplotlib-s-backends-and-non-interactive-backends-for-rendering/1.png" alt></p>
<p>ä½†æ˜¯å°†åº”ç”¨éƒ¨ç½²åˆ°linuxæœºå™¨çš„æ—¶å€™ï¼Œå´æç¤º**ModuleNotFoundError: No module named â€˜_tkinterâ€™**çš„é”™è¯¯ã€‚</p>
<span id="more"></span>
<p>å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/04/28/Matplotlib-s-backends-and-non-interactive-backends-for-rendering/2.jpg" alt></p>
<p>è¯·æ•™äº†åŒäº‹åé‡‡ç”¨å¦‚ä¸‹çš„æ–¹å¼è§£å†³äº†é—®é¢˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import matplotlib </span><br><span class="line">matplotlib.use(&#39;Agg&#39;)</span><br><span class="line">import matplotlib.pyplot as plt</span><br></pre></td></tr></table></figure>
<p><img src="/2020/04/28/Matplotlib-s-backends-and-non-interactive-backends-for-rendering/3.jpg" alt></p>
<p>è™½ç„¶è§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯å½“æ—¶æ²¡æœ‰æ˜ç™½ï¼š</p>
<ul>
<li>é—®é¢˜ç©¶ç«Ÿæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆè¿™æ ·å°±å¯ä»¥è§£å†³ï¼Ÿ</li>
<li>è§£å†³æ–¹æ¡ˆå’Œä¹‹å‰çš„å†™æ³•çš„å·®å¼‚åœ¨å“ªé‡Œï¼Ÿ</li>
</ul>
<p>å› æ­¤æŸ¥é˜…äº†matplotlibçš„æ–‡æ¡£ï¼Œç„¶åå°±æœ‰äº†è¯¥æ–‡æ¥ä¸‹æ¥çš„å†…å®¹ã€‚ä¸ºäº†ä¿è¯ææ–™çš„åŸæ±åŸå‘³ï¼Œå¦‚ä¸‹çš„å†…å®¹å‡æ‘˜å½•è‡ª<a href="https://matplotlib.org/3.2.1/tutorials/introductory/usage.html#backends">matplotlibçš„å¼€å‘æ–‡æ¡£</a>ã€‚</p>
<h2 id="matplotlibä¸­backendçš„æ¦‚å¿µ">matplotlibä¸­backendçš„æ¦‚å¿µ</h2>
<p>A lot of documentation on the website and in the mailing lists refers to the <strong>â€œbackendâ€</strong> and many new users are confused by this term. matplotlib targets many different use cases and output formats. Some people use matplotlib interactively from the python shell and have plotting windows pop up when they type commands. Some people run Jupyter notebooks and draw inline plots for quick data analysis. Others embed matplotlib into graphical user interfaces like wxpython or pygtk to build rich applications. Some people use matplotlib in batch scripts to generate postscript images from numerical simulations, and still others run web application servers to dynamically serve up graphs.</p>
<p><strong>To support all of these use cases, matplotlib can target different outputs, and each of these capabilities is called a backend; the â€œfrontendâ€ is the user facing code, i.e., the plotting code, whereas the â€œbackendâ€ does all the hard work behind-the-scenes to make the figure.</strong></p>
<p>There are two types of backends:</p>
<ul>
<li>user interface backends (for use in pygtk, wxpython, tkinter, qt4, or macosx; also referred to as <code>&quot;interactive backends&quot;</code>). The interactive backends: GTK3Agg, GTK3Cairo, MacOSX, nbAgg, Qt4Agg, Qt4Cairo, Qt5Agg, Qt5Cairo, TkAgg, TkCairo, WebAgg, WX, WXAgg, WXCairo.</li>
<li>hardcopy backends to make image files (PNG, SVG, PDF, PS; also referred to as <code>&quot;non-interactive backends&quot;</code>). The non-interactive backends: agg, cairo, pdf, pgf, ps, svg, template.</li>
</ul>
<h2 id="matplotlibä¸­backendçš„é»˜è®¤é…ç½®">matplotlibä¸­backendçš„é»˜è®¤é…ç½®</h2>
<p>By default, <strong>Matplotlib should automatically select a default backend which allows both interactive work and plotting from scripts</strong>, with output to the screen and/or to a file, so at least initially you will not need to worry about the backend. <strong>The most common exception is if your Python distribution comes without tkinter and you have no other GUI toolkit installed; this happens on certain Linux distributions</strong>, where you need to install a Linux package named python-tk (or similar).</p>
<p>If, however, you want to write graphical user interfaces, or a web application server, or need a better understanding of what is going on, read on. To make things a little more customizable for graphical user interfaces, matplotlib separates the concept of the renderer (the thing that actually does the drawing) from the canvas (the place where the drawing goes). The canonical renderer for user interfaces is Agg which uses the Anti-Grain Geometry C++ library to make a raster (pixel) image of the figure; it is used by the Qt5Agg, Qt4Agg, GTK3Agg, wxAgg, TkAgg, and macosx backends. An alternative renderer is based on the Cairo library, used by Qt5Cairo, Qt4Cairo, etc.</p>
<h2 id="interactiveæ¨¡å¼çš„æ¦‚å¿µ">interactiveæ¨¡å¼çš„æ¦‚å¿µ</h2>
<p>Use of an interactive backend (see What is a backend?) permitsâ€“but does not by itself require or ensureâ€“plotting to the screen. Whether and when plotting to the screen occurs, and whether a script or shell session continues after a plot is drawn on the screen, depends on the functions and methods that are called, and on a state variable that determines whether matplotlib is in â€œinteractive modeâ€. The default Boolean value is set by the matplotlibrc file, and may be customized like any other configuration parameter (see Customizing Matplotlib with style sheets and rcParams). It may also be set via matplotlib.interactive(), and its value may be queried via matplotlib.is_interactive(). Turning interactive mode on and off in the middle of a stream of plotting commands, whether in a script or in a shell, is rarely needed and potentially confusing, so in the following we will assume all plotting is done with interactive mode either on or off.</p>
<p>Interactive mode may also be turned on via matplotlib.pyplot.ion(), and turned off via matplotlib.pyplot.ioff().</p>
<p><strong>In interactive mode, pyplot functions automatically draw to the screen.</strong> When plotting interactively, if using object method calls in addition to pyplot functions, then call draw() whenever you want to refresh the plot.</p>
<p>Use non-interactive mode in scripts in which you want to generate one or more figures and display them before ending or generating a new set of figures. In that case, use show() to display the figure(s) and to block execution until you have manually destroyed them.</p>
<h2 id="å¦‚ä½•é€‰æ‹©backend">å¦‚ä½•é€‰æ‹©backend</h2>
<p>There are three ways to configure your backend:</p>
<ul>
<li>The <code>rcParams[&quot;backend&quot;]</code> (default: â€˜aggâ€™) parameter in your matplotlibrc file</li>
<li>The <code>MPLBACKEND</code> environment variable</li>
<li>The function <code>matplotlib.use()</code></li>
</ul>
<p>A more detailed description is given below.</p>
<p>If multiple of these are configurations are present, the last one from the list takes precedence; e.g. calling <code>matplotlib.use()</code> will override the setting in your matplotlibrc.</p>
<p>If no backend is explicitly set, Matplotlib automatically detects a usable backend based on what is available on your system and on whether a GUI event loop is already running. On Linux, if the environment variable <code>DISPLAY</code> is unset, the â€œevent loopâ€ is identified as â€œheadlessâ€, which causes a fallback to a noninteractive backend (agg).</p>
<p>Here is a detailed description of the configuration methods:</p>
<ol>
<li>Setting <code>rcParams[&quot;backend&quot;]</code> (default: â€˜aggâ€™) in your matplotlibrc file:</li>
</ol>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">backend : qt5agg   # use pyqt5 with antigrain (agg) rendering</span><br></pre></td></tr></table></figure>
<p>See also Customizing Matplotlib with style sheets and rcParams.</p>
<ol start="2">
<li>Setting the <code>MPLBACKEND</code> environment variable:</li>
</ol>
<p>You can set the environment variable either for your current shell or for a single script.</p>
<p>On Unix:</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; export MPLBACKEND&#x3D;qt5agg</span><br><span class="line">&gt; python simple_plot.py</span><br><span class="line"></span><br><span class="line">&gt; MPLBACKEND&#x3D;qt5agg python simple_plot.py</span><br></pre></td></tr></table></figure>
<p>On Windows, only the former is possible:</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; set MPLBACKEND&#x3D;qt5agg</span><br><span class="line">&gt; python simple_plot.py</span><br></pre></td></tr></table></figure>
<p>Setting this environment variable will override the backend parameter in any matplotlibrc, even if there is a matplotlibrc in your current working directory. Therefore, setting MPLBACKEND globally, e.g. in your .bashrc or .profile, is discouraged as it might lead to counter-intuitive behavior.</p>
<ol start="3">
<li>If your script depends on a specific backend you can use the function <code>matplotlib.use()</code>:</li>
</ol>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import matplotlib</span><br><span class="line">matplotlib.use(&#39;qt5agg&#39;)</span><br></pre></td></tr></table></figure>
<p>This should be done before any figure is created; otherwise Matplotlib may fail to switch the backend and raise an ImportError.</p>
<p>Using use will require changes in your code if users want to use a different backend. Therefore, you should avoid explicitly calling use unless absolutely necessary.</p>
<h2 id="matplotlib-use-agg-çš„ä½œç”¨">matplotlib.use(â€˜Aggâ€™)çš„ä½œç”¨</h2>
<p>åœ¨ä»‹ç»å®Œæ•´æ•´ä½“çš„matplotlibä¸­çš„backendsä»¥åŠmatplotlibä¸­çš„ç»˜å›¾æ¨¡å¼ä¹‹åï¼Œå°±èƒ½æ˜ç™½ä¸ºä»€ä¹ˆæ–‡ç« å¼€å§‹å‡ºç°çš„è¿ç§»è¿‡ç¨‹ä¸­ä¼šå‡ºç°ç±»ä¼¼çš„é”™è¯¯ã€‚</p>
<p>é¦–å…ˆæ ¹æ®<a href="#matplotlib%E4%B8%ADbackend%E7%9A%84%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE">matplotlibä¸­backendçš„é»˜è®¤é…ç½®</a>ä¸­çš„ä»‹ç»å¯ä»¥çŸ¥é“ï¼Œmatplotlibä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„backendé…ç½®ï¼Œå¹¶ä¸”è¯¥é»˜è®¤çš„backendä¼šåŒæ—¶æ”¯æŒäº¤äº’å¼ç»˜å›¾æ¨¡å¼ä»¥åŠåˆ©ç”¨è„šæœ¬ç»˜å›¾çš„æ¨¡å¼ã€‚å¹¶ä¸”ï¼Œäº¤äº’å¼ç»˜å›¾è¿˜éœ€è¦åˆ©ç”¨GUIå·¥å…·æ¥ç”Ÿæˆä¸€ä¸ªå±å¹•ç»˜å›¾çš„çª—å£ã€‚è€Œè¿ç§»çš„Linuxæœºå™¨ä¸Šç¼ºä¹tkinterè¿™æ ·çš„GUIå·¥å…·ï¼Œå› æ­¤åœ¨<code>import matplotlib.pyplot as plt</code>çš„æ—¶å€™ä¼šäº§ç”Ÿé”™è¯¯ã€‚</p>
<p>è€Œåˆ©ç”¨<code>matplotlib.use('Agg')</code>å¯ä»¥åˆ‡æ¢matplotlibçš„backendï¼Œå°†å…¶backendä»é»˜è®¤çš„äº¤äº’å¼æ¨¡å¼åˆ‡æ¢ä¸ºéäº¤äº’å¼æ¨¡å¼ï¼Œæ­¤æ—¶ï¼Œç”Ÿæˆçš„å›¾å½¢ä¼šä»¥å›¾ç‰‡çš„å½¢å¼ä¿å­˜èµ·æ¥ï¼Œè€Œæ— éœ€tkinterè¿™æ ·çš„GUIå·¥å…·çš„æ”¯æŒï¼Œå› æ­¤å¯ä»¥è§£å†³æœ¬æ–‡æœ€å¼€å§‹å‡ºç°çš„é—®é¢˜ã€‚</p>
]]></content>
      <categories>
        <category>matplotlib</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>matplotlib</tag>
        <tag>non-interactive rendering</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Wiresharkåˆ†æSRTç›´æ’­æµ</title>
    <url>/2020/04/09/analysize-SRT-protocol-live-stream-with-wireshark/</url>
    <content><![CDATA[<p><a href="https://www.haivision.com/products/srt-secure-reliable-transport/">SRT(Secure Reliable Transport)</a>æ˜¯ä¸€ç§åŸºäº<a href="https://tools.ietf.org/html/draft-gg-udt-03">UDT(UDP-based Data Transfer)</a>çš„ã€å®‰å…¨çš„ã€å¯é çš„ã€å¼€æºçš„æ•°æ®ä¼ è¾“åè®®&amp;æŠ€æœ¯ã€‚SRTåœ¨UDPåŸºç¡€ä¹‹ä¸Šå®ç°äº†ï¼šæ™ºèƒ½æ•°æ®é‡ä¼ æœºåˆ¶å’ŒAES256åŠ å¯†æŠ€æœ¯ï¼Œè¿™ä½¿å¾—å…¶æˆä¸ºä¸€ç§å®‰å…¨ã€å¯é ã€ä½å»¶è¿Ÿçš„ä¼ è¾“æŠ€æœ¯ã€‚åˆ©ç”¨SRTï¼Œå¯ä»¥å®ç°åœ¨ä¸å¯é¢„æµ‹çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼ˆä¾‹å¦‚äº’è”ç½‘ï¼‰é«˜æ•ˆã€å®‰å…¨çš„ä¼ è¾“æ•°æ®ã€‚<a href="https://github.com/Haivision/srt/">SRT</a>è¿˜åšäº†ç‰¹æ®Šä¼˜åŒ–ä»¥é€‚åˆè§†é¢‘å®æ—¶æµæ•°æ®çš„ä¼ è¾“ã€‚æ ¹æ®<a href="https://www.srtalliance.org/srt-alliance-announces-the-addition-of-the-srt-low-latency-protocol-to-open-broadcaster-softwares-obs-studio/">SRT Alliance</a>åœ¨2019-04-04çš„ä»‹ç»ï¼Œç›®å‰å¦‚ä¸‹çš„åº”ç”¨å·²ç»é›†æˆå¹¶æ”¯æŒSRTï¼š<a href="https://obsproject.com/">OBS Studio</a>ï¼Œ<a href="https://www.videolan.org/vlc/">VideoLANâ€™s VLC</a>ï¼Œ<a href="http://ffmpeg.org/">FFmpeg</a>ï¼Œ<a href="https://www.wireshark.org/">Wireshark</a>ã€‚</p>
<p><img src="/2020/04/09/analysize-SRT-protocol-live-stream-with-wireshark/1.png" alt></p>
<span id="more"></span>
<p>æœ¬æ–‡åªä»‹ç»ï¼š<strong>å¦‚ä½•åˆ©ç”¨FFmpegç”ŸæˆSRTæ•°æ®æµå¹¶åˆ©ç”¨Wiresharkå¯¹è¯¥SRTæ•°æ®è¿›è¡ŒæŠ“åŒ…åˆ†æ</strong>ã€‚å…³äºSRTçš„è¯¦ç»†å†…å®¹ï¼Œå¯ä»¥å‚è€ƒ<a href="https://github.com/Haivision/srt/files/2489142/SRT_Protocol_TechnicalOverview_DRAFT_2018-10-17.pdf">SRT Protocol Technical Overview Draft</a>ã€‚</p>
<h2 id="å‰æœŸå‡†å¤‡">å‰æœŸå‡†å¤‡</h2>
<ol>
<li>
<p>æŒ‰ç…§<a href="https://github.com/Haivision/srt/blob/master/README.md">è¯´æ˜</a>å®‰è£…SRT</p>
</li>
<li>
<p>åˆ©ç”¨<code>./configure --enable-libsrt</code>é‡æ–°ç¼–è¯‘FFmpegï¼Œè®©ffmpegå·¥å…·é›†æ”¯æŒSRTåè®®ã€‚é‡æ–°configureçš„è¿‡ç¨‹å¦‚æœé‡åˆ°<code>ERROR: srt &gt;= 1.3.0 not found using pkg-config</code>çš„é”™è¯¯ï¼Œå¯ä»¥æŸ¥çœ‹<code>ffbuild/config.log</code>çš„ç›¸å…³ä¿¡æ¯ï¼Œä¸€èˆ¬éœ€è¦æŠŠsrtå’Œsrtæ‰€ä¾èµ–çš„opensslçš„<strong>pkgconfig</strong>è·¯å¾„å¢åŠ åˆ°<code>PKG_CONFIG_PATH</code>ç¯å¢ƒå˜é‡ä¸­å³å¯ã€‚</p>
</li>
<li>
<p>å‡çº§Wiresharkåˆ°3.0ä¹‹åçš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”è®¾ç½®Wiresharkå–æ¶ˆWiresharkå¯¹UDTåè®®çš„æ”¯æŒï¼Œå…·ä½“åšæ³•ä¸ºï¼šç‚¹å‡»èœå•æ ä¸­çš„<code>Analyze</code>-&gt;<code>Enabled Protocols</code>ï¼Œç„¶åä»å¼¹å‡ºçš„æ”¯æŒåè®®ä¸­æ‰¾åˆ°UDTï¼Œå¹¶å–æ¶ˆUDTå‰é¢çš„é€‰æ‹©æ ‡è®°ã€‚</p>
<p><img src="/2020/04/09/analysize-SRT-protocol-live-stream-with-wireshark/2.jpg" alt></p>
</li>
<li>
<p>å®‰è£…VLCæ’­æ”¾å™¨ï¼Œç”¨äºæ’­æ”¾SRTåè®®çš„è§†é¢‘æµã€‚</p>
</li>
</ol>
<h2 id="ç”Ÿæˆsrtç›´æ’­æµ">ç”ŸæˆSRTç›´æ’­æµ</h2>
<p>å¯ä»¥åˆ©ç”¨<code>ffmpeg</code>å’Œ<code>srt-live-transmit</code>ï¼ˆè¯¥å·¥å…·åœ¨å®‰è£…srtçš„æ—¶å€™ä¼šé»˜è®¤å®‰è£…ï¼‰æ¥ç”ŸæˆSRTç›´æ’­æµã€‚ä¸»è¦æ€è·¯æ˜¯é¦–å…ˆåˆ©ç”¨<code>ffmpeg</code>ç”ŸæˆUDPçš„ç›´æ’­æµï¼Œç„¶ååˆ©ç”¨<code>srt-live-transmit</code>æŠŠUDPçš„ç›´æ’­æµè½¬æ¢æˆSRTçš„ç›´æ’­æµï¼Œæ›´è¯¦ç»†çš„æ–¹å¼å¯ä»¥å‚è€ƒ<a href="https://github.com/Haivision/srt/blob/master/docs/srt-live-transmit.md">srt-live-transmitçš„ä½¿ç”¨è¯´æ˜</a>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç”ŸæˆUDPè§†é¢‘æµ</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ffmpeg -f lavfi -re -i smptebars=duration=300:size=1280x720:rate=30 \</span></span><br><span class="line"><span class="bash">-f lavfi -re -i sine=frequency=1000:duration=60:sample_rate=44100 \</span></span><br><span class="line"><span class="bash">-pix_fmt yuv420p -c:v libx264 -b:v 1000k -g 30 -keyint_min 120 \</span></span><br><span class="line"><span class="bash">-profile:v baseline -preset veryfast -f mpegts \</span></span><br><span class="line"><span class="bash"><span class="string">&quot;udp://127.0.0.1:5000?pkt_size=1316&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç”ŸæˆSRTè§†é¢‘æµ</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> srt-live-transmit -s:10 udp://:5000 srt://:5001</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½¿ç”¨ffplayæ’­æ”¾SRTè§†é¢‘æµ</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ffplay <span class="string">&quot;srt://127.0.0.1:5001&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>å…·ä½“æ’­æ”¾æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/04/09/analysize-SRT-protocol-live-stream-with-wireshark/3.jpg" alt></p>
<h2 id="ä½¿ç”¨wiresharkåˆ†æsrt">ä½¿ç”¨Wiresharkåˆ†æSRT</h2>
<p>ä¸ºäº†å¯ä»¥ç”¨WiresharkæŠ“åˆ°SRTæ•°æ®åŒ…ï¼Œéœ€è¦ä½¿ç”¨VLCæ’­æ”¾å™¨æ¥æ‰“å¼€åˆšæ‰åˆ›å»ºçš„SRTè§†é¢‘æµï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/04/09/analysize-SRT-protocol-live-stream-with-wireshark/4.jpg" alt></p>
<p>æ‰“å¼€Wiresharkï¼Œé€‰æ‹©Lookbackï¼ˆå› ä¸ºè¦æ•è·çš„SRTåœ°å€ä¸º127.0.0.1ï¼‰ï¼Œç„¶ååœ¨æ•è·çš„æ•°æ®çª—å£é€‰æ‹©srtåè®®è¿‡æ»¤ï¼Œç¨ç­‰ç‰‡åˆ»å°±å¯ä»¥çœ‹åˆ°æ•è·çš„SRTæ•°æ®åŒ…ï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/04/09/analysize-SRT-protocol-live-stream-with-wireshark/5.jpg" alt></p>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥åˆ©ç”¨Wiresharkæ¥åˆ†æSRTåè®®çš„å¤„ç†æµç¨‹ï¼Œä¾‹å¦‚ä¸Šå›¾ä¸­çš„Handshakeæ•°æ®åŒ…ã€‚å°¤å…¶æ˜¯åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œé…åˆ<a href="https://github.com/Haivision/srt/files/2489142/SRT_Protocol_TechnicalOverview_DRAFT_2018-10-17.pdf">SRTçš„åè®®æ–‡æ¡£</a>ä»¥åŠWiresharkçš„æŠ“åŒ…åˆ†æï¼Œèƒ½å¤ŸåŠ æ·±å¯¹SRTåè®®çš„ç†è§£ï¼Œè¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p>
]]></content>
      <categories>
        <category>è§†é¢‘æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Wireshark</tag>
        <tag>SRT</tag>
        <tag>ç½‘ç»œåè®®åˆ†æ</tag>
      </tags>
  </entry>
  <entry>
    <title>macOS Catalinaçš„stripç‰ˆæœ¬å¼‚å¸¸å¯¼è‡´ç¼–è¯‘çš„FFmpegè¿è¡Œè¢«kill</title>
    <url>/2020/04/08/ffmpeg-compiled-in-macOS-Catalina-runs-crash/</url>
    <content><![CDATA[<p>å› ä¸ºè¿‘æœŸæ­£åœ¨è°ƒç ”&amp;äº†è§£<a href="https://github.com/Haivision/srt">SRTåè®®</a>çš„ç›¸å…³å†…å®¹ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œéœ€è¦æ‰“å¼€FFmpegçš„<code>--enable-libsrt</code>åŠŸèƒ½å¹¶é‡æ–°ç¼–è¯‘FFmpegï¼Œä»è€Œä¿è¯FFmpegæ”¯æŒSRTåè®®ã€‚ä½†æ˜¯é‡æ–°ç¼–è¯‘ä¹‹åå´å‘ç°å¯åŠ¨ffmpegå·¥å…·å°±ä¼šè¢«å†…æ ¸æ€æ­»ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<p><img src="/2020/04/08/ffmpeg-compiled-in-macOS-Catalina-runs-crash/1.jpg" alt></p>
<span id="more"></span>
<p>åˆ©ç”¨<em>lldb</em>è°ƒè¯•è¯¥<em>ffmpeg</em>å‘ç°ç›´æ¥æç¤º<code>error: Malformed Mach-o file</code>çš„é”™è¯¯ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/04/08/ffmpeg-compiled-in-macOS-Catalina-runs-crash/2.jpg" alt></p>
<p>ç¼–è¯‘å¼‚å¸¸çš„Macç‰ˆæœ¬å’ŒXcodeç‰ˆæœ¬ä¿¡æ¯åˆ†åˆ«å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/04/08/ffmpeg-compiled-in-macOS-Catalina-runs-crash/3.jpg" alt></p>
<p>æŸ¥é˜…äº†<a href="https://trac.ffmpeg.org/ticket/8073">ç½‘ä¸Šçš„èµ„æ–™</a>ï¼Œä¹ŸæŸ¥çœ‹äº†<a href="https://github.com/Homebrew/homebrew-core/blob/master/Formula/ffmpeg.rb">brewç¼–è¯‘FFmpegçš„æŒ‡ä»¤</a>ï¼ŒåŸå› å¯èƒ½æ˜¯ï¼š<strong>Xcode11ä¸‹clangé»˜è®¤å¼€å¯-fstack-check</strong>ã€‚</p>
<p>åŒæ—¶ï¼Œåœ¨å¦‚ä¸‹å›¾æ‰€ç¤ºçš„Xcode 10.3ç‰ˆæœ¬çš„Macä¸Šåˆ™å¯ç¼–è¯‘æˆåŠŸï¼š</p>
<p><img src="/2020/04/08/ffmpeg-compiled-in-macOS-Catalina-runs-crash/4.jpg" alt></p>
<p>å› æ­¤æ ¹æ®å¦‚ä¸Šä¿¡æ¯ï¼š<code>./configure</code>æ—¶éœ€è¦å¢åŠ <code>--host-cflags=-fno-stack-check</code>é…ç½®ã€‚</p>
<p>ä½†æ˜¯å¢åŠ è¯¥é…ç½®ä¹‹åï¼Œç¼–è¯‘å‡ºçš„ffmpegä¾ç„¶æ— æ³•æ­£å¸¸è¿è¡Œã€‚</p>
<h2 id="å‘ç°åŸå› ">å‘ç°åŸå› </h2>
<p><strong>æ°å¥½æœ€è¿‘å‡çº§äº†ç³»ç»Ÿå’ŒXcodeç‰ˆæœ¬ï¼Œæƒ³ç€å†ç¼–è¯‘ä¸€ä¸‹çœ‹ä¸‹æ˜¯å¦å¯ç”¨ï¼Œç»ˆäºæœ‰äº†æ–°çš„å‘ç°ã€‚</strong></p>
<p>ç¼–è¯‘çš„ç³»ç»Ÿç‰ˆæœ¬å’ŒXcodeç‰ˆæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/04/08/ffmpeg-compiled-in-macOS-Catalina-runs-crash/5.jpg" alt></p>
<p>ç¼–è¯‘å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> .&#x2F;configure --enable-shared --enable-pthreads --enable-version3 --enable-avresample \</span><br><span class="line">--cc&#x3D;clang --host-cflags&#x3D; --host-ldflags&#x3D; --enable-ffplay --enable-gnutls --enable-gpl \</span><br><span class="line">--enable-libaom --enable-libbluray --enable-libmp3lame --enable-libopus \</span><br><span class="line">--enable-librubberband --enable-libsnappy --enable-libtesseract --enable-libtheora \</span><br><span class="line">--enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 \</span><br><span class="line">--enable-libx265 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype \</span><br><span class="line">--enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb \</span><br><span class="line">--enable-libopenjpeg --enable-librtmp --enable-libspeex --enable-libsoxr \</span><br><span class="line">--enable-videotoolbox --disable-libjack --disable-indev&#x3D;jack</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘ä¹‹åï¼ŒæƒŠå–œçš„å‘ç°ï¼Œè™½ç„¶<code>ffprobe</code>å‘½ä»¤ä¾æ—§å¼‚å¸¸ï¼Œä½†æ˜¯<code>ffprobe_g</code>å‘½ä»¤å·²ç»å¯ä»¥ä½¿ç”¨äº†ã€‚å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/04/08/ffmpeg-compiled-in-macOS-Catalina-runs-crash/6.jpg" alt></p>
<p><code>ffprobe</code>å’Œ<code>ffprobe_g</code>çš„ä¸åŒå°±æ˜¯<code>ffprobe_g</code>ä¼šåŒ…å«è°ƒè¯•ä¿¡æ¯ã€‚</p>
<p>å›é¡¾ç¼–è¯‘æŒ‡ä»¤çš„æœ€åå‡ æ¡æŒ‡ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">LD ffmpeg_g</span><br><span class="line">LD ffprobe_g</span><br><span class="line">LD ffplay_g</span><br><span class="line">STRIP ffmpeg</span><br><span class="line">STRIP ffprobe</span><br><span class="line">STRIP ffplay</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œåœ¨ç¼–è¯‘çš„æœ€åï¼Œä½¿ç”¨<code>strip</code>å‘½ä»¤ï¼Œå»æ‰äº†<code>ffprobe</code>ä¸­çš„è°ƒè¯•ä¿¡æ¯ã€‚é‚£ä¹ˆæ˜¯å¦æ˜¯<code>strip</code>å‘½ä»¤æœ‰é—®é¢˜å‘¢ï¼Ÿ</p>
<p>å¸¦ç€è¿™ä¸ªç–‘é—®ï¼Œå†™äº†ä¸€æ®µæµ‹è¯•ä»£ç <code>test.cpp</code>ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello World!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>clang++</code>ç¼–è¯‘å¹¶å¯¹æ¯”åˆ©ç”¨<code>strip</code>å‘½ä»¤å»æ‰è°ƒè¯•ä¿¡æ¯å‰åçš„è¿è¡Œç»“æœï¼Œç»ˆäºå‘ç°äº†é—®é¢˜æ‰€åœ¨ï¼š</p>
<p><img src="/2020/04/08/ffmpeg-compiled-in-macOS-Catalina-runs-crash/7.jpg" alt></p>
<p>è‡³æ­¤ï¼Œç»ˆäºæ‰¾åˆ°åŸå› ï¼š<code>strip</code>å‘½ä»¤ç”Ÿæˆçš„æ— è°ƒè¯•ä¿¡æ¯çš„å¯æ‰§è¡Œç¨‹åºï¼Œä¼šå‘ç”Ÿ<code>Malformed Mach-o file</code>çš„ç°è±¡ã€‚</p>
<h2 id="ä¿®æ­£stripç‰ˆæœ¬">ä¿®æ­£stripç‰ˆæœ¬</h2>
<p>æ€€ç–‘æœºå™¨ä¸Šçš„<code>strip</code>ç‰ˆæœ¬å¼‚å¸¸å¯¼è‡´å»æ‰è°ƒè¯•ä¿¡æ¯åçš„å¯æ‰§è¡Œæ–‡ä»¶å‡ºç°å¼‚å¸¸ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ which strip</span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;opt&#x2F;binutils&#x2F;bin&#x2F;strip</span><br><span class="line">$ which clang++</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;clang++</span><br><span class="line">$ ls &#x2F;usr&#x2F;bin&#x2F;strip</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;strip</span><br><span class="line">$ &#x2F;usr&#x2F;bin&#x2F;strip -x a.out</span><br><span class="line">$ .&#x2F;a.out</span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure>
<p>ç»è¿‡å¦‚ä¸Šçš„è¿‡ç¨‹å‘ç°ï¼Œç¡®å®æ˜¯<code>strip</code>çš„ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œåˆ©ç”¨<code>/usr/bin/strip</code>ç”Ÿæˆçš„æ— è°ƒè¯•ä¿¡æ¯çš„å¯æ‰§è¡Œç¨‹åºæ˜¯æ­£å¸¸çš„ã€‚</p>
<h2 id="é—®é¢˜è§£å†³">é—®é¢˜è§£å†³</h2>
<p>åœ¨ç¼–è¯‘ffmpegæ—¶ï¼Œåˆ©ç”¨<code>--strip</code>é€‰é¡¹æ¥æŒ‡å®š<code>strip</code>çš„ç‰ˆæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> .&#x2F;configure --enable-shared --enable-pthreads --enable-version3 --enable-avresample \</span><br><span class="line">--cc&#x3D;clang --host-cflags&#x3D; --host-ldflags&#x3D; --enable-ffplay --enable-gnutls --enable-gpl \</span><br><span class="line">--enable-libaom --enable-libbluray --enable-libmp3lame --enable-libopus \</span><br><span class="line">--enable-librubberband --enable-libsnappy --enable-libtesseract --enable-libtheora \</span><br><span class="line">--enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 \</span><br><span class="line">--enable-libx265 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype \</span><br><span class="line">--enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb \</span><br><span class="line">--enable-libopenjpeg --enable-librtmp --enable-libspeex --enable-libsoxr \</span><br><span class="line">--enable-videotoolbox --disable-libjack --disable-indev&#x3D;jack \</span><br><span class="line">--strip&#x3D;&#x2F;usr&#x2F;bin&#x2F;strip</span><br></pre></td></tr></table></figure>
<p>å¤§åŠŸå‘Šæˆï¼Œé—®é¢˜è§£å†³ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/04/08/ffmpeg-compiled-in-macOS-Catalina-runs-crash/8.jpg" alt></p>
]]></content>
      <categories>
        <category>è§†é¢‘æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>FFMpeg</tag>
        <tag>ç¼–è¯‘</tag>
        <tag>macOS Catalina</tag>
        <tag>strip</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidç¯å¢ƒä¸‹ç¼–è¯‘libyuv</title>
    <url>/2020/03/30/compile-libyuv-for-Android/</url>
    <content><![CDATA[<p>libyuvæ˜¯Googleå¼€æºçš„å®ç°å„ç§YUVæ ¼å¼ä¸RGBæ ¼å¼ä¹‹é—´ç›¸äº’è½¬æ¢ã€æ—‹è½¬ã€ç¼©æ”¾çš„åº“ã€‚å…³äºlibyuvçš„å…·ä½“ä»‹ç»å¯ä»¥å‚è€ƒ<a href="https://chromium.googlesource.com/libyuv/libyuv">å®˜ç½‘ä»‹ç»</a>ã€‚</p>
<span id="more"></span>
<h2 id="android-studioç¼–è¯‘libyuv">Android Studioç¼–è¯‘libyuv</h2>
<p>åœ¨è‡ªå·±ç¼–è¯‘libyuvçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†å¾ˆå¤šå‘ã€‚åœ¨è§£å†³è¿™äº›å‘çš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œä»ç½‘ä¸ŠæŸ¥è¯¢çš„å¾ˆå¤šèµ„æ–™å¹¶æ²¡æœ‰å¯¹é—®é¢˜çš„è§£å†³æä¾›å¸®åŠ©ã€‚å› æ­¤ï¼Œåœ¨è‡ªå·±è¶Ÿè¿‡äº†æ‰€æœ‰çš„å‘ä¹‹åï¼Œå°±æƒ³æŠŠç¼–è¯‘libyuvçš„è¿‡ç¨‹æ•´ç†äº†å‡ºæ¥ï¼Œä¸€æ–¹é¢æ˜¯åšä¸€ä¸ªæ¢³ç†å’Œæ€»ç»“ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¸Œæœ›å¸®åŠ©æ›´å¤šæœ‰ç±»ä¼¼éœ€æ±‚çš„äººã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå¼€å§‹ä»‹ç»åœ¨Androidå¹³å°ä¸Šï¼Œåˆ©ç”¨NKDç¼–è¯‘åŒ…å«libjpegåº“çš„libyuvåº“ã€‚è¿™ä¸ªä¸»è¦é€šè¿‡<a href="https://chromium.googlesource.com/libyuv/libyuv/+/refs/heads/master/Android.mk">libyuv/Android.mk</a>ä¸­çš„å¦‚ä¸‹ä»£ç å®ç°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">include $(CLEAR_VARS)</span><br><span class="line"></span><br><span class="line">LOCAL_WHOLE_STATIC_LIBRARIES :&#x3D; libyuv_static</span><br><span class="line">LOCAL_MODULE :&#x3D; libyuv</span><br><span class="line">ifneq ($(LIBYUV_DISABLE_JPEG), &quot;yes&quot;)</span><br><span class="line">LOCAL_SHARED_LIBRARIES :&#x3D; jpeg</span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line">include $(BUILD_SHARED_LIBRARY)</span><br></pre></td></tr></table></figure>
<h2 id="éœ€è¦ä¸‹è½½çš„åº“">éœ€è¦ä¸‹è½½çš„åº“</h2>
<ul>
<li><a href="https://chromium.googlesource.com/libyuv/libyuv">libyuv</a>æˆ–è€…<a href="https//github.com/lemenkov/libyuv.git">libyuv</a></li>
<li><a href="https://github.com/libjpeg-turbo/libjpeg-turbo.git">libjpeg-turbo</a></li>
</ul>
<h2 id="ç¼–è¯‘ä¾èµ–">ç¼–è¯‘ä¾èµ–</h2>
<h3 id="ndk">NDK</h3>
<p>å› ä¸ºNDK-r17ä¹‹åçš„ç‰ˆæœ¬ï¼Œä¸æ”¯æŒgccç¼–è¯‘soï¼Œéœ€è¦ä½¿ç”¨clangæ¥ç¼–è¯‘soåº“ã€‚å› æ­¤ç¼–è¯‘æ—¶ï¼Œéœ€è¦ç¡®å®šå¥½è‡ªå·±çš„NDKç‰ˆæœ¬ã€‚</p>
<h3 id="cmake-nasm-gccç­‰">CMAKE, NASM, GCCç­‰</h3>
<p>è¯¥éƒ¨åˆ†ç¼–è¯‘ä¾èµ–ä¸ºç¼–è¯‘libjpeg-turboåº“çš„ç¼–è¯‘ä¾èµ–ï¼Œå…·ä½“å¯ä»¥å‚è§libjpeg-turboçš„<a href="https://github.com/libjpeg-turbo/libjpeg-turbo/blob/master/BUILDING.md">BUILD.md</a></p>
<h2 id="ç¼–è¯‘libjpeg-turbo">ç¼–è¯‘libjpeg-turbo</h2>
<ol>
<li>
<p>ä¸‹è½½ç¼–è¯‘è„šæœ¬ï¼Œç¼–è¯‘è„šæœ¬ä½äº<a href="https://github.com/wangwei1237/libyuv-with-jpeg/tree/master/libjpeg-turbo">libjpeg-turbo</a>ç›®å½•ä¸‹ï¼Œå…±è®¡æœ‰ä¸‰ä¸ªè„šæœ¬ï¼š</p>
<ol>
<li><a href="http://config.sh">config.sh</a>ï¼šé…ç½®ç¼–è¯‘å‚æ•°ï¼Œä¾‹å¦‚ANDROID_NDK_ROOTç­‰ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„ç¯å¢ƒå˜é‡è¿›è¡Œæ›¿æ¢ã€‚</li>
<li>build_jpeg.shï¼šç¼–è¯‘æŸä¸ªCPUæ¶æ„çš„soåº“ï¼Œè¯¥è„šæœ¬ä¸­çš„å˜é‡ä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹ã€‚</li>
<li>build_jpeg_all.shï¼šç¼–è¯‘æ‰€æœ‰CPUæ¶æ„çš„soåº“</li>
</ol>
</li>
<li>
<p>ä¸‹è½½<a href="https://github.com/libjpeg-turbo/libjpeg-turbo">libjpeg-turbo</a>æºç ï¼š<code>git clone https://github.com/libjpeg-turbo/libjpeg-turbo.git</code>ã€‚</p>
</li>
<li>
<p>å°†ç¬¬<em>1</em>æ­¥ä¸­ä¸‹è½½åˆ°çš„ä¸‰ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°libjepg-turobæºç çš„æ ¹ç›®å½•ä¸‹ï¼š<code>cp -r libjpeg-turbo/* JPEG_SRC_ROOT_PATH/</code>ã€‚</p>
</li>
<li>
<p>ä¿®æ”¹<em><a href="http://config.sh">config.sh</a></em>ä¸­çš„<code>ANDROID_NDK_ROOT</code>ä¸ºè‡ªå·±çš„NDKè·¯å¾„ï¼Œä¿®æ”¹<code>ANDROID_NDK_VERSION</code>ä¸ºå¯¹åº”çš„æ•°å­—ç‰ˆæœ¬ã€‚ä¾‹å¦‚<em>r16b</em>ç‰ˆæœ¬çš„ä¸º<code>ANDROID_NDK_VERSION=16</code>ã€‚</p>
</li>
<li>
<p>è¿è¡Œ<code>sh build_jpeg_all.sh</code>ç¼–è¯‘libjpeg-turboï¼Œè¿è¡Œä¹‹åä¼šåœ¨å½“å‰ç›®å½•çš„<em>libs</em>ç›®å½•ä¸‹ç”Ÿæˆå„ç§CPUæ¶æ„å¯¹åº”çš„soåº“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/03/30/compile-libyuv-for-Android/1.jpg" alt="å›¾1. libjpeg-turboç¼–è¯‘äº§ç‰©"></p>
</li>
</ol>
<h2 id="ç¼–è¯‘libyuv">ç¼–è¯‘libyuv</h2>
<ol>
<li>
<p>å°†ä¹‹å‰ä¸‹è½½çš„libyuvçš„æºç å¯¼å…¥åˆ°Android Studioä¸­çš„æŒ‡å®šç›®å½•ï¼šPROJECT/app/jni/libyuv,è¯¥ç›®å½•è‡ªå·±å®šä¹‰å°±å¯ä»¥ã€‚</p>
</li>
<li>
<p>å°†ä¸Šä¸€æ­¥ç”Ÿæˆçš„soæ–‡ä»¶æŒ‰ç…§ABIçš„æ ¼å¼å¤åˆ¶åˆ°libyuv/libsç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/03/30/compile-libyuv-for-Android/2.png" alt="å›¾2"></p>
</li>
<li>
<p>ä¿®æ”¹libyuvç›®å½•ä¸‹çš„Android.mkæ–‡ä»¶ï¼Œ<a href="https://github.com/wangwei1237/libyuv-with-jpeg/blob/master/myapp/jni/libyuv/Android.mk">libyuv/Android.mk</a>æ–‡ä»¶ä¸­çš„ç¬¬4~12è¡Œçš„å†…å®¹å³å¯ã€‚</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">########################################################</span><br><span class="line">## &#123;&#123;BEGIN å¢åŠ å¦‚ä¸‹çš„ä»£ç </span><br><span class="line">include $(CLEAR_VARS)</span><br><span class="line">LOCAL_MODULE :&#x3D; jpeg</span><br><span class="line">LOCAL_SRC_FILES :&#x3D; libs&#x2F;$(TARGET_ARCH_ABI)&#x2F;libjpeg.so</span><br><span class="line">LOCAL_EXPORT_C_INCLUDES :&#x3D; $(LOCAL_PATH)&#x2F;include</span><br><span class="line">include $(PREBUILT_SHARED_LIBRARY)</span><br><span class="line">## END&#125;&#125;</span><br><span class="line">########################################################</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æŒ‰ç…§<a href="https://github.com/wangwei1237/libyuv-with-jpeg">ä»“åº“</a>æ‰€ç¤ºçš„<a href="https://github.com/wangwei1237/libyuv-with-jpeg/tree/master/myapp/jni">myapp/jni</a>ç›®å½•ä¸‹çš„<em><a href="http://Android.mk">Android.mk</a></em>å’Œ<em><a href="http://Application.mk">Application.mk</a></em>æ–‡ä»¶ä¿®æ”¹è‡ªå·±ä»£ç ä¸­çš„å¯¹åº”æ–‡ä»¶å³å¯ï¼Œä¸»è¦æ˜¯ç”¨äºç¼–è¯‘libyuvä½¿ç”¨ã€‚</p>
</li>
<li>
<p>ä¿®æ”¹è‡ªå·±appç›®å½•ä¸‹çš„<a href="https://github.com/wangwei1237/libyuv-with-jpeg/blob/master/myapp/build.gradle">build.gradle</a>ï¼Œåœ¨android{}ä¸­å¢åŠ å¦‚ä¸‹ç¼–è¯‘ä»»åŠ¡</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">externalNativeBuild &#123;</span><br><span class="line">    ndkBuild &#123;</span><br><span class="line">        path file(&#39;jni&#x2F;Android.mk&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç‚¹å‡»Android Studioçš„ç¼–è¯‘æŒ‰é’®ç¼–è¯‘å³å¯ï¼Œç¼–è¯‘åç”Ÿæˆçš„ç¼–è¯‘äº§ç‰©å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/03/30/compile-libyuv-for-Android/3.jpg" alt="å›¾3. libyuvçš„ç¼–è¯‘äº§ç‰©"></p>
</li>
</ol>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>libyuv</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾åƒé‡‘å­—å¡”ç®€ä»‹</title>
    <url>/2020/03/18/introduction-to-image-pyramid/</url>
    <content><![CDATA[<h1>å›¾åƒé‡‘å­—å¡”</h1>
<h2 id="å›¾åƒé‡‘å­—å¡”çš„æ¦‚å¿µ">å›¾åƒé‡‘å­—å¡”çš„æ¦‚å¿µ</h2>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬å¤„ç†çš„å›¾åƒé€šå¸¸æ˜¯æ’å®šå¤§å°ï¼ˆåˆ†è¾¨ç‡ï¼‰çš„å›¾åƒã€‚ä½†æ˜¯åœ¨æŸäº›ç‰¹æ®Šçš„åœºæ™¯ä¸‹ï¼Œéœ€è¦å¤„ç†åŒä¸€å›¾åƒçš„ä¸åŒåˆ†è¾¨ç‡çš„å›¾åƒã€‚ä¾‹å¦‚ï¼Œåœ¨å›¾åƒä¸­æœç´¢æŸäº›å†…å®¹æ—¶ï¼ˆä¾‹å¦‚é¢éƒ¨ï¼‰ï¼Œç”±äºä¸ç¡®å®šå¾…æœç´¢çš„å†…å®¹åœ¨å›¾åƒä¸­çš„åŒºåŸŸå¤§å°ï¼Œå› æ­¤éœ€è¦åˆ›å»ºä¸€ä¸ªå…·æœ‰ä¸åŒåˆ†è¾¨ç‡çš„å›¾åƒé›†ï¼Œå¹¶åœ¨è¯¥å›¾åƒé›†çš„æ‰€æœ‰å›¾åƒä¸­æ‰§è¡Œæœç´¢æ“ä½œã€‚</p>
<p>è¿™äº›å…·æœ‰ä¸åŒåˆ†è¾¨ç‡çš„å›¾åƒé›†ç§°ä¸ºâ€œå›¾åƒé‡‘å­—å¡”â€ã€‚ä¹‹æ‰€ä»¥ç§°å…¶ä¸ºâ€œå›¾åƒé‡‘å­—å¡”â€ï¼Œæ˜¯å› ä¸ºå½“è¿™äº›å›¾åƒæŒ‰ç…§åˆ†è¾¨ç‡ç”±ä½åˆ°é«˜å †å åœ¨ä¸€èµ·æ—¶ï¼Œåº•éƒ¨çš„æœ€å¤§å›¾åƒå’Œé¡¶éƒ¨çš„æœ€å°å›¾åƒçœ‹èµ·æ¥å°±åƒæ˜¯ä¸€åº§é‡‘å­—å¡”ã€‚</p>
<span id="more"></span>
<p>å› æ­¤ï¼Œå›¾åƒé‡‘å­—å¡”æ˜¯å›¾åƒçš„é›†åˆï¼Œè¿™äº›å›¾åƒé›†åˆç”±å•ä¸ªåŸå§‹å›¾åƒé€šè¿‡è¿ç»­çš„é™é‡‡æ ·â€”â€”ç›´åˆ°è¾¾åˆ°æŸä¸ªæœŸæœ›çš„æš‚åœç‚¹ä¸ºæ­¢â€”â€”äº§ç”Ÿã€‚</p>
<p><img src="/2020/03/18/introduction-to-image-pyramid/1.jpg" alt></p>
<h2 id="å›¾åƒé‡‘å­—å¡”çš„åˆ†ç±»">å›¾åƒé‡‘å­—å¡”çš„åˆ†ç±»</h2>
<p>åº”ç”¨ä¸­ç»å¸¸ç”¨åˆ°çš„å›¾åƒé‡‘å­—å¡”ä¸»è¦æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>é«˜æ–¯é‡‘å­—å¡”</li>
<li>æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”</li>
</ul>
<p>é«˜æ–¯é‡‘å­—å¡”ä¸€èˆ¬ç”¨äºå›¾åƒçš„é™é‡‡æ ·ï¼Œè€Œæ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”åˆ™ç”¨äºé€šè¿‡å›¾åƒé‡‘å­—å¡”ä¸­çš„ä½åˆ†è¾¨ç‡å›¾åƒé‡æ„é«˜åˆ†ç‡å›¾åƒçš„å›¾åƒä¸Šé‡‡æ ·ã€‚</p>
<h3 id="é«˜æ–¯é‡‘å­—å¡”">é«˜æ–¯é‡‘å­—å¡”</h3>
<p>é«˜æ–¯é‡‘å­—å¡”ä¸­çš„ä½åˆ†è¾¨ç‡å›¾åƒæ˜¯é€šè¿‡åˆ é™¤é«˜åˆ†è¾¨ç‡å›¾åƒä¸­çš„è¡Œå’Œåˆ—è€Œäº§ç”Ÿï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li>ä»¤é«˜æ–¯é‡‘å­—å¡”ä¸­ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>å±‚çš„å›¾åƒä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">G_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>ä½¿ç”¨ä¸€ä¸ªé«˜æ–¯æ ¸å¯¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">G_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ‰§è¡Œå·ç§¯æ“ä½œå¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>G</mi><mi>i</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msubsup></mrow><annotation encoding="application/x-tex">G_i^{\prime}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.010556em;vertical-align:-0.258664em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.441336em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.258664em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>ç„¶ååˆ é™¤<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>G</mi><mi>i</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msubsup></mrow><annotation encoding="application/x-tex">G_i^{\prime}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.010556em;vertical-align:-0.258664em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.441336em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.258664em;"><span></span></span></span></span></span></span></span></span></span>ä¸­çš„å¶æ•°è¡Œå’Œå¶æ•°åˆ—ï¼Œå¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">G_{i+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
<p>æ ¹æ®å¦‚ä¸Šçš„æ­¥éª¤ï¼Œå¯ä»¥çŸ¥é“ï¼Œç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>çº§å›¾åƒçš„åˆ†è¾¨ç‡æ˜¯ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>çº§å›¾åƒçš„åˆ†è¾¨ç‡çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ã€‚</p>
<h4 id="pyrdown">pyrDown</h4>
<p>åœ¨OpenCVä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>cv2.pyrDown()</code>ç”Ÿæˆå›¾åƒçš„ä¸Šä¸€å±‚çº§å›¾åƒã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">higher_resolution = cv2.imread(<span class="string">&#x27;img.jpg&#x27;</span>)</span><br><span class="line">lower_resolution  = cv2.pyrDown(higher_resolution)</span><br></pre></td></tr></table></figure>
<p>ä¸‹å›¾æ˜¯ä¸€ä¸ª4çº§çš„é«˜æ–¯é‡‘å­—å¡”çš„ä¾‹å­ã€‚<br>
<img src="/2020/03/18/introduction-to-image-pyramid/2.jpg" alt></p>
<h4 id="pyrup">pyrUp</h4>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<code>cv2.pyrUp()</code>å°†å›¾åƒè½¬æ¢ä¸ºæ¯ä¸ªæ–¹å‘ä¸¤å€å¤§å°çš„å›¾åƒï¼Œè¯¥å‡½æ•°</p>
<ul>
<li>é¦–å…ˆå°†å›¾åƒçš„å¤§å°åœ¨å„ä¸ªç»´åº¦ä¸Šæ‰©å±•2å€</li>
<li>ç„¶åå¯¹æ–°å¢çš„è¡Œç”¨0è¿›è¡Œå¡«å……</li>
<li>æœ€åå†ä½¿ç”¨é«˜æ–¯æ»¤æ³¢å™¨æ‰§è¡Œå·ç§¯è®¡ç®—æ¥è·å–â€œä¸¢å¤±â€çš„åƒç´ çš„å€¼</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">higher_resolution_2 = cv2.pyrUp(lower_resolution)</span><br></pre></td></tr></table></figure>
<p>ä»å¦‚ä¸Šçš„æ­¥éª¤ä¸éš¾å‘ç°ï¼Œ<code>cv2.pyrUp()</code>å¹¶ä¸æ˜¯<code>cv2.pyrDown()</code>çš„é€†è¿ç®—ï¼Œå› ä¸º<code>cv2.pyrDown()</code>æ˜¯ä¸€ä¸ªä¸¢å¤±ä¿¡æ¯çš„æ“ä½œï¼Œä¸€æ—¦åˆ†è¾¨ç‡é™ä½ï¼Œå°±ä¼šå­˜åœ¨ä¿¡æ¯ä¸¢å¤±ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ç¤ºä¾‹ä»£ç ä¸­ï¼Œ<code>higher_resolution_2</code>å’Œ<code>higher_resolution</code>æ˜¯ä¸åŒçš„ã€‚</p>
<p>å¯¹<a href="#pyrDown">pyrDown</a>ä¸­çš„å›¾åƒæ‰§è¡Œ<code>pyrUp()</code>æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š<br>
<img src="/2020/03/18/introduction-to-image-pyramid/3.jpg" alt></p>
<h3 id="æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”">æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”</h3>
<p>ä¸ºäº†ä»å›¾åƒé‡‘å­—å¡”ä¸­çš„ä½åˆ†è¾¨ç‡å›¾åƒæ¢å¤é«˜åˆ†è¾¨ç‡çš„å›¾åƒï¼Œéœ€è¦ä½¿ç”¨ä¸‹é‡‡æ ·è¿‡ç¨‹ä¸­ä¸¢å¼ƒçš„ä¿¡æ¯ã€‚è€Œè¿™äº›æ•°æ®åˆ™æ„æˆäº†æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ã€‚</p>
<p>ä»¤<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">L_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸ºé«˜æ–¯é‡‘å­—å¡”çš„ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>çº§å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">G_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸‹é‡‡æ ·å¾—åˆ°ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>çº§å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">G_{i+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>æ—¶ä¸¢å¤±çš„ä¿¡æ¯ï¼Œåˆ™ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mi>i</mi></msub><mo>=</mo><msub><mi>G</mi><mi>i</mi></msub><mo>âˆ’</mo><mi>c</mi><mi>v</mi><mn>2.</mn><mi>p</mi><mi>y</mi><mi>r</mi><mi>U</mi><mi>p</mi><mo stretchy="false">(</mo><msub><mi>G</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L_i=G_i - cv2.pyrUp(G_{i+1})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord">2</span><span class="mord">.</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mspace linebreak="newline"></mspace><mrow><msub><mi>L</mi><mi>i</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>i</mi><mo>âˆˆ</mo><mn>1...</mn><mi>n</mi><mspace linebreak="newline"></mspace></mrow></mrow><annotation encoding="application/x-tex">\\{L_i | i \in 1...n\\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord mathdefault">n</span><span class="mspace newline"></span></span></span></span></span>åˆ™æ„æˆæ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ã€‚</p>
<p>æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ç”±é«˜æ–¯é‡‘å­—å¡”è€Œå½¢æˆï¼Œå¹¶æ²¡æœ‰å…¶å®ƒçš„é¢å¤–åŠŸèƒ½ï¼Œå¹¶ä¸”æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”å›¾åƒå’Œå›¾åƒçš„è¾¹ç¼˜å›¾åƒå¾ˆåƒã€‚åœ¨æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ä¸­çš„å›¾åƒçš„å¤§å¤šæ•°å…ƒç´ ä¸ºé›¶ã€‚ä¸€ä¸ª4çº§æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”çš„å›¾åƒå¦‚ä¸‹æ‰€ç¤ºï¼ˆå·²è°ƒæ•´å›¾åƒçš„æ›å…‰åº¦ä»¥å¢å¼ºå›¾åƒå†…å®¹ï¼‰ï¼š<br>
<img src="/2020/03/18/introduction-to-image-pyramid/4.jpg" alt></p>
<h2 id="å°ºåº¦ç©ºé—´å’Œå›¾åƒé‡‘å­—å¡”å·ç§¯æ ¸çš„é€‰æ‹©">å°ºåº¦ç©ºé—´å’Œå›¾åƒé‡‘å­—å¡”å·ç§¯æ ¸çš„é€‰æ‹©</h2>
<p>åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œå®¢è§‚ç‰©ä½“åœ¨ä¸åŒå°ºåº¦æ—¶æœ‰ç€ä¸åŒçš„ç»“æ„ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä»ä¸åŒçš„å°ºåº¦å»è§‚å¯ŸåŒä¸€ä¸ªç‰©ä½“ï¼Œä¼šå¾—å‡ºä¸ä¸€æ ·çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œä»ä¸åŒçš„è·ç¦»è§‚å¯ŸåŒä¸€ä¸ªå›¾åƒæ—¶ï¼Œéšç€è·ç¦»çš„ä¸æ–­ç¼©å°ï¼Œèƒ½å¤Ÿè§‚å¯Ÿåˆ°çš„å›¾åƒçš„ç»“æ„ä¹Ÿæœ‰æ‰€ä¸åŒã€‚</p>
<p>è§‚å¯Ÿä¸€æ£µæ ‘çš„å°ºåº¦å’Œè§‚å¯Ÿä¸€ç‰‡æ ‘å¶çš„å°ºåº¦ä¹Ÿæ˜¯ä¸åŒçš„ï¼šè§‚å¯Ÿä¸€æ£µæ ‘çš„é€‚å½“å°ºåº¦åº”è¯¥æ˜¯<strong>ç±³</strong>ï¼Œè€Œè§‚å¯Ÿä¸€ç‰‡å¶å­å¯èƒ½éœ€è¦æ›´ç»†ç²’åº¦çš„å°ºåº¦æ‰èƒ½å¾—å‡ºè¾ƒå¥½çš„ç»“æœã€‚</p>
<p>å½“è®¡ç®—æœºç³»ç»Ÿè¦å¯¹ä¸€ä¸ªæœªçŸ¥çš„åœºæ™¯è¿›è¡Œåˆ†ææ—¶ï¼Œå¹¶ä¸èƒ½æå‰é¢„çŸ¥ç”¨ä»€ä¹ˆæ ·çš„å°ºåº¦æ¥æè¿°å›¾åƒä¿¡æ¯ä¸­çš„<strong>interesting structures</strong>æ˜¯æœ€åˆé€‚çš„ã€‚å› æ­¤ï¼Œå”¯ä¸€å¯è¡Œçš„æ–¹æ¡ˆå°±æ˜¯å°†å¤šä¸ªä¸åŒå°ºåº¦çš„æè¿°éƒ½è€ƒè™‘è¿›æ¥ï¼Œä»¥ä¾¿æ•è·æœªçŸ¥çš„å°ºåº¦å˜åŒ–ã€‚</p>
<p>å°ºåº¦ç©ºé—´ç†è®ºå’Œç”Ÿç‰©è§†è§‰ä¹‹é—´ä¹Ÿæœ‰ç€ååˆ†å¯†åˆ‡çš„è”ç³»ã€‚å“ºä¹³åŠ¨ç‰©çš„è§†ç½‘è†œä»¥åŠè§†è§‰çš®å±‚ç¬¬ä¸€é˜¶æ®µæ‰€è®°å½•çš„æ¥å—åœºçš„åˆ†å¸ƒï¼Œä¸è®¸å¤šå°ºåº¦ç©ºé—´æ“ä½œéƒ½é«˜åº¦è¿‘ä¼¼ã€‚</p>
<p>å¦‚<a href="#%E9%AB%98%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%94">é«˜æ–¯é‡‘å­—å¡”</a>çš„æè¿°ï¼Œåœ¨ç”Ÿæˆé«˜æ–¯é‡‘å­—å¡”æ—¶ï¼Œä¼šé‡‡ç”¨é«˜æ–¯æ ¸(<em>filter</em>)å¯¹å›¾åƒè¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆéè¦é‡‡ç”¨é«˜æ–¯æ ¸å‘¢ï¼Ÿ</p>
<p>å®é™…ä¸Šï¼Œå¹¶éä»»ä½•ä½é€šæ»¤æ³¢å™¨ï¼ˆ<em>low-pass filter</em>ï¼‰éƒ½å¯ç”¨äºç”Ÿæˆå°ºåº¦ç©ºé—´ã€‚å¯ç”¨äºç”Ÿæˆå°ºåº¦ç©ºé—´çš„filterå¿…é¡»æ»¡è¶³å¦‚ä¸‹çš„æ¡ä»¶ï¼š</p>
<blockquote>
<p>ç”±è¯¥å¹³æ»‘filterç”Ÿæˆçš„ç²—å°ºåº¦å›¾åƒï¼ˆé«˜å±‚å›¾åƒï¼‰ä¸ä¼šå¼•å…¥ä¸å­˜åœ¨äºç»†å°ºåº¦å›¾åƒï¼ˆä½å±‚å›¾åƒï¼‰ä¸­çš„æ‚æ•£ç»“æ„ã€‚</p>
</blockquote>
<p>å¦‚ä¸Šçš„æ¡ä»¶çš„è¨€å¤–ä¹‹æ„å°±æ˜¯ï¼šç»™å®šç²—å°ºåº¦å›¾åƒä¸­çš„ä»»ä½•ä¸€ä¸ªåŒºåŸŸï¼Œç»†å°ºåº¦å›¾åƒä¸Šæ€»èƒ½æ‰¾åˆ°ç›¸åº”çš„åŒºåŸŸã€‚å¯¹è¿™ä¸¤ä¸ªåŒºåŸŸè€Œè¨€ï¼Œç²—å°ºåº¦å›¾åƒåŒºåŸŸä¸èƒ½æœ‰æ–°çš„ç»“æ„ã€‚</p>
<p>å—åˆ¶äº<a href="https://en.wikipedia.org/wiki/Scale-space_axioms">å°ºåº¦ç©ºé—´å…¬ç†</a>ï¼Œé«˜æ–¯å·ç§¯æ ¸æ˜¯å®ç°å°ºåº¦å˜æ¢çš„å”¯ä¸€çº¿æ€§æ ¸ã€‚å› æ­¤ï¼Œåœ¨å›¾åƒé‡‘å­—å¡”ä¸­ï¼Œéœ€è¦é‡‡ç”¨é«˜æ–¯å·ç§¯æ ¸å¯¹å›¾åƒè¿›è¡Œå¤„ç†ã€‚</p>
<p><a href="https://en.wikipedia.org/wiki/Scale-space_axioms">å°ºåº¦ç©ºé—´å…¬ç†</a>éœ€è¦æ»¡è¶³å¦‚ä¸‹çš„æ¡ä»¶ï¼š</p>
<ul>
<li>çº¿æ€§</li>
<li>å¹³ç§»ä¸å˜æ€§</li>
<li>åŠç¾¤ç‰¹æ€§</li>
<li>æ—‹è½¬ä¸å˜æ€§</li>
<li>å°ºåº¦ä¸å˜æ€§</li>
<li>æ­£å®šæ€§</li>
<li>æ­£è§„æ€§(ç§¯åˆ†ä¸º1)</li>
<li>ä¸ä¼šå¼•å…¥æ–°çš„æç‚¹</li>
<li>ä¸ä¼šå¢å¼ºæç‚¹</li>
<li>å­˜åœ¨æ— ç©·å°çš„ç®—å­ï¼ˆå¯å¾®æ€§ï¼‰</li>
</ul>
<h2 id="å›¾åƒé‡‘å­—å¡”çš„åº”ç”¨">å›¾åƒé‡‘å­—å¡”çš„åº”ç”¨</h2>
<p>å›¾åƒé‡‘å­—å¡”çš„ä¸€ç§åº”ç”¨æ˜¯å›¾åƒèåˆã€‚ä¾‹å¦‚ï¼Œåœ¨å›¾åƒæ‹¼æ¥ä¸­ä¼šå°†ä¸¤ä¸ªå›¾åƒå †å ï¼Œä½†æ˜¯ç”±äºå›¾åƒä¹‹é—´çš„ä¸è¿ç»­æ€§ï¼Œè¿™ç§å¯¹åŸå§‹å›¾åƒçš„ç›´æ¥æ‹¼æ¥çš„æ•ˆæœå¹¶ä¸å¥½ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯¹å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸¤å¹…å›¾åƒï¼š</p>
<p><img src="/2020/03/18/introduction-to-image-pyramid/5.jpg" alt></p>
<p>çš„ç›´æ¥æ‹¼æ¥æ•ˆæœå’Œé‡‡ç”¨å›¾åƒé‡‘å­—å¡”æ‹¼æ¥æ•ˆæœåˆ†åˆ«ä¸ºï¼ˆå·¦å›¾ä¸ºç›´æ¥æ‹¼æ¥ï¼‰ï¼š</p>
<p><img src="/2020/03/18/introduction-to-image-pyramid/8.jpg" alt></p>
<p>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨â€œå›¾åƒé‡‘å­—å¡”â€èåˆå›¾åƒåˆ™å¯ä»¥è®©æ‹¼æ¥ä¹‹åçš„å›¾åƒçœ‹èµ·æ¥å¤©è¡£æ— ç¼ã€‚</p>
<p>å¯ä»¥æŒ‰ç…§å¦‚ä¸‹çš„æ­¥éª¤ä½¿ç”¨â€œå›¾åƒé‡‘å­—å¡”â€æ¥æ‹¼æ¥å¦‚ä¸Šçš„å›¾åƒï¼ˆ<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/03/18/introduction-to-image-pyramid/image_pyramid_blend.ipynb">ç©è½¬å¤šå°ºåº¦å›¾åƒèåˆ</a>)ï¼š</p>
<ol>
<li>åŠ è½½å›¾åƒ</li>
<li>è®¡ç®—å›¾åƒçš„é«˜æ–¯é‡‘å­—å¡”ï¼ˆåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œçº§æ•°ä¸º6ï¼‰</li>
<li>ä»é«˜æ–¯é‡‘å­—å¡”ä¸­è®¡ç®—æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”</li>
<li>åœ¨æ¯ä¸ªæ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ä¸­åŠ å…¥è‹¹æœçš„å·¦åŠéƒ¨åˆ†å’Œæ©™å­çš„å³åŠéƒ¨åˆ†</li>
<li>æœ€åï¼Œä»è”åˆå›¾åƒé‡‘å­—å¡”ä¸­é‡å»ºåŸå§‹å›¾åƒ</li>
</ol>
<p>é™¤äº†å¦‚ä¸Šçš„<strong>å¤šåˆ†è¾¨ç‡å›¾åƒèåˆç®—æ³•ä¼šç”¨åˆ°å›¾åƒé‡‘å­—å¡”</strong>ä¹‹å¤–ï¼Œå›¾åƒé‡‘å­—å¡”è¿˜å¯ç”¨äºå¦‚ä¸‹çš„åœºæ™¯ï¼š</p>
<ul>
<li>siftç®—æ³•</li>
<li>åœ¨from coarse to fineç”±ç²—åˆ°ç²¾çš„æœç´¢ç­–ç•¥ä¸­éƒ½å¯ä»¥ç”¨é‡‘å­—å¡”</li>
<li>optical flowå…‰æµæ³•</li>
<li>slamå½“ä¸­çš„å§¿æ€ä¼°è®¡</li>
<li>â€¦â€¦</li>
</ul>
]]></content>
      <categories>
        <category>è§†è§‰æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å›¾åƒé‡‘å­—å¡”</tag>
        <tag>é«˜æ–¯é‡‘å­—å¡”</tag>
        <tag>æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”</tag>
        <tag>image pyramid</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°å­—è§†é¢‘åŸºæœ¬æ¦‚å¿µ</title>
    <url>/2020/03/03/digital-video-concept/</url>
    <content><![CDATA[<p>åœ¨å­¦ä¹ å’Œç ”ç©¶è§†é¢‘æŠ€æœ¯çš„è¿‡ç¨‹ä¸­ï¼Œè”åˆå‡ ä¸ªåŒäº‹ä¸€èµ·ç¿»è¯‘äº†<a href="https://link.springer.com/book/10.1007/978-1-4302-6713-3">Digital Video Concepts, Methods, and Metrics: Quality, Compression, Performance, and Power Trade-off Analysis</a>ï¼Œå½¢æˆäº†<a href="/digital-video-concept"><strong>æ•°å­—è§†é¢‘æ¦‚å¿µï¼Œæ–¹æ³•å’Œæµ‹é‡æŒ‡æ ‡ï¼šè´¨é‡ï¼Œå‹ç¼©ï¼Œæ€§èƒ½å’Œç”µé‡ç­‰çš„æƒè¡¡åˆ†æï¼ˆä¸­æ–‡ç‰ˆï¼‰</strong></a>ã€‚è¯¥ç¿»è¯‘ç‰ˆæœ¬ä»…ä¾›å­¦ä¹ äº¤æµä¹‹ç”¨ã€‚å¸Œæœ›å¯¹æƒ³å­¦ä¹ å’Œäº†è§£æ•°å­—è§†é¢‘ç›¸å…³æŠ€æœ¯çš„åŒå­¦ï¼Œæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>åœ¨ç¿»è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œå°½å¯èƒ½çš„ä¿ç•™äº†åŸä¹¦çš„å†…å®¹ï¼Œå¹¶ä¸”å¯¹åŸä¹¦ä¸­çš„ä¸ªåˆ«å†…å®¹è¿›è¡Œäº†ä¿®æ­£å’Œè¡¥å……ã€‚</p>
<span id="more"></span>
<p><img src="/digital-video-concept/images/cover_0.jpg" alt></p>
<p>è¯¥ä¹¦åœ¨ç¿»è¯‘çš„è¿‡ç¨‹ä¸­é‡‡ç”¨gitbookæ–¹å¼ç¼–å†™ï¼Œå¯ä»¥åˆ©ç”¨gitbookå°†è¯¥é¡¹ç›®æ‰“åŒ…æˆé™æ€ç½‘é¡µæ ¼å¼æˆ–è€…PDF<br>
æ ¼å¼ï¼Œå…·ä½“å¯ä»¥å‚è§ï¼š<a href="https://einverne.github.io/gitbook-tutorial/output/static.html">gitbookæ•™ç¨‹</a>ã€‚</p>
<p>é¡¹ç›®ä¸»é¡µåœ°å€ï¼š<a href="https://github.com/wangwei1237/digital_video_concepts.git">githubä»“åº“</a></p>
<p>åœ¨çº¿é¢„è§ˆåœ°å€ï¼š<a href="https://wangwei1237.gitee.io/digital-video-concept">é¢„è§ˆåœ°å€1</a>, <a href="https://wangwei1237.github.io/digital-video-concept">é¢„è§ˆåœ°å€2</a>, <a href="https://wangwei1237.gitbook.io/digital_video_concepts">é¢„è§ˆåœ°å€3</a></p>
<p>åœ¨é˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æ„è§æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨githubä¸Šæäº¤issueï¼Œæˆ‘ä»¬ä¹Ÿä¼šå¿«é€Ÿè·Ÿè¿›ã€‚</p>
]]></content>
      <categories>
        <category>è§†é¢‘æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>èä¹¦</tag>
        <tag>æ•°å­—è§†é¢‘</tag>
        <tag>digital video</tag>
        <tag>è§†é¢‘åŸºç¡€çŸ¥è¯†</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°å­—è§†é¢‘æŠ€æœ¯å¯¼è®º</title>
    <url>/2020/02/28/Introduction-to-digital-video-technology/</url>
    <content><![CDATA[<h1>èƒŒæ™¯</h1>
<p>å› ä¸ºå·¥ä½œå…³ç³»éœ€è¦äº†è§£æ•°å­—è§†é¢‘ç›¸å…³æŠ€æœ¯ï¼Œåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­æ‰¾åˆ°äº†è¿™ä»½æ‰˜ç®¡åœ¨githubä¸Šçš„<strong>æ•°å­—è§†é¢‘å¯¼è®º</strong>çš„ææ–™ã€‚</p>
<p>è¿™ä»½ææ–™ä»‹ç»äº†åŸºæœ¬çš„æ•°å­—è§†é¢‘ç›¸å…³æŠ€æœ¯ï¼Œè¨€ç®€æ„èµ…ä½†åˆä¸æ¯ç‡¥æ— å‘³ï¼Œå³æœ‰ç†è®ºåˆæœ‰ä¸°å¯Œçš„å®è·µæ“ä½œï¼Œåœ¨æˆ‘å­¦ä¹ çš„æ‰€æœ‰ææ–™ä¸­ç®—æ˜¯æ¯”è¾ƒä¸Šä¹˜çš„ææ–™ã€‚</p>
<p>åŸºäºå¦‚ä¸Šçš„åŸå› ï¼Œå°†è¯¥ææ–™çš„ç›¸å…³å†…å®¹è½¬è½½åˆ°æ­¤å¤„ã€‚å¤§å®¶å¯ä»¥ç›´æ¥è®¿é—®è¯¥ææ–™çš„githubä»“åº“<a href="https://github.com/leandromoreira/digital_video_introduction"><strong>digital_video_introduction</strong></a>è·å–ç›¸å…³å†…å®¹ã€‚å¦‚ä¸‹çš„æ‰€æœ‰å†…å®¹çš†æ¥è‡ª<a href="https://github.com/leandromoreira/digital_video_introduction"><strong>digital_video_introduction</strong></a>ï¼Œç‰¹æ­¤æ ‡æ³¨ã€‚</p>
<p><a href="license-BSD--3--Clause-blue.svg"><img src="/2020/02/28/Introduction-to-digital-video-technology/license-BSD--3--Clause-blue.svg" alt="license"></a></p>
<span id="more"></span>
<h1>ä»‹ç»</h1>
<p>è¿™æ˜¯ä¸€ä»½å¾ªåºæ¸è¿›çš„è§†é¢‘æŠ€æœ¯çš„ä»‹ç»ã€‚å°½ç®¡å®ƒé¢å‘çš„æ˜¯è½¯ä»¶å¼€å‘äººå‘˜/å·¥ç¨‹å¸ˆï¼Œä½†æˆ‘ä»¬å¸Œæœ›<strong>å¯¹ä»»ä½•äººè€Œè¨€</strong>ï¼Œè¿™ä»½æ–‡æ¡£éƒ½èƒ½ç®€å•æ˜“å­¦ã€‚è¿™ä¸ªç‚¹å­äº§ç”Ÿäºä¸€ä¸ª<a href="https://docs.google.com/presentation/d/17Z31kEkl_NGJ0M66reqr9_uTG6tI5EDDVXpdPKVuIrs/edit#slide=id.p">è§†é¢‘æŠ€æœ¯æ–°æ‰‹å°å‹ç ”è®¨ä¼š</a>æœŸé—´ã€‚</p>
<p>æœ¬æ–‡æ¡£æ—¨åœ¨å°½å¯èƒ½ä½¿ç”¨<strong>æµ…æ˜¾çš„è¯è¯­ï¼Œä¸°å¯Œçš„å›¾åƒå’Œå®é™…ä¾‹å­</strong>ä»‹ç»æ•°å­—è§†é¢‘æ¦‚å¿µï¼Œä½¿è¿™äº›çŸ¥è¯†èƒ½é€‚ç”¨äºå„ç§åœºåˆã€‚ä½ å¯ä»¥éšæ—¶åé¦ˆæ„è§æˆ–å»ºè®®ï¼Œä»¥æ”¹è¿›è¿™ç¯‡æ–‡æ¡£ã€‚</p>
<h1>ç›®å½•</h1>
<ul>
<li><a href="#%E4%BB%8B%E7%BB%8D">ä»‹ç»</a></li>
<li><a href="#%E7%9B%AE%E5%BD%95">ç›®å½•</a></li>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD">åŸºæœ¬æœ¯è¯­</a>
<ul>
<li><a href="#%E7%BC%96%E7%A0%81%E5%BD%A9%E8%89%B2%E5%9B%BE%E5%83%8F%E7%9A%84%E5%85%B6%E5%AE%83%E6%96%B9%E6%B3%95">ç¼–ç å½©è‰²å›¾åƒçš„å…¶å®ƒæ–¹æ³•</a></li>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E7%8E%A9%E8%BD%AC%E5%9B%BE%E5%83%8F%E5%92%8C%E9%A2%9C%E8%89%B2">è‡ªå·±åŠ¨æ‰‹ï¼šç©è½¬å›¾åƒå’Œé¢œè‰²</a></li>
<li><a href="#DVD-%E7%9A%84-DAR-%E6%98%AF-4-3">DVD çš„ DAR æ˜¯ 4:3</a></li>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E6%A3%80%E6%9F%A5%E8%A7%86%E9%A2%91%E5%B1%9E%E6%80%A7">è‡ªå·±åŠ¨æ‰‹ï¼šæ£€æŸ¥è§†é¢‘å±æ€§</a></li>
</ul>
</li>
<li><a href="#%E6%B6%88%E9%99%A4%E5%86%97%E4%BD%99">æ¶ˆé™¤å†—ä½™</a>
<ul>
<li><a href="#%E9%A2%9C%E8%89%B2%EF%BC%8C%E4%BA%AE%E5%BA%A6%E5%92%8C%E6%88%91%E4%BB%AC%E7%9A%84%E7%9C%BC%E7%9D%9B">é¢œè‰²ï¼Œäº®åº¦å’Œæˆ‘ä»¬çš„çœ¼ç›</a>
<ul>
<li><a href="#%E9%A2%9C%E8%89%B2%E6%A8%A1%E5%9E%8B">é¢œè‰²æ¨¡å‹</a></li>
<li><a href="#YCbCr-%E5%92%8C-RGB-%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2">YCbCr å’Œ RGB ä¹‹é—´çš„è½¬æ¢</a></li>
<li><a href="#%E8%89%B2%E5%BA%A6%E5%AD%90%E9%87%87%E6%A0%B7">è‰²åº¦å­é‡‡æ ·</a></li>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E6%A3%80%E6%9F%A5-YCbCr-%E7%9B%B4%E6%96%B9%E5%9B%BE">è‡ªå·±åŠ¨æ‰‹ï¼šæ£€æŸ¥ YCbCr ç›´æ–¹å›¾</a></li>
</ul>
</li>
<li><a href="#%E5%B8%A7%E7%B1%BB%E5%9E%8B">å¸§ç±»å‹</a>
<ul>
<li><a href="#I-%E5%B8%A7%EF%BC%88%E5%B8%A7%E5%86%85%E7%BC%96%E7%A0%81%EF%BC%8C%E5%85%B3%E9%94%AE%E5%B8%A7%EF%BC%89">I å¸§ï¼ˆå†…éƒ¨ï¼Œå…³é”®å¸§ï¼‰</a></li>
<li><a href="#P-%E5%B8%A7%EF%BC%88%E9%A2%84%E6%B5%8B%EF%BC%89">P å¸§ï¼ˆé¢„æµ‹ï¼‰</a>
<ul>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E5%85%B7%E6%9C%89%E5%8D%95%E4%B8%AA-I-%E5%B8%A7%E7%9A%84%E8%A7%86%E9%A2%91">è‡ªå·±åŠ¨æ‰‹ï¼šå…·æœ‰å•ä¸ª I å¸§çš„è§†é¢‘</a></li>
</ul>
</li>
<li><a href="#B-%E5%B8%A7%EF%BC%88%E5%8F%8C%E5%90%91%E9%A2%84%E6%B5%8B%EF%BC%89">B å¸§ï¼ˆåŒå‘é¢„æµ‹ï¼‰</a>
<ul>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E4%BD%BF%E7%94%A8-B-%E5%B8%A7%E6%AF%94%E8%BE%83%E8%A7%86%E9%A2%91">è‡ªå·±åŠ¨æ‰‹ï¼šä½¿ç”¨ B å¸§æ¯”è¾ƒè§†é¢‘</a></li>
</ul>
</li>
<li><a href="#%E5%B0%8F%E7%BB%93">å°ç»“</a></li>
</ul>
</li>
<li><a href="#%E6%97%B6%E9%97%B4%E5%86%97%E4%BD%99%EF%BC%88%E5%B8%A7%E9%97%B4%E9%A2%84%E6%B5%8B%EF%BC%89">æ—¶é—´å†—ä½™ï¼ˆå¸§é—´é¢„æµ‹ï¼‰</a>
<ul>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E6%9F%A5%E7%9C%8B%E8%BF%90%E5%8A%A8%E5%90%91%E9%87%8F">è‡ªå·±åŠ¨æ‰‹ï¼šæŸ¥çœ‹è¿åŠ¨å‘é‡</a></li>
</ul>
</li>
<li><a href="#%E7%A9%BA%E9%97%B4%E5%86%97%E4%BD%99%EF%BC%88%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B%EF%BC%89">ç©ºé—´å†—ä½™ï¼ˆå¸§å†…é¢„æµ‹ï¼‰</a>
<ul>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E6%9F%A5%E7%9C%8B%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B">è‡ªå·±åŠ¨æ‰‹ï¼šæŸ¥çœ‹å¸§å†…é¢„æµ‹</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E8%A7%86%E9%A2%91%E7%BC%96%E8%A7%A3%E7%A0%81%E5%99%A8%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84%EF%BC%9F">è§†é¢‘ç¼–è§£ç å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</a>
<ul>
<li><a href="#%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%EF%BC%9F%E6%80%8E%E4%B9%88%E5%81%9A%EF%BC%9F">æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿæ€ä¹ˆåšï¼Ÿ</a></li>
<li><a href="#%E5%8E%86%E5%8F%B2">å†å²</a>
<ul>
<li><a href="#AV1-%E7%9A%84%E8%AF%9E%E7%94%9F">AV1 çš„è¯ç”Ÿ</a></li>
</ul>
</li>
<li><a href="#%E9%80%9A%E7%94%A8%E7%BC%96%E8%A7%A3%E7%A0%81%E5%99%A8">é€šç”¨ç¼–è§£ç å™¨</a></li>
<li><a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5-%E5%9B%BE%E7%89%87%E5%88%86%E5%8C%BA">ç¬¬ä¸€æ­¥ - å›¾ç‰‡åˆ†åŒº</a>
<ul>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E6%9F%A5%E7%9C%8B%E5%88%86%E5%8C%BA">è‡ªå·±åŠ¨æ‰‹ï¼šæŸ¥çœ‹åˆ†åŒº</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E9%A2%84%E6%B5%8B">ç¬¬äºŒæ­¥ - é¢„æµ‹</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E6%AD%A5-%E8%BD%AC%E6%8D%A2">ç¬¬ä¸‰æ­¥ - è½¬æ¢</a>
<ul>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E4%B8%A2%E5%BC%83%E4%B8%8D%E5%90%8C%E7%9A%84%E7%B3%BB%E6%95%B0">è‡ªå·±åŠ¨æ‰‹ï¼šä¸¢å¼ƒä¸åŒçš„ç³»æ•°</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5-%E9%87%8F%E5%8C%96">ç¬¬å››æ­¥ - é‡åŒ–</a>
<ul>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E9%87%8F%E5%8C%96">è‡ªå·±åŠ¨æ‰‹ï¼šé‡åŒ–</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC%E4%BA%94%E6%AD%A5-%E7%86%B5%E7%BC%96%E7%A0%81">ç¬¬äº”æ­¥ - ç†µç¼–ç </a>
<ul>
<li><a href="#VLC-%E7%BC%96%E7%A0%81%EF%BC%9A">VLC ç¼–ç </a></li>
<li><a href="#%E7%AE%97%E6%9C%AF%E7%BC%96%E7%A0%81">ç®—æœ¯ç¼–ç </a></li>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9ACABAC-vs-CAVLC">è‡ªå·±åŠ¨æ‰‹ï¼šCABAC vs CAVLC</a></li>
</ul>
</li>
<li><a href="#%E7%AC%AC%E5%85%AD%E6%AD%A5-%E6%AF%94%E7%89%B9%E6%B5%81%E6%A0%BC%E5%BC%8F">ç¬¬å…­æ­¥ - æ¯”ç‰¹æµæ ¼å¼</a>
<ul>
<li><a href="#H-264-%E6%AF%94%E7%89%B9%E6%B5%81">H.264 æ¯”ç‰¹æµ</a></li>
<li><a href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%EF%BC%9A%E6%A3%80%E6%9F%A5-H-264-%E6%AF%94%E7%89%B9%E6%B5%81">è‡ªå·±åŠ¨æ‰‹ï¼šæ£€æŸ¥ H.264 æ¯”ç‰¹æµ</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9E%E9%A1%BE">å›é¡¾</a></li>
<li><a href="#H-265-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%AF%94-H-264-%E6%9B%B4%E5%A5%BD%E7%9A%84%E5%8E%8B%E7%BC%A9%E7%8E%87">H.265 å¦‚ä½•å®ç°æ¯” H.264 æ›´å¥½çš„å‹ç¼©ç‡?</a></li>
</ul>
</li>
<li><a href="#%E5%9C%A8%E7%BA%BF%E6%B5%81%E5%AA%92%E4%BD%93">åœ¨çº¿æµåª’ä½“</a>
<ul>
<li><a href="#%E9%80%9A%E7%94%A8%E6%9E%B6%E6%9E%84">é€šç”¨æ¶æ„</a></li>
<li><a href="#%E6%B8%90%E8%BF%9B%E5%BC%8F%E4%B8%8B%E8%BD%BD%E5%92%8C%E8%87%AA%E9%80%82%E5%BA%94%E6%B5%81">æ¸è¿›å¼ä¸‹è½½å’Œè‡ªé€‚åº”æµ</a></li>
<li><a href="#%E5%86%85%E5%AE%B9%E4%BF%9D%E6%8A%A4">å†…å®¹ä¿æŠ¤</a></li>
</ul>
</li>
<li><a href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-jupyter">å¦‚ä½•ä½¿ç”¨ jupyter</a></li>
<li><a href="#%E4%BC%9A%E8%AE%AE">ä¼šè®®</a></li>
<li><a href="#%E5%8F%82%E8%80%83">å‚è€ƒ</a></li>
</ul>
<h1>åŸºæœ¬æœ¯è¯­</h1>
<p>ä¸€ä¸ª<strong>å›¾åƒ</strong>å¯ä»¥è§†ä½œä¸€ä¸ª<strong>äºŒç»´çŸ©é˜µ</strong>ã€‚å¦‚æœå°†<strong>è‰²å½©</strong>è€ƒè™‘è¿›æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åšå‡ºæ¨å¹¿ï¼šå°†è¿™ä¸ªå›¾åƒè§†ä½œä¸€ä¸ª<strong>ä¸‰ç»´çŸ©é˜µ</strong>â€”â€”å¤šå‡ºæ¥çš„ç»´åº¦ç”¨äºå‚¨å­˜è‰²å½©ä¿¡æ¯ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬é€‰æ‹©ä¸‰åŸè‰²ï¼ˆçº¢ã€ç»¿ã€è“ï¼‰ä»£è¡¨è¿™äº›è‰²å½©ï¼Œè¿™å°±å®šä¹‰äº†ä¸‰ä¸ªå¹³é¢ï¼šç¬¬ä¸€ä¸ªæ˜¯çº¢è‰²å¹³é¢ï¼Œç¬¬äºŒä¸ªæ˜¯ç»¿è‰²å¹³é¢ï¼Œæœ€åä¸€ä¸ªæ˜¯è“è‰²å¹³é¢ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/image_3d_matrix_rgb.png" alt="an image is a 3d matrix RGB" title="An image is a 3D matrix"></p>
<p>æˆ‘ä»¬æŠŠè¿™ä¸ªçŸ©é˜µé‡Œçš„æ¯ä¸€ä¸ªç‚¹ç§°ä¸º<strong>åƒç´ </strong>ï¼ˆå›¾åƒå…ƒç´ ï¼‰ã€‚åƒç´ çš„è‰²å½©ç”±ä¸‰åŸè‰²çš„<strong>å¼ºåº¦</strong>ï¼ˆé€šå¸¸ç”¨æ•°å€¼è¡¨ç¤ºï¼‰è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª<strong>çº¢è‰²åƒç´ </strong>æ˜¯æŒ‡å¼ºåº¦ä¸º 0 çš„ç»¿è‰²ï¼Œå¼ºåº¦ä¸º 0 çš„è“è‰²å’Œå¼ºåº¦æœ€å¤§çš„çº¢è‰²ã€‚<strong>ç²‰è‰²åƒç´ </strong>å¯ä»¥é€šè¿‡ä¸‰ç§é¢œè‰²çš„ç»„åˆè¡¨ç¤ºã€‚å¦‚æœè§„å®šå¼ºåº¦çš„å–å€¼èŒƒå›´æ˜¯ 0 åˆ° 255ï¼Œ<strong>çº¢è‰² 255ã€ç»¿è‰² 192ã€è“è‰² 203</strong> åˆ™è¡¨ç¤ºç²‰è‰²ã€‚</p>
<blockquote>
<h3 id="ç¼–ç å½©è‰²å›¾åƒçš„å…¶å®ƒæ–¹æ³•">ç¼–ç å½©è‰²å›¾åƒçš„å…¶å®ƒæ–¹æ³•</h3>
<p>è¿˜æœ‰è®¸å¤šå…¶å®ƒæ¨¡å‹ä¹Ÿå¯ä»¥ç”¨æ¥è¡¨ç¤ºè‰²å½©ï¼Œè¿›è€Œç»„æˆå›¾åƒã€‚ä¾‹å¦‚ï¼Œç»™æ¯ç§é¢œè‰²éƒ½æ ‡ä¸Šåºå·ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œè¿™æ ·æ¯ä¸ªåƒç´ ä»…éœ€ä¸€ä¸ªå­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºå‡ºæ¥ï¼Œè€Œä¸æ˜¯ RGB æ¨¡å‹é€šå¸¸æ‰€éœ€çš„ 3 ä¸ªã€‚åœ¨è¿™æ ·ä¸€ä¸ªæ¨¡å‹é‡Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªäºŒç»´çŸ©é˜µæ¥ä»£æ›¿ä¸‰ç»´çŸ©é˜µå»è¡¨ç¤ºæˆ‘ä»¬çš„è‰²å½©ï¼Œè¿™å°†èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œä½†è‰²å½©çš„æ•°é‡å°†ä¼šå—é™ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/nes-color-palette.png" alt="NES palette" title="NES palette"></p>
</blockquote>
<p>ä¾‹å¦‚ä»¥ä¸‹å‡ å¼ å›¾ç‰‡ã€‚ç¬¬ä¸€å¼ åŒ…å«æ‰€æœ‰é¢œè‰²å¹³é¢ã€‚å‰©ä¸‹çš„åˆ†åˆ«æ˜¯çº¢ã€ç»¿ã€è“è‰²å¹³é¢ï¼ˆæ˜¾ç¤ºä¸ºç°è°ƒï¼‰ï¼ˆè¯‘æ³¨ï¼šé¢œè‰²å¼ºåº¦é«˜çš„åœ°æ–¹æ˜¾ç¤ºä¸ºäº®è‰²ï¼Œå¼ºåº¦ä½ä¸ºæš—è‰²ï¼‰ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/rgb_channels_intensity.png" alt="RGB channels intensity" title="RGB channels intensity"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºæœ€ç»ˆçš„æˆåƒï¼Œçº¢è‰²å¹³é¢å¯¹å¼ºåº¦çš„è´¡çŒ®æ›´å¤šï¼ˆä¸‰ä¸ªå¹³é¢æœ€äº®çš„æ˜¯çº¢è‰²å¹³é¢ï¼‰ï¼Œè“è‰²å¹³é¢ï¼ˆæœ€åä¸€å¼ å›¾ç‰‡ï¼‰çš„è´¡çŒ®å¤§å¤šåªåœ¨é©¬é‡Œå¥¥çš„çœ¼ç›å’Œä»–è¡£æœçš„ä¸€éƒ¨åˆ†ã€‚æ‰€æœ‰é¢œè‰²å¹³é¢å¯¹é©¬é‡Œå¥¥çš„èƒ¡å­ï¼ˆæœ€æš—çš„éƒ¨åˆ†ï¼‰å‡è´¡çŒ®è¾ƒå°‘ã€‚</p>
<p>å­˜å‚¨é¢œè‰²çš„å¼ºåº¦ï¼Œéœ€è¦å ç”¨ä¸€å®šå¤§å°çš„æ•°æ®ç©ºé—´ï¼Œè¿™ä¸ªå¤§å°è¢«ç§°ä¸ºé¢œè‰²æ·±åº¦ã€‚å‡å¦‚æ¯ä¸ªé¢œè‰²ï¼ˆå¹³é¢ï¼‰çš„å¼ºåº¦å ç”¨ 8 bitï¼ˆå–å€¼èŒƒå›´ä¸º 0 åˆ° 255ï¼‰ï¼Œé‚£ä¹ˆé¢œè‰²æ·±åº¦å°±æ˜¯ 24ï¼ˆ8*3ï¼‰bitï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ¨å¯¼å‡ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ 2 çš„ 24 æ¬¡æ–¹ç§ä¸åŒçš„é¢œè‰²ã€‚</p>
<blockquote>
<p>å¾ˆæ£’çš„å­¦ä¹ ææ–™ï¼š<a href="http://www.cambridgeincolour.com/tutorials/camera-sensors.htm">ç°å®ä¸–ç•Œçš„ç…§ç‰‡æ˜¯å¦‚ä½•æ‹æ‘„æˆ 0 å’Œ 1 çš„</a>ã€‚</p>
</blockquote>
<p>å›¾ç‰‡çš„å¦ä¸€ä¸ªå±æ€§æ˜¯<strong>åˆ†è¾¨ç‡</strong>ï¼Œå³ä¸€ä¸ªå¹³é¢å†…åƒç´ çš„æ•°é‡ã€‚é€šå¸¸è¡¨ç¤ºæˆå®½*é«˜ï¼Œä¾‹å¦‚ä¸‹é¢è¿™å¼  <strong>4x4</strong> çš„å›¾ç‰‡ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/resolution.png" alt="image resolution" title="image resolution"></p>
<blockquote>
<h3 id="è‡ªå·±åŠ¨æ‰‹ï¼šç©è½¬å›¾åƒå’Œé¢œè‰²">è‡ªå·±åŠ¨æ‰‹ï¼šç©è½¬å›¾åƒå’Œé¢œè‰²</h3>
<p>ä½ å¯ä»¥ä½¿ç”¨ <a href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-jupyter">jupyter</a>ï¼ˆpython, numpy, matplotlib ç­‰ç­‰ï¼‰<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/02/28/Introduction-to-digital-video-technology/py/image_as_3d_array.ipynb">ç©è½¬å›¾åƒ</a>ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥å­¦ä¹ <a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/02/28/Introduction-to-digital-video-technology/py/filters_are_easy.ipynb">å›¾åƒæ»¤é•œï¼ˆè¾¹ç¼˜æ£€æµ‹ï¼Œç£¨çš®ï¼Œæ¨¡ç³Šã€‚ã€‚ã€‚ï¼‰çš„åŸç†</a>ã€‚</p>
</blockquote>
<p>å›¾åƒæˆ–è§†é¢‘è¿˜æœ‰ä¸€ä¸ªå±æ€§æ˜¯å®½é«˜æ¯”ï¼Œå®ƒç®€å•åœ°æè¿°äº†å›¾åƒæˆ–åƒç´ çš„å®½åº¦å’Œé«˜åº¦ä¹‹é—´çš„æ¯”ä¾‹å…³ç³»ã€‚</p>
<p>å½“äººä»¬è¯´è¿™ä¸ªç”µå½±æˆ–ç…§ç‰‡æ˜¯ 16:9 æ—¶ï¼Œé€šå¸¸æ˜¯æŒ‡æ˜¾ç¤ºå®½é«˜æ¯”ï¼ˆDARï¼‰ï¼Œç„¶è€Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æœ‰ä¸åŒå½¢çŠ¶çš„å•ä¸ªåƒç´ ï¼Œæˆ‘ä»¬ç§°ä¸ºåƒç´ å®½é«˜æ¯”ï¼ˆPARï¼‰ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/DAR.png" alt="display aspect ratio" title="display aspect ratio"></p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/PAR.png" alt="pixel aspect ratio" title="pixel aspect ratio"></p>
<blockquote>
<h2 id="dvd-çš„-dar-æ˜¯-4-3">DVD çš„ DAR æ˜¯ 4:3</h2>
<p>è™½ç„¶ DVD çš„å®é™…åˆ†è¾¨ç‡æ˜¯ 704x480ï¼Œä½†å®ƒä¾ç„¶ä¿æŒ 4:3 çš„å®½é«˜æ¯”ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ª 10:11ï¼ˆ704x10ï¼480x11ï¼‰çš„ PARã€‚</p>
</blockquote>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†<strong>è§†é¢‘</strong>å®šä¹‰ä¸ºåœ¨<strong>å•ä½æ—¶é—´</strong>å†…<strong>è¿ç»­çš„ n å¸§</strong>ï¼Œè¿™å¯ä»¥è§†ä½œä¸€ä¸ªæ–°çš„ç»´åº¦ï¼Œn å³ä¸ºå¸§ç‡ï¼Œè‹¥å•ä½æ—¶é—´ä¸ºç§’ï¼Œåˆ™ç­‰åŒäº FPS (æ¯ç§’å¸§æ•° Frames Per Second)ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/video.png" alt="video" title="video"></p>
<p>æ’­æ”¾ä¸€æ®µè§†é¢‘æ¯ç§’æ‰€éœ€çš„æ•°æ®é‡å°±æ˜¯å®ƒçš„<strong>æ¯”ç‰¹ç‡</strong>ï¼ˆå³å¸¸è¯´çš„ç ç‡ï¼‰ã€‚</p>
<blockquote>
<p>æ¯”ç‰¹ç‡ = å®½ * é«˜ * é¢œè‰²æ·±åº¦ * å¸§æ¯ç§’</p>
</blockquote>
<p>ä¾‹å¦‚ï¼Œä¸€æ®µæ¯ç§’ 30 å¸§ï¼Œæ¯åƒç´  24 bitsï¼Œåˆ†è¾¨ç‡æ˜¯ 480x240 çš„è§†é¢‘ï¼Œå¦‚æœæˆ‘ä»¬ä¸åšä»»ä½•å‹ç¼©ï¼Œå®ƒå°†éœ€è¦ <strong>82,944,000 æ¯”ç‰¹æ¯ç§’</strong>æˆ– 82.944 Mbps (30x480x240x24)ã€‚</p>
<p>å½“<strong>æ¯”ç‰¹ç‡</strong>å‡ ä¹æ’å®šæ—¶ç§°ä¸ºæ’å®šæ¯”ç‰¹ç‡ï¼ˆ<strong>CBR</strong>ï¼‰ï¼›ä½†å®ƒä¹Ÿå¯ä»¥å˜åŒ–ï¼Œç§°ä¸ºå¯å˜æ¯”ç‰¹ç‡ï¼ˆ<strong>VBR</strong>ï¼‰ã€‚</p>
<blockquote>
<p>è¿™ä¸ªå›¾å½¢æ˜¾ç¤ºäº†ä¸€ä¸ªå—é™çš„ VBRï¼Œå½“å¸§ä¸ºé»‘è‰²æ—¶ä¸ä¼šèŠ±è´¹å¤ªå¤šçš„æ•°æ®é‡ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/vbr.png" alt="constrained vbr" title="constrained vbr"></p>
</blockquote>
<p>åœ¨æ—©æœŸï¼Œå·¥ç¨‹å¸ˆä»¬æƒ³å‡ºäº†ä¸€é¡¹æŠ€æœ¯èƒ½å°†è§†é¢‘çš„æ„Ÿå®˜å¸§ç‡åŠ å€è€Œ<strong>æ²¡æœ‰æ¶ˆè€—é¢å¤–å¸¦å®½</strong>ã€‚è¿™é¡¹æŠ€æœ¯è¢«ç§°ä¸º<strong>éš”è¡Œæ‰«æ</strong>ï¼›æ€»çš„æ¥è¯´ï¼Œå®ƒåœ¨ä¸€ä¸ªæ—¶é—´ç‚¹å‘é€ä¸€ä¸ªç”»é¢â€”â€”ç”»é¢ç”¨äºå¡«å……å±å¹•çš„ä¸€åŠï¼Œè€Œä¸‹ä¸€ä¸ªæ—¶é—´ç‚¹å‘é€çš„ç”»é¢ç”¨äºå¡«å……å±å¹•çš„å¦ä¸€åŠã€‚</p>
<p>å¦‚ä»Šçš„å±å¹•æ¸²æŸ“å¤§å¤šä½¿ç”¨<strong>é€è¡Œæ‰«ææŠ€æœ¯</strong>ã€‚è¿™æ˜¯ä¸€ç§æ˜¾ç¤ºã€å­˜å‚¨ã€ä¼ è¾“è¿åŠ¨å›¾åƒçš„æ–¹æ³•ï¼Œæ¯å¸§ä¸­çš„æ‰€æœ‰è¡Œéƒ½ä¼šè¢«ä¾æ¬¡ç»˜åˆ¶ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/interlaced_vs_progressive.png" alt="interlaced vs progressive" title="interlaced vs progressive"></p>
<p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†æ•°å­—åŒ–<strong>å›¾åƒ</strong>çš„åŸç†ï¼›å®ƒçš„<strong>é¢œè‰²</strong>çš„ç¼–æ’æ–¹å¼ï¼›ç»™å®š<strong>å¸§ç‡</strong>å’Œ<strong>åˆ†è¾¨ç‡</strong>æ—¶ï¼Œå±•ç¤ºä¸€ä¸ªè§†é¢‘éœ€è¦èŠ±è´¹å¤šå°‘<strong>æ¯”ç‰¹ç‡</strong>ï¼›å®ƒæ˜¯æ’å®šçš„ï¼ˆCBRï¼‰è¿˜æ˜¯å¯å˜çš„ï¼ˆVBRï¼‰ï¼›è¿˜æœ‰å¾ˆå¤šå…¶å®ƒå†…å®¹ï¼Œå¦‚éš”è¡Œæ‰«æå’Œ PARã€‚</p>
<blockquote>
<h2 id="è‡ªå·±åŠ¨æ‰‹ï¼šæ£€æŸ¥è§†é¢‘å±æ€§">è‡ªå·±åŠ¨æ‰‹ï¼šæ£€æŸ¥è§†é¢‘å±æ€§</h2>
<p>ä½ å¯ä»¥<a href="https://github.com/leandromoreira/introduction_video_technology/blob/master/encoding_pratical_examples.md#inspect-stream">ä½¿ç”¨ ffmpeg æˆ– mediainfo æ£€æŸ¥å¤§å¤šæ•°å±æ€§çš„è§£é‡Š</a>ã€‚</p>
</blockquote>
<h1>æ¶ˆé™¤å†—ä½™</h1>
<p>æˆ‘ä»¬è®¤è¯†åˆ°ï¼Œä¸å¯¹è§†é¢‘è¿›è¡Œå‹ç¼©æ˜¯ä¸è¡Œçš„ï¼›<strong>ä¸€ä¸ªå•ç‹¬çš„ä¸€å°æ—¶é•¿çš„è§†é¢‘</strong>ï¼Œåˆ†è¾¨ç‡ä¸º 720p å’Œ 30fps æ—¶å°†<strong>éœ€è¦ 278GB<sup>*</sup></strong>ã€‚ä»…ä»…ä½¿ç”¨æ— æŸæ•°æ®å‹ç¼©ç®—æ³•â€”â€”å¦‚ DEFLATEï¼ˆè¢«PKZIP, Gzip, å’Œ PNG ä½¿ç”¨ï¼‰â€”â€”ä¹Ÿæ— æ³•å……åˆ†å‡å°‘è§†é¢‘æ‰€éœ€çš„å¸¦å®½ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å…¶å®ƒå‹ç¼©è§†é¢‘çš„æ–¹æ³•ã€‚</p>
<blockquote>
<p><sup>*</sup>æˆ‘ä»¬ä½¿ç”¨ä¹˜ç§¯å¾—å‡ºè¿™ä¸ªæ•°å­— 1280 x 720 x 24 x 30 x 3600 ï¼ˆå®½ï¼Œé«˜ï¼Œæ¯åƒç´ æ¯”ç‰¹æ•°ï¼Œfps å’Œç§’æ•°ï¼‰</p>
</blockquote>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥<strong>åˆ©ç”¨è§†è§‰ç‰¹æ€§</strong>ï¼šå’ŒåŒºåˆ†é¢œè‰²ç›¸æ¯”ï¼Œæˆ‘ä»¬åŒºåˆ†äº®åº¦è¦æ›´åŠ æ•é”ã€‚<strong>æ—¶é—´ä¸Šçš„é‡å¤</strong>ï¼šä¸€æ®µè§†é¢‘åŒ…å«å¾ˆå¤šåªæœ‰ä¸€ç‚¹å°å°æ”¹å˜çš„å›¾åƒã€‚<strong>å›¾åƒå†…çš„é‡å¤</strong>ï¼šæ¯ä¸€å¸§ä¹ŸåŒ…å«å¾ˆå¤šé¢œè‰²ç›¸åŒæˆ–ç›¸ä¼¼çš„åŒºåŸŸã€‚</p>
<h2 id="é¢œè‰²-äº®åº¦å’Œæˆ‘ä»¬çš„çœ¼ç›">é¢œè‰²ï¼Œäº®åº¦å’Œæˆ‘ä»¬çš„çœ¼ç›</h2>
<p>æˆ‘ä»¬çš„çœ¼ç›<a href="http://vanseodesign.com/web-design/color-luminance/">å¯¹äº®åº¦æ¯”å¯¹é¢œè‰²æ›´æ•æ„Ÿ</a>ï¼Œä½ å¯ä»¥çœ‹çœ‹ä¸‹é¢çš„å›¾ç‰‡è‡ªå·±æµ‹è¯•ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/luminance_vs_color.png" alt="luminance vs color" title="luminance vs color"></p>
<p>å¦‚æœä½ çœ‹ä¸å‡ºå·¦å›¾çš„<strong>æ–¹å— A å’Œæ–¹å— B</strong> çš„é¢œè‰²æ˜¯<strong>ç›¸åŒçš„</strong>ï¼Œé‚£ä¹ˆå¥½ï¼Œæ˜¯æˆ‘ä»¬çš„å¤§è„‘ç©äº†ä¸€ä¸ªå°æŠŠæˆï¼Œè¿™è®©æˆ‘ä»¬æ›´å¤šçš„å»æ³¨æ„å…‰ä¸æš—ï¼Œè€Œä¸æ˜¯é¢œè‰²ã€‚å³è¾¹è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨åŒæ ·é¢œè‰²çš„è¿æ¥å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬ï¼ˆçš„å¤§è„‘ï¼‰å°±èƒ½è½»æ˜“åˆ†è¾¨å‡ºäº‹å®ï¼Œå®ƒä»¬æ˜¯åŒæ ·çš„é¢œè‰²ã€‚</p>
<blockquote>
<p><strong>ç®€å•è§£é‡Šæˆ‘ä»¬çš„çœ¼ç›å·¥ä½œçš„åŸç†</strong></p>
<p><a href="http://www.biologymad.com/nervoussystem/eyenotes.htm">çœ¼ç›æ˜¯ä¸€ä¸ªå¤æ‚çš„å™¨å®˜</a>ï¼Œæœ‰è®¸å¤šéƒ¨åˆ†ç»„æˆï¼Œä½†æˆ‘ä»¬æœ€æ„Ÿå…´è¶£çš„æ˜¯è§†é”¥ç»†èƒå’Œè§†æ†ç»†èƒã€‚çœ¼ç›æœ‰<a href="https://en.wikipedia.org/wiki/Photoreceptor_cell">å¤§çº¦1.2äº¿ä¸ªè§†æ†ç»†èƒå’Œ6ç™¾ä¸‡ä¸ªè§†é”¥ç»†èƒ</a>ã€‚</p>
<p><strong>ç®€å•æ¥è¯´</strong>ï¼Œè®©æˆ‘ä»¬æŠŠé¢œè‰²å’Œäº®åº¦æ”¾åœ¨çœ¼ç›çš„åŠŸèƒ½éƒ¨ä½ä¸Šã€‚<a href="https://en.wikipedia.org/wiki/Rod_cell">è§†æ†ç»†èƒ</a><strong>ä¸»è¦è´Ÿè´£äº®åº¦</strong>ï¼Œè€Œ<a href="https://en.wikipedia.org/wiki/Cone_cell">è§†é”¥ç»†èƒ</a><strong>è´Ÿè´£é¢œè‰²</strong>ï¼Œæœ‰ä¸‰ç§ç±»å‹çš„è§†é”¥ï¼Œæ¯ä¸ªéƒ½æœ‰ä¸åŒçš„é¢œæ–™ï¼Œå«åšï¼š<a href="https://upload.wikimedia.org/wikipedia/commons/1/1e/Cones_SMJ2_E.svg">S-è§†é”¥ï¼ˆè“è‰²ï¼‰ï¼ŒM-è§†é”¥ï¼ˆç»¿è‰²ï¼‰å’ŒL-è§†é”¥ï¼ˆçº¢è‰²ï¼‰</a>ã€‚</p>
<p>æ—¢ç„¶æˆ‘ä»¬çš„è§†æ†ç»†èƒï¼ˆäº®åº¦ï¼‰æ¯”è§†é”¥ç»†èƒå¤šå¾ˆå¤šï¼Œä¸€ä¸ªåˆç†çš„æ¨æ–­æ˜¯ç›¸æ¯”é¢œè‰²ï¼Œæˆ‘ä»¬æœ‰æ›´å¥½çš„èƒ½åŠ›å»åŒºåˆ†é»‘æš—å’Œå…‰äº®ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/eyes.jpg" alt="eyes composition" title="eyes composition"></p>
</blockquote>
<p>ä¸€æ—¦æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬å¯¹<strong>äº®åº¦</strong>ï¼ˆå›¾åƒä¸­çš„äº®åº¦ï¼‰æ›´æ•æ„Ÿï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨å®ƒã€‚</p>
<h3 id="é¢œè‰²æ¨¡å‹">é¢œè‰²æ¨¡å‹</h3>
<p>æˆ‘ä»¬æœ€å¼€å§‹å­¦ä¹ çš„<a href="#%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD">å½©è‰²å›¾åƒçš„åŸç†</a>ä½¿ç”¨çš„æ˜¯ <strong>RGB æ¨¡å‹</strong>ï¼Œä½†ä¹Ÿæœ‰å…¶ä»–æ¨¡å‹ã€‚æœ‰ä¸€ç§æ¨¡å‹å°†äº®åº¦ï¼ˆå…‰äº®ï¼‰å’Œè‰²åº¦ï¼ˆé¢œè‰²ï¼‰åˆ†ç¦»å¼€ï¼Œå®ƒè¢«ç§°ä¸º <strong>YCbCr</strong><sup>*</sup>ã€‚</p>
<blockquote>
<p><sup>*</sup> æœ‰å¾ˆå¤šç§æ¨¡å‹åšåŒæ ·çš„åˆ†ç¦»ã€‚</p>
</blockquote>
<p>è¿™ä¸ªé¢œè‰²æ¨¡å‹ä½¿ç”¨ <strong>Y</strong> æ¥è¡¨ç¤ºäº®åº¦ï¼Œè¿˜æœ‰ä¸¤ç§é¢œè‰²é€šé“ï¼šCbï¼ˆè“è‰²è‰²åº¦ï¼‰ å’Œ Crï¼ˆçº¢è‰²è‰²åº¦ï¼‰ã€‚YCbCr å¯ä»¥ç”± RGB è½¬æ¢å¾—æ¥ï¼Œä¹Ÿå¯ä»¥è½¬æ¢å› RGBã€‚ä½¿ç”¨è¿™ä¸ªæ¨¡å‹æˆ‘ä»¬å¯ä»¥åˆ›å»ºæ‹¥æœ‰å®Œæ•´è‰²å½©çš„å›¾åƒï¼Œå¦‚ä¸‹å›¾ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/ycbcr.png" alt="ycbcr ä¾‹å­" title="ycbcr ä¾‹å­"></p>
<h3 id="ycbcr-å’Œ-rgb-ä¹‹é—´çš„è½¬æ¢">YCbCr å’Œ RGB ä¹‹é—´çš„è½¬æ¢</h3>
<p>æœ‰äººå¯èƒ½ä¼šé—®ï¼Œåœ¨**ä¸ä½¿ç”¨ç»¿è‰²ï¼ˆè‰²åº¦ï¼‰**çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¦‚ä½•è¡¨ç°å‡ºæ‰€æœ‰çš„è‰²å½©ï¼Ÿ</p>
<p>ä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä» RGB åˆ° YCbCr çš„è½¬æ¢ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/ITU-R">ITU-R å°ç»„</a>*å»ºè®®çš„<a href="https://en.wikipedia.org/wiki/Rec._601">æ ‡å‡† BT.601</a> ä¸­çš„ç³»æ•°ã€‚</p>
<p>ç¬¬ä¸€æ­¥æ˜¯è®¡ç®—äº®åº¦ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ ITU å»ºè®®çš„å¸¸é‡ï¼Œå¹¶æ›¿æ¢ RGB å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Y &#x3D; 0.299R + 0.587G + 0.114B</span><br></pre></td></tr></table></figure>
<p>ä¸€æ—¦æˆ‘ä»¬æœ‰äº†äº®åº¦åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹†åˆ†é¢œè‰²ï¼ˆè“è‰²è‰²åº¦å’Œçº¢è‰²è‰²åº¦ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Cb &#x3D; 0.564(B - Y)</span><br><span class="line">Cr &#x3D; 0.713(R - Y)</span><br></pre></td></tr></table></figure>
<p>å¹¶ä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ YCbCr è½¬æ¢å›æ¥ï¼Œç”šè‡³å¾—åˆ°ç»¿è‰²ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">R &#x3D; Y + 1.402Cr</span><br><span class="line">B &#x3D; Y + 1.772Cb</span><br><span class="line">G &#x3D; Y - 0.344Cb - 0.714Cr</span><br></pre></td></tr></table></figure>
<blockquote>
<p><sup>*</sup>ç»„ç»‡å’Œæ ‡å‡†åœ¨æ•°å­—è§†é¢‘é¢†åŸŸä¸­å¾ˆå¸¸è§ï¼Œå®ƒä»¬é€šå¸¸å®šä¹‰ä»€ä¹ˆæ˜¯æ ‡å‡†ï¼Œä¾‹å¦‚ï¼Œ<a href="https://en.wikipedia.org/wiki/Rec._2020">ä»€ä¹ˆæ˜¯ 4Kï¼Ÿæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ä»€ä¹ˆå¸§ç‡ï¼Ÿåˆ†è¾¨ç‡ï¼Ÿé¢œè‰²æ¨¡å‹ï¼Ÿ</a></p>
</blockquote>
<p>é€šå¸¸ï¼Œ<strong>æ˜¾ç¤ºå±</strong>ï¼ˆç›‘è§†å™¨ï¼Œç”µè§†æœºï¼Œå±å¹•ç­‰ç­‰ï¼‰<strong>ä»…ä½¿ç”¨ RGB æ¨¡å‹</strong>ï¼Œå¹¶ä»¥ä¸åŒçš„æ–¹å¼æ¥ç»„ç»‡ï¼Œçœ‹çœ‹ä¸‹é¢è¿™äº›æ”¾å¤§æ•ˆæœï¼š</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/new_pixel_geometry.jpg" alt="pixel geometry" title="pixel geometry"></p>
<h3 id="è‰²åº¦å­é‡‡æ ·">è‰²åº¦å­é‡‡æ ·</h3>
<p>ä¸€æ—¦æˆ‘ä»¬èƒ½ä»å›¾åƒä¸­åˆ†ç¦»å‡ºäº®åº¦å’Œè‰²åº¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨äººç±»è§†è§‰ç³»ç»Ÿå¯¹äº®åº¦æ¯”è‰²åº¦æ›´æ•æ„Ÿçš„ç‰¹ç‚¹ï¼Œé€‰æ‹©æ€§åœ°å‰”é™¤ä¿¡æ¯ã€‚<strong>è‰²åº¦å­é‡‡æ ·</strong>æ˜¯ä¸€ç§ç¼–ç å›¾åƒæ—¶ï¼Œä½¿<strong>è‰²åº¦åˆ†è¾¨ç‡ä½äºäº®åº¦</strong>çš„æŠ€æœ¯ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/ycbcr_subsampling_resolution.png" alt="ycbcr å­é‡‡æ ·åˆ†è¾¨ç‡" title="ycbcr å­é‡‡æ ·åˆ†è¾¨ç‡"></p>
<p>æˆ‘ä»¬åº”è¯¥å‡å°‘å¤šå°‘è‰²åº¦åˆ†è¾¨ç‡å‘¢ï¼Ÿå·²ç»æœ‰ä¸€äº›æ¨¡å¼å®šä¹‰äº†å¦‚ä½•å¤„ç†åˆ†è¾¨ç‡å’Œåˆå¹¶ï¼ˆ<code>æœ€ç»ˆçš„é¢œè‰² = Y + Cb + Cr</code>ï¼‰ã€‚</p>
<p>è¿™äº›æ¨¡å¼ç§°ä¸ºå­é‡‡æ ·ç³»ç»Ÿï¼Œå¹¶è¢«è¡¨ç¤ºä¸º 3 éƒ¨åˆ†çš„æ¯”ç‡ - <code>a:x:y</code>ï¼Œå…¶å®šä¹‰äº†è‰²åº¦å¹³é¢çš„åˆ†è¾¨ç‡ï¼Œä¸äº®åº¦å¹³é¢ä¸Šçš„ã€åˆ†è¾¨ç‡ä¸º <code>a x 2</code> çš„å°å—ä¹‹é—´çš„å…³ç³»ã€‚</p>
<ul>
<li><code>a</code> æ˜¯æ°´å¹³é‡‡æ ·å‚è€ƒ (é€šå¸¸æ˜¯ 4)ï¼Œ</li>
<li><code>x</code> æ˜¯ç¬¬ä¸€è¡Œçš„è‰²åº¦æ ·æœ¬æ•°ï¼ˆç›¸å¯¹äº a çš„æ°´å¹³åˆ†è¾¨ç‡ï¼‰ï¼Œ</li>
<li><code>y</code> æ˜¯ç¬¬äºŒè¡Œçš„è‰²åº¦æ ·æœ¬æ•°ã€‚</li>
</ul>
<blockquote>
<p>å­˜åœ¨çš„ä¸€ä¸ªä¾‹å¤–æ˜¯ 4:1:0ï¼Œå…¶åœ¨æ¯ä¸ªäº®åº¦å¹³é¢åˆ†è¾¨ç‡ä¸º 4 x 4 çš„å—å†…æä¾›ä¸€ä¸ªè‰²åº¦æ ·æœ¬ã€‚</p>
</blockquote>
<p>ç°ä»£ç¼–è§£ç å™¨ä¸­ä½¿ç”¨çš„å¸¸ç”¨æ–¹æ¡ˆæ˜¯ï¼š 4:4:4 (æ²¡æœ‰å­é‡‡æ ·)**, 4:2:2, 4:1:1, 4:2:0, 4:1:0 and 3:1:1ã€‚</p>
<blockquote>
<p>YCbCr 4:2:0 åˆå¹¶</p>
<p>è¿™æ˜¯ä½¿ç”¨ YCbCr 4:2:0 åˆå¹¶çš„ä¸€ä¸ªå›¾åƒçš„ä¸€å—ï¼Œæ³¨æ„æˆ‘ä»¬æ¯åƒç´ åªèŠ±è´¹ 12bitã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/ycbcr_420_merge.png" alt="YCbCr 4:2:0 åˆå¹¶" title="YCbCr 4:2:0 åˆå¹¶"></p>
</blockquote>
<p>ä¸‹å›¾æ˜¯åŒä¸€å¼ å›¾ç‰‡ä½¿ç”¨å‡ ç§ä¸»è¦çš„è‰²åº¦å­é‡‡æ ·æŠ€æœ¯è¿›è¡Œç¼–ç ï¼Œç¬¬ä¸€è¡Œå›¾åƒæ˜¯æœ€ç»ˆçš„ YCbCrï¼Œè€Œæœ€åä¸€è¡Œå›¾åƒå±•ç¤ºäº†è‰²åº¦çš„åˆ†è¾¨ç‡ã€‚è¿™ä¹ˆå°çš„æŸå¤±ç¡®å®æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„èƒœåˆ©ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/chroma_subsampling_examples.jpg" alt="è‰²åº¦å­é‡‡æ ·ä¾‹å­" title="è‰²åº¦å­é‡‡æ ·ä¾‹å­"></p>
<p>å‰é¢æˆ‘ä»¬è®¡ç®—è¿‡æˆ‘ä»¬éœ€è¦ <a href="#%E6%B6%88%E9%99%A4%E5%86%97%E4%BD%99">278GB å»å­˜å‚¨ä¸€ä¸ªä¸€å°æ—¶é•¿ï¼Œåˆ†è¾¨ç‡åœ¨720på’Œ30fpsçš„è§†é¢‘æ–‡ä»¶</a>ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ <code>YCbCr 4:2:0</code> æˆ‘ä»¬èƒ½å‰ªæ‰<code>ä¸€åŠçš„å¤§å°ï¼ˆ139GBï¼‰</code><sup>*</sup>ï¼Œä½†ä»ç„¶ä¸å¤Ÿç†æƒ³ã€‚</p>
<blockquote>
<p><sup>*</sup> æˆ‘ä»¬é€šè¿‡å°†å®½ã€é«˜ã€é¢œè‰²æ·±åº¦å’Œ fps ç›¸ä¹˜å¾—å‡ºè¿™ä¸ªå€¼ã€‚å‰é¢æˆ‘ä»¬éœ€è¦ 24 bitï¼Œç°åœ¨æˆ‘ä»¬åªéœ€è¦ 12 bitã€‚</p>
</blockquote>
<blockquote>
<h3 id="è‡ªå·±åŠ¨æ‰‹ï¼šæ£€æŸ¥-ycbcr-ç›´æ–¹å›¾">è‡ªå·±åŠ¨æ‰‹ï¼šæ£€æŸ¥ YCbCr ç›´æ–¹å›¾</h3>
<p>ä½ å¯ä»¥<a href="https://github.com/leandromoreira/digital_video_introduction/blob/master/encoding_pratical_examples.md#generates-yuv-histogram">ä½¿ç”¨ ffmpeg æ£€æŸ¥ YCbCr ç›´æ–¹å›¾</a>ã€‚è¿™ä¸ªåœºæ™¯æœ‰æ›´å¤šçš„è“è‰²è´¡çŒ®ï¼Œç”±<a href="https://en.wikipedia.org/wiki/Histogram">ç›´æ–¹å›¾</a>æ˜¾ç¤ºã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/yuv_histogram.png" alt="ycbcr é¢œè‰²ç›´æ–¹å›¾" title="ycbcr é¢œè‰²ç›´æ–¹å›¾"></p>
</blockquote>
<h2 id="å¸§ç±»å‹">å¸§ç±»å‹</h2>
<p>ç°åœ¨æˆ‘ä»¬è¿›ä¸€æ­¥æ¶ˆé™¤<code>æ—¶é—´å†—ä½™</code>ï¼Œä½†åœ¨è¿™ä¹‹å‰è®©æˆ‘ä»¬æ¥ç¡®å®šä¸€äº›åŸºæœ¬æœ¯è¯­ã€‚å‡è®¾æˆ‘ä»¬ä¸€æ®µ 30fps çš„å½±ç‰‡ï¼Œè¿™æ˜¯æœ€å¼€å§‹çš„ 4 å¸§ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/smw_background_ball_1.png" alt="çƒ 1" title="çƒ 1"> <img src="/2020/02/28/Introduction-to-digital-video-technology/smw_background_ball_2.png" alt="çƒ 2" title="çƒ 2"> <img src="/2020/02/28/Introduction-to-digital-video-technology/smw_background_ball_3.png" alt="çƒ 3" title="çƒ 3"><br>
<img src="/2020/02/28/Introduction-to-digital-video-technology/smw_background_ball_4.png" alt="çƒ 4" title="çƒ 4"></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å¸§å†…çœ‹åˆ°<strong>å¾ˆå¤šé‡å¤å†…å®¹</strong>ï¼Œå¦‚<strong>è“è‰²èƒŒæ™¯</strong>ï¼Œä» 0 å¸§åˆ°ç¬¬ 3 å¸§å®ƒéƒ½æ²¡æœ‰å˜åŒ–ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬<strong>æŠ½è±¡åœ°åˆ†ç±»</strong>ä¸ºä¸‰ç§ç±»å‹çš„å¸§ã€‚</p>
<h3 id="i-å¸§-å¸§å†…ç¼–ç -å…³é”®å¸§">I å¸§ï¼ˆå¸§å†…ç¼–ç ï¼Œå…³é”®å¸§ï¼‰</h3>
<p>I å¸§ï¼ˆå¯å‚è€ƒï¼Œå…³é”®å¸§ï¼Œå¸§å†…ç¼–ç ï¼‰æ˜¯ä¸€ä¸ª<strong>è‡ªè¶³çš„å¸§</strong>ã€‚å®ƒä¸ä¾é ä»»ä½•ä¸œè¥¿æ¥æ¸²æŸ“ï¼ŒI å¸§ä¸é™æ€å›¾ç‰‡ç›¸ä¼¼ã€‚ç¬¬ä¸€å¸§é€šå¸¸æ˜¯ I å¸§ï¼Œä½†æˆ‘ä»¬å°†çœ‹åˆ° I å¸§è¢«å®šæœŸæ’å…¥å…¶å®ƒç±»å‹çš„å¸§ä¹‹é—´ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/smw_background_ball_1.png" alt="çƒ 1" title="çƒ 1"></p>
<h3 id="p-å¸§-é¢„æµ‹">P å¸§ï¼ˆé¢„æµ‹ï¼‰</h3>
<p>P å¸§åˆ©ç”¨äº†ä¸€ä¸ªäº‹å®ï¼šå½“å‰çš„ç”»é¢å‡ ä¹æ€»èƒ½<strong>ä½¿ç”¨ä¹‹å‰çš„ä¸€å¸§è¿›è¡Œæ¸²æŸ“</strong>ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¬¬äºŒå¸§ï¼Œå”¯ä¸€çš„æ”¹å˜æ˜¯çƒå‘å‰ç§»åŠ¨äº†ã€‚ä»…ä»…ä½¿ç”¨ï¼ˆç¬¬äºŒå¸§ï¼‰å¯¹å‰ä¸€å¸§çš„å¼•ç”¨å’Œå·®å€¼ï¼Œæˆ‘ä»¬å°±èƒ½é‡å»ºå‰ä¸€å¸§ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/smw_background_ball_1.png" alt="çƒ 1" title="çƒ 1"> &lt;-  <img src="/2020/02/28/Introduction-to-digital-video-technology/smw_background_ball_2_diff.png" alt="çƒ 2" title="çƒ 2"></p>
<blockquote>
<h4 id="è‡ªå·±åŠ¨æ‰‹ï¼šå…·æœ‰å•ä¸ª-i-å¸§çš„è§†é¢‘">è‡ªå·±åŠ¨æ‰‹ï¼šå…·æœ‰å•ä¸ª I å¸§çš„è§†é¢‘</h4>
<p>æ—¢ç„¶ P å¸§ä½¿ç”¨è¾ƒå°‘çš„æ•°æ®ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç”¨<a href="https://github.com/leandromoreira/digital_video_introduction/blob/master/encoding_pratical_examples.md#1-i-frame-and-the-rest-p-frames">å•ä¸ª I å¸§å’Œå…¶ä½™çš„ P å¸§</a>æ¥ç¼–ç æ•´ä¸ªè§†é¢‘ï¼Ÿ</p>
<p>ç¼–ç å®Œè¿™ä¸ªè§†é¢‘ä¹‹åï¼Œå¼€å§‹è§‚çœ‹å®ƒï¼Œå¹¶<strong>å¿«è¿›åˆ°è§†é¢‘çš„æœ«å°¾éƒ¨åˆ†</strong>ï¼Œä½ ä¼šæ³¨æ„åˆ°<strong>å®ƒéœ€è¦èŠ±ä¸€äº›æ—¶é—´</strong>æ‰çœŸæ­£è·³è½¬åˆ°è¿™éƒ¨åˆ†ã€‚è¿™æ˜¯å› ä¸º <strong>P å¸§éœ€è¦ä¸€ä¸ªå¼•ç”¨å¸§</strong>ï¼ˆæ¯”å¦‚ I å¸§ï¼‰æ‰èƒ½æ¸²æŸ“ã€‚</p>
<p>ä½ å¯ä»¥åšçš„å¦ä¸€ä¸ªå¿«é€Ÿè¯•éªŒï¼Œæ˜¯ä½¿ç”¨å•ä¸ª I å¸§ç¼–ç è§†é¢‘ï¼Œç„¶å<a href="https://github.com/leandromoreira/digital_video_introduction/blob/master/encoding_pratical_examples.md#1-i-frames-per-second-vs-05-i-frames-per-second">å†æ¬¡ç¼–ç ä¸”æ¯ 2 ç§’æ’å…¥ä¸€ä¸ª I å¸§</a>ï¼Œå¹¶<strong>æ¯”è¾ƒæˆå“çš„å¤§å°</strong>ã€‚</p>
</blockquote>
<h3 id="b-å¸§-åŒå‘é¢„æµ‹">B å¸§ï¼ˆåŒå‘é¢„æµ‹ï¼‰</h3>
<p>å¦‚ä½•å¼•ç”¨å‰é¢å’Œåé¢çš„å¸§å»åšæ›´å¥½çš„å‹ç¼©ï¼Ÿï¼ç®€å•åœ°è¯´ B å¸§å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/smw_background_ball_1.png" alt="çƒ 1" title="çƒ 1"> &lt;-  <img src="/2020/02/28/Introduction-to-digital-video-technology/smw_background_ball_2_diff.png" alt="çƒ 2" title="çƒ 2"> -&gt; <img src="/2020/02/28/Introduction-to-digital-video-technology/smw_background_ball_3.png" alt="çƒ 3" title="çƒ 3"></p>
<blockquote>
<h4 id="è‡ªå·±åŠ¨æ‰‹ï¼šä½¿ç”¨-b-å¸§æ¯”è¾ƒè§†é¢‘">è‡ªå·±åŠ¨æ‰‹ï¼šä½¿ç”¨ B å¸§æ¯”è¾ƒè§†é¢‘</h4>
<p>ä½ å¯ä»¥ç”Ÿæˆä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªä½¿ç”¨ B å¸§ï¼Œå¦ä¸€ä¸ª<a href="https://github.com/leandromoreira/digital_video_introduction/blob/master/encoding_pratical_examples.md#no-b-frames-at-all">å…¨éƒ¨ä¸ä½¿ç”¨ B å¸§</a>ï¼Œç„¶åæŸ¥çœ‹æ–‡ä»¶çš„å¤§å°ä»¥åŠç”»è´¨ã€‚</p>
</blockquote>
<h3 id="å°ç»“">å°ç»“</h3>
<p>è¿™äº›å¸§ç±»å‹ç”¨äºæä¾›æ›´å¥½çš„å‹ç¼©ç‡ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç« çœ‹åˆ°è¿™æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ° I å¸§æ˜¯æ˜‚è´µçš„ï¼ŒP å¸§æ˜¯ä¾¿å®œçš„ï¼Œæœ€ä¾¿å®œçš„æ˜¯ B å¸§ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/frame_types.png" alt="å¸§ç±»å‹ä¾‹å­" title="å¸§ç±»å‹ä¾‹å­"></p>
<h2 id="æ—¶é—´å†—ä½™-å¸§é—´é¢„æµ‹">æ—¶é—´å†—ä½™ï¼ˆå¸§é—´é¢„æµ‹ï¼‰</h2>
<p>è®©æˆ‘ä»¬æ¢ç©¶å»é™¤<strong>æ—¶é—´ä¸Šçš„é‡å¤</strong>ï¼Œå»é™¤è¿™ä¸€ç±»å†—ä½™çš„æŠ€æœ¯å°±æ˜¯<strong>å¸§é—´é¢„æµ‹</strong>ã€‚</p>
<p>æˆ‘ä»¬å°†å°è¯•<strong>èŠ±è´¹è¾ƒå°‘çš„æ•°æ®é‡</strong>å»ç¼–ç åœ¨æ—¶é—´ä¸Šè¿ç»­çš„ 0 å·å¸§å’Œ 1 å·å¸§ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/original_frames.png" alt="åŸå§‹å¸§" title="åŸå§‹å¸§"></p>
<p>æˆ‘ä»¬å¯ä»¥åšä¸ªå‡æ³•ï¼Œæˆ‘ä»¬ç®€å•åœ°<strong>ç”¨ 0 å·å¸§å‡å» 1 å·å¸§</strong>ï¼Œå¾—åˆ°æ®‹å·®ï¼Œè¿™æ ·æˆ‘ä»¬å°±åªéœ€è¦<strong>å¯¹æ®‹å·®è¿›è¡Œç¼–ç </strong>ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/difference_frames.png" alt="æ®‹å·®å¸§" title="æ®‹å·®å¸§"></p>
<p>ä½†æˆ‘ä»¬æœ‰ä¸€ä¸ª<strong>æ›´å¥½çš„æ–¹æ³•</strong>æ¥èŠ‚çœæ•°æ®é‡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†<code>0 å·å¸§</code> è§†ä¸ºä¸€ä¸ªä¸ªåˆ†å—çš„é›†åˆï¼Œç„¶åæˆ‘ä»¬å°†å°è¯•å°† <code>å¸§ 1</code> å’Œ <code>å¸§ 0</code> ä¸Šçš„å—ç›¸åŒ¹é…ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™çœ‹ä½œæ˜¯<strong>è¿åŠ¨é¢„æµ‹</strong>ã€‚</p>
<blockquote>
<h3 id="ç»´åŸºç™¾ç§‘-å—è¿åŠ¨è¡¥å¿">ç»´åŸºç™¾ç§‘â€”å—è¿åŠ¨è¡¥å¿</h3>
<p>â€œè¿åŠ¨è¡¥å¿æ˜¯ä¸€ç§æè¿°ç›¸é‚»å¸§ï¼ˆç›¸é‚»åœ¨è¿™é‡Œè¡¨ç¤ºåœ¨ç¼–ç å…³ç³»ä¸Šç›¸é‚»ï¼Œåœ¨æ’­æ”¾é¡ºåºä¸Šä¸¤å¸§æœªå¿…ç›¸é‚»ï¼‰å·®åˆ«çš„æ–¹æ³•ï¼Œå…·ä½“æ¥è¯´æ˜¯æè¿°å‰é¢ä¸€å¸§ï¼ˆç›¸é‚»åœ¨è¿™é‡Œè¡¨ç¤ºåœ¨ç¼–ç å…³ç³»ä¸Šçš„å‰é¢ï¼Œåœ¨æ’­æ”¾é¡ºåºä¸Šæœªå¿…åœ¨å½“å‰å¸§å‰é¢ï¼‰çš„æ¯ä¸ªå°å—æ€æ ·ç§»åŠ¨åˆ°å½“å‰å¸§ä¸­çš„æŸä¸ªä½ç½®å»ã€‚â€</p>
</blockquote>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/original_frames_motion_estimation.png" alt="åŸå§‹å¸§è¿åŠ¨é¢„æµ‹" title="åŸå§‹å¸§è¿åŠ¨é¢„æµ‹"></p>
<p>æˆ‘ä»¬é¢„è®¡é‚£ä¸ªçƒä¼šä» <code>x=0, y=25</code> ç§»åŠ¨åˆ° <code>x=6, y=26</code>ï¼Œ<strong>x</strong> å’Œ <strong>y</strong> çš„å€¼å°±æ˜¯<strong>è¿åŠ¨å‘é‡</strong>ã€‚<strong>è¿›ä¸€æ­¥</strong>èŠ‚çœæ•°æ®é‡çš„æ–¹æ³•æ˜¯ï¼Œåªç¼–ç è¿™ä¸¤è€…è¿åŠ¨å‘é‡çš„å·®ã€‚æ‰€ä»¥ï¼Œæœ€ç»ˆè¿åŠ¨å‘é‡å°±æ˜¯ <code>x=6 (6-0), y=1 (26-25)</code>ã€‚</p>
<blockquote>
<p>å®é™…æƒ…å†µä¸‹ï¼Œè¿™ä¸ªçƒä¼šè¢«åˆ‡æˆ n ä¸ªåˆ†åŒºï¼Œä½†å¤„ç†è¿‡ç¨‹æ˜¯ç›¸åŒçš„ã€‚</p>
</blockquote>
<p>å¸§ä¸Šçš„ç‰©ä½“<strong>ä»¥ä¸‰ç»´æ–¹å¼ç§»åŠ¨</strong>ï¼Œå½“çƒç§»åŠ¨åˆ°èƒŒæ™¯æ—¶ä¼šå˜å°ã€‚å½“æˆ‘ä»¬å°è¯•å¯»æ‰¾åŒ¹é…çš„å—ï¼Œ<strong>æ‰¾ä¸åˆ°å®Œç¾åŒ¹é…çš„å—</strong>æ˜¯æ­£å¸¸çš„ã€‚è¿™æ˜¯ä¸€å¼ è¿åŠ¨é¢„æµ‹ä¸å®é™…å€¼ç›¸å åŠ çš„å›¾ç‰‡ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/motion_estimation.png" alt="è¿åŠ¨é¢„æµ‹" title="è¿åŠ¨é¢„æµ‹"></p>
<p>ä½†æˆ‘ä»¬èƒ½çœ‹åˆ°å½“æˆ‘ä»¬ä½¿ç”¨<strong>è¿åŠ¨é¢„æµ‹</strong>æ—¶ï¼Œ<strong>ç¼–ç çš„æ•°æ®é‡å°‘äº</strong>ä½¿ç”¨ç®€å•çš„æ®‹å·®å¸§æŠ€æœ¯ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/comparison_delta_vs_motion_estimation.png" alt="è¿åŠ¨é¢„æµ‹ vs æ®‹å·® " title="è¿åŠ¨é¢„æµ‹ vs æ®‹å·®"></p>
<p>ä½ å¯ä»¥<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/02/28/Introduction-to-digital-video-technology/py/frame_difference_vs_motion_estimation_plus_residual.ipynb">ä½¿ç”¨ jupyter ç©è½¬è¿™äº›æ¦‚å¿µ</a>ã€‚</p>
<blockquote>
<h3 id="è‡ªå·±åŠ¨æ‰‹ï¼šæŸ¥çœ‹è¿åŠ¨å‘é‡">è‡ªå·±åŠ¨æ‰‹ï¼šæŸ¥çœ‹è¿åŠ¨å‘é‡</h3>
<p>æˆ‘ä»¬å¯ä»¥<a href="https://github.com/leandromoreira/digital_video_introduction/blob/master/encoding_pratical_examples.md#generate-debug-video">ä½¿ç”¨ ffmpeg ç”ŸæˆåŒ…å«å¸§é—´é¢„æµ‹ï¼ˆè¿åŠ¨å‘é‡ï¼‰çš„è§†é¢‘</a>ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/motion_vectors_ffmpeg.png" alt="ffmpeg å¸§é—´é¢„æµ‹ï¼ˆè¿åŠ¨å‘é‡ï¼‰" title="ffmpeg å¸§é—´é¢„æµ‹ï¼ˆè¿åŠ¨å‘é‡ï¼‰"></p>
<p>æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä½¿ç”¨ <a href="https://software.intel.com/en-us/intel-video-pro-analyzer">IntelÂ® Video Pro Analyzer</a>ï¼ˆéœ€è¦ä»˜è´¹ï¼Œä½†ä¹Ÿæœ‰åªèƒ½æŸ¥çœ‹å‰ 10 å¸§çš„å…è´¹è¯•ç”¨ç‰ˆï¼‰ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/inter_prediction_intel_video_pro_analyzer.png" alt="IntelÂ® Video Pro Analyzer ä½¿ç”¨å¸§é—´é¢„æµ‹" title="inter prediction intel video pro analyzer"></p>
</blockquote>
<h2 id="ç©ºé—´å†—ä½™-å¸§å†…é¢„æµ‹">ç©ºé—´å†—ä½™ï¼ˆå¸§å†…é¢„æµ‹ï¼‰</h2>
<p>å¦‚æœæˆ‘ä»¬åˆ†æä¸€ä¸ªè§†é¢‘é‡Œçš„<strong>æ¯ä¸€å¸§</strong>ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æœ‰<strong>è®¸å¤šåŒºåŸŸæ˜¯ç›¸äº’å…³è”çš„</strong>ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/repetitions_in_space.png" alt="ç©ºé—´å†…é‡å¤" title="ç©ºé—´å†…é‡å¤"></p>
<p>è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ã€‚è¿™ä¸ªåœºæ™¯å¤§éƒ¨åˆ†ç”±è“è‰²å’Œç™½è‰²ç»„æˆã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/smw_bg.png" alt="smw èƒŒæ™¯" title="smw èƒŒæ™¯"></p>
<p>è¿™æ˜¯ä¸€ä¸ª <code>I å¸§</code>ï¼Œæˆ‘ä»¬<strong>ä¸èƒ½ä½¿ç”¨å‰é¢çš„å¸§æ¥é¢„æµ‹</strong>ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¯ä»¥å‹ç¼©å®ƒã€‚æˆ‘ä»¬å°†ç¼–ç æˆ‘ä»¬é€‰æ‹©çš„é‚£å—çº¢è‰²åŒºåŸŸã€‚å¦‚æœæˆ‘ä»¬<strong>çœ‹çœ‹å®ƒçš„å‘¨å›´</strong>ï¼Œæˆ‘ä»¬å¯ä»¥<strong>ä¼°è®¡å®ƒå‘¨å›´é¢œè‰²çš„å˜åŒ–</strong>ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/smw_bg_block.png" alt="smw èƒŒæ™¯å—" title="smw èƒŒæ™¯å—"></p>
<p>æˆ‘ä»¬é¢„æµ‹:å¸§ä¸­çš„é¢œè‰²åœ¨å‚ç›´æ–¹å‘ä¸Šä¿æŒä¸€è‡´ï¼Œè¿™æ„å‘³ç€<strong>æœªçŸ¥åƒç´ çš„é¢œè‰²ä¸ä¸´è¿‘çš„åƒç´ ç›¸åŒ</strong>ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/smw_bg_prediction.png" alt="smw èƒŒæ™¯é¢„æµ‹" title="smw èƒŒæ™¯é¢„æµ‹"></p>
<p>æˆ‘ä»¬çš„<strong>é¢„æµ‹ä¼šå‡ºé”™</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆåˆ©ç”¨è¿™é¡¹æŠ€æœ¯ï¼ˆ<strong>å¸§å†…é¢„æµ‹</strong>ï¼‰ï¼Œç„¶å<strong>å‡å»å®é™…å€¼</strong>ï¼Œç®—å‡ºæ®‹å·®ï¼Œå¾—å‡ºçš„çŸ©é˜µæ¯”åŸå§‹æ•°æ®æ›´å®¹æ˜“å‹ç¼©ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/smw_residual.png" alt="smw æ®‹å·®" title="smw æ®‹å·®"></p>
<blockquote>
<h3 id="è‡ªå·±åŠ¨æ‰‹ï¼šæŸ¥çœ‹å¸§å†…é¢„æµ‹">è‡ªå·±åŠ¨æ‰‹ï¼šæŸ¥çœ‹å¸§å†…é¢„æµ‹</h3>
<p>ä½ å¯ä»¥<a href="https://github.com/leandromoreira/digital_video_introduction/blob/master/encoding_pratical_examples.md#generate-debug-video">ä½¿ç”¨ ffmpeg ç”ŸæˆåŒ…å«å®å—åŠé¢„æµ‹çš„è§†é¢‘</a>ã€‚è¯·æŸ¥çœ‹ ffmpeg æ–‡æ¡£ä»¥äº†è§£<a href="https://trac.ffmpeg.org/wiki/Debug/MacroblocksAndMotionVectors">æ¯ä¸ªå—é¢œè‰²çš„å«ä¹‰</a>ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/macro_blocks_ffmpeg.png" alt="ffmpeg å¸§å†…é¢„æµ‹ï¼ˆå®å—ï¼‰" title="ffmpeg å¸§å†…é¢„æµ‹ï¼ˆå®å—ï¼‰"></p>
<p>æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä½¿ç”¨ <a href="https://software.intel.com/en-us/intel-video-pro-analyzer">IntelÂ® Video Pro Analyzer</a>ï¼ˆéœ€è¦ä»˜è´¹ï¼Œä½†ä¹Ÿæœ‰åªèƒ½æŸ¥çœ‹å‰ 10 å¸§çš„å…è´¹è¯•ç”¨ç‰ˆï¼‰ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/intra_prediction_intel_video_pro_analyzer.png" alt="IntelÂ® Video Pro Analyzer å¸§å†…é¢„æµ‹" title="IntelÂ® Video Pro Analyzer å¸§å†…é¢„æµ‹"></p>
</blockquote>
<h1>è§†é¢‘ç¼–è§£ç å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h1>
<h2 id="æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿæ€ä¹ˆåšï¼Ÿ">æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿæ€ä¹ˆåšï¼Ÿ</h2>
<p><strong>æ˜¯ä»€ä¹ˆï¼Ÿ</strong> å°±æ˜¯ç”¨äºå‹ç¼©æˆ–è§£å‹æ•°å­—è§†é¢‘çš„è½¯ä»¶æˆ–ç¡¬ä»¶ã€‚<strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> äººä»¬éœ€è¦åœ¨æœ‰é™å¸¦å®½æˆ–å­˜å‚¨ç©ºé—´ä¸‹æé«˜è§†é¢‘çš„è´¨é‡ã€‚è¿˜è®°å¾—å½“æˆ‘ä»¬è®¡ç®—æ¯ç§’ 30 å¸§ï¼Œæ¯åƒç´  24 bitï¼Œåˆ†è¾¨ç‡æ˜¯ 480x240 çš„è§†é¢‘<a href="#%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD">éœ€è¦å¤šå°‘å¸¦å®½</a>å—ï¼Ÿæ²¡æœ‰å‹ç¼©æ—¶æ˜¯ <strong>82.944 Mbps</strong>ã€‚ç”µè§†æˆ–äº’è”ç½‘æä¾› HD/FullHD/4K åªèƒ½é è§†é¢‘ç¼–è§£ç å™¨ã€‚<strong>æ€ä¹ˆåšï¼Ÿ</strong> æˆ‘ä»¬å°†ç®€å•ä»‹ç»ä¸€ä¸‹ä¸»è¦çš„æŠ€æœ¯ã€‚</p>
<blockquote>
<p>è§†é¢‘ç¼–è§£ç  vs å®¹å™¨</p>
<p>åˆå­¦è€…ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯æ··æ·†æ•°å­—è§†é¢‘ç¼–è§£ç å™¨å’Œ<a href="https://en.wikipedia.org/wiki/Digital_container_format">æ•°å­—è§†é¢‘å®¹å™¨</a>ã€‚æˆ‘ä»¬å¯ä»¥å°†<strong>å®¹å™¨</strong>è§†ä¸ºåŒ…å«è§†é¢‘ï¼ˆä¹Ÿå¾ˆå¯èƒ½åŒ…å«éŸ³é¢‘ï¼‰å…ƒæ•°æ®çš„åŒ…è£…æ ¼å¼ï¼Œ<strong>å‹ç¼©è¿‡çš„è§†é¢‘</strong>å¯ä»¥çœ‹æˆæ˜¯å®ƒæ‰¿è½½çš„å†…å®¹ã€‚</p>
<p>é€šå¸¸ï¼Œè§†é¢‘æ–‡ä»¶çš„æ ¼å¼å®šä¹‰å…¶è§†é¢‘å®¹å™¨ã€‚ä¾‹å¦‚ï¼Œæ–‡ä»¶ <code>video.mp4</code> å¯èƒ½æ˜¯ <a href="https://en.wikipedia.org/wiki/MPEG-4_Part_14">MPEG-4 Part 14</a> å®¹å™¨ï¼Œä¸€ä¸ªå« <code>video.mkv</code> çš„æ–‡ä»¶å¯èƒ½æ˜¯ <a href="https://en.wikipedia.org/wiki/Matroska">matroska</a>ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="https://github.com/leandromoreira/digital_video_introduction/blob/master/encoding_pratical_examples.md#inspect-stream">ffmpeg æˆ– mediainfo</a> æ¥å®Œå…¨ç¡®å®šç¼–è§£ç å™¨å’Œå®¹å™¨æ ¼å¼ã€‚</p>
</blockquote>
<h2 id="å†å²">å†å²</h2>
<p>åœ¨æˆ‘ä»¬è·³è¿›é€šç”¨ç¼–è§£ç å™¨å†…éƒ¨å·¥ä½œä¹‹å‰ï¼Œè®©æˆ‘ä»¬å›å¤´äº†è§£ä¸€äº›æ—§çš„è§†é¢‘ç¼–è§£ç å™¨ã€‚</p>
<p>è§†é¢‘ç¼–è§£ç å™¨ <a href="https://en.wikipedia.org/wiki/H.261">H.261</a> è¯ç”Ÿåœ¨ 1990ï¼ˆæŠ€æœ¯ä¸Šæ˜¯ 1988ï¼‰ï¼Œè¢«è®¾è®¡ä¸ºä»¥ <strong>64 kbit/s çš„æ•°æ®é€Ÿç‡</strong>å·¥ä½œã€‚å®ƒå·²ç»ä½¿ç”¨å¦‚è‰²åº¦å­é‡‡æ ·ã€å®å—ï¼Œç­‰ç­‰ç†å¿µã€‚åœ¨ 1995 å¹´ï¼Œ<strong>H.263</strong> è§†é¢‘ç¼–è§£ç å™¨æ ‡å‡†è¢«å‘å¸ƒï¼Œå¹¶ç»§ç»­å»¶ç»­åˆ° 2001 å¹´ã€‚</p>
<p>åœ¨ 2003 å¹´ <strong>H.264/AVC</strong> çš„ç¬¬ä¸€ç‰ˆè¢«å®Œæˆã€‚åœ¨åŒä¸€å¹´ï¼Œä¸€å®¶å«åš <strong>TrueMotion</strong> çš„å…¬å¸å‘å¸ƒäº†ä»–ä»¬çš„<strong>å…ç‰ˆç¨</strong>æœ‰æŸè§†é¢‘å‹ç¼©çš„è§†é¢‘ç¼–è§£ç å™¨ï¼Œç§°ä¸º <strong>VP3</strong>ã€‚åœ¨ 2008 å¹´ï¼Œ<strong>Google æ”¶è´­äº†</strong>è¿™å®¶å…¬å¸ï¼Œåœ¨åŒä¸€å¹´å‘å¸ƒ <strong>VP8</strong>ã€‚åœ¨ 2012 å¹´ 12 æœˆï¼ŒGoogle å‘å¸ƒäº† <strong>VP9</strong>ï¼Œ<strong>å¸‚é¢ä¸Šå¤§çº¦æœ‰ 3/4 çš„æµè§ˆå™¨</strong>ï¼ˆåŒ…æ‹¬æ‰‹æœºï¼‰æ”¯æŒã€‚</p>
<p><a href="https://en.wikipedia.org/wiki/AOMedia_Video_1">AV1</a> æ˜¯ç”± <strong>Google, Mozilla, Microsoft, Amazon, Netflix, AMD, ARM, NVidia, Intel, Cisco</strong> ç­‰å…¬å¸ç»„æˆçš„<a href="http://aomedia.org/">å¼€æ”¾åª’ä½“è”ç›Ÿï¼ˆAOMediaï¼‰</a>è®¾è®¡çš„ä¸€ç§æ–°çš„è§†é¢‘ç¼–è§£ç å™¨ï¼Œå…ç‰ˆç¨ï¼Œå¼€æºã€‚<strong>ç¬¬ä¸€ç‰ˆ</strong> 0.1.0 å‚è€ƒç¼–è§£ç å™¨<strong>å‘å¸ƒäº 2016 å¹´ 4 æœˆ 7 å·</strong>ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/codec_history_timeline.png" alt="ç¼–è§£ç å™¨å†å²çº¿è·¯å›¾" title="ç¼–è§£ç å™¨å†å²çº¿è·¯å›¾"></p>
<blockquote>
<h3 id="av1-çš„è¯ç”Ÿ">AV1 çš„è¯ç”Ÿ</h3>
<p>2015 å¹´æ—©æœŸï¼ŒGoogle æ­£åœ¨ VP10 ä¸Šå·¥ä½œï¼ŒXiph (Mozilla) æ­£åœ¨ Daala ä¸Šå·¥ä½œï¼ŒCisco å¼€æºäº†å®ƒçš„ç§°ä¸º Thor çš„å…ç‰ˆç¨è§†é¢‘ç¼–è§£ç å™¨ã€‚</p>
<p>æ¥ç€ MPEG LA å®£å¸ƒäº† HEVC (H.265) æ¯å¹´ç‰ˆç¨çš„çš„ä¸Šé™ï¼Œæ¯” H.264 é«˜ 8 å€ï¼Œä½†å¾ˆå¿«ä»–ä»¬åˆå†æ¬¡æ”¹å˜äº†æ¡æ¬¾ï¼š</p>
<ul>
<li><strong>ä¸è®¾å¹´åº¦æ”¶è´¹ä¸Šé™</strong></li>
<li><strong>æ”¶å–å†…å®¹è´¹</strong>ï¼ˆæ”¶å…¥çš„ 0.5%ï¼‰</li>
<li><strong>æ¯å•ä½è´¹ç”¨é«˜äº h264 çš„ 10 å€</strong></li>
</ul>
<p><a href="http://aomedia.org/about-us/">å¼€æ”¾åª’ä½“è”ç›Ÿ</a>ç”±ç¡¬ä»¶å‚å•†ï¼ˆIntel, AMD, ARM , Nvidia, Ciscoï¼‰ï¼Œå†…å®¹åˆ†å‘å•†ï¼ˆGoogle, Netflix, Amazonï¼‰ï¼Œæµè§ˆå™¨ç»´æŠ¤è€…ï¼ˆGoogle, Mozillaï¼‰ï¼Œç­‰å…¬å¸åˆ›å»ºã€‚</p>
<p>è¿™äº›å…¬å¸æœ‰ä¸€ä¸ªå…±åŒç›®æ ‡ï¼Œä¸€ä¸ªå…ç‰ˆç¨çš„è§†é¢‘ç¼–è§£ç å™¨ï¼Œæ‰€ä»¥ AV1 è¯ç”Ÿæ—¶ä½¿ç”¨äº†ä¸€ä¸ªæ›´<a href="http://aomedia.org/license/patent/">ç®€å•çš„ä¸“åˆ©è®¸å¯è¯</a>ã€‚<strong>Timothy B. Terriberry</strong> åšäº†ä¸€ä¸ªç²¾å½©çš„ä»‹ç»ï¼Œ<a href="https://www.youtube.com/watch?v=lzPaldsmJbk">å…³äº AV1 çš„æ¦‚å¿µï¼Œè®¸å¯è¯æ¨¡å¼å’Œå®ƒå½“å‰çš„çŠ¶æ€</a>ï¼Œå°±æ˜¯æœ¬èŠ‚çš„æ¥æºã€‚</p>
<p>å‰å¾€ <a href="http://aomanalyzer.org/">http://aomanalyzer.org/</a>ï¼Œ ä½ ä¼šæƒŠè®¶äº<strong>ä½¿ç”¨ä½ çš„æµè§ˆå™¨å°±å¯ä»¥åˆ†æ AV1 ç¼–è§£ç å™¨</strong>ã€‚<br>
<img src="/2020/02/28/Introduction-to-digital-video-technology/av1_browser_analyzer.png" alt="av1 æµè§ˆå™¨åˆ†æå™¨" title="æµè§ˆå™¨åˆ†æå™¨"></p>
<p>é™„ï¼šå¦‚æœä½ æƒ³äº†è§£æ›´å¤šç¼–è§£ç å™¨çš„å†å²ï¼Œä½ éœ€è¦äº†è§£<a href="https://www.vcodex.com/video-compression-patents/">è§†é¢‘å‹ç¼©ä¸“åˆ©</a>èƒŒåçš„åŸºæœ¬çŸ¥è¯†ã€‚</p>
</blockquote>
<h2 id="é€šç”¨ç¼–è§£ç å™¨">é€šç”¨ç¼–è§£ç å™¨</h2>
<p>æˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»<strong>é€šç”¨è§†é¢‘ç¼–è§£ç å™¨èƒŒåçš„ä¸»è¦æœºåˆ¶</strong>ï¼Œå¤§å¤šæ•°æ¦‚å¿µéƒ½å¾ˆå®ç”¨ï¼Œå¹¶è¢«ç°ä»£ç¼–è§£ç å™¨å¦‚ VP9, AV1 å’Œ HEVC ä½¿ç”¨ã€‚éœ€è¦æ³¨æ„ï¼šæˆ‘ä»¬å°†ç®€åŒ–è®¸å¤šå†…å®¹ã€‚æœ‰æ—¶æˆ‘ä»¬ä¼šä½¿ç”¨çœŸå®çš„ä¾‹å­ï¼ˆä¸»è¦æ˜¯ H.264ï¼‰æ¥æ¼”ç¤ºæŠ€æœ¯ã€‚</p>
<h2 id="ç¬¬ä¸€æ­¥-å›¾ç‰‡åˆ†åŒº">ç¬¬ä¸€æ­¥ - å›¾ç‰‡åˆ†åŒº</h2>
<p>ç¬¬ä¸€æ­¥æ˜¯<strong>å°†å¸§</strong>åˆ†æˆå‡ ä¸ª<strong>åˆ†åŒº</strong>ï¼Œ<strong>å­åˆ†åŒº</strong>ç”šè‡³æ›´å¤šã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/picture_partitioning.png" alt="å›¾ç‰‡åˆ†åŒº" title="å›¾ç‰‡åˆ†åŒº"></p>
<p>**ä½†æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ**æœ‰è®¸å¤šåŸå› ï¼Œæ¯”å¦‚ï¼Œå½“æˆ‘ä»¬åˆ†å‰²å›¾ç‰‡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ›´ç²¾ç¡®çš„å¤„ç†é¢„æµ‹ï¼Œåœ¨å¾®å°ç§»åŠ¨çš„éƒ¨åˆ†ä½¿ç”¨è¾ƒå°çš„åˆ†åŒºï¼Œè€Œåœ¨é™æ€èƒŒæ™¯ä¸Šä½¿ç”¨è¾ƒå¤§çš„åˆ†åŒºã€‚</p>
<p>é€šå¸¸ï¼Œç¼–è§£ç å™¨<strong>å°†è¿™äº›åˆ†åŒºç»„ç»‡</strong>æˆåˆ‡ç‰‡ï¼ˆæˆ–ç“¦ç‰‡ï¼‰ï¼Œå®ï¼ˆæˆ–ç¼–ç æ ‘å•å…ƒï¼‰å’Œè®¸å¤šå­åˆ†åŒºã€‚è¿™äº›åˆ†åŒºçš„æœ€å¤§å¤§å°æœ‰æ‰€ä¸åŒï¼ŒHEVC è®¾ç½®æˆ 64x64ï¼Œè€Œ AVC ä½¿ç”¨ 16x16ï¼Œä½†å­åˆ†åŒºå¯ä»¥è¾¾åˆ° 4x4 çš„å¤§å°ã€‚</p>
<p>è¿˜è®°å¾—æˆ‘ä»¬å­¦è¿‡çš„<strong>å¸§çš„åˆ†ç±»</strong>å—ï¼Ÿä½ ä¹Ÿå¯ä»¥<strong>æŠŠè¿™äº›æ¦‚å¿µåº”ç”¨åˆ°å—</strong>ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æœ‰ I åˆ‡ç‰‡ï¼ŒB åˆ‡ç‰‡ï¼ŒI å®å—ç­‰ç­‰ã€‚</p>
<blockquote>
<h3 id="è‡ªå·±åŠ¨æ‰‹ï¼šæŸ¥çœ‹åˆ†åŒº">è‡ªå·±åŠ¨æ‰‹ï¼šæŸ¥çœ‹åˆ†åŒº</h3>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://software.intel.com/en-us/intel-video-pro-analyzer">IntelÂ® Video Pro Analyzer</a>ï¼ˆéœ€è¦ä»˜è´¹ï¼Œä½†ä¹Ÿæœ‰åªèƒ½æŸ¥çœ‹å‰ 10 å¸§çš„å…è´¹è¯•ç”¨ç‰ˆï¼‰ã€‚è¿™æ˜¯ <a href="https://github.com/leandromoreira/digital_video_introduction/blob/master/encoding_pratical_examples.md#transcoding">VP9 åˆ†åŒº</a>çš„åˆ†æã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/paritions_view_intel_video_pro_analyzer.png" alt="IntelÂ® Video Pro Analyzer VP9 åˆ†åŒºè§†å›¾ " title="IntelÂ® Video Pro Analyzer VP9 åˆ†åŒºè§†å›¾"></p>
</blockquote>
<h2 id="ç¬¬äºŒæ­¥-é¢„æµ‹">ç¬¬äºŒæ­¥ - é¢„æµ‹</h2>
<p>ä¸€æ—¦æˆ‘ä»¬æœ‰äº†åˆ†åŒºï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å®ƒä»¬ä¹‹ä¸Šåšå‡ºé¢„æµ‹ã€‚å¯¹äº<a href="#%E6%97%B6%E9%97%B4%E5%86%97%E4%BD%99%EF%BC%88%E5%B8%A7%E9%97%B4%E9%A2%84%E6%B5%8B%EF%BC%89">å¸§é—´é¢„æµ‹</a>ï¼Œæˆ‘ä»¬éœ€è¦<strong>å‘é€è¿åŠ¨å‘é‡å’Œæ®‹å·®</strong>ï¼›è‡³äº<a href="#%E7%A9%BA%E9%97%B4%E5%86%97%E4%BD%99%EF%BC%88%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B%EF%BC%89">å¸§å†…é¢„æµ‹</a>ï¼Œæˆ‘ä»¬éœ€è¦<strong>å‘é€é¢„æµ‹æ–¹å‘å’Œæ®‹å·®</strong>ã€‚</p>
<h2 id="ç¬¬ä¸‰æ­¥-è½¬æ¢">ç¬¬ä¸‰æ­¥ - è½¬æ¢</h2>
<p>åœ¨æˆ‘ä»¬å¾—åˆ°æ®‹å·®å—ï¼ˆ<code>é¢„æµ‹åˆ†åŒº-çœŸå®åˆ†åŒº</code>ï¼‰ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ç§æ–¹å¼<strong>å˜æ¢</strong>å®ƒï¼Œè¿™æ ·æˆ‘ä»¬å°±çŸ¥é“<strong>å“ªäº›åƒç´ æˆ‘ä»¬åº”è¯¥ä¸¢å¼ƒ</strong>ï¼Œè¿˜ä¾ç„¶èƒ½ä¿æŒ<strong>æ•´ä½“è´¨é‡</strong>ã€‚è¿™ä¸ªç¡®åˆ‡çš„è¡Œä¸ºæœ‰å‡ ç§å˜æ¢æ–¹å¼ã€‚</p>
<p>å°½ç®¡æœ‰<a href="https://en.wikipedia.org/wiki/List_of_Fourier-related_transforms#Discrete_transforms">å…¶å®ƒçš„å˜æ¢æ–¹å¼</a>ï¼Œä½†æˆ‘ä»¬é‡ç‚¹å…³æ³¨ç¦»æ•£ä½™å¼¦å˜æ¢ï¼ˆDCTï¼‰ã€‚<a href="https://en.wikipedia.org/wiki/Discrete_cosine_transform">DCT</a> çš„ä¸»è¦åŠŸèƒ½æœ‰ï¼š</p>
<ul>
<li>å°†<strong>åƒç´ </strong>å—<strong>è½¬æ¢</strong>ä¸ºç›¸åŒå¤§å°çš„<strong>é¢‘ç‡ç³»æ•°å—</strong>ã€‚</li>
<li><strong>å‹ç¼©</strong>èƒ½é‡ï¼Œæ›´å®¹æ˜“æ¶ˆé™¤ç©ºé—´å†—ä½™ã€‚</li>
<li><strong>å¯é€†çš„</strong>ï¼Œä¹Ÿæ„å‘³ç€ä½ å¯ä»¥è¿˜åŸå›åƒç´ ã€‚</li>
</ul>
<blockquote>
<p>2017 å¹´ 2 æœˆ 2 å·ï¼ŒF. M. Bayer å’Œ R. J. Cintra å‘è¡¨äº†ä»–ä»¬çš„è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/1702.00817">å›¾åƒå‹ç¼©çš„ DCT ç±»å˜æ¢åªéœ€è¦ 14 ä¸ªåŠ æ³•</a>ã€‚</p>
</blockquote>
<p>å¦‚æœä½ ä¸ç†è§£æ¯ä¸ªè¦ç‚¹çš„å¥½å¤„ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä»¬ä¼šå°è¯•è¿›è¡Œä¸€äº›å®éªŒï¼Œä»¥ä¾¿ä»ä¸­çœ‹åˆ°çœŸæ­£çš„ä»·å€¼ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„<strong>åƒç´ å—</strong>ï¼ˆ8x8ï¼‰ï¼š</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/pixel_matrice.png" alt="åƒç´ å€¼çŸ©å½¢" title="åƒç´ å€¼çŸ©å½¢"></p>
<p>ä¸‹é¢æ˜¯å…¶æ¸²æŸ“çš„å—å›¾åƒï¼ˆ8x8ï¼‰ï¼š</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/gray_image.png" alt="åƒç´ å€¼çŸ©å½¢" title="åƒç´ å€¼çŸ©å½¢"></p>
<p>å½“æˆ‘ä»¬å¯¹è¿™ä¸ªåƒç´ å—<strong>åº”ç”¨ DCT</strong> æ—¶ï¼Œ å¾—åˆ°å¦‚ä¸‹<strong>ç³»æ•°å—</strong>ï¼ˆ8x8ï¼‰ï¼š</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/dct_coefficient_values.png" alt="ç³»æ•°å€¼ values" title="ç³»æ•°å€¼"></p>
<p>æ¥ç€å¦‚æœæˆ‘ä»¬æ¸²æŸ“è¿™ä¸ªç³»æ•°å—ï¼Œå°±ä¼šå¾—åˆ°è¿™å¼ å›¾ç‰‡ï¼š</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/dct_coefficient_image.png" alt="dct ç³»æ•°å›¾ç‰‡" title="dct ç³»æ•°å›¾ç‰‡"></p>
<p>å¦‚ä½ æ‰€è§å®ƒçœ‹èµ·æ¥å®Œå…¨ä¸åƒåŸå›¾åƒï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ³¨æ„åˆ°<strong>ç¬¬ä¸€ä¸ªç³»æ•°</strong>ä¸å…¶å®ƒç³»æ•°éå¸¸ä¸åŒã€‚ç¬¬ä¸€ä¸ªç³»æ•°è¢«ç§°ä¸ºç›´æµåˆ†é‡ï¼Œä»£è¡¨äº†è¾“å…¥æ•°ç»„ä¸­çš„<strong>æ‰€æœ‰æ ·æœ¬</strong>ï¼Œæœ‰ç‚¹<strong>ç±»ä¼¼äºå¹³å‡å€¼</strong>ã€‚</p>
<p>è¿™ä¸ªç³»æ•°å—æœ‰ä¸€ä¸ªæœ‰è¶£çš„å±æ€§ï¼šé«˜é¢‘éƒ¨åˆ†å’Œä½é¢‘éƒ¨åˆ†æ˜¯åˆ†ç¦»çš„ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/dctfrequ.jpg" alt="dct é¢‘ç‡ç³»æ•°å±æ€§" title="dct é¢‘ç‡ç³»æ•°å±æ€§"></p>
<p>åœ¨ä¸€å¼ å›¾åƒä¸­ï¼Œ<strong>å¤§å¤šæ•°èƒ½é‡</strong>ä¼šé›†ä¸­åœ¨<a href="https://www.iem.thm.de/telekom-labor/zinke/mk/mpeg2beg/whatisit.htm">ä½é¢‘éƒ¨åˆ†</a>ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å°†å›¾åƒè½¬æ¢æˆé¢‘ç‡ç³»æ•°ï¼Œå¹¶<strong>ä¸¢æ‰é«˜é¢‘ç³»æ•°</strong>ï¼Œæˆ‘ä»¬å°±èƒ½<strong>å‡å°‘æè¿°å›¾åƒæ‰€éœ€çš„æ•°æ®é‡</strong>ï¼Œè€Œä¸ä¼šç‰ºç‰²å¤ªå¤šçš„å›¾åƒè´¨é‡ã€‚</p>
<blockquote>
<p>é¢‘ç‡æ˜¯æŒ‡ä¿¡å·å˜åŒ–çš„é€Ÿåº¦ã€‚</p>
</blockquote>
<p>è®©æˆ‘ä»¬é€šè¿‡å®éªŒå­¦ä¹ è¿™ç‚¹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ DCT æŠŠåŸå§‹å›¾åƒè½¬æ¢ä¸ºé¢‘ç‡ï¼ˆç³»æ•°å—ï¼‰ï¼Œç„¶åä¸¢æ‰æœ€ä¸é‡è¦çš„ç³»æ•°ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†å®ƒè½¬æ¢ä¸ºå…¶<strong>é¢‘åŸŸ</strong>ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/dct_coefficient_values.png" alt="ç³»æ•°å€¼" title="ç³»æ•°å€¼"></p>
<p>ç„¶åæˆ‘ä»¬ä¸¢å¼ƒéƒ¨åˆ†ï¼ˆ67%ï¼‰ç³»æ•°ï¼Œä¸»è¦æ˜¯å®ƒçš„å³ä¸‹è§’éƒ¨åˆ†ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/dct_coefficient_zeroed.png" alt="ç³»æ•°æ¸…é›¶" title="ç³»æ•°æ¸…é›¶"></p>
<p>ç„¶åæˆ‘ä»¬ä»ä¸¢å¼ƒçš„ç³»æ•°å—é‡æ„å›¾åƒï¼ˆè®°ä½ï¼Œè¿™éœ€è¦å¯é€†ï¼‰ï¼Œå¹¶ä¸åŸå§‹å›¾åƒç›¸æ¯”è¾ƒã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/original_vs_quantized.png" alt="åŸå§‹ vs é‡åŒ–" title="åŸå§‹ vs é‡åŒ–"></p>
<p>å¦‚æˆ‘ä»¬æ‰€è§å®ƒé…·ä¼¼åŸå§‹å›¾åƒï¼Œä½†å®ƒå¼•å…¥äº†è®¸å¤šä¸åŸæ¥çš„ä¸åŒï¼Œæˆ‘ä»¬<strong>ä¸¢å¼ƒäº†67.1875%</strong>ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¾—åˆ°è‡³å°‘ç±»ä¼¼äºåŸæ¥çš„ä¸œè¥¿ã€‚æˆ‘ä»¬å¯ä»¥æ›´åŠ æ™ºèƒ½çš„ä¸¢å¼ƒç³»æ•°å»å¾—åˆ°æ›´å¥½çš„å›¾åƒè´¨é‡ï¼Œä½†è¿™æ˜¯ä¸‹ä¸€ä¸ªä¸»é¢˜ã€‚</p>
<blockquote>
<h3 id="ä½¿ç”¨å…¨éƒ¨åƒç´ å½¢æˆæ¯ä¸ªç³»æ•°">ä½¿ç”¨å…¨éƒ¨åƒç´ å½¢æˆæ¯ä¸ªç³»æ•°</h3>
<p>é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œæ¯ä¸ªç³»æ•°å¹¶ä¸ç›´æ¥æ˜ å°„åˆ°å•ä¸ªåƒç´ ï¼Œä½†å®ƒæ˜¯æ‰€æœ‰åƒç´ çš„åŠ æƒå’Œã€‚è¿™ä¸ªç¥å¥‡çš„å›¾å½¢å±•ç¤ºäº†å¦‚ä½•è®¡ç®—å‡ºç¬¬ä¸€å’Œç¬¬äºŒä¸ªç³»æ•°ï¼Œä½¿ç”¨æ¯ä¸ªå”¯ä¸€çš„ç´¢å¼•åšæƒé‡ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/applicat.jpg" alt="dct è®¡ç®—" title="dct è®¡ç®—"></p>
<p>æ¥æºï¼š<a href="https://web.archive.org/web/20150129171151/https://www.iem.thm.de/telekom-labor/zinke/mk/mpeg2beg/whatisit.htm">https://web.archive.org/web/20150129171151/https://www.iem.thm.de/telekom-labor/zinke/mk/mpeg2beg/whatisit.htm</a></p>
<p>ä½ ä¹Ÿå¯ä»¥å°è¯•<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/02/28/Introduction-to-digital-video-technology/py/dct_better_explained.ipynb">é€šè¿‡æŸ¥çœ‹åœ¨ DCT åŸºç¡€ä¸Šå½¢æˆçš„ç®€å•å›¾ç‰‡æ¥å¯è§†åŒ– DCT</a>ã€‚ä¾‹å¦‚ï¼Œè¿™æ˜¯ä½¿ç”¨æ¯ä¸ªç³»æ•°æƒé‡<a href="https://en.wikipedia.org/wiki/Discrete_cosine_transform#Example_of_IDCT">å½¢æˆçš„å­—ç¬¦ A</a>ã€‚</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Idct-animation.gif" alt></p>
</blockquote>
<br>
<blockquote>
<h3 id="è‡ªå·±åŠ¨æ‰‹ï¼šä¸¢å¼ƒä¸åŒçš„ç³»æ•°">è‡ªå·±åŠ¨æ‰‹ï¼šä¸¢å¼ƒä¸åŒçš„ç³»æ•°</h3>
<p>ä½ å¯ä»¥ç©è½¬ <a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/02/28/Introduction-to-digital-video-technology/py/uniform_quantization_experience.ipynb">DCT å˜æ¢</a></p>
</blockquote>
<h2 id="ç¬¬å››æ­¥-é‡åŒ–">ç¬¬å››æ­¥ - é‡åŒ–</h2>
<p>å½“æˆ‘ä»¬ä¸¢å¼ƒä¸€äº›ç³»æ•°æ—¶ï¼Œåœ¨æœ€åä¸€æ­¥ï¼ˆå˜æ¢ï¼‰ï¼Œæˆ‘ä»¬åšäº†ä¸€äº›å½¢å¼çš„é‡åŒ–ã€‚è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬é€‰æ‹©æ€§åœ°å‰”é™¤ä¿¡æ¯ï¼ˆ<strong>æœ‰æŸéƒ¨åˆ†</strong>ï¼‰æˆ–è€…ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å°†<strong>é‡åŒ–ç³»æ•°ä»¥å®ç°å‹ç¼©</strong>ã€‚</p>
<p>æˆ‘ä»¬å¦‚ä½•é‡åŒ–ä¸€ä¸ªç³»æ•°å—ï¼Ÿä¸€ä¸ªç®€å•çš„æ–¹æ³•æ˜¯å‡åŒ€é‡åŒ–ï¼Œæˆ‘ä»¬å–ä¸€ä¸ªå—å¹¶<strong>å°†å…¶é™¤ä»¥å•ä¸ªçš„å€¼</strong>ï¼ˆ10ï¼‰ï¼Œå¹¶èˆå…¥å€¼ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/quantize.png" alt="é‡åŒ–" title="é‡åŒ–"></p>
<p>æˆ‘ä»¬å¦‚ä½•<strong>é€†è½¬</strong>ï¼ˆé‡æ–°é‡åŒ–ï¼‰è¿™ä¸ªç³»æ•°å—ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>ä¹˜ä»¥æˆ‘ä»¬å…ˆå‰é™¤ä»¥çš„ç›¸åŒçš„å€¼</strong>ï¼ˆ10ï¼‰æ¥åšåˆ°ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/re-quantize.png" alt="é€†è½¬é‡åŒ–" title="é€†è½¬é‡åŒ–"></p>
<p>è¿™<strong>ä¸æ˜¯æœ€å¥½çš„æ–¹æ³•</strong>ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è€ƒè™‘åˆ°æ¯ä¸ªç³»æ•°çš„é‡è¦æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª<strong>é‡åŒ–çŸ©é˜µ</strong>æ¥ä»£æ›¿å•ä¸ªå€¼ï¼Œè¿™ä¸ªçŸ©é˜µå¯ä»¥åˆ©ç”¨ DCT çš„å±æ€§ï¼Œå¤šé‡åŒ–å³ä¸‹éƒ¨ï¼Œè€Œå°‘ï¼ˆé‡åŒ–ï¼‰å·¦ä¸Šéƒ¨ï¼Œ<a href="https://www.hdm-stuttgart.de/~maucher/Python/MMCodecs/html/jpegUpToQuant.html">JPEG ä½¿ç”¨äº†ç±»ä¼¼çš„æ–¹æ³•</a>ï¼Œä½ å¯ä»¥é€šè¿‡<a href="https://github.com/google/guetzli/blob/master/guetzli/jpeg_data.h#L40">æŸ¥çœ‹æºç çœ‹çœ‹è¿™ä¸ªçŸ©é˜µ</a>ã€‚</p>
<blockquote>
<h3 id="è‡ªå·±åŠ¨æ‰‹ï¼šé‡åŒ–">è‡ªå·±åŠ¨æ‰‹ï¼šé‡åŒ–</h3>
<p>ä½ å¯ä»¥ç©è½¬<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/02/28/Introduction-to-digital-video-technology/py/dct_experiences.ipynb">é‡åŒ–</a></p>
</blockquote>
<h2 id="ç¬¬äº”æ­¥-ç†µç¼–ç ">ç¬¬äº”æ­¥ - ç†µç¼–ç </h2>
<p>åœ¨æˆ‘ä»¬é‡åŒ–æ•°æ®ï¼ˆå›¾åƒå—ï¼åˆ‡ç‰‡ï¼å¸§ï¼‰ä¹‹åï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ä»¥æ— æŸçš„æ–¹å¼æ¥å‹ç¼©å®ƒã€‚æœ‰è®¸å¤šæ–¹æ³•ï¼ˆç®—æ³•ï¼‰å¯ç”¨æ¥å‹ç¼©æ•°æ®ã€‚æˆ‘ä»¬å°†ç®€å•ä½“éªŒå…¶ä¸­å‡ ä¸ªï¼Œä½ å¯ä»¥é˜…è¯»è¿™æœ¬å¾ˆæ£’çš„ä¹¦å»æ·±å…¥ç†è§£ï¼š<a href="https://www.amazon.com/Understanding-Compression-Data-Modern-Developers/dp/1491961538/">Understanding Compression: Data Compression for Modern Developers</a>ã€‚</p>
<h3 id="vlc-ç¼–ç ï¼š">VLC ç¼–ç ï¼š</h3>
<p>è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç¬¦å·æµï¼š<strong>a</strong>, <strong>e</strong>, <strong>r</strong> å’Œ <strong>t</strong>ï¼Œå®ƒä»¬çš„æ¦‚ç‡ï¼ˆä»0åˆ°1ï¼‰ç”±ä¸‹è¡¨æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th></th>
<th>a</th>
<th>e</th>
<th>r</th>
<th>t</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¦‚ç‡</td>
<td>0.3</td>
<td>0.3</td>
<td>0.2</td>
<td>0.2</td>
</tr>
</tbody>
</table>
<p>æˆ‘ä»¬å¯ä»¥åˆ†é…ä¸åŒçš„äºŒè¿›åˆ¶ç ï¼Œï¼ˆæœ€å¥½æ˜¯ï¼‰å°çš„ç ç»™æœ€å¯èƒ½ï¼ˆå‡ºç°çš„å­—ç¬¦ï¼‰ï¼Œå¤§äº›çš„ç ç»™æœ€å°‘å¯èƒ½ï¼ˆå‡ºç°çš„å­—ç¬¦ï¼‰ã€‚</p>
<table>
<thead>
<tr>
<th></th>
<th>a</th>
<th>e</th>
<th>r</th>
<th>t</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¦‚ç‡</td>
<td>0.3</td>
<td>0.3</td>
<td>0.2</td>
<td>0.2</td>
</tr>
<tr>
<td>äºŒè¿›åˆ¶ç </td>
<td>0</td>
<td>10</td>
<td>110</td>
<td>1110</td>
</tr>
</tbody>
</table>
<p>è®©æˆ‘ä»¬å‹ç¼© <strong>eat</strong> æµï¼Œå‡è®¾æˆ‘ä»¬ä¸ºæ¯ä¸ªå­—ç¬¦èŠ±è´¹ 8 bitï¼Œåœ¨æ²¡æœ‰åšä»»ä½•å‹ç¼©æ—¶æˆ‘ä»¬å°†èŠ±è´¹ <strong>24 bit</strong>ã€‚ä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨å„è‡ªçš„ä»£ç æ¥æ›¿æ¢æ¯ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬å°±èƒ½èŠ‚çœç©ºé—´ã€‚</p>
<p>ç¬¬ä¸€æ­¥æ˜¯ç¼–ç å­—ç¬¦ <strong>e</strong> ä¸º <code>10</code>ï¼Œç¬¬äºŒä¸ªå­—ç¬¦æ˜¯ <strong>a</strong>ï¼Œè¿½åŠ ï¼ˆä¸æ˜¯æ•°å­¦åŠ æ³•ï¼‰åæ˜¯ <code>[10][0]</code>ï¼Œæœ€åæ˜¯ç¬¬ä¸‰ä¸ªå­—ç¬¦ <strong>t</strong>ï¼Œæœ€ç»ˆç»„æˆå·²å‹ç¼©çš„æ¯”ç‰¹æµ <code>[10][0][1110]</code> æˆ– <code>1001110</code>ï¼Œè¿™åªéœ€ <strong>7 bit</strong>ï¼ˆæ¯”åŸæ¥çš„ç©ºé—´å°‘ 3.4 å€ï¼‰ã€‚</p>
<p>è¯·æ³¨æ„æ¯ä¸ªä»£ç å¿…é¡»æ˜¯å”¯ä¸€çš„å‰ç¼€ç ï¼Œ<a href="https://en.wikipedia.org/wiki/Huffman_coding">Huffman èƒ½å¸®ä½ æ‰¾åˆ°è¿™äº›æ•°å­—</a>ã€‚è™½ç„¶å®ƒæœ‰ä¸€äº›é—®é¢˜ï¼Œä½†æ˜¯<a href="https://en.wikipedia.org/wiki/Context-adaptive_variable-length_coding">è§†é¢‘ç¼–è§£ç å™¨ä»ç„¶æä¾›è¯¥æ–¹æ³•</a>ï¼Œå®ƒä¹Ÿæ˜¯å¾ˆå¤šåº”ç”¨ç¨‹åºçš„å‹ç¼©ç®—æ³•ã€‚</p>
<p>ç¼–ç å™¨å’Œè§£ç å™¨éƒ½<strong>å¿…é¡»çŸ¥é“</strong>è¿™ä¸ªï¼ˆåŒ…å«ç¼–ç çš„ï¼‰å­—ç¬¦è¡¨ï¼Œå› æ­¤ï¼Œä½ ä¹Ÿéœ€è¦ä¼ é€è¿™ä¸ªè¡¨ã€‚</p>
<h3 id="ç®—æœ¯ç¼–ç ">ç®—æœ¯ç¼–ç </h3>
<p>è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç¬¦å·æµï¼š<strong>a</strong>, <strong>e</strong>, <strong>r</strong>, <strong>s</strong> å’Œ <strong>t</strong>ï¼Œå®ƒä»¬çš„æ¦‚ç‡ç”±ä¸‹è¡¨æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th></th>
<th>a</th>
<th>e</th>
<th>r</th>
<th>s</th>
<th>t</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¦‚ç‡</td>
<td>0.3</td>
<td>0.3</td>
<td>0.15</td>
<td>0.05</td>
<td>0.2</td>
</tr>
</tbody>
</table>
<p>è€ƒè™‘åˆ°è¿™ä¸ªè¡¨ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªåŒºé—´ï¼ŒåŒºé—´åŒ…å«äº†æ‰€æœ‰å¯èƒ½çš„å­—ç¬¦ï¼Œå­—ç¬¦æŒ‰å‡ºç°æ¦‚ç‡æ’åºã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/range.png" alt="åˆå§‹ç®—æ³•åŒºé—´" title="åˆå§‹ç®—æ³•åŒºé—´"></p>
<p>è®©æˆ‘ä»¬ç¼–ç  <strong>eat</strong> æµï¼Œæˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ä¸ªå­—ç¬¦ <strong>e</strong> ä½äº <strong>0.3 åˆ° 0.6</strong> ï¼ˆä½†ä¸åŒ…æ‹¬ 0.6ï¼‰çš„å­åŒºé—´ï¼Œæˆ‘ä»¬é€‰æ‹©è¿™ä¸ªå­åŒºé—´ï¼ŒæŒ‰ç…§ä¹‹å‰åŒç­‰çš„æ¯”ä¾‹å†æ¬¡åˆ†å‰²ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/second_subrange.png" alt="ç¬¬äºŒä¸ªå­åŒºé—´" title="ç¬¬äºŒä¸ªå­åŒºé—´"></p>
<p>è®©æˆ‘ä»¬ç»§ç»­ç¼–ç æˆ‘ä»¬çš„æµ <strong>eat</strong>ï¼Œç°åœ¨ä½¿ç¬¬äºŒä¸ª <strong>a</strong> å­—ç¬¦ä½äº <strong>0.3 åˆ° 0.39</strong> çš„åŒºé—´é‡Œï¼Œæ¥ç€å†æ¬¡ç”¨åŒæ ·çš„æ–¹æ³•ç¼–ç æœ€åçš„å­—ç¬¦ <strong>t</strong>ï¼Œå¾—åˆ°æœ€åçš„å­åŒºé—´ <strong>0.354 åˆ° 0.372</strong>ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/arithimetic_range.png" alt="æœ€ç»ˆç®—æ³•åŒºé—´" title="æœ€ç»ˆç®—æ³•åŒºé—´"></p>
<p>æˆ‘ä»¬åªéœ€ä»æœ€åçš„å­åŒºé—´ 0.354 åˆ° 0.372 é‡Œé€‰æ‹©ä¸€ä¸ªæ•°ï¼Œè®©æˆ‘ä»¬é€‰æ‹© 0.36ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€‰æ‹©è¿™ä¸ªå­åŒºé—´é‡Œçš„ä»»ä½•æ•°ã€‚ä»…é è¿™ä¸ªæ•°ï¼Œæˆ‘ä»¬å°†å¯ä»¥æ¢å¤åŸå§‹æµ <strong>eat</strong>ã€‚å°±åƒæˆ‘ä»¬åœ¨åŒºé—´çš„åŒºé—´é‡Œç”»äº†ä¸€æ ¹çº¿æ¥ç¼–ç æˆ‘ä»¬çš„æµã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/range_show.png" alt="æœ€ç»ˆåŒºé—´æ¨ªæ–­é¢" title="æœ€ç»ˆåŒºé—´æ¨ªæ–­é¢"></p>
<p><strong>åå‘è¿‡ç¨‹</strong>ï¼ˆåˆåè§£ç ï¼‰ä¸€æ ·ç®€å•ï¼Œç”¨æ•°å­— <strong>0.36</strong> å’Œæˆ‘ä»¬åŸå§‹åŒºé—´ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œä¸è¿‡ç°åœ¨æ˜¯ä½¿ç”¨è¿™ä¸ªæ•°å­—æ¥è¿˜åŸè¢«ç¼–ç çš„æµã€‚</p>
<p>åœ¨ç¬¬ä¸€ä¸ªåŒºé—´ï¼Œæˆ‘ä»¬å‘ç°æ•°å­—è½å…¥äº†ä¸€ä¸ªå­åŒºé—´ï¼Œå› æ­¤ï¼Œè¿™ä¸ªå­åŒºé—´æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œç°åœ¨æˆ‘ä»¬å†æ¬¡åˆ‡åˆ†è¿™ä¸ªå­åŒºé—´ï¼Œåƒä¹‹å‰ä¸€æ ·åšåŒæ ·çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬ä¼šæ³¨æ„åˆ° <strong>0.36</strong> è½å…¥äº† <strong>a</strong> çš„åŒºé—´ï¼Œç„¶åæˆ‘ä»¬é‡å¤è¿™ä¸€è¿‡ç¨‹ç›´åˆ°å¾—åˆ°æœ€åä¸€ä¸ªå­—ç¬¦ <strong>t</strong>ï¼ˆå½¢æˆæˆ‘ä»¬åŸå§‹ç¼–ç è¿‡çš„æµ eatï¼‰ã€‚</p>
<p>ç¼–ç å™¨å’Œè§£ç å™¨éƒ½<strong>å¿…é¡»çŸ¥é“</strong>å­—ç¬¦æ¦‚ç‡è¡¨ï¼Œå› æ­¤ï¼Œä½ ä¹Ÿéœ€è¦ä¼ é€è¿™ä¸ªè¡¨ã€‚</p>
<p>éå¸¸å·§å¦™ï¼Œä¸æ˜¯å—ï¼Ÿäººä»¬èƒ½æƒ³å‡ºè¿™æ ·çš„è§£å†³æ–¹æ¡ˆå®åœ¨æ˜¯å¤ªèªæ˜äº†ï¼Œä¸€äº›<a href="https://en.wikipedia.org/wiki/Context-adaptive_binary_arithmetic_coding">è§†é¢‘ç¼–è§£ç å™¨ä½¿ç”¨</a>è¿™é¡¹æŠ€æœ¯ï¼ˆæˆ–è‡³å°‘æä¾›è¿™ä¸€é€‰æ‹©ï¼‰ã€‚</p>
<p>å…³äºæ— æŸå‹ç¼©é‡åŒ–æ¯”ç‰¹æµçš„åŠæ³•ï¼Œè¿™ç¯‡æ–‡ç« æ— ç–‘ç¼ºå°‘äº†å¾ˆå¤šç»†èŠ‚ã€åŸå› ã€æƒè¡¡ç­‰ç­‰ã€‚ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ä½ <a href="https://www.amazon.com/Understanding-Compression-Data-Modern-Developers/dp/1491961538/">åº”è¯¥å­¦ä¹ æ›´å¤š</a>ã€‚åˆšå…¥é—¨è§†é¢‘ç¼–ç çš„äººå¯ä»¥å°è¯•ä½¿ç”¨ä¸åŒçš„<a href="https://en.wikipedia.org/wiki/Asymmetric_Numeral_Systems">ç†µç¼–ç ç®—æ³•ï¼Œå¦‚ANS</a>ã€‚</p>
<blockquote>
<h3 id="è‡ªå·±åŠ¨æ‰‹ï¼šcabac-vs-cavlc">è‡ªå·±åŠ¨æ‰‹ï¼šCABAC vs CAVLC</h3>
<p>ä½ å¯ä»¥<a href="https://github.com/leandromoreira/introduction_video_technology/blob/master/encoding_pratical_examples.md#cabac-vs-cavlc">ç”Ÿæˆä¸¤ä¸ªæµï¼Œä¸€ä¸ªä½¿ç”¨ CABACï¼Œå¦ä¸€ä¸ªä½¿ç”¨ CAVLC</a>ï¼Œå¹¶æ¯”è¾ƒç”Ÿæˆæ¯ä¸€ä¸ªçš„æ—¶é—´ä»¥åŠæœ€ç»ˆçš„å¤§å°ã€‚</p>
</blockquote>
<h2 id="ç¬¬å…­æ­¥-æ¯”ç‰¹æµæ ¼å¼">ç¬¬å…­æ­¥ - æ¯”ç‰¹æµæ ¼å¼</h2>
<p>å®Œæˆæ‰€æœ‰è¿™äº›æ­¥ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†<strong>å‹ç¼©è¿‡çš„å¸§å’Œå†…å®¹æ‰“åŒ…è¿›å»</strong>ã€‚éœ€è¦æ˜ç¡®å‘ŠçŸ¥è§£ç å™¨<strong>ç¼–ç å®šä¹‰</strong>ï¼Œå¦‚é¢œè‰²æ·±åº¦ï¼Œé¢œè‰²ç©ºé—´ï¼Œåˆ†è¾¨ç‡ï¼Œé¢„æµ‹ä¿¡æ¯ï¼ˆè¿åŠ¨å‘é‡ï¼Œå¸§å†…é¢„æµ‹æ–¹å‘ï¼‰ï¼Œé…ç½®<sup>*</sup>ï¼Œå±‚çº§<sup>*</sup>ï¼Œå¸§ç‡ï¼Œå¸§ç±»å‹ï¼Œå¸§å·ç­‰ç­‰æ›´å¤šä¿¡æ¯ã€‚</p>
<blockquote>
<p><sup>*</sup> è¯‘æ³¨ï¼šåŸæ–‡ä¸º profile å’Œ levelï¼Œæ²¡æœ‰é€šç”¨çš„è¯‘å</p>
</blockquote>
<p>æˆ‘ä»¬å°†ç®€å•åœ°å­¦ä¹  H.264 æ¯”ç‰¹æµã€‚ç¬¬ä¸€æ­¥æ˜¯<a href="https://github.com/leandromoreira/introduction_video_technology/blob/master/encoding_pratical_examples.md#generate-a-single-frame-h264-bitstream">ç”Ÿæˆä¸€ä¸ªå°çš„ H.264<sup>*</sup> æ¯”ç‰¹æµ</a>ï¼Œå¯ä»¥ä½¿ç”¨æœ¬ repo å’Œ <a href="http://ffmpeg.org/">ffmpeg</a> æ¥åšã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;s&#x2F;ffmpeg -i &#x2F;files&#x2F;i&#x2F;minimal.png -pix_fmt yuv420p &#x2F;files&#x2F;v&#x2F;minimal_yuv420.h264</span><br></pre></td></tr></table></figure>
<blockquote>
<p><sup>*</sup> ffmpeg é»˜è®¤å°†æ‰€æœ‰å‚æ•°æ·»åŠ ä¸º <strong>SEI NAL</strong>ï¼Œå¾ˆå¿«æˆ‘ä»¬ä¼šå®šä¹‰ä»€ä¹ˆæ˜¯ NALã€‚</p>
</blockquote>
<p>è¿™ä¸ªå‘½ä»¤ä¼šä½¿ç”¨ä¸‹é¢çš„å›¾ç‰‡ä½œä¸ºå¸§ï¼Œç”Ÿæˆä¸€ä¸ªå…·æœ‰<strong>å•ä¸ªå¸§</strong>ï¼Œ64x64 å’Œé¢œè‰²ç©ºé—´ä¸º yuv420 çš„åŸå§‹ h264 æ¯”ç‰¹æµã€‚</p>
<blockquote>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/minimal.png" alt="ä½¿ç”¨å¸§æ¥ç”Ÿæˆæç®€ h264 æ¯”ç‰¹æµ" title="ä½¿ç”¨å¸§æ¥ç”Ÿæˆæç®€ h264 æ¯”ç‰¹æµ"></p>
</blockquote>
<h3 id="h-264-æ¯”ç‰¹æµ">H.264 æ¯”ç‰¹æµ</h3>
<p>AVC (H.264) æ ‡å‡†è§„å®šä¿¡æ¯å°†åœ¨å®å¸§ï¼ˆç½‘ç»œæ¦‚å¿µä¸Šçš„ï¼‰å†…ä¼ è¾“ï¼Œç§°ä¸º <a href="https://en.wikipedia.org/wiki/Network_Abstraction_Layer">NAL</a>ï¼ˆç½‘ç»œæŠ½è±¡å±‚ï¼‰ã€‚NAL çš„ä¸»è¦ç›®æ ‡æ˜¯æä¾›â€œç½‘ç»œå‹å¥½â€çš„è§†é¢‘å‘ˆç°æ–¹å¼ï¼Œè¯¥æ ‡å‡†å¿…é¡»é€‚ç”¨äºç”µè§†ï¼ˆåŸºäºæµï¼‰ï¼Œäº’è”ç½‘ï¼ˆåŸºäºæ•°æ®åŒ…ï¼‰ç­‰ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/nal_units.png" alt="H.264 NAL å•å…ƒ" title="H.264 NAL å•å…ƒ"></p>
<p><a href="https://en.wikipedia.org/wiki/Frame_synchronization">åŒæ­¥æ ‡è®°</a>ç”¨æ¥å®šä¹‰ NAL å•å…ƒçš„è¾¹ç•Œã€‚æ¯ä¸ªåŒæ­¥æ ‡è®°çš„å€¼å›ºå®šä¸º  <code>0x00 0x00 0x01</code> ï¼Œæœ€å¼€å¤´çš„æ ‡è®°ä¾‹å¤–ï¼Œå®ƒçš„å€¼æ˜¯  <code>0x00 0x00 0x00 0x01</code> ã€‚å¦‚æœæˆ‘ä»¬åœ¨ç”Ÿæˆçš„ h264 æ¯”ç‰¹æµä¸Šè¿è¡Œ <strong>hexdump</strong>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–‡ä»¶çš„å¼€å¤´è¯†åˆ«è‡³å°‘ä¸‰ä¸ª NALã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/minimal_yuv420_hex.png" alt="NAL å•å…ƒä¸Šçš„åŒæ­¥æ ‡è®°" title="NAL å•å…ƒä¸Šçš„åŒæ­¥æ ‡è®°"></p>
<p>æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼Œè§£ç å™¨éœ€è¦çŸ¥é“ä¸ä»…ä»…æ˜¯å›¾ç‰‡æ•°æ®ï¼Œè¿˜æœ‰è§†é¢‘çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ï¼šå¸§ã€é¢œè‰²ã€ä½¿ç”¨çš„å‚æ•°ç­‰ã€‚æ¯ä¸ª NAL çš„<strong>ç¬¬ä¸€ä½</strong>å®šä¹‰äº†å…¶åˆ†ç±»å’Œ<strong>ç±»å‹</strong>ã€‚</p>
<table>
<thead>
<tr>
<th>NAL type id</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Undefined</td>
</tr>
<tr>
<td>1</td>
<td>Coded slice of a non-IDR picture</td>
</tr>
<tr>
<td>2</td>
<td>Coded slice data partition A</td>
</tr>
<tr>
<td>3</td>
<td>Coded slice data partition B</td>
</tr>
<tr>
<td>4</td>
<td>Coded slice data partition C</td>
</tr>
<tr>
<td>5</td>
<td><strong>IDR</strong> Coded slice of an IDR picture</td>
</tr>
<tr>
<td>6</td>
<td><strong>SEI</strong> Supplemental enhancement information</td>
</tr>
<tr>
<td>7</td>
<td><strong>SPS</strong> Sequence parameter set</td>
</tr>
<tr>
<td>8</td>
<td><strong>PPS</strong> Picture parameter set</td>
</tr>
<tr>
<td>9</td>
<td>Access unit delimiter</td>
</tr>
<tr>
<td>10</td>
<td>End of sequence</td>
</tr>
<tr>
<td>11</td>
<td>End of stream</td>
</tr>
<tr>
<td>â€¦</td>
<td>â€¦</td>
</tr>
</tbody>
</table>
<p>é€šå¸¸ï¼Œæ¯”ç‰¹æµçš„ç¬¬ä¸€ä¸ª NAL æ˜¯ <strong>SPS</strong>ï¼Œè¿™ä¸ªç±»å‹çš„ NAL è´Ÿè´£ä¼ è¾¾é€šç”¨ç¼–ç å‚æ•°ï¼Œå¦‚<strong>é…ç½®ï¼Œå±‚çº§ï¼Œåˆ†è¾¨ç‡</strong>ç­‰ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬è·³è¿‡ç¬¬ä¸€ä¸ªåŒæ­¥æ ‡è®°ï¼Œå°±å¯ä»¥é€šè¿‡è§£ç <strong>ç¬¬ä¸€ä¸ªå­—èŠ‚</strong>æ¥äº†è§£ç¬¬ä¸€ä¸ª <strong>NAL çš„ç±»å‹</strong>ã€‚</p>
<p>ä¾‹å¦‚åŒæ­¥æ ‡è®°ä¹‹åçš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯ <code>01100111</code>ï¼Œç¬¬ä¸€ä½ï¼ˆ<code>0</code>ï¼‰æ˜¯ <strong>forbidden_zero_bit</strong> å­—æ®µï¼Œæ¥ä¸‹æ¥çš„ä¸¤ä½ï¼ˆ<code>11</code>ï¼‰å‘Šè¯‰æˆ‘ä»¬æ˜¯ <strong>nal_ref_idc</strong> å­—æ®µï¼Œå…¶è¡¨ç¤ºè¯¥ NAL æ˜¯å¦æ˜¯å‚è€ƒå­—æ®µï¼Œå…¶ä½™ 5 ä½ï¼ˆ<code>00111</code>ï¼‰å‘Šè¯‰æˆ‘ä»¬æ˜¯ <strong>nal_unit_type</strong> å­—æ®µï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œæ˜¯ NAL å•å…ƒ <strong>SPS</strong> (7)ã€‚</p>
<p>SPS NAL çš„ç¬¬ 2 ä½ (<code>binary=01100100, hex=0x64, dec=100</code>) æ˜¯ <strong>profile_idc</strong> å­—æ®µï¼Œæ˜¾ç¤ºç¼–ç å™¨ä½¿ç”¨çš„é…ç½®ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨<a href="https://en.wikipedia.org/wiki/H.264/MPEG-4_AVC#Profiles">å—é™é«˜é…ç½®</a>ï¼Œä¸€ç§æ²¡æœ‰ Bï¼ˆåŒå‘é¢„æµ‹ï¼‰ åˆ‡ç‰‡æ”¯æŒçš„é«˜é…ç½®ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/minimal_yuv420_bin.png" alt="SPS äºŒè¿›åˆ¶è§†å›¾" title="SPS äºŒè¿›åˆ¶è§†å›¾"></p>
<p>å½“æˆ‘ä»¬é˜…è¯» SPS NAL çš„ H.264 æ¯”ç‰¹æµè§„èŒƒæ—¶ï¼Œä¼šä¸º<strong>å‚æ•°åç§°</strong>ï¼Œ<strong>åˆ†ç±»</strong>å’Œ<strong>æè¿°</strong>æ‰¾åˆ°è®¸å¤šå€¼ï¼Œä¾‹å¦‚ï¼Œçœ‹çœ‹å­—æ®µ <code>pic_width_in_mbs_minus_1</code> å’Œ <code>pic_height_in_map_units_minus_1</code>ã€‚</p>
<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>åˆ†ç±»</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>pic_width_in_mbs_minus_1</td>
<td>0</td>
<td>ue(v)</td>
</tr>
<tr>
<td>pic_height_in_map_units_minus_1</td>
<td>0</td>
<td>ue(v)</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>ue(v)</strong>: æ— ç¬¦å·æ•´å½¢ <a href="https://pythonhosted.org/bitstring/exp-golomb.html">Exp-Golomb-coded</a></p>
</blockquote>
<p>å¦‚æœæˆ‘ä»¬å¯¹è¿™äº›å­—æ®µçš„å€¼è¿›è¡Œä¸€äº›è®¡ç®—ï¼Œå°†æœ€ç»ˆå¾—å‡º<strong>åˆ†è¾¨ç‡</strong>ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å€¼ä¸º <code>119ï¼ˆ (119 + 1) * macroblock_size = 120 * 16 = 1920ï¼‰</code>çš„ <code>pic_width_in_mbs_minus_1</code> è¡¨ç¤º <code>1920 x 1080</code>ï¼Œå†æ¬¡ä¸ºäº†å‡å°‘ç©ºé—´ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>119</code> æ¥ä»£æ›¿ç¼–ç  <code>1920</code>ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å†æ¬¡ä½¿ç”¨äºŒè¿›åˆ¶è§†å›¾æ£€æŸ¥æˆ‘ä»¬åˆ›å»ºçš„è§†é¢‘ (ex: <code>xxd -b -c 11 v/minimal_yuv420.h264</code>)ï¼Œå¯ä»¥è·³åˆ°å¸§è‡ªèº«ä¸Šä¸€ä¸ª NALã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/slice_nal_idr_bin.png" alt="h264 idr åˆ‡ç‰‡å¤´" title="h264 idr åˆ‡ç‰‡å¤´"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ€å¼€å§‹çš„ 6 ä¸ªå­—èŠ‚ï¼š<code>01100101 10001000 10000100 00000000 00100001 11111111</code>ã€‚æˆ‘ä»¬å·²ç»çŸ¥é“ç¬¬ä¸€ä¸ªå­—èŠ‚å‘Šè¯‰æˆ‘ä»¬ NAL çš„ç±»å‹ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ (<code>00101</code>) æ˜¯ <strong>IDR åˆ‡ç‰‡ (5)</strong>ï¼Œå¯ä»¥è¿›ä¸€æ­¥æ£€æŸ¥å®ƒï¼š</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/slice_header.png" alt="h264 åˆ‡ç‰‡å¤´è§„æ ¼" title="h264 åˆ‡ç‰‡å¤´è§„æ ¼"></p>
<p>å¯¹ç…§è§„èŒƒï¼Œæˆ‘ä»¬èƒ½è§£ç åˆ‡ç‰‡çš„ç±»å‹ï¼ˆ<strong>slice_type</strong>ï¼‰ï¼Œå¸§å·ï¼ˆ<strong>frame_num</strong>ï¼‰ç­‰é‡è¦å­—æ®µã€‚</p>
<p>ä¸ºäº†è·å¾—ä¸€äº›å­—æ®µï¼ˆ<code>ue(v), me(v), se(v) æˆ– te(v)</code>ï¼‰çš„å€¼ï¼Œæˆ‘ä»¬éœ€è¦ç§°ä¸º <a href="https://pythonhosted.org/bitstring/exp-golomb.html">Exponential-Golomb</a> çš„ç‰¹å®šè§£ç å™¨æ¥è§£ç å®ƒã€‚å½“å­˜åœ¨å¾ˆå¤šé»˜è®¤å€¼æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ç¼–ç å˜é‡å€¼ç‰¹åˆ«é«˜æ•ˆã€‚</p>
<blockquote>
<p>è¿™ä¸ªè§†é¢‘é‡Œ <strong>slice_type</strong> å’Œ <strong>frame_num</strong> çš„å€¼æ˜¯ 7ï¼ˆI åˆ‡ç‰‡ï¼‰å’Œ 0ï¼ˆç¬¬ä¸€å¸§ï¼‰ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥å°†<strong>æ¯”ç‰¹æµè§†ä¸ºä¸€ä¸ªåè®®</strong>ï¼Œå¦‚æœä½ æƒ³å­¦ä¹ æ›´å¤šå…³äºæ¯”ç‰¹æµçš„å†…å®¹ï¼Œè¯·å‚è€ƒ <a href="http://www.itu.int/rec/T-REC-H.264-201610-I">ITU H.264 è§„èŒƒ</a>ã€‚è¿™ä¸ªå®è§‚å›¾å±•ç¤ºäº†å›¾ç‰‡æ•°æ®ï¼ˆå‹ç¼©è¿‡çš„ YUVï¼‰æ‰€åœ¨çš„ä½ç½®ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/h264_bitstream_macro_diagram.png" alt="h264 æ¯”ç‰¹æµå®è§‚å›¾" title="h264 æ¯”ç‰¹æµå®è§‚å›¾"></p>
<p>æˆ‘ä»¬å¯ä»¥æ¢ç©¶å…¶å®ƒæ¯”ç‰¹æµï¼Œå¦‚ <a href="https://storage.googleapis.com/downloads.webmproject.org/docs/vp9/vp9-bitstream-specification-v0.6-20160331-draft.pdf">VP9 æ¯”ç‰¹æµ</a>ï¼Œ<a href="http://handle.itu.int/11.1002/1000/11885-en?locatt=format:pdf">H.265ï¼ˆHEVCï¼‰</a>æˆ–æ˜¯æˆ‘ä»¬çš„æ–°æœ‹å‹ <a href="https://medium.com/@mbebenita/av1-bitstream-analyzer-d25f1c27072b#.d5a89oxz8">AV1 æ¯”ç‰¹æµ</a>ï¼Œ<a href="http://www.gpac-licensing.com/2016/07/12/vp9-av1-bitstream-format/">ä»–ä»¬å¾ˆç›¸ä¼¼å—ï¼Ÿä¸</a>ï¼Œä½†åªè¦å­¦ä¹ äº†å…¶ä¸­ä¹‹ä¸€ï¼Œå­¦ä¹ å…¶ä»–çš„å°±ç®€å•å¤šäº†ã€‚</p>
<blockquote>
<h3 id="è‡ªå·±åŠ¨æ‰‹ï¼šæ£€æŸ¥-h-264-æ¯”ç‰¹æµ">è‡ªå·±åŠ¨æ‰‹ï¼šæ£€æŸ¥ H.264 æ¯”ç‰¹æµ</h3>
<p>æˆ‘ä»¬å¯ä»¥<a href="https://github.com/leandromoreira/introduction_video_technology/blob/master/encoding_pratical_examples.md#generate-a-single-frame-video">ç”Ÿæˆä¸€ä¸ªå•å¸§è§†é¢‘</a>ï¼Œä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/MediaInfo">mediainfo</a> æ£€æŸ¥å®ƒçš„ H.264 æ¯”ç‰¹æµã€‚äº‹å®ä¸Šï¼Œä½ ç”šè‡³å¯ä»¥æŸ¥çœ‹<a href="https://github.com/MediaArea/MediaInfoLib/blob/master/Source/MediaInfo/Video/File_Avc.cpp">è§£æ h264(AVC) è§†é¢‘æµçš„æºä»£ç </a>ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/mediainfo_details_1.png" alt="mediainfo h264 æ¯”ç‰¹æµçš„è¯¦æƒ… " title="mediainfo h264 æ¯”ç‰¹æµçš„è¯¦æƒ…"></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä½¿ç”¨ <a href="https://software.intel.com/en-us/intel-video-pro-analyzer">IntelÂ® Video Pro Analyzer</a>ï¼Œéœ€è¦ä»˜è´¹ï¼Œä½†ä¹Ÿæœ‰åªèƒ½æŸ¥çœ‹å‰ 10 å¸§çš„å…è´¹è¯•ç”¨ç‰ˆï¼Œè¿™å·²ç»å¤Ÿè¾¾æˆå­¦ä¹ ç›®çš„äº†ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/intel-video-pro-analyzer.png" alt="IntelÂ® Video Pro Analyzer h264 æ¯”ç‰¹æµçš„è¯¦æƒ…" title="IntelÂ® Video Pro Analyzer h264 æ¯”ç‰¹æµçš„è¯¦æƒ…"></p>
</blockquote>
<blockquote>
<h3 id="å…³äºh264-æˆ‘ä»¬è¿˜éœ€è¦äº†è§£ä»€ä¹ˆï¼Ÿ">å…³äºH264ï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£ä»€ä¹ˆï¼Ÿ</h3>
<p>é™¤äº†å¦‚ä¸Šå¯¹H264ç æµçš„ä»‹ç»å¤–ï¼ŒH264è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„å†…å®¹éœ€è¦äº†è§£ï¼Œä¾‹å¦‚ï¼šX264å’ŒH264ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼ŸH264æœªæ¥ä¼šè¢«å…¶ä»–çš„æ–°å‹ç¼–è§£ç å™¨æ‰€ä»£æ›¿å—ï¼Ÿâ€¦â€¦å…³äºè¿™äº›ä¿¡æ¯å¯ä»¥å‚è€ƒï¼š<a href="https://www.videoproc.com/resource/h264-codec.htm">https://www.videoproc.com/resource/h264-codec.htm</a>ã€‚</p>
</blockquote>
<h2 id="å›é¡¾">å›é¡¾</h2>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å­¦äº†è®¸å¤š<strong>ä½¿ç”¨ç›¸åŒæ¨¡å‹çš„ç°ä»£ç¼–è§£ç å™¨</strong>ã€‚äº‹å®ä¸Šï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ Thor è§†é¢‘ç¼–è§£ç å™¨æ¡†å›¾ï¼Œå®ƒåŒ…å«æ‰€æœ‰æˆ‘ä»¬å­¦è¿‡çš„æ­¥éª¤ã€‚ä½ ç°åœ¨åº”è¯¥èƒ½æ›´å¥½åœ°ç†è§£æ•°å­—è§†é¢‘é¢†åŸŸå†…çš„åˆ›æ–°å’Œè®ºæ–‡ã€‚<br>
<img src="/2020/02/28/Introduction-to-digital-video-technology/thor_codec_block_diagram.png" alt="thor ç¼–è§£ç å™¨å—å›¾" title="thor ç¼–è§£ç å™¨å—å›¾"></p>
<p>ä¹‹å‰æˆ‘ä»¬è®¡ç®—è¿‡æˆ‘ä»¬<a href="#%E8%89%B2%E5%BA%A6%E5%AD%90%E9%87%87%E6%A0%B7">éœ€è¦ 139GB æ¥ä¿å­˜ä¸€ä¸ªä¸€å°æ—¶ï¼Œ720p åˆ†è¾¨ç‡å’Œ30fpsçš„è§†é¢‘æ–‡ä»¶</a>ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨åœ¨è¿™é‡Œå­¦è¿‡çš„æŠ€æœ¯ï¼Œå¦‚<strong>å¸§é—´å’Œå¸§å†…é¢„æµ‹ï¼Œè½¬æ¢ï¼Œé‡åŒ–ï¼Œç†µç¼–ç å’Œå…¶å®ƒ</strong>æˆ‘ä»¬èƒ½å®ç°â€”â€”å‡è®¾æˆ‘ä»¬<strong>æ¯åƒç´ èŠ±è´¹ 0.031 bit</strong>â€”â€”åŒæ ·è§‚æ„Ÿè´¨é‡çš„è§†é¢‘ï¼Œ<strong>å¯¹æ¯” 139GB çš„å­˜å‚¨ï¼Œåªéœ€ 367.82MB</strong>ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬æ ¹æ®è¿™é‡Œæä¾›çš„ç¤ºä¾‹è§†é¢‘é€‰æ‹©<strong>æ¯åƒç´ ä½¿ç”¨ 0.031 bit</strong>ã€‚</p>
</blockquote>
<h2 id="h-265-å¦‚ä½•å®ç°æ¯”-h-264-æ›´å¥½çš„å‹ç¼©ç‡">H.265 å¦‚ä½•å®ç°æ¯” H.264 æ›´å¥½çš„å‹ç¼©ç‡</h2>
<p>æˆ‘ä»¬å·²ç»æ›´å¤šåœ°äº†è§£äº†ç¼–è§£ç å™¨çš„å·¥ä½œåŸç†ï¼Œé‚£ä¹ˆå°±å®¹æ˜“ç†è§£æ–°çš„ç¼–è§£ç å™¨å¦‚ä½•ä½¿ç”¨æ›´å°‘çš„æ•°æ®é‡ä¼ è¾“æ›´é«˜åˆ†è¾¨ç‡çš„è§†é¢‘ã€‚</p>
<p>æˆ‘ä»¬å°†æ¯”è¾ƒ AVC å’Œ HEVCï¼Œè¦è®°ä½çš„æ˜¯ï¼šæˆ‘ä»¬å‡ ä¹æ€»æ˜¯è¦åœ¨å‹ç¼©ç‡å’Œæ›´å¤šçš„ CPU å‘¨æœŸï¼ˆå¤æ‚åº¦ï¼‰ä¹‹é—´ä½œæƒè¡¡ã€‚</p>
<p>HEVC æ¯” AVC æœ‰æ›´å¤§å’Œæ›´å¤šçš„<strong>åˆ†åŒº</strong>ï¼ˆå’Œ<strong>å­åˆ†åŒº</strong>ï¼‰é€‰é¡¹ï¼Œæ›´å¤š<strong>å¸§å†…é¢„æµ‹æ–¹å‘</strong>ï¼Œ<strong>æ”¹è¿›çš„ç†µç¼–ç </strong>ç­‰ï¼Œæ‰€æœ‰è¿™äº›æ”¹è¿›ä½¿å¾— H.265 æ¯” H.264 çš„å‹ç¼©ç‡æå‡ 50%ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/avc_vs_hevc.png" alt="h264 vs h265" title="H.264 vs H.265"></p>
<h1>åœ¨çº¿æµåª’ä½“</h1>
<h2 id="é€šç”¨æ¶æ„">é€šç”¨æ¶æ„</h2>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/general_architecture.png" alt="general_architecture"></p>
<p>[TODO]</p>
<h2 id="æ¸è¿›å¼ä¸‹è½½å’Œè‡ªé€‚åº”æµ">æ¸è¿›å¼ä¸‹è½½å’Œè‡ªé€‚åº”æµ</h2>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/progressive_download.png" alt="progressive_download"></p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/adaptive_streaming.png" alt="adaptive_streaming"></p>
<p>[TODO]</p>
<h2 id="å†…å®¹ä¿æŠ¤">å†…å®¹ä¿æŠ¤</h2>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„ä»¤ç‰Œè®¤è¯ç³»ç»Ÿæ¥ä¿æŠ¤è§†é¢‘ã€‚ç”¨æˆ·éœ€è¦æ‹¥æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„ä»¤ç‰Œæ‰å¯ä»¥æ’­æ”¾è§†é¢‘ï¼ŒCDN ä¼šæ‹’ç»æ²¡æœ‰ä»¤ç‰Œçš„ç”¨æˆ·çš„è¯·æ±‚ã€‚å®ƒä¸å¤§å¤šæ•°ç½‘ç«™çš„èº«ä»½è®¤è¯ç³»ç»Ÿéå¸¸ç›¸ä¼¼ã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/token_protection.png" alt="token_protection"></p>
<p>ä»…ä»…ä½¿ç”¨ä»¤ç‰Œè®¤è¯ç³»ç»Ÿï¼Œç”¨æˆ·ä»ç„¶å¯ä»¥ä¸‹è½½å¹¶é‡æ–°åˆ†å‘è§†é¢‘ã€‚DRM ç³»ç»Ÿå¯ä»¥ç”¨æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/drm.png" alt="drm"></p>
<p>å®é™…æƒ…å†µä¸‹ï¼Œäººä»¬é€šå¸¸åŒæ—¶ä½¿ç”¨è¿™ä¸¤ç§æŠ€æœ¯æä¾›æˆæƒå’Œè®¤è¯ã€‚</p>
<h3 id="drm">DRM</h3>
<h4 id="ä¸»è¦ç³»ç»Ÿ">ä¸»è¦ç³»ç»Ÿ</h4>
<ul>
<li>FPS - <a href="https://developer.apple.com/streaming/fps/"><strong>FairPlay Streaming</strong></a></li>
<li>PR - <a href="https://www.microsoft.com/playready/"><strong>PlayReady</strong></a></li>
<li>WV - <a href="http://www.widevine.com/"><strong>Widevine</strong></a></li>
</ul>
<h4 id="æ˜¯ä»€ä¹ˆ">æ˜¯ä»€ä¹ˆ</h4>
<p>DRM æŒ‡çš„æ˜¯æ•°å­—ç‰ˆæƒç®¡ç†ï¼Œæ˜¯ä¸€ç§<strong>ä¸ºæ•°å­—åª’ä½“æä¾›ç‰ˆæƒä¿æŠ¤</strong>çš„æ–¹æ³•ï¼Œä¾‹å¦‚æ•°å­—è§†é¢‘å’ŒéŸ³é¢‘ã€‚å°½ç®¡ç”¨åœ¨äº†å¾ˆå¤šåœºåˆï¼Œä½†å®ƒå¹¶<a href="https://en.wikipedia.org/wiki/Digital_rights_management#DRM-free_works">æ²¡æœ‰è¢«æ™®éæ¥å—</a>.</p>
<h4 id="ä¸ºä»€ä¹ˆ">ä¸ºä»€ä¹ˆ</h4>
<p>å†…å®¹çš„åˆ›ä½œè€…ï¼ˆå¤§å¤šæ˜¯å·¥ä½œå®¤/åˆ¶ç‰‡å‚ï¼‰å¸Œæœ›ä¿æŠ¤ä»–ä»¬çš„çŸ¥è¯†äº§æƒï¼Œä½¿ä»–ä»¬çš„æ•°å­—åª’ä½“å…é­æœªç»æˆæƒçš„åˆ†å‘ã€‚</p>
<h4 id="æ€ä¹ˆåš">æ€ä¹ˆåš</h4>
<p>æˆ‘ä»¬å°†ç”¨ä¸€ç§ç®€å•çš„ã€æŠ½è±¡çš„æ–¹å¼æè¿° DRM</p>
<p>ç°æœ‰ä¸€ä»½<strong>å†…å®¹ C1</strong>ï¼ˆå¦‚ HLS æˆ– DASH è§†é¢‘æµï¼‰ï¼Œä¸€ä¸ª<strong>æ’­æ”¾å™¨ P1</strong>ï¼ˆå¦‚ shaka-clappr, exo-player æˆ– iOSï¼‰ï¼Œè£…åœ¨<strong>è®¾å¤‡ D1</strong>ï¼ˆå¦‚æ™ºèƒ½æ‰‹æœºã€ç”µè§†æˆ–å°å¼æœº/ç¬”è®°æœ¬ï¼‰ä¸Šï¼Œä½¿ç”¨ <strong>DRM ç³»ç»Ÿ DRM1</strong>ï¼ˆå¦‚ FairPlay Streaming, PlayReady, Widevineï¼‰</p>
<p>å†…å®¹ C1 ç”± DRM1 ç”¨ä¸€ä¸ª<strong>å¯¹ç§°å¯†é’¥ K1</strong> åŠ å¯†ï¼Œç”Ÿæˆ<strong>åŠ å¯†å†…å®¹ Câ€™1</strong></p>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/drm_general_flow.jpeg" alt="DRM ä¸€èˆ¬æµç¨‹" title="DRM ä¸€èˆ¬æµç¨‹"></p>
<p>è®¾å¤‡ D1 ä¸Šçš„æ’­æ”¾å™¨ P1 æœ‰ä¸€ä¸ªéå¯¹ç§°å¯†é’¥å¯¹ï¼Œå¯†é’¥å¯¹åŒ…å«ä¸€ä¸ª<strong>ç§é’¥ PRK1</strong>ï¼ˆè¿™ä¸ªå¯†é’¥æ˜¯å—ä¿æŠ¤çš„<sup>1</sup>ï¼Œåªæœ‰ <strong>D1</strong> çŸ¥é“å¯†é’¥å†…å®¹ï¼‰ï¼Œå’Œä¸€ä¸ª<strong>å…¬é’¥ PUK1</strong></p>
<blockquote>
<p><strong><sup>1</sup>å—ä¿æŠ¤çš„</strong>: è¿™ç§ä¿æŠ¤å¯ä»¥<strong>é€šè¿‡ç¡¬ä»¶</strong>è¿›è¡Œä¿æŠ¤ï¼Œä¾‹å¦‚, å°†è¿™ä¸ªå¯†é’¥å­˜å‚¨åœ¨ä¸€ä¸ªç‰¹æ®Šçš„èŠ¯ç‰‡ï¼ˆåªè¯»ï¼‰ä¸­ï¼ŒèŠ¯ç‰‡çš„å·¥ä½œæ–¹å¼å°±åƒä¸€ä¸ªç”¨æ¥è§£å¯†çš„[é»‘ç®±]ã€‚ æˆ–<strong>é€šè¿‡è½¯ä»¶</strong>è¿›è¡Œä¿æŠ¤ï¼ˆè¾ƒä½çš„å®‰å…¨ç³»æ•°ï¼‰ã€‚DRM ç³»ç»Ÿæä¾›äº†è¯†åˆ«è®¾å¤‡æ‰€ä½¿ç”¨çš„ä¿æŠ¤ç±»å‹çš„æ–¹æ³•ã€‚</p>
</blockquote>
<p>å½“ <strong>æ’­æ”¾å™¨ P1 å¸Œæœ›æ’­æ”¾****åŠ å¯†å†…å®¹ Câ€™1</strong> æ—¶ï¼Œå®ƒéœ€è¦ä¸ <strong>DRM1</strong> åå•†ï¼Œå°†å…¬é’¥ <strong>PUK1</strong> å‘é€ç»™ DRM1, DRM1 ä¼šè¿”å›ä¸€ä¸ªè¢«å…¬é’¥ <strong>PUK1</strong> <strong>åŠ å¯†è¿‡çš„ K1</strong>ã€‚æŒ‰ç…§æ¨è®ºï¼Œç»“æœå°±æ˜¯<strong>åªæœ‰ D1 èƒ½å¤Ÿè§£å¯†</strong>ã€‚</p>
<p><code>K1P1D1 = enc(K1, PUK1)</code></p>
<p><strong>P1</strong> ä½¿ç”¨å®ƒçš„æœ¬åœ° DRM ç³»ç»Ÿï¼ˆè¿™å¯ä»¥ä½¿ç”¨ <a href="https://zh.wikipedia.org/wiki/%E7%B3%BB%E7%BB%9F%E8%8A%AF%E7%89%87">SoC</a> ï¼Œä¸€ä¸ªä¸“é—¨çš„ç¡¬ä»¶å’Œè½¯ä»¶ï¼Œè¿™ä¸ªç³»ç»Ÿå¯ä»¥ä½¿ç”¨å®ƒçš„ç§é’¥ PRK1 ç”¨æ¥<strong>è§£å¯†</strong>å†…å®¹ï¼Œå®ƒå¯ä»¥è§£å¯†è¢«åŠ å¯†è¿‡çš„<strong>K1P1D1 çš„å¯¹ç§°å¯†é’¥ K1</strong>ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå¯†é’¥ä¸ä¼šè¢«å¯¼å‡ºåˆ°å†…å­˜ä»¥å¤–çš„åœ°æ–¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">K1 &#x3D; dec(K1P1D1, PRK1)</span><br><span class="line"></span><br><span class="line">P1.play(dec(C&#39;1, K1))</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/28/Introduction-to-digital-video-technology/drm_decoder_flow.jpeg" alt="DRM è§£ç æµç¨‹" title="DRM è§£ç æµç¨‹"></p>
<h1>å¦‚ä½•ä½¿ç”¨ jupyter</h1>
<p>ç¡®ä¿ä½ å·²å®‰è£… dockerï¼Œåªéœ€è¿è¡Œ <code>./s/start_jupyter.sh</code>ï¼Œç„¶åæŒ‰ç…§æ§åˆ¶å°çš„è¯´æ˜è¿›è¡Œæ“ä½œã€‚</p>
<h1>ä¼šè®®</h1>
<ul>
<li><a href="https://demuxed.com/">DEMUXED</a> - æ‚¨å¯ä»¥<a href="https://www.youtube.com/channel/UCIc_DkRxo9UgUSTvWVNCmpA">æŸ¥çœ‹æœ€è¿‘çš„2ä¸ªæ´»åŠ¨æ¼”ç¤º</a>ã€‚</li>
</ul>
<h1>å‚è€ƒ</h1>
<p>è¿™é‡Œæœ‰æœ€ä¸°å¯Œçš„èµ„æºï¼Œè¿™ç¯‡æ–‡æ¡£åŒ…å«çš„ä¿¡æ¯ï¼Œå‡æ‘˜å½•ã€ä¾æ®æˆ–å—å®ƒä»¬å¯å‘ã€‚ä½ å¯ä»¥ç”¨è¿™äº›ç²¾å½©çš„é“¾æ¥ï¼Œä¹¦ç±ï¼Œè§†é¢‘ç­‰æ·±åŒ–ä½ çš„çŸ¥è¯†ã€‚</p>
<p>åœ¨çº¿è¯¾ç¨‹å’Œæ•™ç¨‹ï¼š</p>
<ul>
<li><a href="https://www.coursera.org/learn/digital/">https://www.coursera.org/learn/digital/</a></li>
<li><a href="https://people.xiph.org/~tterribe/pubs/lca2012/auckland/intro_to_video1.pdf">https://people.xiph.org/~tterribe/pubs/lca2012/auckland/intro_to_video1.pdf</a></li>
<li><a href="https://xiph.org/video/vid1.shtml">https://xiph.org/video/vid1.shtml</a></li>
<li><a href="https://xiph.org/video/vid2.shtml">https://xiph.org/video/vid2.shtml</a></li>
<li><a href="http://slhck.info/ffmpeg-encoding-course">http://slhck.info/ffmpeg-encoding-course</a></li>
<li><a href="http://www.cambridgeincolour.com/tutorials/camera-sensors.htm">http://www.cambridgeincolour.com/tutorials/camera-sensors.htm</a></li>
<li><a href="http://www.slideshare.net/vcodex/a-short-history-of-video-coding">http://www.slideshare.net/vcodex/a-short-history-of-video-coding</a></li>
<li><a href="http://www.slideshare.net/vcodex/introduction-to-video-compression-13394338">http://www.slideshare.net/vcodex/introduction-to-video-compression-1339433</a></li>
<li><a href="https://developer.android.com/guide/topics/media/media-formats.html">https://developer.android.com/guide/topics/media/media-formats.html</a></li>
<li><a href="http://www.slideshare.net/MadhawaKasun/audio-compression-23398426">http://www.slideshare.net/MadhawaKasun/audio-compression-23398426</a></li>
<li><a href="http://inst.eecs.berkeley.edu/~ee290t/sp04/lectures/02-Motion_Compensation_girod.pdf">http://inst.eecs.berkeley.edu/~ee290t/sp04/lectures/02-Motion_Compensation_girod.pdf</a></li>
</ul>
<p>ä¹¦ç±:</p>
<ul>
<li><a href="https://www.amazon.com/Understanding-Compression-Data-Modern-Developers/dp/1491961538/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1486395327&amp;sr=1-1">https://www.amazon.com/Understanding-Compression-Data-Modern-Developers/dp/1491961538/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1486395327&amp;sr=1-1</a></li>
<li><a href="https://www.amazon.com/H-264-Advanced-Video-Compression-Standard/dp/0470516925">https://www.amazon.com/H-264-Advanced-Video-Compression-Standard/dp/0470516925</a></li>
<li><a href="https://www.amazon.com/Practical-Guide-Video-Audio-Compression/dp/0240806301/ref=sr_1_3?s=books&amp;ie=UTF8&amp;qid=1486396914&amp;sr=1-3&amp;keywords=A+PRACTICAL+GUIDE+TO+VIDEO+AUDIO">https://www.amazon.com/Practical-Guide-Video-Audio-Compression/dp/0240806301/ref=sr_1_3?s=books&amp;ie=UTF8&amp;qid=1486396914&amp;sr=1-3&amp;keywords=A+PRACTICAL+GUIDE+TO+VIDEO+AUDIO</a></li>
<li><a href="https://www.amazon.com/Video-Encoding-Numbers-Eliminate-Guesswork/dp/0998453005/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1486396940&amp;sr=1-1&amp;keywords=jan+ozer">https://www.amazon.com/Video-Encoding-Numbers-Eliminate-Guesswork/dp/0998453005/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1486396940&amp;sr=1-1&amp;keywords=jan+ozer</a></li>
</ul>
<p>æ¯”ç‰¹æµè§„èŒƒ:</p>
<ul>
<li><a href="http://www.itu.int/rec/T-REC-H.264-201610-I">http://www.itu.int/rec/T-REC-H.264-201610-I</a></li>
<li><a href="http://www.itu.int/ITU-T/recommendations/rec.aspx?rec=12904&amp;lang=en">http://www.itu.int/ITU-T/recommendations/rec.aspx?rec=12904&amp;lang=en</a></li>
<li><a href="https://storage.googleapis.com/downloads.webmproject.org/docs/vp9/vp9-bitstream-specification-v0.6-20160331-draft.pdf">https://storage.googleapis.com/downloads.webmproject.org/docs/vp9/vp9-bitstream-specification-v0.6-20160331-draft.pdf</a></li>
<li><a href="http://iphome.hhi.de/wiegand/assets/pdfs/2012_12_IEEE-HEVC-Overview.pdf">http://iphome.hhi.de/wiegand/assets/pdfs/2012_12_IEEE-HEVC-Overview.pdf</a></li>
<li><a href="http://phenix.int-evry.fr/jct/doc_end_user/current_document.php?id=7243">http://phenix.int-evry.fr/jct/doc_end_user/current_document.php?id=7243</a></li>
<li><a href="http://gentlelogic.blogspot.com.br/2011/11/exploring-h264-part-2-h264-bitstream.html">http://gentlelogic.blogspot.com.br/2011/11/exploring-h264-part-2-h264-bitstream.html</a></li>
</ul>
<p>è½¯ä»¶:</p>
<ul>
<li><a href="https://ffmpeg.org/">https://ffmpeg.org/</a></li>
<li><a href="https://ffmpeg.org/ffmpeg-all.html">https://ffmpeg.org/ffmpeg-all.html</a></li>
<li><a href="https://ffmpeg.org/ffprobe.html">https://ffmpeg.org/ffprobe.html</a></li>
<li><a href="https://trac.ffmpeg.org/wiki/">https://trac.ffmpeg.org/wiki/</a></li>
<li><a href="https://software.intel.com/en-us/intel-video-pro-analyzer">https://software.intel.com/en-us/intel-video-pro-analyzer</a></li>
<li><a href="https://medium.com/@mbebenita/av1-bitstream-analyzer-d25f1c27072b#.d5a89oxz8">https://medium.com/@mbebenita/av1-bitstream-analyzer-d25f1c27072b#.d5a89oxz8</a></li>
</ul>
<p>é-ITU ç¼–è§£ç å™¨:</p>
<ul>
<li><a href="https://aomedia.googlesource.com/">https://aomedia.googlesource.com/</a></li>
<li><a href="https://github.com/webmproject/libvpx/tree/master/vp9">https://github.com/webmproject/libvpx/tree/master/vp9</a></li>
<li><a href="https://people.xiph.org/~xiphmont/demo/daala/demo1.shtml">https://people.xiph.org/~xiphmont/demo/daala/demo1.shtml</a></li>
<li><a href="https://people.xiph.org/~jm/daala/revisiting/">https://people.xiph.org/~jm/daala/revisiting/</a></li>
<li><a href="https://www.youtube.com/watch?v=lzPaldsmJbk">https://www.youtube.com/watch?v=lzPaldsmJbk</a></li>
<li><a href="https://fosdem.org/2017/schedule/event/om_av1/">https://fosdem.org/2017/schedule/event/om_av1/</a></li>
</ul>
<p>ç¼–ç æ¦‚å¿µ:</p>
<ul>
<li><a href="http://x265.org/hevc-h265/">http://x265.org/hevc-h265/</a></li>
<li><a href="http://slhck.info/video/2017/03/01/rate-control.html">http://slhck.info/video/2017/03/01/rate-control.html</a></li>
<li><a href="http://slhck.info/video/2017/02/24/vbr-settings.html">http://slhck.info/video/2017/02/24/vbr-settings.html</a></li>
<li><a href="http://slhck.info/video/2017/02/24/crf-guide.html">http://slhck.info/video/2017/02/24/crf-guide.html</a></li>
<li><a href="https://arxiv.org/pdf/1702.00817v1.pdf">https://arxiv.org/pdf/1702.00817v1.pdf</a></li>
<li><a href="https://trac.ffmpeg.org/wiki/Debug/MacroblocksAndMotionVectors">https://trac.ffmpeg.org/wiki/Debug/MacroblocksAndMotionVectors</a></li>
<li><a href="http://web.ece.ucdavis.edu/cerl/ReliableJPEG/Cung/jpeg.html">http://web.ece.ucdavis.edu/cerl/ReliableJPEG/Cung/jpeg.html</a></li>
<li><a href="http://www.adobe.com/devnet/adobe-media-server/articles/h264_encoding.html">http://www.adobe.com/devnet/adobe-media-server/articles/h264_encoding.html</a></li>
<li><a href="https://prezi.com/8m7thtvl4ywr/mp3-and-aac-explained/">https://prezi.com/8m7thtvl4ywr/mp3-and-aac-explained/</a></li>
</ul>
<p>æµ‹è¯•ç”¨è§†é¢‘åºåˆ—:</p>
<ul>
<li><a href="http://bbb3d.renderfarming.net/download.html">http://bbb3d.renderfarming.net/download.html</a></li>
<li><a href="https://www.its.bldrdoc.gov/vqeg/video-datasets-and-organizations.aspx">https://www.its.bldrdoc.gov/vqeg/video-datasets-and-organizations.aspx</a></li>
</ul>
<p>æ‚é¡¹:</p>
<ul>
<li><a href="http://stackoverflow.com/a/24890903">http://stackoverflow.com/a/24890903</a></li>
<li><a href="http://stackoverflow.com/questions/38094302/how-to-understand-header-of-h264">http://stackoverflow.com/questions/38094302/how-to-understand-header-of-h264</a></li>
<li><a href="http://techblog.netflix.com/2016/08/a-large-scale-comparison-of-x264-x265.html">http://techblog.netflix.com/2016/08/a-large-scale-comparison-of-x264-x265.html</a></li>
<li><a href="http://vanseodesign.com/web-design/color-luminance/">http://vanseodesign.com/web-design/color-luminance/</a></li>
<li><a href="http://www.biologymad.com/nervoussystem/eyenotes.htm">http://www.biologymad.com/nervoussystem/eyenotes.htm</a></li>
<li><a href="http://www.compression.ru/video/codec_comparison/h264_2012/mpeg4_avc_h264_video_codecs_comparison.pdf">http://www.compression.ru/video/codec_comparison/h264_2012/mpeg4_avc_h264_video_codecs_comparison.pdf</a></li>
<li><a href="http://www.csc.villanova.edu/~rschumey/csc4800/dct.html">http://www.csc.villanova.edu/~rschumey/csc4800/dct.html</a></li>
<li><a href="http://www.explainthatstuff.com/digitalcameras.html">http://www.explainthatstuff.com/digitalcameras.html</a></li>
<li><a href="http://www.hkvstar.com">http://www.hkvstar.com</a></li>
<li><a href="http://www.hometheatersound.com/">http://www.hometheatersound.com/</a></li>
<li><a href="http://www.lighterra.com/papers/videoencodingh264/">http://www.lighterra.com/papers/videoencodingh264/</a></li>
<li><a href="http://www.red.com/learn/red-101/video-chroma-subsampling">http://www.red.com/learn/red-101/video-chroma-subsampling</a></li>
<li><a href="http://www.slideshare.net/ManoharKuse/hevc-intra-coding">http://www.slideshare.net/ManoharKuse/hevc-intra-coding</a></li>
<li><a href="http://www.slideshare.net/mwalendo/h264vs-hevc">http://www.slideshare.net/mwalendo/h264vs-hevc</a></li>
<li><a href="http://www.slideshare.net/rvarun7777/final-seminar-46117193">http://www.slideshare.net/rvarun7777/final-seminar-46117193</a></li>
<li><a href="http://www.springer.com/cda/content/document/cda_downloaddocument/9783642147029-c1.pdf">http://www.springer.com/cda/content/document/cda_downloaddocument/9783642147029-c1.pdf</a></li>
<li><a href="http://www.streamingmedia.com/Articles/Editorial/Featured-Articles/A-Progress-Report-The-Alliance-for-Open-Media-and-the-AV1-Codec-110383.aspx">http://www.streamingmedia.com/Articles/Editorial/Featured-Articles/A-Progress-Report-The-Alliance-for-Open-Media-and-the-AV1-Codec-110383.aspx</a></li>
<li><a href="http://www.streamingmediaglobal.com/Articles/ReadArticle.aspx?ArticleID=116505&amp;PageNum=1">http://www.streamingmediaglobal.com/Articles/ReadArticle.aspx?ArticleID=116505&amp;PageNum=1</a></li>
<li><a href="http://yumichan.net/video-processing/video-compression/introduction-to-h264-nal-unit/">http://yumichan.net/video-processing/video-compression/introduction-to-h264-nal-unit/</a></li>
<li><a href="https://cardinalpeak.com/blog/the-h-264-sequence-parameter-set/">https://cardinalpeak.com/blog/the-h-264-sequence-parameter-set/</a></li>
<li><a href="https://cardinalpeak.com/blog/worlds-smallest-h-264-encoder/">https://cardinalpeak.com/blog/worlds-smallest-h-264-encoder/</a></li>
<li><a href="https://codesequoia.wordpress.com/category/video/">https://codesequoia.wordpress.com/category/video/</a></li>
<li><a href="https://developer.apple.com/library/content/technotes/tn2224/_index.html">https://developer.apple.com/library/content/technotes/tn2224/_index.html</a></li>
<li><a href="https://en.wikibooks.org/wiki/MeGUI/x264_Settings">https://en.wikibooks.org/wiki/MeGUI/x264_Settings</a></li>
<li><a href="https://en.wikipedia.org/wiki/Adaptive_bitrate_streaming">https://en.wikipedia.org/wiki/Adaptive_bitrate_streaming</a></li>
<li><a href="https://en.wikipedia.org/wiki/AOMedia_Video_1">https://en.wikipedia.org/wiki/AOMedia_Video_1</a></li>
<li><a href="https://en.wikipedia.org/wiki/Chroma_subsampling#/media/File:Colorcomp.jpg">https://en.wikipedia.org/wiki/Chroma_subsampling#/media/File:Colorcomp.jpg</a></li>
<li><a href="https://en.wikipedia.org/wiki/Cone_cell">https://en.wikipedia.org/wiki/Cone_cell</a></li>
<li><a href="https://en.wikipedia.org/wiki/File:H.264_block_diagram_with_quality_score.jpg">https://en.wikipedia.org/wiki/File:H.264_block_diagram_with_quality_score.jpg</a></li>
<li><a href="https://en.wikipedia.org/wiki/Inter_frame">https://en.wikipedia.org/wiki/Inter_frame</a></li>
<li><a href="https://en.wikipedia.org/wiki/Intra-frame_coding">https://en.wikipedia.org/wiki/Intra-frame_coding</a></li>
<li><a href="https://en.wikipedia.org/wiki/Photoreceptor_cell">https://en.wikipedia.org/wiki/Photoreceptor_cell</a></li>
<li><a href="https://en.wikipedia.org/wiki/Pixel_aspect_ratio">https://en.wikipedia.org/wiki/Pixel_aspect_ratio</a></li>
<li><a href="https://en.wikipedia.org/wiki/Presentation_timestamp">https://en.wikipedia.org/wiki/Presentation_timestamp</a></li>
<li><a href="https://en.wikipedia.org/wiki/Rod_cell">https://en.wikipedia.org/wiki/Rod_cell</a></li>
<li><a href="https://it.wikipedia.org/wiki/File:Pixel_geometry_01_Pengo.jpg">https://it.wikipedia.org/wiki/File:Pixel_geometry_01_Pengo.jpg</a></li>
<li><a href="https://leandromoreira.com.br/2016/10/09/how-to-measure-video-quality-perception/">https://leandromoreira.com.br/2016/10/09/how-to-measure-video-quality-perception/</a></li>
<li><a href="https://sites.google.com/site/linuxencoding/x264-ffmpeg-mapping">https://sites.google.com/site/linuxencoding/x264-ffmpeg-mapping</a></li>
<li><a href="https://softwaredevelopmentperestroika.wordpress.com/2014/02/11/image-processing-with-python-numpy-scipy-image-convolution/">https://softwaredevelopmentperestroika.wordpress.com/2014/02/11/image-processing-with-python-numpy-scipy-image-convolution/</a></li>
<li><a href="https://tools.ietf.org/html/draft-fuldseth-netvc-thor-03">https://tools.ietf.org/html/draft-fuldseth-netvc-thor-03</a></li>
<li><a href="https://www.encoding.com/android/">https://www.encoding.com/android/</a></li>
<li><a href="https://www.encoding.com/http-live-streaming-hls/">https://www.encoding.com/http-live-streaming-hls/</a></li>
<li><a href="https://www.iem.thm.de/telekom-labor/zinke/mk/mpeg2beg/whatisit.htm">https://www.iem.thm.de/telekom-labor/zinke/mk/mpeg2beg/whatisit.htm</a></li>
<li><a href="https://www.lifewire.com/cmos-image-sensor-493271">https://www.lifewire.com/cmos-image-sensor-493271</a></li>
<li><a href="https://www.linkedin.com/pulse/brief-history-video-codecs-yoav-nativ">https://www.linkedin.com/pulse/brief-history-video-codecs-yoav-nativ</a></li>
<li><a href="https://www.linkedin.com/pulse/video-streaming-methodology-reema-majumdar">https://www.linkedin.com/pulse/video-streaming-methodology-reema-majumdar</a></li>
<li><a href="https://www.vcodex.com/h264avc-intra-precition/">https://www.vcodex.com/h264avc-intra-precition/</a></li>
<li><a href="https://www.youtube.com/watch?v=9vgtJJ2wwMA">https://www.youtube.com/watch?v=9vgtJJ2wwMA</a></li>
<li><a href="https://www.youtube.com/watch?v=LFXN9PiOGtY">https://www.youtube.com/watch?v=LFXN9PiOGtY</a></li>
<li><a href="https://www.youtube.com/watch?v=Lto-ajuqW3w&amp;list=PLzH6n4zXuckpKAj1_88VS-8Z6yn9zX_P6">https://www.youtube.com/watch?v=Lto-ajuqW3w&amp;list=PLzH6n4zXuckpKAj1_88VS-8Z6yn9zX_P6</a></li>
<li><a href="https://www.youtube.com/watch?v=LWxu4rkZBLw">https://www.youtube.com/watch?v=LWxu4rkZBLw</a></li>
</ul>
<p>å…¶ä»–èµ„æºï¼š</p>
<ul>
<li><a href="https://www.videoproc.com/resource/h264-codec.htm">https://www.videoproc.com/resource/h264-codec.htm</a></li>
</ul>
]]></content>
      <categories>
        <category>è§†é¢‘æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>æ•°å­—è§†é¢‘</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•è®¡ç®—MS-SSIM</title>
    <url>/2020/02/25/how-to-calculate-the-MS-SSIM/</url>
    <content><![CDATA[<h2 id="ssimçš„æœ¬è´¨åŠå…¶ç¼ºç‚¹">SSIMçš„æœ¬è´¨åŠå…¶ç¼ºç‚¹</h2>
<p>åœ¨<a href="/2020/02/15/how-to-calculate-the-SSIM-in-FFmpeg/">FFmpegå¦‚ä½•è®¡ç®—å›¾åƒçš„SSIM</a>ä¸­ï¼Œè¯¦ç»†ä»‹ç»äº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„ç›¸å…³æ¦‚å¿µï¼Œå¹¶å¯¹FFmpegä¸­çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>å®ç°åšäº†è¯¦ç»†çš„åˆ†æã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ç®—æ³•åŸºäºHVSæ›´æ“…é•¿ä»å›¾åƒä¸­æå–ç»“æ„ä¿¡æ¯çš„äº‹å®ï¼Œå¹¶ä¸”åˆ©ç”¨ç»“æ„ç›¸ä¼¼åº¦æ¥è®¡ç®—å›¾åƒçš„æ„ŸçŸ¥è´¨é‡ã€‚åœ¨Z. Wangç­‰äººçš„è®ºæ–‡<strong>Multi-scale structural similarity for image quality assessment</strong>ä¸­ä¹Ÿæåˆ°ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ç®—æ³•è¦å¥½äºå½“æ—¶çš„å…¶å®ƒçš„æ„ŸçŸ¥å›¾åƒè´¨é‡æŒ‡æ ‡ã€‚</p>
<p>å°±å…¶æœ¬è´¨è€Œè¨€ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>æ˜¯ä¸€ç§å•å°ºåº¦çš„ç®—æ³•ï¼Œä½†æ˜¯å®é™…ä¸Šæ­£ç¡®çš„å›¾åƒå°ºåº¦å–å†³äºç”¨æˆ·çš„è§‚çœ‹æ¡ä»¶ï¼Œä¾‹å¦‚æ˜¾ç¤ºè®¾å¤‡çš„åˆ†è¾¨ç‡ï¼Œç”¨æˆ·çš„è§‚çœ‹è·ç¦»ç­‰ã€‚å› æ­¤ï¼Œç”¨å•å°ºåº¦çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ç®—æ³•æ¥è¯„ä¼°å›¾åƒçš„æ„ŸçŸ¥è´¨é‡ä¹Ÿå­˜åœ¨å…¶ç¼ºç‚¹ã€‚</p>
<span id="more"></span>
<h2 id="ms-ssimçš„åŸºæœ¬æ¦‚å¿µ">MS-SSIMçš„åŸºæœ¬æ¦‚å¿µ</h2>
<p>å›¾åƒç»†èŠ‚çš„å¯æ„ŸçŸ¥æ€§å–å†³äºï¼š</p>
<ul>
<li>å›¾åƒä¿¡å·çš„é‡‡æ ·å¯†åº¦</li>
<li>ç”¨æˆ·çš„è§‚çœ‹è·ç¦»</li>
<li>HVSçš„æ„ŸçŸ¥èƒ½åŠ›</li>
</ul>
<p>å½“å¦‚ä¸Šçš„å› ç´ å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆ™å¯¹ç»™å®šå›¾åƒçš„ä¸»è§‚è¯„ä¼°ä¹Ÿä¼šéšä¹‹å‘ç”Ÿå˜åŒ–ã€‚å•å°ºåº¦çš„SSIMç®—æ³•å¯èƒ½ä»…é€‚ç”¨äºæŸä¸ªç‰¹å®šçš„é…ç½®ã€‚ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œè®ºæ–‡<strong>Multi-scale structural similarity for image quality assessment</strong>åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ç®—æ³•çš„åŸºç¡€ä¸Šæå‡ºäº†å¦‚å›¾1æ‰€ç¤ºçš„å¤šå°ºåº¦çš„ç»“æ„ç›¸ä¼¼æ€§è¯„ä¼°ç®—æ³•ï¼Œå³<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mo>âˆ’</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">MS-SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ç®—æ³•ã€‚</p>
<p><img src="/2020/02/25/how-to-calculate-the-MS-SSIM/1.jpg" alt="å›¾1. MS-SSIMç®—æ³•"></p>
<p>å›¾1. MS-SSIMç®—æ³•ï¼ŒL è¡¨ç¤ºä½é€šæ»¤æ³¢å™¨ï¼Œ2â†“ è¡¨ç¤ºé‡‡æ ·é—´éš”ä¸º2çš„ä¸‹é‡‡æ ·</p>
<p>å› æ­¤ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mo>âˆ’</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">MS-SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>å®é™…ä¸Šæ˜¯ä¸€ç§ä»¥ä¸åŒåˆ†è¾¨ç‡åˆå¹¶å›¾åƒç»†èŠ‚çš„å›¾åƒè´¨é‡è¯„ä¼°æ–¹æ³•ã€‚å¯¹äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mo>âˆ’</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">MS-SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ï¼ŒåŸå§‹å›¾åƒçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>e</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">scale=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">c</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œå›¾åƒçš„æœ€å¤§<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>e</mi><mo>=</mo><mi>M</mi></mrow><annotation encoding="application/x-tex">scale=M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">c</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚å¯¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>e</mi><mo>=</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">scale=j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">c</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span>çš„å°ºåº¦è€Œè¨€ï¼Œå…¶äº®åº¦ã€å¯¹æ¯”åº¦ã€ç»“æ„çš„ç›¸ä¼¼æ€§åˆ†åˆ«è¡¨ç¤ºä¸ºï¼š</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>l</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">l_j(X,Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">c_j(X,Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">s_j(X,Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span></li>
</ul>
<p>å› æ­¤ï¼Œæ ¹æ®å›¾1å¯ä»¥å¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mo>âˆ’</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">MS-SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„è®¡ç®—æ–¹å¼ã€‚</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mo>âˆ’</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mo fence="false">[</mo><msub><mi>l</mi><mi>M</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><msup><mo fence="false">]</mo><msub><mi>Î±</mi><mi>M</mi></msub></msup><mo>â‹…</mo><munderover><mo>âˆ</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><mrow><mo fence="false">[</mo><msub><mi>c</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><msup><mo fence="false">]</mo><msub><mi>Î²</mi><mi>j</mi></msub></msup><mo fence="false">[</mo><msub><mi>s</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><msup><mo fence="false">]</mo><msub><mi>Î³</mi><mi>j</mi></msub></msup></mrow></mrow><annotation encoding="application/x-tex">MS-SSIM(X,Y)=\big[l_M(X,Y)\big]^{\alpha_M} \cdot \prod _{j=1}^{M}  {\big[c_j(X,Y)\big]^{\beta_j}\big[s_j(X,Y)\big]^{\gamma_j}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.254302em;vertical-align:-0.35001em;"></span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="delimsizing size1">]</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.904292em;"><span style="top:-3.3029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:-0.0037em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.2421130000000007em;vertical-align:-1.4137769999999998em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000006em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4137769999999998em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="delimsizing size1">]</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.089008em;"><span style="top:-3.3029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:-0.05278em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="delimsizing size1">]</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.904292em;"><span style="top:-3.3029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:-0.05556em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>ä¸€èˆ¬ï¼Œä»¤<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î±</mi><mi>j</mi></msub><mo>=</mo><msub><mi>Î²</mi><mi>j</mi></msub><mo>=</mo><msub><mi>Î³</mi><mi>j</mi></msub><mtext>Â Â </mtext><mo separator="true">,</mo><mtext>Â </mtext><mi>j</mi><mo>âˆˆ</mo><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mi>M</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\alpha_j=\beta_j=\gamma_j \ \ , \ j \in [1, M]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.9456279999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mclose">]</span></span></span></span>ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mo>âˆ’</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mo fence="false">[</mo><msub><mi>l</mi><mi>M</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><msup><mo fence="false">]</mo><msub><mi>Î±</mi><mi>M</mi></msub></msup><mo>â‹…</mo><munderover><mo>âˆ</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><mrow><mo fence="false">[</mo><msub><mi>c</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>â‹…</mo><msub><mi>s</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><msup><mo fence="false">]</mo><msub><mi>Î±</mi><mi>j</mi></msub></msup></mrow></mrow><annotation encoding="application/x-tex">MS-SSIM(X,Y)=\big[l_M(X,Y)\big]^{\alpha_M} \cdot \prod _{j=1}^{M}  {\big[c_j(X,Y) \cdot s_j(X,Y)\big]^{\alpha_j}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.254302em;vertical-align:-0.35001em;"></span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="delimsizing size1">]</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.904292em;"><span style="top:-3.3029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:-0.0037em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.2421130000000007em;vertical-align:-1.4137769999999998em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000006em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4137769999999998em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="delimsizing size1">]</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.904292em;"><span style="top:-3.3029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:-0.0037em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><strong>Multi-scale structural similarity for image quality assessment</strong>ç»™å‡ºäº†ä¸€ç§è®¡ç®—å„å°ºåº¦å‚æ•°çš„æ–¹æ³•ï¼Œå¹¶åŒæ—¶ç»™å‡ºä¸åŒå°ºåº¦çš„å‚æ•°å€¼ï¼š</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î±</mi><mn>1</mn></msub><mo>=</mo><mn>0.0448</mn></mrow><annotation encoding="application/x-tex">\alpha_1=0.0448</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">4</span><span class="mord">4</span><span class="mord">8</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î±</mi><mn>2</mn></msub><mo>=</mo><mn>0.2856</mn></mrow><annotation encoding="application/x-tex">\alpha_2=0.2856</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">2</span><span class="mord">8</span><span class="mord">5</span><span class="mord">6</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î±</mi><mn>3</mn></msub><mo>=</mo><mn>0.3001</mn></mrow><annotation encoding="application/x-tex">\alpha_3=0.3001</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">3</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î±</mi><mn>4</mn></msub><mo>=</mo><mn>0.2363</mn></mrow><annotation encoding="application/x-tex">\alpha_4=0.2363</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">2</span><span class="mord">3</span><span class="mord">6</span><span class="mord">3</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î±</mi><mn>5</mn></msub><mo>=</mo><mn>0.1333</mn></mrow><annotation encoding="application/x-tex">\alpha_5=0.1333</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">1</span><span class="mord">3</span><span class="mord">3</span><span class="mord">3</span></span></span></span></li>
</ul>
<h2 id="ms-ssimç®—æ³•çš„å®ç°">MS-SSIMç®—æ³•çš„å®ç°</h2>
<p>é‡‡ç”¨FFmpegä¸­çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„å®ç°æ–¹å¼æ¥å®ç°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mo>âˆ’</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">MS-SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚æ ¹æ®<a href="/2020/02/15/how-to-calculate-the-SSIM-in-FFmpeg/">FFmpegå¦‚ä½•è®¡ç®—å›¾åƒçš„SSIM</a>çš„ä»‹ç»ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mo>âˆ’</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mo fence="false">(</mo><mfrac><mrow><mn>2</mn><mi>s</mi><mn>1</mn><mo>â‹…</mo><mi>s</mi><mn>2</mn><mo>+</mo><mi>s</mi><mi>s</mi><mi>i</mi><mi>m</mi><msub><mi>C</mi><mn>1</mn></msub></mrow><mrow><mi>s</mi><msup><mn>1</mn><mn>2</mn></msup><mo>+</mo><mi>s</mi><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mi>s</mi><mi>s</mi><mi>i</mi><mi>m</mi><msub><mi>C</mi><mn>1</mn></msub></mrow></mfrac><msup><mo fence="false">)</mo><msub><mi>Î±</mi><mi>M</mi></msub></msup><mo>â‹…</mo><munderover><mo>âˆ</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><mo fence="false">(</mo><mfrac><mrow><mn>2</mn><mi>c</mi><mi>o</mi><mi>v</mi><mi>a</mi><mi>r</mi><mo>+</mo><mi>s</mi><mi>s</mi><mi>i</mi><mi>m</mi><msub><mi>C</mi><mn>2</mn></msub></mrow><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mi>s</mi><mo>+</mo><mi>s</mi><mi>s</mi><mi>i</mi><mi>m</mi><msub><mi>C</mi><mn>2</mn></msub></mrow></mfrac><msup><mo fence="false">)</mo><msub><mi>Î±</mi><mi>j</mi></msub></msup></mrow><annotation encoding="application/x-tex">MS-SSIM(X,Y)=\bigg(\frac{2s1 \cdot s2 + ssimC_{1}}{s1^2+s2^2+ssimC_{1}}\bigg)^{\alpha_{M}} \cdot \prod _{j=1}^{M}\bigg(\frac{2covar + ssimC_2}{vars + ssimC_2}\bigg)^{\alpha_j}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.454322em;vertical-align:-0.95003em;"></span><span class="mord"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord"><span class="delimsizing size3">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.504292em;"><span style="top:-3.9029000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:-0.0037em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.2421130000000007em;vertical-align:-1.4137769999999998em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000006em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4137769999999998em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord"><span class="delimsizing size3">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.5042920000000002em;"><span style="top:-3.9029000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:-0.0037em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>å¯¹äºå›¾åƒé‡‡æ ·è€Œè¨€ï¼Œé‡‡ç”¨ç®€å•çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>Ã—</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">2 \times 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>çš„å·ç§¯æ ¸æ‰§è¡Œå›¾åƒçš„ä¸‹é‡‡æ ·ï¼Œï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><mn>4</mn></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><mn>4</mn></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><mn>4</mn></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><mn>4</mn></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}
\frac{1}{4} &amp; \frac{1}{4} \\\\
\frac{1}{4} &amp; \frac{1}{4} \\\\
\end{bmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.8102160000000005em;vertical-align:-2.1551080000000002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6529999999999996em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â£</span></span></span><span style="top:-2.79999em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¢</span></span></span><span style="top:-3.3959900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¢</span></span></span><span style="top:-3.4119800000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¢</span></span></span><span style="top:-4.653em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¡</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6551080000000002em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-2.404892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-1.2048919999999999em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.1551080000000002em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6551080000000002em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.4048920000000003em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9551079999999996em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6529999999999996em;"><span style="top:-1.6499900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¦</span></span></span><span style="top:-2.79999em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¥</span></span></span><span style="top:-3.3959900000000003em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¥</span></span></span><span style="top:-3.4119800000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¥</span></span></span><span style="top:-4.653em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¤</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15003em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>å…·ä½“çš„é‡‡æ ·ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">void downsample_2x2_mean(pixel *input, int width, int height, pixel *output) &#123;</span><br><span class="line">    int downsample_width &#x3D;  width &gt;&gt; 1;</span><br><span class="line">    int downsample_height &#x3D; height &gt;&gt; 1;</span><br><span class="line"></span><br><span class="line">    for (int y &#x3D; 0; y &lt; downsample_height; y++) &#123;</span><br><span class="line">        for (int x &#x3D;0; x &lt; downsample_width; x++) &#123;</span><br><span class="line">            output[y * downsample_width + x] &#x3D; (input[2 * y * width + 2 * x] +</span><br><span class="line">                                                input[2 * y * width + 2 * x + 1] +</span><br><span class="line">                                                input[(2 * y + 1) * width + 2 * x] +</span><br><span class="line">                                                input[(2 * y + 1) * width + 2 * x + 1]) &#x2F; 4;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååˆ©ç”¨<a href="https://github.com/FFmpeg/FFmpeg/blob/master/tests/tiny_ssim.c">tiny_ssim</a>ä¸­çš„<code>ssim_plane()</code>è¿­ä»£è®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mo>âˆ’</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">MS-SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">float ms_ssim_plane(pixel *pix1, pixel *pix2, int width, int height, int scale) &#123;</span><br><span class="line">    for (int i &#x3D; 0; i &lt; w * h; i++) &#123;</span><br><span class="line">        ori_img1[i] &#x3D; pix1[i];</span><br><span class="line">        ori_img2[i] &#x3D; pix2[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; è®¡ç®—æ¯ä¸ªå°ºåº¦çš„ssimå€¼.</span><br><span class="line">    for (int i &#x3D; 1; i &lt;&#x3D; scale; i++) &#123;</span><br><span class="line">        if (i !&#x3D; 1) &#123;</span><br><span class="line">            downsample_2x2_mean(ori_img1, w, h, sample_img1);</span><br><span class="line">            downsample_2x2_mean(ori_img2, w, h, sample_img2);</span><br><span class="line">            w &#x3D; w &gt;&gt; 1;</span><br><span class="line">            h &#x3D; h &gt;&gt; 1;</span><br><span class="line">            for (int j &#x3D; 0; j &lt; w * h; j++) &#123;</span><br><span class="line">                ori_img1[j] &#x3D; sample_img1[j];</span><br><span class="line">                ori_img2[j] &#x3D; sample_img2[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        value &#x3D; ssim_plane(ori_img1, w, ori_img2, w, w, h, temp, NULL);</span><br><span class="line">        result *&#x3D; pow(value.C_S, WEIGHT[i-1]);</span><br><span class="line">        luminance_value[i-1] &#x3D; value.L;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    result *&#x3D; pow(luminance_value[scale-1], WEIGHT[scale-1]);</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®Œæ•´çš„ä»£ç å¯ä»¥å‚è€ƒ<a href="https://gitee.com/wangwei1237/wangwei1237/blob/master/2020/02/25/how-to-calculate-the-MS-SSIM/test_msssim.cpp">test_msssim.cpp</a>ã€‚ä»£ç çš„å¾ˆå¤§éƒ¨åˆ†æ˜¯ç”±æˆ‘çš„åŒäº‹<em>è´¤æ°</em>(github: <a href="https://github.com/bodhisatan">@bodhisatan</a>)å®ç°çš„ï¼Œåœ¨æ­¤ä¸€å¹¶è¡¨ç¤ºæ„Ÿè°¢ã€‚</p>
]]></content>
      <categories>
        <category>IVQA</category>
      </categories>
      <tags>
        <tag>SSIM</tag>
        <tag>MS-SSIM</tag>
      </tags>
  </entry>
  <entry>
    <title>The Proof of the ssim_end1() in FFmpeg</title>
    <url>/2020/02/18/the-proof-of-the-SSIM-in-FFMpeg/</url>
    <content><![CDATA[<p>è¿™ç¯‡æ–‡ç« æ˜¯å¯¹<a href="https://github.com/FFmpeg/FFmpeg/blob/master/tests/tiny_ssim.c">FFmpegä¸­è®¡ç®—SSIMç®—æ³•</a>ä¸­ç”¨åˆ°çš„å…¬å¼çš„è¯æ˜ã€‚å…¶ä¸­çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>s</mi><mn>1</mn></mrow><annotation encoding="application/x-tex">fs1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>s</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">fs2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">2</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>s</mi><mn>12</mn></mrow><annotation encoding="application/x-tex">fs12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord">2</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>s</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">fss</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span></span></span></span>çš„å«ä¹‰å’ŒFFmpegä¿æŒä¸€è‡´ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="/2020/02/15/how-to-calculate-the-SSIM-in-FFmpeg/">FFmpegå¦‚ä½•è®¡ç®—å›¾åƒçš„SSIM</a>ä¸­çš„è¯´æ˜ã€‚</p>
<span id="more"></span>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>2</mn><msub><mi>Î¼</mi><mi>a</mi></msub><msub><mi>Î¼</mi><mi>b</mi></msub><mo>+</mo><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>2</mn><msub><mi>Ïƒ</mi><mrow><mi>a</mi><mi>b</mi></mrow></msub><mo>+</mo><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><msubsup><mi>Î¼</mi><mi>a</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Î¼</mi><mi>b</mi><mn>2</mn></msubsup><mo>+</mo><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msubsup><mi>Ïƒ</mi><mi>a</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Ïƒ</mi><mi>b</mi><mn>2</mn></msubsup><mo>+</mo><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>Î¼</mi><mi>a</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>64</mn></mfrac><mi>f</mi><mi>s</mi><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>Î¼</mi><mi>b</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>64</mn></mfrac><mi>f</mi><mi>s</mi><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msubsup><mi>Ïƒ</mi><mi>a</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Ïƒ</mi><mi>b</mi><mn>2</mn></msubsup></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><mo stretchy="false">(</mo><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><msub><mi>Î¼</mi><mi>a</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><msub><mi>Î¼</mi><mi>b</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><msubsup><mi>Î¼</mi><mi>a</mi><mn>2</mn></msubsup><mo>âˆ’</mo><mn>2</mn><mo>â‹…</mo><mi>a</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>â‹…</mo><msub><mi>Î¼</mi><mi>a</mi></msub><mo>+</mo><mi>b</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><msubsup><mi>Î¼</mi><mi>b</mi><mn>2</mn></msubsup><mo>âˆ’</mo><mn>2</mn><mo>â‹…</mo><mi>b</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>â‹…</mo><msub><mi>Î¼</mi><mi>b</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><mo stretchy="false">(</mo><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mi>b</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo><mo>âˆ’</mo><mn>2</mn><mo stretchy="false">(</mo><msub><mi>Î¼</mi><mi>a</mi></msub><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mi>a</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>Î¼</mi><mi>b</mi></msub><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mi>b</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>+</mo><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mo stretchy="false">(</mo><msubsup><mi>Î¼</mi><mi>a</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Î¼</mi><mi>b</mi><mn>2</mn></msubsup><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><mo stretchy="false">(</mo><mi>f</mi><mi>s</mi><mi>s</mi><mo>âˆ’</mo><mn>2</mn><mo>â‹…</mo><mfrac><mn>1</mn><mn>64</mn></mfrac><mo stretchy="false">(</mo><mi>f</mi><mi>s</mi><msup><mn>1</mn><mn>2</mn></msup><mo>+</mo><mi>f</mi><mi>s</mi><msup><mn>2</mn><mn>2</mn></msup><mo stretchy="false">)</mo><mo>+</mo><mfrac><mn>1</mn><mn>64</mn></mfrac><mo stretchy="false">(</mo><mi>f</mi><mi>s</mi><msup><mn>1</mn><mn>2</mn></msup><mo>+</mo><mi>f</mi><mi>s</mi><msup><mn>2</mn><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><mo stretchy="false">(</mo><mi>f</mi><mi>s</mi><mi>s</mi><mo>âˆ’</mo><mfrac><mn>1</mn><mn>64</mn></mfrac><mo stretchy="false">(</mo><mi>f</mi><mi>s</mi><msup><mn>1</mn><mn>2</mn></msup><mo>+</mo><mi>f</mi><mi>s</mi><msup><mn>2</mn><mn>2</mn></msup><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><mfrac><mn>1</mn><mn>64</mn></mfrac><mo stretchy="false">(</mo><mn>64</mn><mi>f</mi><mi>s</mi><mi>s</mi><mo>âˆ’</mo><mi>f</mi><mi>s</mi><msup><mn>1</mn><mn>2</mn></msup><mo>âˆ’</mo><mi>f</mi><mi>s</mi><msup><mn>2</mn><mn>2</mn></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>Ïƒ</mi><mrow><mi>a</mi><mi>b</mi></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><msub><mi>Î¼</mi><mi>a</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><msub><mi>Î¼</mi><mi>b</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><munder><mo>âˆ‘</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>â‹…</mo><mi>b</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><mi>a</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><msub><mi>Î¼</mi><mi>b</mi></msub><mo>âˆ’</mo><mi>b</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><msub><mi>Î¼</mi><mi>a</mi></msub><mo>+</mo><msub><mi>Î¼</mi><mi>a</mi></msub><mo>â‹…</mo><msub><mi>Î¼</mi><mi>b</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><mo stretchy="false">(</mo><mi>f</mi><mi>s</mi><mn>12</mn><mo>âˆ’</mo><mi>f</mi><mi>s</mi><mn>1</mn><mo>â‹…</mo><msub><mi>Î¼</mi><mi>b</mi></msub><mo>âˆ’</mo><mi>f</mi><mi>s</mi><mn>2</mn><mo>â‹…</mo><msub><mi>Î¼</mi><mi>a</mi></msub><mo>+</mo><mi>f</mi><mi>s</mi><mn>1</mn><mo>â‹…</mo><msub><mi>Î¼</mi><mi>b</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><mo stretchy="false">(</mo><mi>f</mi><mi>s</mi><mn>12</mn><mo>âˆ’</mo><mfrac><mn>1</mn><mn>64</mn></mfrac><mi>f</mi><mi>s</mi><mn>1</mn><mo>â‹…</mo><mi>f</mi><mi>s</mi><mn>2</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mn>63</mn></mfrac><mfrac><mn>1</mn><mn>64</mn></mfrac><mo stretchy="false">(</mo><mn>64</mn><mi>f</mi><mi>s</mi><mn>12</mn><mo>âˆ’</mo><mi>f</mi><mi>s</mi><mn>1</mn><mo>â‹…</mo><mi>f</mi><mi>s</mi><mn>2</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>âˆ´</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>2</mn><mi>f</mi><mi>s</mi><mn>1</mn><mo>â‹…</mo><mi>f</mi><mi>s</mi><mn>2</mn><mo>+</mo><mn>6</mn><msup><mn>4</mn><mn>2</mn></msup><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>2</mn><mo>â‹…</mo><mn>64</mn><mi>f</mi><mi>s</mi><mn>12</mn><mo>âˆ’</mo><mn>2</mn><mi>f</mi><mi>s</mi><mn>1</mn><mi>f</mi><mi>s</mi><mn>2</mn><mo>+</mo><mn>63</mn><mo>â‹…</mo><mn>64</mn><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><mi>f</mi><mi>s</mi><msup><mn>1</mn><mn>2</mn></msup><mo>+</mo><mi>f</mi><mi>s</mi><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mn>6</mn><msup><mn>4</mn><mn>2</mn></msup><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>64</mn><mi>f</mi><mi>s</mi><mi>s</mi><mo>âˆ’</mo><mi>f</mi><mi>s</mi><msup><mn>1</mn><mn>2</mn></msup><mo>âˆ’</mo><mi>f</mi><mi>s</mi><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mn>63</mn><mo>â‹…</mo><mn>64</mn><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}

SSIM(a,b)&amp;=\frac{(2\mu_a\mu_b+C_1)(2\sigma_{ab}+C_2)}{(\mu_a^2+\mu_b^2+C_1)(\sigma_a^2+\sigma_b^2+C_2)} \\

\mu_a&amp;=\frac{1}{64}fs1 \\

\mu_b&amp;=\frac{1}{64}fs2 \\

\sigma_a^2+\sigma_b^2&amp;=\frac{1}{63}(\sum_{i,j}(a(i,j)-\mu_a)^2 + \sum_{i,j}(b(i,j)-\mu_b)^2) \\

&amp;=\frac{1}{63}\sum_{i,j}(a(i,j)^2+\mu_a^2-2 \cdot a(i,j) \cdot \mu_a+b(i,j)^2+\mu_b^2-2 \cdot b(i,j) \cdot \mu_b) \\

&amp;=\frac{1}{63}(\sum_{i,j}(a(i,j)^2+b(i,j)^2)-2(\mu_a\sum_{i,j}a(i,j)+\mu_b\sum_{i,j}b(i,j))+\sum_{i,j}
(\mu_a^2+\mu_b^2)) \\

&amp;=\frac{1}{63}(fss-2 \cdot \frac{1}{64}(fs1^2+fs2^2)+\frac{1}{64}(fs1^2+fs2^2) \\

&amp;=\frac{1}{63}(fss-\frac{1}{64}(fs1^2+fs2^2)) \\

&amp;=\frac{1}{63}\frac{1}{64}(64fss-fs1^2-fs2^2) \\

\sigma_{ab}&amp;=\frac{1}{63}\sum_{i,j}((a(i,j)-\mu_a)(b(i,j)-\mu_b)) \\

&amp;=\frac{1}{63}\sum_{i,j}(a(i,j) \cdot b(i,j)-a(i,j)\mu_b-b(i,j)\mu_a+\mu_a \cdot \mu_b) \\

&amp;=\frac{1}{63}(fs12-fs1 \cdot \mu_b-fs2 \cdot \mu_a+fs1 \cdot \mu_b) \\

&amp;=\frac{1}{63}(fs12-\frac{1}{64}fs1 \cdot fs2) \\

&amp;=\frac{1}{63}\frac{1}{64}(64fs12-fs1 \cdot fs2) \\

\therefore SSIM(a,b)&amp;=\frac{(2fs1 \cdot fs2+64^2C_1)(2 \cdot 64fs12-2fs1fs2+63 \cdot 64C_2)}{(fs1^2+fs2^2+64^2C_1)(64fss-fs1^2-fs2^2+63 \cdot 64C_2)}

\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:39.07702099999999em;vertical-align:-19.288510499999994em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:19.788510499999994em;"><span style="top:-21.852618499999995em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span></span></span><span style="top:-19.243870499999993em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-16.936430499999997em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-14.628990499999997em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span><span style="top:-11.593773499999994em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"></span></span><span style="top:-8.558556499999995em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"></span></span><span style="top:-5.523339499999996em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"></span></span><span style="top:-3.215899499999997em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"></span></span><span style="top:-0.9084594999999974em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"></span></span><span style="top:1.398980500000001em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">b</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:4.4341975em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"></span></span><span style="top:7.4694145em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"></span></span><span style="top:9.776854499999999em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"></span></span><span style="top:12.084294499999999em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"></span></span><span style="top:14.561402499999993em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mrel amsrm">âˆ´</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:19.288510499999994em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:19.788510499999994em;"><span style="top:-21.852618499999995em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7959079999999998em;"><span style="top:-2.398692em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span><span style="top:-3.0448em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.30130799999999996em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7959079999999998em;"><span style="top:-2.398692em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span><span style="top:-3.0448em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.30130799999999996em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">2</span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">b</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9873080000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-19.243870499999993em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span></span></span><span style="top:-16.936430499999997em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">2</span></span></span><span style="top:-14.628990499999997em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-11.593773499999994em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-8.558556499999995em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span><span style="top:-5.523339499999996em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.215899499999997em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span><span style="top:-0.9084594999999974em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord">6</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:1.398980500000001em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span><span style="top:4.4341975em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8723309999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.413777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">a</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:7.4694145em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:9.776854499999999em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mclose">)</span></span></span><span style="top:12.084294499999999em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord">6</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mclose">)</span></span></span><span style="top:14.561402499999993em;"><span class="pstrut" style="height:3.491108em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord"><span class="mord">4</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">6</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord"><span class="mord">4</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:19.288510499999994em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
]]></content>
      <categories>
        <category>IVQA</category>
      </categories>
      <tags>
        <tag>FFMpeg</tag>
        <tag>SSIM</tag>
      </tags>
  </entry>
  <entry>
    <title>FFmpegå¦‚ä½•è®¡ç®—å›¾åƒçš„SSIM</title>
    <url>/2020/02/15/how-to-calculate-the-SSIM-in-FFMpeg/</url>
    <content><![CDATA[<h2 id="ssimåŸºæœ¬æ¦‚å¿µ">SSIMåŸºæœ¬æ¦‚å¿µ</h2>
<p>å…³äº<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„å…·ä½“è§£é‡Šï¼Œæ­¤å¤„ä¸å†ä»‹ç»ï¼Œå…·ä½“å¯ä»¥å‚è§<a href="https://wangwei1237.gitee.io/digital-video-concept/">æ•°å­—è§†é¢‘ç›¸å…³æ¦‚å¿µ</a>ä¸­çš„<a href="https://wangwei1237.gitee.io/digital-video-concept/docs/4_2_2_3_StructuralSimilarityBasedApproaches.html">SSIMç®—æ³•</a>ä¸€èŠ‚çš„ä»‹ç»ã€‚</p>
<p>ç›´æ¥ç»™å‡º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„è®¡ç®—æ–¹æ³•ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>2</mn><msub><mi>Î¼</mi><mi>x</mi></msub><msub><mi>Î¼</mi><mi>y</mi></msub><mo>+</mo><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>2</mn><msub><mi>Ïƒ</mi><mrow><mi>x</mi><mi>y</mi></mrow></msub><mo>+</mo><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><msubsup><mi>Î¼</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Î¼</mi><mi>y</mi><mn>2</mn></msubsup><mo>+</mo><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msubsup><mi>Ïƒ</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Ïƒ</mi><mi>y</mi><mn>2</mn></msubsup><mo>+</mo><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">SSIM(x,y)=\frac{(2\mu_x\mu_y+C_1)(2\sigma_{xy}+C_2)}{(\mu_x^2+\mu_y^2+C_1)(\sigma_x^2+\sigma_y^2+C_2)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.496108em;vertical-align:-1.069108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">2</span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.069108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mn>1</mn></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>K</mi><mn>1</mn></msub><mi>L</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo separator="true">,</mo><msub><mi>C</mi><mn>2</mn></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>K</mi><mn>2</mn></msub><mi>L</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">C_1=(K_1L)^2, C_2=(K_2L)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">L</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">L</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>ã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>1</mn></msub><mo>â‰ª</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">K_1\ll1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰ª</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub><mo>â‰ª</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">K_2\ll1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰ª</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>å‡ä¸ºå¸¸æ•°ï¼Œè®¡ç®—æ—¶ï¼Œä¸€èˆ¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>1</mn></msub><mo>=</mo><mn>0.01</mn></mrow><annotation encoding="application/x-tex">K_1=0.01</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">1</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub><mo>=</mo><mn>0.03</mn></mrow><annotation encoding="application/x-tex">K_2=0.03</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">3</span></span></span></span>ã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span></span></span></span>æ˜¯ç°åº¦çš„åŠ¨æ€èŒƒå›´ï¼Œç”±å›¾åƒçš„æ•°æ®ç±»å‹å†³å®šï¼Œå¦‚æœæ•°æ®ä¸º<em>uint8</em>ï¼Œåˆ™<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mn>255</mn></mrow><annotation encoding="application/x-tex">L=255</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">5</span></span></span></span>ã€‚</p>
<span id="more"></span>
<h2 id="ssimè®¡ç®—ä¸­çš„å›¾åƒåˆ†å‰²">SSIMè®¡ç®—ä¸­çš„å›¾åƒåˆ†å‰²</h2>
<p>åœ¨æ•´å¹…å›¾ç‰‡çš„è·¨åº¦ä¸Šï¼Œå›¾åƒäº®åº¦çš„å‡å€¼å’Œæ–¹å·®å˜åŒ–è¾ƒä¸ºå‰§çƒˆï¼›å¹¶ä¸”å›¾åƒä¸Šä¸åŒåŒºå—çš„å¤±çœŸç¨‹åº¦ä¹Ÿæœ‰å¯èƒ½ä¸åŒï¼›å†è€…äººçœ¼ç›æ¯æ¬¡åªèƒ½èšç„¦äºä¸€å¤„ï¼Œæ›´å…³æ³¨å±€éƒ¨æ•°æ®è€Œéå…¨å±€æ•°æ®ã€‚å› æ­¤å¦‚ä¸Šçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ç®—æ³•ä¸èƒ½ç›´æ¥ä½œç”¨äºä¸€æ•´å‰¯å›¾åƒã€‚</p>
<p>åœ¨è®ºæ–‡<strong>Image quality assessment: From error visibility to structural similarity</strong>ä¸­ï¼Œä½œè€…é‡‡ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>11</mn><mo>Ã—</mo><mn>11</mn></mrow><annotation encoding="application/x-tex">11 \times 11</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span></span></span></span>çš„æ»‘åŠ¨çª—å£å°†æ•´å‰¯å›¾åƒåˆ†å‰²ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span>ä¸ªpatchï¼Œç„¶åè®¡ç®—æ¯ä¸€ä¸ªpatchçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ï¼Œæœ€åè®¡ç®—æ‰€æœ‰patchçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>å€¼çš„å¹³å‡æ•°ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>e</mi><mi>a</mi><mi>n</mi><mtext>Â Â </mtext><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo>:</mo><mi>M</mi><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">Mean \ \ SSIM:MSSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">e</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ï¼‰ä½œä¸ºæ•´å‰¯å›¾åƒçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚ä¸ºäº†é¿å…æ»‘åŠ¨çª—å£å¸¦æ¥çš„å—æ•ˆåº”ï¼Œåœ¨è®¡ç®—æ¯ä¸ªpatchçš„å‡å€¼<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¼</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Î¼</span></span></span></span>å’Œæ–¹å·®<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>æ—¶ï¼Œä½œè€…é‡‡ç”¨äº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi><mo>=</mo><mn>1.5</mn></mrow><annotation encoding="application/x-tex">\sigma=1.5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">5</span></span></span></span>çš„é«˜æ–¯å·ç§¯æ ¸ä½œåŠ æƒå¹³å‡ã€‚</p>
<p>å¦‚æœæ•´å‰¯å›¾åƒæœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span>ä¸ªpatchï¼Œåˆ™<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">MSSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„è®¡ç®—æ–¹å¼ä¸ºï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">MSSIM(X,Y) = \frac{1}{N}\sum_{i=1}^{N}{SSIM(x_i, y_i)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283360000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span></p>
<p>å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">SSIM(x_i, y_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ä¸ºç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>ä¸ªpatchçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚</p>
<h2 id="ffmpegä¸­è®¡ç®—ssimçš„ç®—æ³•">FFmpegä¸­è®¡ç®—SSIMçš„ç®—æ³•</h2>
<p>åœ¨FFmpegä¸­ï¼Œä¹Ÿæä¾›äº†è®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„å®ç°ï¼š<a href="https://github.com/FFmpeg/FFmpeg/blob/master/tests/tiny_ssim.c">tiny_ssim</a>ã€‚ä»ä»£ç çš„æ³¨é‡Šä¸­å¯ä»¥çœ‹åˆ°ï¼šä¸ºäº†æå‡ç®—æ³•çš„æ€§èƒ½ï¼Œæ²¡æœ‰é‡‡ç”¨è®ºæ–‡ä¸­çš„é«˜æ–¯åŠ æƒæ–¹å¼è®¡ç®—æ¯ä¸ªpatchçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¸€ä¸ª<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>Ã—</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">8 \times 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>çš„å—æ¥è®¡ç®—æ¯ä¸ªpatchçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line"> * tiny_ssim.c</span><br><span class="line"> * Computes the Structural Similarity Metric between two rawYV12 video files.</span><br><span class="line"> * original algorithm:</span><br><span class="line"> * Z. Wang, A. C. Bovik, H. R. Sheikh and E. P. Simoncelli,</span><br><span class="line"> *   &quot;Image quality assessment: From error visibility to structural similarity,&quot;</span><br><span class="line"> *   IEEE Transactions on Image Processing, vol. 13, no. 4, pp. 600-612, Apr. 2004.</span><br><span class="line"> *</span><br><span class="line"> * To improve speed, this implementation uses the standard approximation of</span><br><span class="line"> * overlapped 8x8 block sums, rather than the original gaussian weights.</span><br><span class="line"> *&#x2F;</span><br></pre></td></tr></table></figure>
<h3 id="standard-approximation-of-overlapped-8x8-block-sums">standard approximation of overlapped 8x8 block sums</h3>
<p>æ¥ä¸‹æ¥å°±è§£é‡Šä¸€ä¸‹æ³¨é‡Šä¸­çš„<em>standard approximation of overlapped 8x8 block sums</em>ç©¶ç«Ÿæ˜¯ä»€ä¹ˆå«ä¹‰ã€‚åœ¨è§£é‡Šçš„è¿‡ç¨‹ä¸­ä¼šåˆ†è§£æˆä¸¤ä¸ªéƒ¨åˆ†æ¥è§£é‡Šï¼š<em>overlapped 8x8 block</em>å’Œ<em>sums</em>ã€‚</p>
<h3 id="overlapped-8x8-blockçš„å«ä¹‰">overlapped 8x8 blockçš„å«ä¹‰</h3>
<p>FFmpegåœ¨è®¡ç®—å›¾åƒ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>æ—¶ï¼Œé¦–å…ˆä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>Ã—</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">4 \times 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>çš„å—å¤§å°æŠŠ<strong>å›¾1</strong>æ‰€ç¤ºçš„åˆ†è¾¨ç‡ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>Ã—</mo><mi>H</mi></mrow><annotation encoding="application/x-tex">W \times H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span></span></span></span>çš„å›¾åƒï¼š<br>
<img src="/2020/02/15/how-to-calculate-the-SSIM-in-FFMpeg/1.jpg" alt="å›¾1"><br>
å›¾1ï¼šåŸå§‹å›¾åƒ</p>
<p>åˆ†å‰²ä¸º<strong>å›¾2</strong>çš„æ ·å¼ã€‚<br>
<img src="/2020/02/15/how-to-calculate-the-SSIM-in-FFMpeg/2.jpg" alt="å›¾2"></p>
<p>å›¾2ï¼šåˆ†å‰²åçš„å›¾åƒ</p>
<p>å¯¹äº<strong>å›¾2</strong>ä¸­çš„æ¯ä¸€å—ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>æ¥è¡¨ç¤ºï¼ˆ<em>å›¾2ä¸­çš„çº¢è‰²å—</em>ï¼‰ï¼ŒFFmpegä½¿ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>åŠå…¶<strong>ä¸Šã€å³ã€å³ä¸Šå—</strong>ï¼ˆ<em>å›¾2ä¸­çš„ç»¿è‰²å—</em>ï¼‰æ¥è®¡ç®—å…¶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo>:</mo><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">SSIM:SSIM(x_{ij},y_{ij})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ã€‚</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>åŠå…¶<strong>ä¸Šã€å³ã€å³ä¸Šå—</strong>æ„æˆä¸€ä¸ª<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>Ã—</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">8\times8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>çš„åƒç´ å—ï¼Œå¹¶ä¸”è¯¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>Ã—</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">8\times8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>çš„å—å’Œè®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ç”¨åˆ°çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>Ã—</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">8\times8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>çš„å—å­˜åœ¨é‡åˆåƒç´ ï¼Œè¿™å°±æ˜¯æ³¨é‡Šä¸­çš„<strong>overlapped 8x8 block</strong>çš„çœŸæ­£å«ä¹‰ã€‚</p>
<p>å› æ­¤ï¼Œæ ¹æ®å¦‚ä¸Šè§„åˆ™ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>âˆˆ</mo><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mfrac><mi>H</mi><mn>4</mn></mfrac><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>j</mi><mo>âˆˆ</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mfrac><mi>W</mi><mn>4</mn></mfrac><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">i \in [1,\frac{H}{4}],j \in [0,\frac{W}{4}-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šç¬¬0è¡Œå’Œæœ€åä¸€åˆ—çš„å—ä¸ä¼šè®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚</p>
<p>æœ€åå¾—åˆ°FFmpegä¸­çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>è®¡ç®—æ–¹å¼ä¸ºï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo>=</mo><mi>M</mi><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mfrac><mi>H</mi><mn>4</mn></mfrac></munderover><munderover><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mfrac><mi>W</mi><mn>4</mn></mfrac><mo>âˆ’</mo><mn>1</mn></mrow></munderover><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">SSIM = MSSIM(X,Y) = \frac{1}{N}\sum_{i=1}^{\frac{H}{4}}\sum_{j=0}^{\frac{W}{4}-1}{SSIM(x_{ij}, y_{ij})}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.526047em;vertical-align:-1.4137769999999998em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.11227em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.451805em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8720928571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.1122700000000005em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.451805em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8720928571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4137769999999998em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span></p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mo stretchy="false">(</mo><mfrac><mi>H</mi><mn>4</mn></mfrac><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mfrac><mi>W</mi><mn>4</mn></mfrac><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N=(\frac{H}{4}-1)(\frac{W}{4}-1)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.04633em;vertical-align:-0.686em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.04633em;vertical-align:-0.686em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></p>
<h3 id="sumsçš„å«ä¹‰">sumsçš„å«ä¹‰</h3>
<p>å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬åˆ†æäº†FFmpegè®¡ç®—å›¾åƒçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„æ•´ä½“æ€è·¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­åˆ†æFFmpegæ˜¯å¦‚ä½•è®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">SSIM(x_{ij},y_{ij})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>çš„ã€‚</p>
<p>é¦–å…ˆåˆ©ç”¨å‡½æ•°<code>ssim_4x4x2_core()</code>æ¥è®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>å—çš„ç»“æ„ç›¸ä¼¼æ€§æŒ‡æ ‡ï¼Œä¸»è¦æ˜¯å¦‚ä¸‹çš„4ä¸ªæŒ‡æ ‡ï¼š</p>
<ul>
<li><em>s1</em>ï¼šå‚è€ƒå›¾åƒåœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>å—çš„åƒç´ ä¹‹å’Œ</li>
<li><em>s2</em>ï¼šå—æŸå›¾åƒåœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>å—çš„åƒç´ ä¹‹å’Œ</li>
<li><em>ss</em>ï¼šå‚è€ƒå›¾åƒå’Œå—æŸå›¾åƒåœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>å—çš„åƒç´ å¹³æ–¹ä¹‹å’Œ</li>
<li><em>s12</em>ï¼šå‚è€ƒå›¾åƒå’Œå—æŸå›¾åƒåœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>å—çš„å¯¹åº”åƒç´ ä¹˜ç§¯ä¹‹å’Œ</li>
</ul>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>1</mn><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mn>3</mn></msubsup><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mn>3</mn></msubsup><mrow><mi>x</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">s1=\sum_{i=0}^{3}\sum_{j=0}^{3}{x(i,j)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.389826em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>2</mn><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mn>3</mn></msubsup><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mn>3</mn></msubsup><mrow><mi>y</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">s2=\sum_{i=0}^{3}\sum_{j=0}^{3}{y(i,j)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.389826em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>s</mi><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mn>3</mn></msubsup><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mn>3</mn></msubsup><mrow><mo fence="false">(</mo><mo fence="false">(</mo><mi>x</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><msup><mo fence="false">)</mo><mn>2</mn></msup><mo>+</mo><mo fence="false">(</mo><mi>y</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><msup><mo fence="false">)</mo><mn>2</mn></msup><mo fence="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">ss=\sum_{i=0}^{3}\sum_{j=0}^{3}{\Big(\big(x(i,j)\big)^2+\big(y(i,j)\big)^2\Big)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="delimsizing size2">(</span></span><span class="mord"><span class="delimsizing size1">(</span></span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="delimsizing size1">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.054008em;"><span style="top:-3.3029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="delimsizing size1">(</span></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="delimsizing size1">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.054008em;"><span style="top:-3.3029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">)</span></span></span></span></span></span><br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>12</mn><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mn>3</mn></msubsup><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mn>3</mn></msubsup><mrow><mo fence="false">(</mo><mi>x</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>â‹…</mo><mi>y</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo fence="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">s12=\sum_{i=0}^{3}\sum_{j=0}^{3}{\big(x(i,j) \cdot y(i,j)\big)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.389826em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="delimsizing size1">(</span></span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">)</span></span></span></span></span></span></p>
<p>å¦‚ä¸Šçš„4ä¸ªæŒ‡æ ‡å°±æ˜¯æˆ‘ä»¬åç»­ä¼šç”¨åˆ°çš„sumsï¼Œè¯¥sumsä¹Ÿå°±æ˜¯<em>overlapped 8x8 block sums</em>ä¸­çš„<em>sums</em>çš„æ¦‚å¿µã€‚</p>
<h3 id="åˆ©ç”¨sumsè®¡ç®—å„å—çš„ssim">åˆ©ç”¨sumsè®¡ç®—å„å—çš„SSIM</h3>
<p>æ¥ä¸‹æ¥åˆ©ç”¨è¯¥sumså€¼è®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚</p>
<p>ä¸ºäº†æå‡æ•ˆç‡ï¼ŒFFmpegä¼šæŒ‰ç…§è¡Œæ¥è®¡ç®—æ¯ä¸€è¡Œçš„å„ä¸ªå—çš„sumsæ•°æ®ï¼Œå¹¶å°†æ¯ä¸ªè¡Œå—çš„sumsæ•°æ®å­˜å‚¨åœ¨é•¿åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>W</mi><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{W}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>çš„æ•°ç»„æŒ‡é’ˆsumï¼ˆ<code>(int(*)[4])</code>ï¼‰ä¸­ã€‚</p>
<p>å…¶ä¸­sumæŒ‡é’ˆæœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>sum0ï¼šå­˜å‚¨å½“å‰è¡Œçš„å„å—çš„sumsç»“æœ</li>
<li>sum1ï¼šå­˜å‚¨å½“å‰è¡Œçš„ä¸Šä¸€è¡Œçš„sumsç»“æœ</li>
</ul>
<p>å…ˆè®¡ç®—ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>è¡Œå—å’Œç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>è¡Œå—çš„sumsç»“æœï¼Œå¹¶åˆ†åˆ«å­˜å…¥<code>sum1</code>å’Œ<code>sum0</code>ä¸­ã€‚ç„¶åéå†ç¬¬<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>è¡Œå—çš„æ¯ä¸€ä¸ªå—ï¼Œå¹¶åˆ©ç”¨<code>sum1</code>å’Œ<code>sum0</code>ä¸­è®¡ç®—çš„ç»“æœæ¥è®¡ç®—æ¯ä¸€å—çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚</p>
<p>å‡½æ•°<code>ssim_end4()</code>å±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i-1,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i-1,j+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>çš„sumsä¿¡æ¯æ¥è®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">SSIM(x_{ij},y_{ij})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼š</p>
<ul>
<li>å…ˆå¯¹4ä¸ªå—çš„sumsç»“æœè¿›è¡ŒåŠ å’Œå¤„ç†ï¼Œå¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>Ã—</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">8\times8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>å—çš„sumsç»“æœ</li>
<li>ç„¶ååˆ©ç”¨è¯¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>Ã—</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">8\times8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>å—çš„sumsæ¥è®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span></li>
</ul>
<p>å‡½æ•°<code>ssim_end1()</code>å°±å±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>Ã—</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">8\times8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>å—çš„sumsä¿¡æ¯æ¥è®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚å…·ä½“çš„è®¡ç®—æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<p>å°†çº¢è‰²åŒºå—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>çš„å›¾åƒæ”¾å¤§ä¸€ç‚¹ï¼Œå¦‚å›¾3æ‰€ç¤ºã€‚æˆ‘ä»¬æ¥ä¸‹æ¥è®¡ç®—å…¶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ã€‚<br>
<img src="/2020/02/15/how-to-calculate-the-SSIM-in-FFMpeg/3.jpg" alt="å›¾3"><br>
å›¾3ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">block(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>çš„ç¤ºæ„å›¾</p>
<p>åœ¨è®¡ç®—æ—¶ï¼Œé¦–å…ˆå°†4ä¸ªåŒºå—çš„sumså€¼æ±‚å’Œï¼Œå¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>Ã—</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">8\times8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>åŒºå—çš„sumså€¼ï¼Œåˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>1</mn><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></msubsup><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">s1=\sum_{i=0}^{63}{x_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.253718em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>2</mn><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></msubsup><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">s2=\sum_{i=0}^{63}{y_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.253718em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>s</mi><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></msubsup><mrow><mo stretchy="false">(</mo><msubsup><mi>x</mi><mi>i</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>y</mi><mi>i</mi><mn>2</mn></msubsup><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">ss=\sum_{i=0}^{63}{(x_i^2+y_i^2)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.253718em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.441336em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.258664em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.441336em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.258664em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mn>12</mn><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></msubsup><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>â‹…</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">s12=\sum_{i=0}^{63}{(x_i \cdot y_i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.253718em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954008em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></li>
</ul>
<p>æ ¹æ®å¦‚ä¸Šçš„è®¡ç®—ï¼Œå¯ä»¥å¾—åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¼</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">\mu_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¼</mi><mi>y</mi></msub></mrow><annotation encoding="application/x-tex">\mu_y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¼</mi><mi>x</mi></msub><msub><mi>Î¼</mi><mi>y</mi></msub></mrow><annotation encoding="application/x-tex">\mu_x\mu_y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Î¼</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Î¼</mi><mi>y</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\mu_x^2+\mu_y^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.197216em;vertical-align:-0.383108em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Ïƒ</mi><mi>y</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\sigma_x^2+\sigma_y^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.197216em;vertical-align:-0.383108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïƒ</mi><mrow><mi>x</mi><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\sigma_{xy}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>ï¼š</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¼</mi><mi>x</mi></msub><mo>=</mo><mfrac><mn>1</mn><mn>64</mn></mfrac><mo>â‹…</mo><mi>s</mi><mn>1</mn></mrow><annotation encoding="application/x-tex">\mu_x=\frac{1}{64} \cdot s1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord">1</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¼</mi><mi>y</mi></msub><mo>=</mo><mfrac><mn>1</mn><mn>64</mn></mfrac><mo>â‹…</mo><mi>s</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">\mu_y=\frac{1}{64} \cdot s2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord">2</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¼</mi><mi>x</mi></msub><msub><mi>Î¼</mi><mi>y</mi></msub><mo>=</mo><mfrac><mn>1</mn><mrow><mn>64</mn><mo>â‹…</mo><mn>64</mn></mrow></mfrac><mo stretchy="false">(</mo><mi>s</mi><mn>1</mn><mo>â‹…</mo><mi>s</mi><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mu_x\mu_y=\frac{1}{64 \cdot 64}(s1 \cdot s2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">4</span><span class="mbin mtight">â‹…</span><span class="mord mtight">6</span><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Î¼</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Î¼</mi><mi>y</mi><mn>2</mn></msubsup><mo>=</mo><mfrac><mn>1</mn><mrow><mn>64</mn><mo>â‹…</mo><mn>64</mn></mrow></mfrac><mo fence="false">(</mo><mo stretchy="false">(</mo><mi>s</mi><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>s</mi><mn>2</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo fence="false">)</mo></mrow><annotation encoding="application/x-tex">\mu_x^2+\mu_y^2=\frac{1}{64 \cdot 64}\big((s1)^2+(s2)^2\big)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.197216em;vertical-align:-0.383108em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">4</span><span class="mbin mtight">â‹…</span><span class="mord mtight">6</span><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="delimsizing size1">(</span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size1">)</span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Ïƒ</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Ïƒ</mi><mi>y</mi><mn>2</mn></msubsup><mo>=</mo><mfrac><mn>1</mn><mrow><mn>64</mn><mo>â‹…</mo><mn>63</mn></mrow></mfrac><mo fence="false">(</mo><mn>64</mn><mo>â‹…</mo><mi>s</mi><mi>s</mi><mo>âˆ’</mo><mo stretchy="false">(</mo><mi>s</mi><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>âˆ’</mo><mo stretchy="false">(</mo><mi>s</mi><mn>2</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo fence="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_x^2+\sigma_y^2=\frac{1}{64 \cdot 63}\big(64 \cdot ss-(s1)^2- (s2)^2\big)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.061108em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.197216em;vertical-align:-0.383108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">4</span><span class="mbin mtight">â‹…</span><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="delimsizing size1">(</span></span><span class="mord">6</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size1">)</span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïƒ</mi><mrow><mi>x</mi><mi>y</mi></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mrow><mn>64</mn><mo>â‹…</mo><mn>63</mn></mrow></mfrac><mo stretchy="false">(</mo><mn>64</mn><mo>â‹…</mo><mi>s</mi><mn>12</mn><mo>âˆ’</mo><mi>s</mi><mn>1</mn><mo>â‹…</mo><mi>s</mi><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{xy}=\frac{1}{64 \cdot 63}(64 \cdot s12 - s1 \cdot s2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">4</span><span class="mbin mtight">â‹…</span><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord">6</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></li>
</ul>
<p>åˆ©ç”¨å¦‚ä¸Šçš„å…¬å¼ï¼ˆå…·ä½“æ¨å¯¼å¯ä»¥å‚è€ƒ<a href="/2020/02/18/the-proof-of-the-SSIM-in-FFmpeg/">ssim_end1()çš„æ¨å¯¼</a>ï¼‰å¯¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„å…¬å¼è¿›è¡Œè®¡ç®—å¯ä»¥å¾—åˆ°ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>2</mn><msub><mi>Î¼</mi><mi>x</mi></msub><msub><mi>Î¼</mi><mi>y</mi></msub><mo>+</mo><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>2</mn><msub><mi>Ïƒ</mi><mrow><mi>x</mi><mi>y</mi></mrow></msub><mo>+</mo><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><msubsup><mi>Î¼</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Î¼</mi><mi>y</mi><mn>2</mn></msubsup><mo>+</mo><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msubsup><mi>Ïƒ</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>Ïƒ</mi><mi>y</mi><mn>2</mn></msubsup><mo>+</mo><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">SSIM(x,y)=\frac{(2\mu_x\mu_y+C_1)(2\sigma_{xy}+C_2)}{(\mu_x^2+\mu_y^2+C_1)(\sigma_x^2+\sigma_y^2+C_2)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.496108em;vertical-align:-1.069108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">2</span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">Î¼</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">2</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.069108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>2</mn><mi>s</mi><mn>1</mn><mi>s</mi><mn>2</mn><mo>+</mo><mn>6</mn><msup><mn>4</mn><mn>2</mn></msup><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>2</mn><mo>â‹…</mo><mn>64</mn><mi>s</mi><mn>12</mn><mo>âˆ’</mo><mn>2</mn><mi>s</mi><mn>1</mn><mi>s</mi><mn>2</mn><mo>+</mo><mn>64</mn><mo>â‹…</mo><mn>63</mn><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><mi>s</mi><msup><mn>1</mn><mn>2</mn></msup><mo>+</mo><mi>s</mi><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mn>6</mn><msup><mn>4</mn><mn>2</mn></msup><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>64</mn><mi>s</mi><mi>s</mi><mo>âˆ’</mo><mi>s</mi><msup><mn>1</mn><mn>2</mn></msup><mo>âˆ’</mo><mi>s</mi><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mn>64</mn><mo>â‹…</mo><mn>63</mn><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">=\frac{(2s1s2+64^2C_1)(2\cdot64s12-2s1s2+64\cdot63C_2)}{(s1^2+s2^2+64^2C_1)(64ss-s1^2-s2^2+64\cdot63C_2)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.427108em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord"><span class="mord">4</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">6</span><span class="mord">4</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord">3</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">2</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord"><span class="mord">4</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">6</span><span class="mord">3</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>FFmpegä¸­ï¼Œå¯¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">C_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">C_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å®šä¹‰ä¸­çš„å› å­<strong>64</strong>æˆ–<strong>63</strong>ä¹Ÿæ˜¯æ ¹æ®ä¸Šé¢çš„å…¬å¼ï¼Œä½†æ˜¯ä»å…¬å¼çœ‹ï¼Œ<a href="https://trac.ffmpeg.org/ticket/8529"><strong>FFmpegå¯¹<code>ssim_c1</code>çš„è®¡ç®—å°‘ä¹˜äº†64</strong></a>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssim_c1 &#x3D; 0.01 * 0.01 * 255 * 255 * 64 + 0.5</span><br><span class="line">ssim_c2 &#x3D; 0.03 * 0.03 * 255 * 255 * 64 * 63 + 0.5</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œä¸ºäº†ç®€åŒ–å¤„ç†ï¼ŒFFmpegè¿˜åšäº†å¦‚ä¸‹çš„å®šä¹‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vars  &#x3D; ss  * 64 - s1 * s1 - s2 * s2;</span><br><span class="line">covar &#x3D; s12 * 64 - s1 * s2;</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œæœ€ç»ˆåœ¨FFmpegä¸­ï¼Œè®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„å…¬å¼ä¸ºï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>2</mn><mi>s</mi><mn>1</mn><mi>s</mi><mn>2</mn><mo>+</mo><mi>s</mi><mi>s</mi><mi>i</mi><mi>m</mi><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>2</mn><mi>c</mi><mi>o</mi><mi>v</mi><mi>a</mi><mi>r</mi><mo>+</mo><mi>s</mi><mi>s</mi><mi>i</mi><mi>m</mi><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><mi>s</mi><msup><mn>1</mn><mn>2</mn></msup><mo>+</mo><mi>s</mi><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mi>s</mi><mi>s</mi><mi>i</mi><mi>m</mi><msub><mi>C</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>v</mi><mi>a</mi><mi>r</mi><mi>s</mi><mo>+</mo><mi>s</mi><mi>s</mi><mi>i</mi><mi>m</mi><msub><mi>C</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">SSIM(x,y)=\frac{(2s1s2+ssimC_1)(2covar+ssimC_2)}{(s1^2+s2^2+ssimC_1)(vars + ssimC_2)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">2</span><span class="mord mathdefault">s</span><span class="mord">1</span><span class="mord mathdefault">s</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>å¦‚ä¸Šçš„å…¬å¼å°±æ˜¯å‡½æ•°<code>ssim_end1()</code>ä¸­æœ€ç»ˆçš„è®¡ç®—æ–¹å¼ã€‚</p>
<h3 id="åˆ©ç”¨å„å—çš„ssimè®¡ç®—å›¾åƒçš„ssim">åˆ©ç”¨å„å—çš„SSIMè®¡ç®—å›¾åƒçš„SSIM</h3>
<p>è®¡ç®—å®Œæ‰€æœ‰å—çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ä¹‹åï¼Œå°±å¯ä»¥è®¡ç®—æ‰€æœ‰å—çš„å¹³å‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>å¹¶ä½œä¸ºè¯¥å›¾åƒçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ï¼š</p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mfrac><mi>H</mi><mn>4</mn></mfrac></munderover><munderover><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mfrac><mi>W</mi><mn>4</mn></mfrac><mo>âˆ’</mo><mn>1</mn></mrow></munderover><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">SSIM(X,Y)= \frac{1}{N}\sum_{i=1}^{\frac{H}{4}}\sum_{j=0}^{\frac{W}{4}-1}{SSIM(x_{ij}, y_{ij})}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.526047em;vertical-align:-1.4137769999999998em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.11227em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.451805em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8720928571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.1122700000000005em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.451805em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8720928571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4137769999999998em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span></p>
<p class="katex-block has-jax"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mo stretchy="false">(</mo><mfrac><mi>H</mi><mn>4</mn></mfrac><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mfrac><mi>W</mi><mn>4</mn></mfrac><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N=(\frac{H}{4}-1)(\frac{W}{4}-1)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.04633em;vertical-align:-0.686em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.04633em;vertical-align:-0.686em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></p>
<h3 id="ç¼–ç è¿‡ç¨‹ä¸­çš„æŠ€å·§">ç¼–ç è¿‡ç¨‹ä¸­çš„æŠ€å·§</h3>
<p>åœ¨FFmpegè®¡ç®—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>çš„ç®—æ³•å®ç°ä¸­ï¼Œä¸ºäº†æå‡æ•ˆç‡å’ŒæŠ½è±¡ä»£ç é€»è¾‘ï¼Œä¹Ÿåˆ©ç”¨äº†å¾ˆå¤šçš„ç¼–ç¨‹æŠ€å·§ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>è®¡ç®—YUVå„åˆ†é‡å›¾åƒå®½åº¦æ—¶ç”¨<code>w &gt;&gt; !!i</code></li>
<li>ä¸ºäº†é¿å…å¯¹ç¬¬0è¡Œçš„ç‰¹æ®Šå¤„ç†ï¼Œé‡‡ç”¨ä¸¤å±‚å¾ªç¯æ¥å¤„ç†</li>
<li>è®¡ç®—æ¯ä¸€è¡Œçš„å„å—çš„sumsä¿¡æ¯æ—¶ï¼Œä¸ºäº†é™ä½å¾ªç¯æ¬¡æ•°ï¼Œæ¯æ¬¡å¾ªç¯è®¡ç®—2ä¸ªå—çš„sumsç»“æœï¼Œ<code>ssim_4x4x2_core</code>çš„å‡½æ•°åå¯èƒ½å°±æ˜¯è¿™ä¹ˆæ¥çš„ã€‚</li>
<li>è®¡ç®—æ¯ä¸€è¡Œçš„å„å—çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>æ—¶ï¼Œä¸ºäº†é™ä½å¾ªç¯æ¬¡æ•°ï¼Œæ¯æ¬¡å¾ªç¯è®¡ç®—4ä¸ªå—çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>S</mi><mi>I</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">SSIM</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>ï¼Œ<code>ssim_end4</code>çš„å‡½æ•°åå¯èƒ½å°±æ˜¯è¿™ä¹ˆæ¥çš„ã€‚</li>
</ul>
<h2 id="æ„Ÿè°¢">æ„Ÿè°¢</h2>
<p>åˆ†æè¿‡ç¨‹ç¦»ä¸å¼€å’Œè´¤æ°(github: <a href="https://github.com/bodhisatan">@bodhisatan</a>)çš„ä¸æ–­è®¨è®ºå’Œäº¤æµï¼Œæ„Ÿè°¢@è´¤æ°åœ¨ç¹å¿™çš„å·¥ä½œä¹‹ä½™æŠ½å‡ºæ—¶é—´æ¥ä¸€èµ·åˆ†æFFmpegä¸­SSIMç®—æ³•çš„å®ç°åŸç†ã€‚</p>
]]></content>
      <categories>
        <category>IVQA</category>
      </categories>
      <tags>
        <tag>FFMpeg</tag>
        <tag>SSIM</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³hexo-asset-imageçš„å›¾ç‰‡åœ°å€é”™è¯¯é—®é¢˜</title>
    <url>/2020/02/05/handle-the-bug-of-hexo-asset-image-plugin/</url>
    <content><![CDATA[<p>ç”±äº<code>hexo-asset-image</code>æ’ä»¶å­˜åœ¨bugï¼Œä¼šå¯¼è‡´åšæ–‡ä¸­å¼•ç”¨å›¾ç‰‡æ—¶æ— æ³•ç”Ÿæˆæ­£ç¡®çš„é“¾æ¥åœ°å€ï¼Œè¿›è€Œå¯¼è‡´å›¾ç‰‡æ— æ³•è®¿é—®çš„ç°è±¡ã€‚<br>
å…·ä½“è§£å†³æ–¹æ¡ˆä¸ºå°†æ–‡ä»¶<code>node_modules/hexo-asset-image/index.js</code>æ›¿æ¢ä¸ºå¦‚ä¸‹çš„å†…å®¹ï¼š</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">str, m, i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> version = <span class="built_in">String</span>(hexo.version).split(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">hexo.extend.filter.register(<span class="string">&#x27;after_post_render&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = hexo.config;</span><br><span class="line">  <span class="keyword">if</span>(config.post_asset_folder)&#123;</span><br><span class="line">    	<span class="keyword">var</span> link = data.permalink;</span><br><span class="line">	<span class="keyword">if</span>(version.length &gt; <span class="number">0</span> &amp;&amp; <span class="built_in">Number</span>(version[<span class="number">0</span>]) == <span class="number">3</span>)</span><br><span class="line">	   <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	   <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span></span><br><span class="line">	<span class="keyword">var</span> endPos = link.lastIndexOf(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toprocess = [<span class="string">&#x27;excerpt&#x27;</span>, <span class="string">&#x27;more&#x27;</span>, <span class="string">&#x27;content&#x27;</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      <span class="keyword">var</span> key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> $ = cheerio.load(data[key], &#123;</span><br><span class="line">        ignoreWhitespace: <span class="literal">false</span>,</span><br><span class="line">        xmlMode: <span class="literal">false</span>,</span><br><span class="line">        lowerCaseTags: <span class="literal">false</span>,</span><br><span class="line">        decodeEntities: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">&#x27;img&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> ($(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>))&#123;</span><br><span class="line">			<span class="comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span></span><br><span class="line">			<span class="keyword">var</span> src = $(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>).replace(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">			<span class="keyword">if</span>(!<span class="regexp">/http[s]*.*|\/\/.*/</span>.test(src) &amp;&amp;</span><br><span class="line">			   !<span class="regexp">/^\s*\//</span>.test(src)) &#123;</span><br><span class="line">			  <span class="comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span></span><br><span class="line">			  <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">			  <span class="keyword">var</span> linkArray = link.split(<span class="string">&#x27;/&#x27;</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">			  &#125;);</span><br><span class="line">			  <span class="keyword">var</span> srcArray = src.split(<span class="string">&#x27;/&#x27;</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span> &amp;&amp; elem != <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">			  &#125;);</span><br><span class="line">			  <span class="keyword">if</span>(srcArray.length &gt; <span class="number">1</span>)</span><br><span class="line">				srcArray.shift();</span><br><span class="line">			  src = srcArray.join(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">			  $(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>, config.root + link + src);</span><br><span class="line">			  <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">&quot;update link as:--&gt;&quot;</span>+config.root + link + src);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">&quot;no src attr, skipped...&quot;</span>);</span><br><span class="line">			<span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info($(<span class="built_in">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨hexoå’Œgithubæ­å»ºä¸ªäººåšå®¢</title>
    <url>/2020/02/05/use-hexo-and-github-for-blog/</url>
    <content><![CDATA[<h2 id="åˆ›å»ºgithubä»“åº“">åˆ›å»ºgithubä»“åº“</h2>
<p>é¦–å…ˆæ‰“å¼€<a href="https://github.com/">github</a>ï¼Œç‚¹å‡»<code>New repository</code>ï¼Œåˆ›å»ºä¸€ä¸ªæ–°ä»“åº“ç”¨äºå­˜å‚¨åšå®¢çš„æ‰€æœ‰å†…å®¹ã€‚</p>
<p>ä»“åº“åå¿…é¡»ä¸ºï¼š<code>è´¦æˆ·å.github.io</code>ï¼Œå¹¶ä¸”éœ€è¦å‹¾é€‰<strong>Initialize this repository with a README</strong>ã€‚</p>
<p>åœ¨å»ºå¥½çš„ä»“åº“å³ä¾§æœ‰ä¸ª<strong>settings</strong>æŒ‰é’®ï¼Œç‚¹å‡»<strong>settings</strong>ï¼Œå‘ä¸‹æ»‘åŠ¨åˆ°<strong>GitHub Pages</strong>ï¼Œä¼šå‘ç°æœ‰ä¸ªç½‘å€ï¼Œgithubä¼šæŠŠè¯¥ä»“åº“ä¸­çš„é¡¹ç›®éƒ¨ç½²åˆ°è¯¥ç½‘å€ä¸‹ï¼Œè¯¥ç½‘å€ä¹Ÿæ˜¯åšå®¢çš„é»˜è®¤åœ°å€ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è´­ä¹°åŸŸåï¼Œå°†å…¶æ¢æˆå–œæ¬¢çš„åœ°å€ã€‚</p>
<span id="more"></span>
<p><img src="/2020/02/05/use-hexo-and-github-for-blog/1.jpg" alt></p>
<p><img src="/2020/02/05/use-hexo-and-github-for-blog/2.jpg" alt></p>
<h2 id="å‡†å¤‡node-jsç¯å¢ƒ">å‡†å¤‡node.jsç¯å¢ƒ</h2>
<p>ç”±äºhexoæ˜¯åŸºäº<a href="https://nodejs.org/en/">node.js</a>å¼€å‘çš„ï¼Œå› æ­¤åœ¨å®‰è£…hexoä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…node.jså¹¶é…ç½®å“åº”çš„node.jsç¯å¢ƒã€‚å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/02/05/use-hexo-and-github-for-blog/3.jpg" alt></p>
<h2 id="å‡†å¤‡hexoç¯å¢ƒ">å‡†å¤‡hexoç¯å¢ƒ</h2>
<p>æ ¹æ®<a href="https://hexo.io/">hexoå®˜ç½‘</a>çš„æç¤ºï¼Œå®‰è£…hexoã€‚å…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br><span class="line">$ hexo init blog</span><br><span class="line">$ cd blog</span><br><span class="line">$ npm install</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶hexoä¼šåœ¨4000ç«¯å£å¯åŠ¨ä¸€ä¸ªwebserverï¼Œç”¨æµè§ˆå™¨è®¿é—®<code>localhost:4000</code>åˆ™ä¼šçœ‹åˆ°åˆå§‹åŒ–ä¹‹åé»˜è®¤çš„ç«™ç‚¹ã€‚</p>
<h2 id="å®‰è£…hexoæ’ä»¶">å®‰è£…hexoæ’ä»¶</h2>
<h3 id="hexo-generator-category">hexo-generator-category</h3>
<p>è¯¥æ’ä»¶ç”¨äºè‡ªåŠ¨ç”Ÿæˆcategoryï¼Œå…·ä½“å®‰è£…æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-generator-category --save</span><br><span class="line">$ hexo new page categories</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¿®æ”¹<code>source/categories/index.md</code>çš„å†…å®¹ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2020-02-05 11:53:35</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">layout: &quot;categories&quot;</span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h3 id="hexo-generator-tag">hexo-generator-tag</h3>
<p>è¯¥æ’ä»¶ç”¨äºè‡ªåŠ¨ç”Ÿæˆtagsï¼Œå…·ä½“å®‰è£…æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-generator-tag --save</span><br><span class="line">$ hexo new page tags</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¿®æ”¹<code>source/tags/index.md</code>çš„å†…å®¹ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: tags</span><br><span class="line">date: 2020-02-05 11:53:58</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">layout: &quot;tags&quot;</span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h3 id="hexo-asset-image">hexo-asset-image</h3>
<p>è¯¥æ’ä»¶ä¸»è¦ç”¨äºè§£å†³åœ¨æ–‡ç« ä¸­å¼•ç”¨å›¾ç‰‡çš„åœºæ™¯ï¼Œå…·ä½“å®‰è£…æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>
<p>å®‰è£…è¯¥æ’ä»¶åï¼Œåˆ©ç”¨<code>hexo new post 'test'</code>ç”Ÿæˆæ–°æ–‡ç« å†…å®¹æ—¶ï¼Œä¼šåœ¨<code>source/_posts</code>ç›®å½•ä¸‹åŒæ—¶ç”Ÿæˆ<code>test.md</code>å’Œ<code>testç›®å½•</code>ï¼Œ<code>test.md</code>ä¸­éœ€è¦çš„å›¾ç‰‡å¯ä»¥å­˜å‚¨åœ¨<code>testç›®å½•</code>ä¸‹ã€‚åœ¨æ–‡æ¡£ä¸­ï¼Œé‡‡ç”¨å¦‚ä¸‹çš„æ–¹å¼æ¥å¼•ç”¨å›¾ç‰‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">![å›¾ç‰‡çš„æè¿°ä¿¡æ¯](1.jpg)</span><br></pre></td></tr></table></figure>
<p>å…³äºhexo-asset-imageç”Ÿæˆå›¾ç‰‡çš„bugï¼Œå¯ä»¥å‚è€ƒæ–‡ç« ï¼š<a href="/2020/02/05/handle-the-bug-of-hexo-asset-image-plugin/">è§£å†³hexo-asset-imageçš„å›¾ç‰‡åœ°å€é”™è¯¯é—®é¢˜</a></p>
<h3 id="hexo-deployer-git">hexo-deployer-git</h3>
<p>è¯¥æ’ä»¶ç”¨äºå°†ç¼–è¯‘åç”Ÿæˆçš„ç«™ç‚¹å†…å®¹å‘å¸ƒåˆ°ç¬¬ä¸€æ­¥åˆ›å»ºçš„githubä»“åº“ä¸­ï¼Œä»è€Œå®ç°å†…å®¹æ›´æ–°ã€‚å…·ä½“å®‰è£…æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm add hexo-deployer-git</span><br></pre></td></tr></table></figure>
<p>ç„¶åé…ç½®_config.ymlä¸­çš„<code>url</code>å’Œ<code>deploy</code>é…ç½®ï¼Œä»¥ä¾¿å¯ä»¥é€šè¿‡è¯¥æ’ä»¶è‡ªåŠ¨éƒ¨ç½²é¡¹ç›®ã€‚å…·ä½“é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">https://wangwei1237.github.io/</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/wangwei1237/wangwei1237.github.io</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®å®Œæ¯•ä¹‹åï¼Œå¦‚æœé¡¹ç›®å†…å®¹å‘ç”Ÿä¿®æ”¹ï¼Œåˆ™åˆ©ç”¨å¦‚ä¸‹çš„å‘½ä»¤å°±å¯ä»¥å®Œæˆè‡ªåŠ¨å‘å¸ƒï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo generate</span><br><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>github</tag>
        <tag>å»ºç«™</tag>
      </tags>
  </entry>
  <entry>
    <title>å‡¡æ‰€è¿‡å¾€ï¼Œçš†æ˜¯åºç« </title>
    <url>/2020/02/05/where-of-what-is-past-is-prologue/</url>
    <content><![CDATA[<p>å‡¡æ‰€è¿‡å¾€ï¼Œçš†æ˜¯åºç« ï¼Œæ–°çš„ä¸€å¹´ï¼Œç”¨4ä¸ªå…³é”®è¯æ¥è®²ä¸€è®²2019å¹´è‡ªå·±å¿ƒä¸­çš„è¿‡å¾€å’Œåºç« ã€‚</p>
<p><img src="/2020/02/05/where-of-what-is-past-is-prologue/1.jpg" alt></p>
<span id="more"></span>
<h2 id="å˜åŒ–">å˜åŒ–</h2>
<p>å¦‚æœè¦ç”¨1ä¸ªè¯æ¥å½¢å®¹2019å¹´çš„è¯ï¼Œæˆ‘è§‰å¾—å°±æ˜¯ å˜åŒ–äº†ã€‚æ— è®ºå†…éƒ¨ï¼Œè¿˜æ˜¯å¤–éƒ¨ï¼Œéƒ½åœ¨å‘ç”Ÿç€ç¿»å¤©è¦†åœ°çš„å˜åŒ–ã€‚å˜åŒ–è¿™ç§æ»‹å‘³èµ·åˆå¾ˆç—›è‹¦ï¼Œä½†æ˜¯å´è•´å«ç€æ— é™çš„æœºä¼šã€‚</p>
<p>æœªæ¥ï¼Œå˜åŒ–ä¼šæ˜¯å¸¸æ€ã€‚å·¥ä½œæ–¹å¼è¦å˜ï¼Œå·¥å…·å¹³å°è¦å˜ï¼Œå¼€å‘è¯­è¨€è¦å˜â€¦â€¦æ‰€æœ‰çš„äº‹æƒ…éƒ½åœ¨å‘ç€å¥½çš„æ–¹å‘å˜åŒ–ã€å‘å±•ã€‚</p>
<p>åœ¨è¿™ä¸ªå˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¸èƒ½éšæ³¢é€æµï¼Œä¹Ÿä¸èƒ½å›ºå®ˆå·±è§ã€‚éœ€è¦é¡ºåº”å˜åŒ–ï¼Œæ‰¾åˆ°å…¶ä¸­çš„æœºä¼šï¼Œé¡ºåŠ¿è€Œä¸ºï¼Œä¹˜é£è€Œèµ·ã€‚</p>
<h2 id="å­¦ä¹ ">å­¦ä¹ </h2>
<p>åœ¨å¿«é€Ÿçš„å˜åŒ–ä¸­ï¼Œæ€ä¹ˆæ‰èƒ½ä¹˜é£è€Œèµ·ï¼Ÿç§˜è¯€ä¹Ÿå°±æ˜¯ å­¦ä¹ äº†ã€‚</p>
<p>2019å¹´ï¼Œæˆ‘å­¦ä¹ äº†openglï¼Œkotlinï¼›</p>
<p>2019å¹´ï¼Œå­¦ä¹ äº†æ•°å­—è§†é¢‘ï¼Œffmpegï¼Œopencvï¼›</p>
<p>2019å¹´ï¼Œå­¦ä¹ äº†Androidçš„ç›¸æœºç³»ç»Ÿï¼Œå­¦ä¹ äº†é€†å‘ç ´è§£ï¼›</p>
<p>2019å¹´ï¼Œå­¦ä¹ äº†å¦‚ä½•å†™ä½œï¼Œå­¦ä¹ äº†å¦‚ä½•æ¼”è®²ï¼Œå­¦ä¹ äº†å¦‚ä½•ç³»ç»ŸåŒ–æ€è€ƒâ€¦â€¦</p>
<p>åœ¨å­¦æ ¡çš„æ—¶å€™ï¼Œä¸ºäº†å·¥ä½œè€Œå­¦ä¹ ã€‚ç°åœ¨æˆ–è€…æœªæ¥ï¼Œè¦ä¸ºäº†å­¦ä¹ è€Œå·¥ä½œï¼Œä¸æ–­å­¦ä¹ æ–°çš„æŠ€èƒ½ã€‚</p>
<p>å­¦ä¹ æ˜¯åº”å¯¹å„ç§å˜åŒ–çš„ä¸äºŒæ³•é—¨ã€‚å­¦ä¹ ï¼Œåœ¨è·¯ä¸Šâ€¦â€¦</p>
<h2 id="åˆ›æ–°">åˆ›æ–°</h2>
<p>åˆ›æ–°è¿™ä¸ªè¯å‘¢ï¼Œæ€»ä¼šå’Œ é€ è½®å­è¿™ä¸ªè¯å…³è”èµ·æ¥ã€‚</p>
<p>2019å¹´ï¼Œ é€ è½®å­è¿™ä¸ªè¯å¾ˆé¢‘ç¹ï¼Œé¢‘ç¹çš„æœ‰ç‚¹ä»¤æˆ‘ä¸çŸ¥æ‰€æªã€‚å®é™…ä¸Šï¼Œæˆ‘ä¸ªäººä¸åå¯¹é€ è½®å­ï¼Œä½†æ˜¯åå¯¹ ä¸ºäº†é€ è½®å­è€Œé€ è½®å­ã€‚æ¯ç§æŠ€æœ¯éƒ½æœ‰ä»–çš„èƒ½åŠ›è¾¹ç•Œï¼Œåœ¨ é€ è½®å­çš„æ—¶å€™ï¼Œè¦é¦–å…ˆè¯†åˆ«åˆ°èƒ½åŠ›çš„è¾¹ç•Œï¼Œç„¶åæ‰¾åˆ°ä¸€ç§å¿«é€Ÿæœ‰æ•ˆçš„æ–¹å¼æ¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜ï¼Œè¿™æ‰æ˜¯åˆ›æ–°ã€‚</p>
<p>æŠ€æœ¯çš„è¿›æ­¥å°±æ˜¯ä¸€ä¸ªé€ è½®å­çš„è¿‡ç¨‹ã€‚ä¸ºä»€ä¹ˆæœ‰äº†c++è¿˜ä¼šæœ‰javaï¼Œæœ‰äº†javaè¿˜ä¼šæœ‰kotlinï¼Ÿä¸ºä»€ä¹ˆæœ‰äº†è‹¹æœè¿˜ä¼šæœ‰å®‰å“ï¼Ÿä¸ºä»€ä¹ˆæœ‰äº†å¿«æ‰‹è¿˜ä¼šæœ‰æŠ–éŸ³ï¼Ÿâ€¦â€¦</p>
<p>æœªæ¥ï¼Œåœ¨åˆ›æ–°çš„è·¯ä¸Šï¼Œéœ€è¦æ›´å¤šçš„è·µè¡Œwork smarter not work harderã€‚</p>
<p><img src="/2020/02/05/where-of-what-is-past-is-prologue/2.jpg" alt></p>
<h2 id="çªç ´">çªç ´</h2>
<p>æ¯«æ— ç–‘é—®ï¼Œæœªæ¥è‚¯å®šæ˜¯æ–°äººçš„å¤©ä¸‹ã€‚</p>
<p>æœªæ¥éœ€è¦æ›´å¤šçš„æƒ³ï¼Œæ€ä¹ˆèƒ½å¤Ÿè®©æ–°äººå¯ä»¥ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šæˆé•¿ï¼›ä¹Ÿè¦æ›´å¤šçš„æƒ³ï¼Œæ€ä»¬æ ·æ‰èƒ½å¤Ÿè®©è‡ªå·±æˆä¸ºäººè€å¿ƒä¸è€çš„è€æ–°äººã€‚</p>
<p>å·¥ä½œä¸­ï¼Œæ›´æ— é¡»ç»™è‡ªå·±è®¾é™ï¼Œè¿™ä¸ªæˆ‘å¯èƒ½ä¸è¡Œå‘¢ï¼Œé‚£ä¸ªæˆ‘å¯èƒ½ä¹Ÿæä¸å®šå‘€ï¼Œè¿™ä¸ªæˆ‘æ²¡æ¥è§¦è¿‡å‘€ï¼Œé‚£ä¸ªæˆ‘æ²¡å­¦è¿‡å‘€ã€‚æ€•ä»€ä¹ˆå‘¢ï¼Œä¸è¯•è¯•æ€ä»¬çŸ¥é“ä¸è¡Œï¼Œä¸æä¸€ææ€ä¹ˆçŸ¥é“æä¸å®šï¼Œæ²¡æ¥è§¦è¿‡å°±æ¥è§¦å˜›ï¼Œæ²¡å­¦è¿‡å°±å­¦èµ·æ¥å˜›ï¼Œæ²¡æœ‰ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚</p>
<p>å·¥ç¨‹å¸ˆä¸å°±æ˜¯è¦é€¢å±±å¼€è·¯é‡æ°´æ­æ¡¥å—ï¼Ÿè¦åšä¿¡ï¼Œåœ¨æˆ‘ä»¬å¯ä»¥æƒ³è±¡çš„èŒƒå›´å†…ï¼Œæ²¡æœ‰æŠ€æœ¯è§£å†³ä¸äº†çš„é—®é¢˜ã€‚</p>
<p>å†²ç ´ç‰¢ç¬¼ï¼Œæ–¹å¾—å§‹ç»ˆã€‚</p>
<p>åŠ å‹’æ¯”æµ·ç›—ä¸­æœ‰ä¸ªæ¡¥æ®µï¼š</p>
<blockquote>
<p>èˆ¹é•¿ï¼šæ‰¬å¸†ï¼èµ·èˆªï¼<br>
æ°´æ‰‹ï¼šä»€ä¹ˆæ–¹å‘ï¼Ÿ<br>
èˆ¹é•¿ï¼šæµ·ç›—éœ€è¦ä»€ä¹ˆæ–¹å‘ï¼Ÿèµ·èˆªï¼</p>
</blockquote>
<p>2020ï¼Œæ‰¬å¸†ï¼Œèµ·èˆªï¼ä¹˜ç€æ¢¦æƒ³ä¹‹é£ï¼Œå‘ç€æ˜Ÿå…‰çš„æ–¹å‘ï¼Œæ‰¾åˆ°æœ€å¥½çš„è‡ªå·±ã€‚</p>
]]></content>
      <categories>
        <category>æ€»ç»“</category>
      </categories>
      <tags>
        <tag>æµ‹è¯•å·¥ä½œ</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯¹QAçš„æ€è€ƒâ€”â€”æˆ‘çš„è¿™äº›å¹´</title>
    <url>/2020/02/05/thinking-about-QA-my-years-for-work-as-a-QA/</url>
    <content><![CDATA[<p>2012å¹´æ¯•ä¸šåæ€€ç€ä¸€é¢—å¿å¿‘çš„å¿ƒå¼€å§‹äº†æµ‹è¯•å·¥ä½œçš„èŒä¸šç”Ÿæ¶¯ï¼Œåˆ°ç°åœ¨ä¹Ÿæœ‰7å¹´å•¦ã€‚ç»å†è¿‡å¥‹æ–—å’Œæ¿€æƒ…ï¼Œä¹Ÿç»å†è¿‡å¾˜å¾Šå’Œè¿·èŒ«ï¼Œå‹¤æ³å´ä¸åº¸ç¢Œã€‚è™½ç„¶å¯¹æµ‹è¯•ä¹Ÿæœ‰æ‹…å¿§ï¼Œä½†æ˜¯å¯¹è¿™ä¸ªè¡Œä¸šå§‹ç»ˆä¿æŒç€ä¸€ç§æ¿€æƒ…ã€‚</p>
<p>æ¥ä¸‹æ¥ç»“åˆè‡ªå·±çš„å·¥ä½œè°ˆä¸€ä¸‹å¯¹æµ‹è¯•çš„ä¸€äº›æ€è€ƒï¼Œä¹Ÿå›é¡¾ä¸‹è‡ªå·±è¿‡å»çš„æµ‹è¯•å·¥ä½œä¸­éµå¾ªçš„ä¸€äº›å·¥ä½œåŸåˆ™ã€‚</p>
<p><img src="/2020/02/05/thinking-about-QA-my-years-for-work-as-a-QA/1.jpg" alt></p>
<span id="more"></span>
<h2 id="åŸåˆ™1ï¼šæ­£ç¡®çš„è®¤è¯†è‡ªå·±">åŸåˆ™1ï¼šæ­£ç¡®çš„è®¤è¯†è‡ªå·±</h2>
<p>å¥½å¤šäººï¼Œè‡ªè§†ç”šé«˜ï¼Œå‚²è§†ä¸€åˆ‡ã€‚ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œç‰›äººå¾ˆå¤šã€‚æˆ‘ä»¬èƒ½åšæˆä¸€ä»¶äº‹æƒ…ï¼Œèƒ½åŠ›æ˜¯ä¸€ä¸ªæ–¹é¢ï¼Œä½†èƒ½åŠ›ç»å¯¹ä¸æ˜¯å…¨éƒ¨å› ç´ ã€‚æ²¡æœ‰ä¸Šçº§çš„æ”¯æŒï¼Œæ²¡æœ‰åŒäº‹çš„åä½œå’Œé…åˆï¼Œæ²¡æœ‰å…¬å¸æä¾›çš„èµ„æºï¼Œæˆ‘ä»¬æ˜¯ä»€ä¹ˆäº‹æƒ…ä¹Ÿåšä¸æˆçš„ã€‚ä¸èƒ½å› ä¸ºè‡ªå·±çš„å·¥ä½œæ—¶é—´é•¿ï¼Œå¯¹ä¸šåŠ¡äº†è§£çš„æ·±ï¼Œå°±å¯¹åˆ«äººæ¨ªåŠ æŒ‡è´£ï¼Œä¹Ÿä¸èƒ½å› ä¸ºè‡ªå·±èŒç§°é«˜å°±ç»™åˆ«äººä»¥å‹åŠ›ã€‚</p>
<p><img src="/2020/02/05/thinking-about-QA-my-years-for-work-as-a-QA/2.png" alt></p>
<h2 id="åŸåˆ™2ï¼šå…ˆæˆå°±åˆ«äºº-å†æˆå°±è‡ªå·±">åŸåˆ™2ï¼šå…ˆæˆå°±åˆ«äººï¼Œå†æˆå°±è‡ªå·±</h2>
<p>æˆ‘ä»¬ç»å¸¸é—®QAçš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>å®é™…ä¸Šæœ‰äº›ä¸œè¥¿æ˜¯å¾ˆéš¾è®²æ¸…æ¥šçš„ã€‚å¥½å¤šQAä¸ºäº†è¯æ˜è‡ªå·±çš„æŠ€æœ¯èƒ½åŠ›ã€æŠ€æœ¯ä»·å€¼ï¼Œåšäº†å¾ˆå¤šçœ‹ä¼¼é«˜è¶…ï¼Œä½†æ˜¯å®é™…ä¸Šå¯¹ä¸šåŠ¡å¿«é€Ÿè¿­ä»£å¹¶æ²¡æœ‰ç”¨çš„äº‹æƒ…ã€‚</p>
<p>æˆ‘æ€»è§‰å¾—ï¼Œè‡ªå·±çš„ä»·å€¼ä¸æ˜¯ç”±è‡ªå·±ä½“ç°çš„ï¼Œè€Œæ˜¯ç”±åˆ«äººæ¥ä½“ç°çš„ã€‚åªæœ‰å…ˆæˆå°±åˆ«äººï¼Œæ‰èƒ½æœ€ç»ˆæˆå°±è‡ªå·±ã€‚è¿™å°±æ˜¯æˆ‘å·¥ä½œä»¥æ¥ä¸€ç›´éµå¾ªçš„ä¸€ä¸ªå·¥ä½œåŸåˆ™ã€‚ä¸äº‰ï¼Œä¸æŠ¢ï¼Œè®¤çœŸåšäº‹ï¼Œè®¤çœŸå¸®åˆ«äººåšäº‹ï¼Œè®¤çœŸçš„å¸®ä¸šåŠ¡åšäº‹æƒ…ï¼Œå¸®åŠ©RDåˆ†æçº¿ä¸Šé—®é¢˜ï¼Œè§£å†³BUGã€‚åˆ°äº†åæ¥ï¼Œä¹Ÿé¢‡æœ‰ç‚¹ï¼šæ¡ƒæä¸è¨€ï¼Œä¸‹è‡ªæˆè¹Šçš„å‘³é“ã€‚</p>
<p>å¥½å¤šäººä¹Ÿä¼šè¯´ï¼Œåœ¨è¿™ä¸ªæ—¶ä»£ï¼Œé…’é¦™ä¹Ÿæ€•å··å­æ·±ã€‚å¦‚æœä¸ä¸»åŠ¨å®£ä¼ è‡ªå·±çš„ä»·å€¼ï¼Œå®£ä¼ è‡ªå·±çš„å½±å“åŠ›ï¼Œåˆ«äººæ˜¯ä¸ä¼šçŸ¥é“çš„ã€‚ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œå½±å“åŠ›å’Œä»·å€¼æ˜¯ç”±åˆ«äººæ¥è¯„ä¼°çš„ï¼Œå†å²äº¤ç”±åäººè¯„å°±æ˜¯è¿™ä¸ªé“ç†ã€‚å¹¶ä¸”ï¼Œå½±å“åŠ›æ˜¯å¤„äºæŸä¸ªåœˆå±‚çš„ï¼Œå¹¶é€šè¿‡åœˆå±‚è€Œæ‰©æ•£ã€‚æˆ‘ä»¬é¦–å…ˆåœ¨å›¢é˜Ÿçš„åœˆå±‚å†…åšåˆ°å½±å“åŠ›ï¼Œæ‰æœ‰å¯èƒ½é€šè¿‡åœˆå±‚çš„æ‰©æ•£è€Œæ‰©æ•£è‡ªå·±çš„ä»·å€¼ã€‚</p>
<p><img src="/2020/02/05/thinking-about-QA-my-years-for-work-as-a-QA/3.jpg" alt></p>
<h2 id="åŸåˆ™3ï¼šæ–¹ä¾¿åˆ«äºº-æ–¹ä¾¿è‡ªå·±">åŸåˆ™3ï¼šæ–¹ä¾¿åˆ«äººï¼Œæ–¹ä¾¿è‡ªå·±</h2>
<p>åšæµ‹è¯•çš„åŒå­¦ï¼Œæ¯å¤©ä¼šå†™å¾ˆå¤šæµ‹è¯•caseï¼Œæ¯å¤©ä¹Ÿä¼šå‘å¾ˆå¤šæµ‹è¯•æŠ¥å‘Šï¼Œä½†æ˜¯å¦‚æœæ‰“å¼€è¿™äº›é‚®ä»¶ï¼Œç»å¸¸å‘ç°è¿™äº›caseå¾ˆéš¾è®©äººç†è§£ï¼Œè¿™äº›æµ‹è¯•æŠ¥å‘Šè™½ç„¶ç¯‡å¹…å¾ˆå¤§ï¼Œä½†æ˜¯å¦‚æœè¦ä»ä¸­æ‰¾åˆ°æ¥ä¸‹æ¥RDè¦åšä»€ä¹ˆï¼Œè¿˜æ˜¯è¦èŠ±è´¹ä¸€ç‚¹æ—¶é—´çš„ã€‚</p>
<p>åœ¨æµ‹è¯•å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œæ— è®ºæ˜¯æµ‹è¯•æŠ¥å‘Šï¼Œè¿˜æ˜¯é£é™©é€šæŠ¥ï¼Œé¦–å…ˆè¦äº†è§£åˆ°è¿™äº›å†…å®¹çš„æ¥æ”¶è€…åˆ°åº•æ˜¯è°ï¼Œç„¶åéœ€è¦æ€è€ƒï¼Œè¦ä»¥ä»€ä¹ˆæ ·çš„æè¿°å’Œç»„ç»‡æ‰èƒ½æ–¹ä¾¿å¯¹æ–¹å¿«é€Ÿäº†è§£åˆ°å†…å®¹çš„å«ä¹‰ï¼Œä¹Ÿå°±æ˜¯è¦åšåˆ°ï¼šåˆ°ä»€ä¹ˆå±±å¤´ï¼Œå”±ä»€ä¹ˆæ­Œã€‚</p>
<p>æˆ‘åˆšå…¥èŒçš„æ—¶å€™ï¼Œå› ä¸ºä¹‹å‰æ²¡æœ‰åšè¿‡æµ‹è¯•ï¼Œä¹Ÿä¸çŸ¥é“æµ‹è¯•æŠ¥å‘Šè¦ä»¥ä»€ä¹ˆæ ·çš„æ ¼å¼æ¥å‘ï¼Œæ‰€ä»¥å¾ˆå®³æ€•å‘æµ‹è¯•æŠ¥å‘Šã€‚è™½ç„¶å­¦ä¹ äº†å…¶ä»–å‰è¾ˆçš„æµ‹è¯•æŠ¥å‘Šå’Œå‰è¾ˆä»¬çš„æµ‹è¯•æŠ¥å‘ŠèŒƒå¼ï¼Œä½†æ˜¯æ€»æ„Ÿè§‰è¿˜æ˜¯å®³æ€•ã€‚å› ä¸ºï¼Œä»RDçš„è§’åº¦æ¥çœ‹ï¼Œé˜…è¯»é‚£äº›æµ‹è¯•æŠ¥å‘Šçš„æˆæœ¬è¿˜æ˜¯å¾ˆå¤§çš„ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ç«™åœ¨RDçš„è§’åº¦ä¸Šæƒ³ï¼Œæ€ä¹ˆç»„ç»‡æµ‹è¯•æŠ¥å‘Šï¼Œæ‰èƒ½è®©RDä¸€çœ¼å°±çŸ¥é“è‡ªå·±æ¥ä¸‹æ¥è¦åšä»€ä¹ˆå‘¢ï¼Ÿç„¶åæˆ‘é‡æ–°ç»„ç»‡äº†ä¹‹å‰æµ‹æµ‹è¯•æŠ¥å‘Šï¼Œåœ¨æŠ¥å‘Šçš„æœ€å¼€å§‹ç”¨1å¥è¯æ¦‚æ‹¬é¡¹ç›®çš„æµ‹è¯•ç»“è®ºï¼šè¯¥é¡¹ç›®æµ‹è¯•æ˜¯å¦é€šè¿‡ï¼ŒåŸå› æ˜¯ä»€ä¹ˆï¼Ÿå…·ä½“çš„BUGé‡æ˜¯å¤šå°‘ï¼Ÿç„¶åæ¥ä¸‹æ¥æ˜¯è¯¦ç»†çš„æµ‹è¯•æ¸…å•ï¼Œæ¸…å•ä¸­æ˜ç¡®è¡¨æ˜æ¯ä¸€ä¸ªcaseçš„æµ‹è¯•ç‚¹ï¼Œå‰ç½®ï¼Œé¢„æœŸç»“æœï¼Œå®é™…æµ‹è¯•ç»“æœï¼Œæ˜¯å¦é€šè¿‡ç­‰ä¿¡æ¯ã€‚å¯¹äºæµ‹è¯•é€šè¿‡çš„caseï¼Œç”¨ç»¿è‰²æ¥æ ‡æ³¨ï¼›å¯¹äºæµ‹è¯•å¤±è´¥çš„caseï¼Œç”¨çº¢è‰²æ ‡æ³¨ï¼›å¯¹äºæœ‰ç–‘é—®çš„caseï¼Œæ¯”å¦‚å»ºè®®ç­‰ï¼Œç”¨é»„è‰²æ ‡æ³¨ã€‚RDæ”¶åˆ°æµ‹è¯•æŠ¥å‘Šä¹‹åï¼Œå…ˆçœ‹ç»“è®ºï¼Œç„¶åçœ‹éç»¿è‰²çš„æµ‹è¯•caseä¿®å¤BUGã€‚</p>
<h2 id="åŸåˆ™4ï¼šæ¶ˆé™¤é—¨æ§›-è€Œä¸æ˜¯æå‡é—¨æ§›">åŸåˆ™4ï¼šæ¶ˆé™¤é—¨æ§›ï¼Œè€Œä¸æ˜¯æå‡é—¨æ§›</h2>
<p>å¤§ç¦¹æ²»æ°´ä¹‹æ‰€ä»¥æˆåŠŸï¼Œæœ€é‡è¦çš„æ€æƒ³å°±æ˜¯ï¼šæ”¹â€œå µâ€ä¸ºâ€œç–â€ã€‚</p>
<p>ä½†æ˜¯çœŸæ­£çš„æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šå‘ç°å¦‚ä¸‹çš„ç°è±¡ï¼šé¢†å¯¼è´¨ç–‘QAçš„æµ‹è¯•æ—¶é—´å¤ªé•¿ï¼ŒQAè´¨ç–‘RDçš„ææµ‹è´¨é‡å¤ªå·®ï¼Œç„¶åQAå¢åŠ äº†å‡†å…¥æ‰“å›çš„æµç¨‹ï¼Œå¯¹äºRDææµ‹çš„ã€æ²¡æœ‰é€šè¿‡å‡†å…¥çš„é¡¹ç›®ä¸äºˆæµ‹è¯•ã€‚</p>
<p>å®é™…ä¸Šï¼Œè¿™ç§ç°è±¡å°±æ˜¯QAåœ¨é¡¹ç›®çš„æµ‹è¯•ç¯èŠ‚è®¾ç½®äº†ä¸€ä¸ªé—¨æ§›ï¼Œè€Œå¦‚æœè¿™ç§é—¨æ§›è®¾ç½®çš„è¶Šæ¥è¶Šå¤šï¼Œé‚£ä¹ˆå¯¹äºä¸šåŠ¡è€Œè¨€ä¹Ÿä¼šå‘ç”Ÿâ€œæ´ªæ¶ç¾å®³â€ã€‚å•ä»æµ‹è¯•å›¢é˜Ÿçš„è§’åº¦çœ‹ï¼Œç¡®å®å¢åŠ è¿™ä¸ªé—¨æ§›ï¼Œæµ‹è¯•æ•ˆç‡æå‡äº†ï¼Œæµ‹è¯•æ—¶é—´é™ä½äº†ï¼Œä½†æ˜¯å¦‚æœä»æ•´ä¸ªä¸šåŠ¡çš„è¿­ä»£æ¥çœ‹ï¼Œæ•ˆç‡å¹¶æ²¡æœ‰æå‡ã€‚</p>
<p>æˆ‘ä»¬æäº†é—¨æ§›ï¼Œå‘äº†å‡†å…¥caseï¼Œå¢åŠ äº†æµç¨‹ï¼Œè¿™ä¸€ç‚¹ä¹Ÿä¸èƒ½è¯´ä¸å¥½ã€‚ä½†æ˜¯æˆ‘ä»¬æœ‰æ²¡æœ‰æƒ³è¿‡ï¼šè¿™äº›å‡†å…¥caseåˆ«äººçœ‹çš„æ‡‚å—ï¼Ÿæˆ‘ä»¬æ€ä¹ˆè®¾è®¡caseèƒ½å¤Ÿä½¿å¾—RDè‡ªæµ‹çš„æ—¶å€™æ›´åŠ æ–¹ä¾¿å‘¢ï¼Ÿå³ä¾¿çœ‹æ‡‚äº†ï¼Œæˆ‘ä»¬æ€ä¹ˆä¿è¯RDç¡®å®æ‰§è¡Œäº†å‘¢ï¼Ÿæˆ‘ä»¬æ€ä¹ˆä¿è¯å¢åŠ çš„è¿™ä¸ªæµç¨‹æ¯æ¬¡éƒ½è´¯å½»è½å®äº†å‘¢ï¼Ÿ</p>
<p>QAä¸åº”è¯¥æ˜¯ä¸€ä¸ªé—¨æ§›è®¾ç½®è€…ï¼Œè€Œåº”è¯¥æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ­¦å™¨ã€‚ä¸èƒ½ç”¨çœ‹ä¼¼åˆç†çš„å„ç§æ ‡å‡†å’Œè¦æ±‚å¡ä½äº‹æƒ…ï¼Œè€Œåº”è¯¥æˆä¸ºå¸®åŠ©å›¢é˜Ÿè§£å†³é—®é¢˜çš„ç§˜å¯†æ­¦å™¨ã€‚</p>
<p>QAä¸èƒ½åªæŠ¥é—®é¢˜ï¼Œåªè¯´ç°è±¡ï¼Œåªè¯´RDä¸é è°±ï¼Œä¸Šçº¿ä¸æ£€æŸ¥ã€‚QAéœ€è¦æ€è€ƒï¼š</p>
<ul>
<li>æˆ‘ä»¬èƒ½ä¸ºå¿«é€Ÿè¿­ä»£åšäº›ä»€ä¹ˆï¼Ÿ</li>
<li>æˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆå¯ä»¥å¸®åŠ©RDå¿«é€Ÿå‘ç°è‡ªå·±çš„ä»£ç é—®é¢˜ï¼Ÿ</li>
<li>æˆ‘ä»¬èƒ½åšä»€ä¹ˆå¯ä»¥å¸®åŠ©RDå¿«é€Ÿå‘ç°ä¸Šçº¿è¿‡ç¨‹å¼‚å¸¸äº†ï¼Ÿ</li>
</ul>
<h2 id="åŸåˆ™5ï¼šä¸æ–­å­¦ä¹ -ä¸åšä¼ªå­¦ä¹ è€…">åŸåˆ™5ï¼šä¸æ–­å­¦ä¹ ï¼Œä¸åšä¼ªå­¦ä¹ è€…</h2>
<p>ç°åœ¨ï¼ŒæŠ€æœ¯æ›´æ–°æ¢ä»£çš„é¢‘ç‡å¾ˆå¿«ï¼Œæ‰€ä»¥ä¸€å®šè¦ä¸æ–­çš„å­¦ä¹ ï¼ŒæŒç»­çš„å­¦ä¹ ã€‚è¿˜è®°å¾—åˆšå…¥èŒçš„æ—¶å€™ï¼Œé‚£æ—¶å€™å°±ä¼šc/c++ï¼Œjavaã€‚ç°åœ¨çœ‹çœ‹è‡ªå·±çš„githubå’Œå†…ç½‘çš„æäº¤è®°å½•ï¼Œå‘ç°è¯­è¨€å±‚é¢åŸºæœ¬ä¸Šæ¶µç›–äº†ï¼šc/c++ï¼Œjavaï¼Œphpï¼Œpythonï¼Œgoï¼Œjavascriptï¼Œshellï¼Œobject-cï¼Œswiftï¼Œluaã€‚é¡¹ç›®ç±»å‹è¦†ç›–äº†æœåŠ¡ç«¯ï¼Œç­–ç•¥ç«¯ï¼ŒiOSï¼ŒAndroidï¼Œè‡ªåŠ¨åŒ–ç­‰ä¸åŒçš„æ–¹å‘ã€‚ä»åŸæ¥åªä¼šç”¨IISçš„å°ç™½ï¼Œåˆ°ä»Šå¤©äº†è§£Apacheï¼ŒLighttpdï¼ŒNginxç­‰å„ç§webæœåŠ¡å™¨ã€‚ä»åŸæ¥çš„æœåŠ¡ç«¯ï¼Œåˆ°æ…¢æ…¢äº†è§£å‰ç«¯ï¼Œäº†è§£ç­–ç•¥ç«¯ï¼Œäº†è§£å®¢æˆ·ç«¯ã€‚</p>
<p>å‚åŠ è¿‡å¥½å¤šä¼šï¼Œå’Œå¥½å¤šäººæ²Ÿé€šè¿‡ï¼Œå¤§å®¶éƒ½å¸Œæœ›ç»„ç»‡æä¾›å­¦ä¹ çš„æœºä¼šï¼Œæä¾›åˆ†äº«çš„æœºä¼šï¼Œå¸Œæœ›ç»„ç»‡èƒ½æä¾›è‡ªå·±æŠ€æœ¯æˆé•¿çš„æœºä¼šã€‚ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œæˆé•¿æ˜¯è‡ªå·±çš„äº‹ï¼Œå­¦ä¹ æ˜¯ä¸ªäººçš„äº‹ï¼Œä¸ºä»€ä¹ˆè¦æ±‚ç»„ç»‡ç»™æä¾›è¿™äº›æœºä¼šå‘¢ï¼Ÿæˆ‘ç»„ç»‡è¿‡å¾ˆé•¿æ—¶é—´çš„åˆ†äº«ï¼Œæˆ‘ä¹Ÿæœ€åå¯¹ç»„ç»‡å¤§è§„æ¨¡çš„æŠ€æœ¯å­¦ä¹ å’Œåˆ†äº«ï¼Œå› ä¸ºè®©å¤ªå¤šçš„ä¼ªå­¦ä¹ è€…è¿›å…¥ä¹‹åï¼Œæ•ˆæœå¹¶ä¸ç†æƒ³ã€‚ç›¸åï¼Œè§„æ¨¡è¾ƒå°çš„æ²™é¾™å’Œè®¨è®ºå¯¹ä¸ªäººçš„æŠ€æœ¯æˆé•¿æ•ˆæœæ›´ä¸ºæ˜æ˜¾ã€‚ä¼ªå­¦ä¹ è€…åªæ˜¯æƒ³å­¦ä¹ è€Œå·²ï¼Œåªæ˜¯æƒ³è®©ç»„ç»‡æä¾›å­¦ä¹ æœºä¼šè€Œå·²ï¼Œä»…æ­¤è€Œå·²ã€‚</p>
<p>å­¦ä¹ æ˜¯è‡ªå·±çš„äº‹æƒ…ï¼Œç™½å¤©æ±‚ç”Ÿå­˜ï¼Œæ™šä¸Šæ±‚å‘å±•ã€‚å‡Œæ™¨2ç‚¹çš„æ—¶å€™ï¼Œä¹Ÿæ›¾åœ¨ç¯ä¸‹å•ƒè¿‡Nginxçš„æºç ï¼Œåˆ†æä¸€ä¸ªä¸ªçš„çº¿ä¸Šé—®é¢˜ï¼Œæ²¡æœ‰è¿™äº›ä¸ªå‡Œæ™¨2ç‚¹å°±ä¸ä¼šæœ‰ã€ŠNginxæ²‰æ€å½•ã€‹ï¼Œã€ŠNginxæ´—å†¤å½•ã€‹ç­‰ä¸€ç³»åˆ—çš„æ€»ç»“ã€‚</p>
<p><img src="/2020/02/05/thinking-about-QA-my-years-for-work-as-a-QA/4.jpg" alt></p>
<h2 id="åŸåˆ™6ï¼šåšç§¯æçš„æŠ±æ€¨è€…-ä¸åšæ¶ˆæçš„æŠ±æ€¨è€…">åŸåˆ™6ï¼šåšç§¯æçš„æŠ±æ€¨è€…ï¼Œä¸åšæ¶ˆæçš„æŠ±æ€¨è€…</h2>
<p>æ²¡æœ‰â€œæŠ±æ€¨â€å°±ä¸ä¼šæœ‰æŠ€æœ¯çš„è¿›æ­¥ï¼Œä½†æ˜¯åè¿‡æ¥è¯´æ²¡æœ‰â€œæŠ±æ€¨â€å°±ä¸ä¼šå­˜åœ¨é‚£ä¹ˆå¤šçš„å¤±è´¥ï¼Œä¸€æ— æ˜¯å¤„ï¼Œåº¸åº¸ç¢Œç¢Œã€‚å…³é”®æ˜¯è¦çœ‹å¾…æˆ‘ä»¬å¯¹å¾…â€œæŠ±æ€¨â€çš„æ€åº¦ã€‚å½“â€œæŠ±æ€¨â€è¿˜ä»…ä»…æ˜¯åœç•™åœ¨å˜´ä¸Šï¼Œåœç•™åœ¨æ€æƒ³ä¸Šï¼Œè¢«â€œæŠ±æ€¨â€æ‰€æ§åˆ¶æ—¶ï¼ŒåŸºæœ¬ä¸Šä¹Ÿå°±ç¦»ç¢Œç¢Œæ— ä¸ºä¸è¿œäº†ã€‚å½“æˆ‘ä»¬å¼€å§‹å’Œâ€œæŠ±æ€¨â€å¯¹æŠ—æ—¶ï¼Œåˆ©ç”¨ä¸€åˆ‡æŠ€æœ¯æ‰‹æ®µå’ŒåŠªåŠ›æ¶ˆç­â€œæŠ±æ€¨â€æ—¶ï¼ŒæŠ€æœ¯å°±å¼€å§‹è¿›æ­¥äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä¸€èˆ¬ä¸åå¯¹æŠ±æ€¨ï¼Œå¹¶ä¸€ç›´é¼“åŠ±å¤§å®¶æŠ±æ€¨ï¼Œä½†æ˜¯æ¥ä¸‹æ¥æˆ‘ä¼šä»”ç»†åˆ†ææŠ±æ€¨çš„åŸå› æ˜¯ä»€ä¹ˆï¼ŸæŠ€æœ¯ä¸Šéœ€è¦ä»€ä¹ˆæ¢ç´¢æ‰èƒ½æ¶ˆç­è¿™äº›æŠ±æ€¨ï¼Ÿ</p>
<p>æ¯ä¸€ä¸ªâ€œæŠ±æ€¨â€éƒ½æ˜¯ä¸€æ¬¡æœºä¼šï¼Œéƒ½æ˜¯ä¸€ä¸ªæœºé‡ï¼Œéƒ½æ˜¯ä¸€æ¬¡æˆé•¿ã€‚é€¢å±±å¼€è·¯ï¼Œé‡æ°´æ­æ¡¥ï¼Œå‹‡å¾€ç›´å‰ã€‚</p>
<p><img src="/2020/02/05/thinking-about-QA-my-years-for-work-as-a-QA/5.jpg" alt></p>
<h2 id="åŸåˆ™7ï¼šæ­£ç¡®è®¤è¯†qaå’Œrdçš„å¼‚åŒ">åŸåˆ™7ï¼šæ­£ç¡®è®¤è¯†QAå’ŒRDçš„å¼‚åŒ</h2>
<p>å¤©åˆ†æ—¥å¤œé»‘ç™½ï¼Œå­£èŠ‚æœ‰æ˜¥å¤ç§‹å†¬ï¼Œè™½ç„¶å…¨æ ˆæ¨¡å¼æœ‰ä»–çš„ä¼˜ç‚¹ï¼Œä½†æ˜¯å››å­£ä¹Ÿæœ‰å››å­£çš„ç¾ã€‚æ–‡èƒ½æç¬”å®‰å¤©ä¸‹ï¼Œæ­¦èƒ½ä¸Šé©¬å®šä¹¾å¤ã€‚å…³é”®æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦å¯¹QAå’ŒRDæœ‰æ­£ç¡®çš„è®¤è¯†ã€‚</p>
<p>æˆ‘ä»¬ä¸èƒ½æŒ‰ç…§ä¸€ä¸ªåŸåˆ™æ¥è¯„å®šäº‹æƒ…ã€‚æ¯”å¦‚ï¼šè€é©´æ‹‰ç£¨ï¼Œå§‹ç»ˆèµ°ä¸å‡ºé‚£ä¸ªåœˆåœˆã€‚å’Œæ—¥è¡Œåƒé‡Œçš„è‰¯é©¬ç›¸æ¯”ï¼Œå½“ç„¶è€é©´è¦ç¾æ„§äº†ã€‚ä½†æ˜¯å¦‚æœæ¢ä¸ªè§’åº¦ï¼Œæ‹‰ç£¨ä¸€å¤©ï¼Œäº§é¢åƒæ–¤ã€‚è‰¯é©¬å†èƒ½è·‘ï¼Œä¹Ÿè·‘ä¸å‡ºåƒæ–¤é¢ã€‚</p>
<p>QAå’ŒRDè™½ç„¶éƒ½æ˜¯ç ”å‘å²—ï¼Œéƒ½æ˜¯æŠ€æœ¯ä½“ç³»ï¼Œé‚£ä»–ä»¬çš„å·®å¼‚åœ¨å“ªå‘¢ï¼Ÿ</p>
<p>æˆ‘è§‰å¾—æœ‰ä»¥ä¸‹å‡ ç‚¹å§ï¼š</p>
<ul>
<li>ä»å·¥ä½œå…³ç³»ä¸Šè®²ï¼ŒQAæ˜¯RDçš„ä¸‹æ¸¸ï¼ŒRDæ˜¯QAçš„å®¢æˆ·ã€‚</li>
<li>ä»å·¥ä½œé‡ç‚¹ä¸Šè®²ï¼ŒQAæ³¨é‡åˆ†æï¼Œè€ŒRDæ³¨é‡å®è·µã€‚RDè¦åšçš„æ˜¯è§£å†³é—®é¢˜ï¼Œé‡‡ç”¨ä»»ä½•å¯èƒ½çš„æ–¹æ³•ï¼Œå¿«é€Ÿå®ç°éœ€æ±‚ï¼Œå¿«é€Ÿä¸Šçº¿ã€‚è€ŒQAæ²¡æœ‰å¤ªå¤§çš„ä¸šåŠ¡å‹åŠ›ï¼Œå¯ä»¥æœ‰æ›´å¤šçš„æ—¶é—´æ¥æ€è€ƒæ¯ä¸€ç§æŠ€æœ¯çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿ï¼Œæœ‰æ›´å¤šçš„æ—¶é—´æ¥ä»”ç»†åˆ†æå’Œè¿½æŸ¥æ¯ä¸€ä¸ªbugçš„æ·±å±‚åŸå› ï¼Œå¸®åŠ©RDåœ¨å¿«é€Ÿè§£å†³é—®é¢˜åå¯ä»¥å½»åº•è§£å†³é—®é¢˜ï¼Œé”¦ä¸Šæ·»èŠ±ã€‚</li>
<li>ä»æ¶µç›–ä¸šåŠ¡ä¸Šè®²ï¼ŒQAå…³æ³¨çš„ä¸šåŠ¡å¹¿åº¦è¾ƒé«˜ï¼Œè€ŒRDå…³æ³¨ä¸šåŠ¡çš„æ·±åº¦æ›´é«˜ã€‚</li>
</ul>
<p>å®é™…ä¸Šï¼ŒæŠ€æœ¯æ˜¯ä¸€ä¸ªå¾ˆå¹¿æ³›çš„æ¦‚å¿µï¼Œä¸èƒ½è®¤ä¸ºåªæœ‰å†™ä»£ç ï¼Œè®¾è®¡æ¶æ„æ‰æ˜¯æŠ€æœ¯ï¼Œæˆ‘ä»¬çš„æ€ç»´æœ¬èº«å°±æ˜¯ä¸€ç§æŠ€æœ¯ã€‚å…³é”®æ˜¯ï¼Œæˆ‘ä»¬çš„æŠ€æœ¯è¦ä¸ºä¸šåŠ¡çš„å‘å±•è€Œå­˜åœ¨ï¼Œè€Œä¸æ˜¯å­¤ç«‹çš„å­˜åœ¨ã€‚</p>
<p><img src="/2020/02/05/thinking-about-QA-my-years-for-work-as-a-QA/6.jpg" alt></p>
]]></content>
      <categories>
        <category>æ€»ç»“</category>
      </categories>
      <tags>
        <tag>æµ‹è¯•å·¥ä½œ</tag>
      </tags>
  </entry>
</search>
